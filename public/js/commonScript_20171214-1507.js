var jindo=window.jindo||{};jindo._p_={};jindo._p_.jindoName="jindo";if(window[jindo._p_.jindoName]){var __old_j=window[jindo._p_.jindoName];for(var i in __old_j){jindo[i]=__old_j[i]}}function _settingPolyfill(target,objectName,methodName,polyfillMethod,force){if(force||!target[objectName].prototype[methodName]){target[objectName].prototype[methodName]=polyfillMethod}}function polyfillArray(global){function checkCallback(callback){if(typeof callback!=="function"){throw new TypeError("callback is not a function.")}}_settingPolyfill(global,"Array","forEach",function(callback,ctx){checkCallback(callback);var thisArg=arguments.length>=2?ctx:void 0;for(var i=0,l=this.length;i<l;i++){callback.call(thisArg,this[i],i,this)}});_settingPolyfill(global,"Array","every",function(callback,ctx){checkCallback(callback);var thisArg=arguments.length>=2?ctx:void 0;for(var i=0,l=this.length;i<l;i++){if(!callback.call(thisArg,this[i],i,this)){return false}}return true})}if(!window.__isPolyfillTestMode){polyfillArray(window)}if(!Function.prototype.bind){Function.prototype.bind=function(target){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var arg=Array.prototype.slice.call(arguments,1),bind=this,nop=function(){},wrap=function(){return bind.apply(nop.prototype&&this instanceof nop&&target?this:target,arg.concat(Array.prototype.slice.call(arguments)))};nop.prototype=this.prototype;wrap.prototype=new nop();return wrap}}function polyfillTimer(global){var agent=global.navigator.userAgent,isIOS=/i(Pad|Phone|Pod)/.test(agent),iOSVersion;if(isIOS){var matchVersion=agent.match(/OS\s(\d)/);if(matchVersion){iOSVersion=parseInt(matchVersion[1],10)}}var raf=global.requestAnimationFrame||global.webkitRequestAnimationFrame||global.mozRequestAnimationFrame||global.msRequestAnimationFrame,caf=global.cancelAnimationFrame||global.webkitCancelAnimationFrame||global.mozCancelAnimationFrame||global.msCancelAnimationFrame;if(raf&&!caf){var keyInfo={},oldraf=raf;raf=function(callback){function wrapCallback(){if(keyInfo[key]){callback()}}var key=oldraf(wrapCallback);keyInfo[key]=true;return key};caf=function(key){delete keyInfo[key]}}else{if(!(raf&&caf)){raf=function(callback){return global.setTimeout(callback,16)};caf=global.clearTimeout}}global.requestAnimationFrame=raf;global.cancelAnimationFrame=caf;if(iOSVersion>=6){global.requestAnimationFrame(function(){})}if(iOSVersion==6){var timerInfo={},SET_TIMEOUT="setTimeout",CLEAR_TIMEOUT="clearTimeout",SET_INTERVAL="setInterval",CLEAR_INTERVAL="clearInterval",orignal={setTimeout:global.setTimeout.bind(global),clearTimeout:global.clearTimeout.bind(global),setInterval:global.setInterval.bind(global),clearInterval:global.clearInterval.bind(global)};[[SET_TIMEOUT,CLEAR_TIMEOUT],[SET_INTERVAL,CLEAR_INTERVAL]].forEach(function(v){global[v[0]]=(function(timerName,clearTimerName){return function(callback,time){var timer={key:"",isCall:false,timerType:timerName,clearType:clearTimerName,realCallback:callback,callback:function(){var callback=this.realCallback;callback();if(this.timerType===SET_TIMEOUT){this.isCall=true;delete timerInfo[this.key]}},delay:time,createdTime:global.Date.now()};timer.key=orignal[timerName](timer.callback.bind(timer),time);timerInfo[timer.key]=timer;return timer.key}})(v[0],v[1]);global[v[1]]=(function(clearTimerName){return function(key){if(key&&timerInfo[key]){orignal[clearTimerName](timerInfo[key].key);delete timerInfo[key]}}})(v[1])});function restoreTimer(){var currentTime=global.Date.now();var newTimerInfo={},gap;for(var i in timerInfo){var timer=timerInfo[i];orignal[timer.clearType](timerInfo[i].key);delete timerInfo[i];if(timer.timerType==SET_TIMEOUT){gap=currentTime-timer.createdTime;timer.delay=(gap>=timer.delay)?0:timer.delay-gap}if(!timer.isCall){timer.key=orignal[timer.timerType](timer.callback.bind(timer),timer.delay);newTimerInfo[i]=timer}}timerInfo=newTimerInfo;newTimerInfo=null}global.addEventListener("scroll",function(e){restoreTimer()})}return global}if(!window.__isPolyfillTestMode){polyfillTimer(window)}jindo._p_._j_ag=navigator.userAgent;jindo._p_._JINDO_IS_IE=/(MSIE|Trident)/.test(jindo._p_._j_ag);jindo._p_._JINDO_IS_FF=jindo._p_._j_ag.indexOf("Firefox")>-1;jindo._p_._JINDO_IS_OP=jindo._p_._j_ag.indexOf("Opera")>-1;jindo._p_._JINDO_IS_SP=jindo._p_._j_ag.indexOf("Safari")>-1;jindo._p_._JINDO_IS_SF=jindo._p_._j_ag.indexOf("Apple")>-1;jindo._p_._JINDO_IS_CH=jindo._p_._j_ag.indexOf("Chrome")>-1;jindo._p_._JINDO_IS_WK=jindo._p_._j_ag.indexOf("WebKit")>-1;jindo._p_._JINDO_IS_MO=/(iPad|Mobile|Android|Nokia|webOS|BlackBerry|Opera Mini)/.test(jindo._p_._j_ag);jindo._p_.trim=function(str){var sBlank="\\s|\\t|"+String.fromCharCode(12288),re=new RegExp(["^(?:",")+|(?:",")+$"].join(sBlank),"g");return str.replace(re,"")};jindo.$Jindo=function(){var cl=arguments.callee;var cc=cl._cached;if(cc){return cc}if(!(this instanceof cl)){return new cl()}if(!cc){cl._cached=this}this.version="2.10.0"};jindo.$Jindo.VERSION="2.10.0";jindo._p_.addExtension=function(sClass,sMethod,fpFunction){if(jindo[sClass][sMethod]){jindo.$Jindo._warn(sClass+"."+sMethod+" was overwrite.")}else{if(/^x/.test(sMethod)){jindo[sClass][sMethod]=fpFunction}else{jindo.$Jindo._warn("The Extension Method("+sClass+"."+sMethod+") must be used with x prefix.")}}};jindo.$Jindo.compatible=function(){return false};jindo.$Jindo.mixin=function(oDestination,oSource){g_checkVarType(arguments,{obj:["oDestination:Hash+","oSource:Hash+"]},"<static> $Jindo#mixin");var oReturn={};for(var i in oDestination){oReturn[i]=oDestination[i]}for(i in oSource){if(oSource.hasOwnProperty(i)&&!jindo.$Jindo.isHash(oSource[i])){oReturn[i]=oSource[i]}}return oReturn};jindo._p_._objToString=Object.prototype.toString;jindo.$Error=function(sMessage,sMethod){this.message="\tmethod : "+sMethod+"\n\tmessage : "+sMessage;this.type="Jindo Custom Error";this.toString=function(){return this.message+"\n\t"+this.type}};jindo.$Except={CANNOT_USE_OPTION:"해당 옵션은 사용할 수 없습니다.",CANNOT_USE_HEADER:"type이 jsonp 또는 데스크탑 환경에서 CORS 호출시 XDomainRequest(IE8,9) 객체가 사용되는 경우 header메서드는 사용할 수 없습니다.",PARSE_ERROR:"파싱중 에러가 발생했습니다.",NOT_FOUND_ARGUMENT:"파라미터가 없습니다.",NOT_STANDARD_QUERY:"css셀렉터가 정상적이지 않습니다.",INVALID_DATE:"날짜 포멧이 아닙니다.",REQUIRE_AJAX:"가 없습니다.",NOT_FOUND_ELEMENT:"엘리먼트가 없습니다.",HAS_FUNCTION_FOR_GROUP:"그룹으로 지우지 않는 경우 detach할 함수가 있어야 합니다.",NONE_ELEMENT:"에 해당하는 엘리먼트가 없습니다.",NOT_SUPPORT_SELECTOR:"는 지원하지 않는 selector입니다.",NOT_SUPPORT_CORS:"현재 브라우저는 CORS를 지원하지 않습니다.",NOT_SUPPORT_METHOD:"desktop에서 지원하지 않는 메서드 입니다.",JSON_MUST_HAVE_ARRAY_HASH:"get메서드는 json타입이 hash나 array타입만 가능합니다.",MUST_APPEND_DOM:"document에 붙지 않은 엘리먼트를 기준 엘리먼트로 사용할 수 없습니다.",NOT_USE_CSS:"는 css를 사용 할수 없습니다.",NOT_WORK_DOMREADY:"domready이벤트는 iframe안에서 사용할 수 없습니다.",CANNOT_SET_OBJ_PROPERTY:"속성은 오브젝트입니다.\n클래스 속성이 오브젝트이면 모든 인스턴스가 공유하기 때문에 위험합니다.",NOT_FOUND_HANDLEBARS:"{{not_found_handlebars}}",INVALID_MEDIA_QUERY:"{{invalid_media_query}}"};jindo._p_._toArray=function(aArray){return Array.prototype.slice.apply(aArray)};try{Array.prototype.slice.apply(document.documentElement.childNodes)}catch(e){jindo._p_._toArray=function(aArray){var returnArray=[];var leng=aArray.length;for(var i=0;i<leng;i++){returnArray.push(aArray[i])}return returnArray}}jindo.$Jindo.isNumeric=function(nNum){return !isNaN(parseFloat(nNum))&&!jindo.$Jindo.isArray(nNum)&&isFinite(nNum)};(function(){var oType={Element:1,Document:9};for(var i in oType){jindo.$Jindo["is"+i]=(function(sType,nNodeNumber){return function(oObj){if(new RegExp(sType).test(jindo._p_._objToString.call(oObj))){return true}else{if(jindo._p_._objToString.call(oObj)=="[object Object]"&&oObj!==null&&oObj!==undefined&&oObj.nodeType==nNodeNumber){return true}}return false}})(i,oType[i])}var _$type=["Function","Array","String","Boolean","Date","RegExp"];for(var i=0,l=_$type.length;i<l;i++){jindo.$Jindo["is"+_$type[i]]=(function(type){return function(oObj){return jindo._p_._objToString.call(oObj)=="[object "+type+"]"}})(_$type[i])}})();jindo.$Jindo.isNode=function(eEle){try{return !!(eEle&&eEle.nodeType)}catch(e){return false}};jindo.$Jindo.isHash=function(oObj){return jindo._p_._objToString.call(oObj)=="[object Object]"&&oObj!==null&&oObj!==undefined&&!!!oObj.nodeType&&!jindo.$Jindo.isWindow(oObj)};jindo.$Jindo.isNull=function(oObj){return oObj===null};jindo.$Jindo.isUndefined=function(oObj){return oObj===undefined};jindo.$Jindo.isWindow=function(oObj){return oObj&&(oObj==window.top||oObj==oObj.window)};jindo.$Jindo.Break=function(){if(!(this instanceof arguments.callee)){throw new arguments.callee}};jindo.$Jindo.Continue=function(){if(!(this instanceof arguments.callee)){throw new arguments.callee}};jindo.$Jindo._F=function(sKeyType){return sKeyType};jindo.$Jindo._warn=function(sMessage){window.console&&((console.warn&&console.warn(sMessage),true)||(console.log&&console.log(sMessage),true))};jindo.$Jindo._maxWarn=function(nCurrentLength,nMaxLength,sMessage){if(nCurrentLength>nMaxLength){jindo.$Jindo._warn("추가적인 파라미터가 있습니다. : "+sMessage)}};jindo.$Jindo.checkVarType=function(aArgs,oRules,sFuncName){var sFuncName=sFuncName||aArgs.callee.name||"anonymous";var $Jindo=jindo.$Jindo;var bCompat=$Jindo.compatible();var fpChecker=aArgs.callee["_checkVarType_"+bCompat];if(fpChecker){return fpChecker(aArgs,oRules,sFuncName)}var aPrependCode=[];aPrependCode.push("var nArgsLen = aArgs.length;");aPrependCode.push("var $Jindo = "+jindo._p_.jindoName+".$Jindo;");if(bCompat){aPrependCode.push("var nMatchScore;");aPrependCode.push("var nMaxMatchScore = -1;");aPrependCode.push("var oFinalRet = null;")}var aBodyCode=[];var nMaxRuleLen=0;for(var sType in oRules){if(oRules.hasOwnProperty(sType)){nMaxRuleLen=Math.max(oRules[sType].length,nMaxRuleLen)}}for(var sType in oRules){if(oRules.hasOwnProperty(sType)){var aRule=oRules[sType];var nRuleLen=aRule.length;var aBodyPrependCode=[];var aBodyIfCode=[];var aBodyThenCode=[];if(!bCompat){if(nRuleLen<nMaxRuleLen){aBodyIfCode.push("nArgsLen === "+nRuleLen)}else{aBodyIfCode.push("nArgsLen >= "+nRuleLen)}}aBodyThenCode.push("var oRet = new $Jindo._varTypeRetObj();");var nTypeCount=nRuleLen;for(var i=0;i<nRuleLen;++i){/^([^:]+):([^\+]*)(\+?)$/.test(aRule[i]);var sVarName=RegExp.$1,sVarType=RegExp.$2,bAutoCast=RegExp.$3?true:false;if(sVarType==="Variant"){if(bCompat){aBodyIfCode.push(i+" in aArgs")}aBodyThenCode.push('oRet["'+sVarName+'"] = aArgs['+i+"];");nTypeCount--}else{if($Jindo._varTypeList[sVarType]){var vVar="tmp"+sVarType+"_"+i;aBodyPrependCode.push("var "+vVar+" = $Jindo._varTypeList."+sVarType+"(aArgs["+i+"], "+bAutoCast+");");aBodyIfCode.push(vVar+" !== "+jindo._p_.jindoName+".$Jindo.VARTYPE_NOT_MATCHED");aBodyThenCode.push('oRet["'+sVarName+'"] = '+vVar+";")}else{if(/^\$/.test(sVarType)&&jindo[sVarType]){var sOR="",sNativeVarType;if(bAutoCast){sNativeVarType=({$Fn:"Function",$S:"String",$A:"Array",$H:"Hash",$ElementList:"Array"})[sVarType]||sVarType.replace(/^\$/,"");if(jindo.$Jindo["is"+sNativeVarType]){sOR=" || $Jindo.is"+sNativeVarType+"(vNativeArg_"+i+")"}}aBodyIfCode.push("(aArgs["+i+"] instanceof "+jindo._p_.jindoName+"."+sVarType+sOR+")");aBodyThenCode.push('oRet["'+sVarName+'"] = '+jindo._p_.jindoName+"."+sVarType+"(aArgs["+i+"]);")}else{if(jindo.$Jindo["is"+sVarType]){var sOR="",sWrapedVarType;if(bAutoCast){sWrapedVarType=({Function:"$Fn",String:"$S",Array:"$A",Hash:"$H"})[sVarType]||"$"+sVarType;if(jindo[sWrapedVarType]){sOR=" || aArgs["+i+"] instanceof "+jindo._p_.jindoName+"."+sWrapedVarType}}aBodyIfCode.push("($Jindo.is"+sVarType+"(aArgs["+i+"])"+sOR+")");aBodyThenCode.push('oRet["'+sVarName+'"] = vNativeArg_'+i+";")}else{throw new Error("VarType("+sVarType+") Not Found")}}}}}aBodyThenCode.push('oRet.__type = "'+sType+'";');if(bCompat){aBodyThenCode.push("nMatchScore = "+(nRuleLen*1000+nTypeCount*10)+" + (nArgsLen === "+nRuleLen+" ? 1 : 0);");aBodyThenCode.push("if (nMatchScore > nMaxMatchScore) {");aBodyThenCode.push("    nMaxMatchScore = nMatchScore;");aBodyThenCode.push("    oFinalRet = oRet;");aBodyThenCode.push("}")}else{aBodyThenCode.push("return oRet;")}aBodyCode.push(aBodyPrependCode.join("\n"));if(aBodyIfCode.length){aBodyCode.push("if ("+aBodyIfCode.join(" && ")+") {")}aBodyCode.push(aBodyThenCode.join("\n"));if(aBodyIfCode.length){aBodyCode.push("}")}}}aPrependCode.push(" $Jindo._maxWarn(nArgsLen,"+nMaxRuleLen+',"'+sFuncName+'");');for(var i=0;i<nMaxRuleLen;++i){var sArg="aArgs["+i+"]";aPrependCode.push(["var vNativeArg_",i," = ",sArg," && ",sArg,".$value ? ",sArg,".$value() : ",sArg+";"].join(""))}if(!bCompat){aBodyCode.push("$Jindo.checkVarType._throwException(aArgs, oRules, sFuncName);")}aBodyCode.push("return oFinalRet;");aArgs.callee["_checkVarType_"+bCompat]=fpChecker=new Function("aArgs,oRules,sFuncName",aPrependCode.join("\n")+aBodyCode.join("\n"));return fpChecker(aArgs,oRules,sFuncName)};var g_checkVarType=jindo.$Jindo.checkVarType;jindo.$Jindo._varTypeRetObj=function(){};jindo.$Jindo._varTypeRetObj.prototype.toString=function(){return this.__type};jindo.$Jindo.checkVarType._throwException=function(aArgs,oRules,sFuncName){var fpGetType=function(vArg){for(var sKey in jindo){if(jindo.hasOwnProperty(sKey)){var oConstructor=jindo[sKey];if(typeof oConstructor!=="function"){continue}if(vArg instanceof oConstructor){return sKey}}}var $Jindo=jindo.$Jindo;for(var sKey in $Jindo){if($Jindo.hasOwnProperty(sKey)){if(!/^is(.+)$/.test(sKey)){continue}var sType=RegExp.$1;var fpMethod=$Jindo[sKey];if(fpMethod(vArg)){return sType}}}return"Unknown"};var fpErrorMessage=function(sUsed,aSuggs,sURL){var aMsg=["잘못된 파라미터입니다.",""];if(sUsed){aMsg.push("호출한 형태 :");aMsg.push("\t"+sUsed);aMsg.push("")}if(aSuggs.length){aMsg.push("사용 가능한 형태 :");for(var i=0,nLen=aSuggs.length;i<nLen;i++){aMsg.push("\t"+aSuggs[i])}aMsg.push("")}if(sURL){aMsg.push("매뉴얼 페이지 :");aMsg.push("\t"+sURL);aMsg.push("")}aMsg.unshift();return aMsg.join("\n")};var aArgName=[];for(var i=0,ic=aArgs.length;i<ic;++i){try{aArgName.push(fpGetType(aArgs[i]))}catch(e){aArgName.push("Unknown")}}var sUsed=sFuncName+"("+aArgName.join(", ")+")";var aSuggs=[];for(var sKey in oRules){if(oRules.hasOwnProperty(sKey)){var aRule=oRules[sKey];aSuggs.push(""+sFuncName+"("+aRule.join(", ").replace(/(^|,\s)[^:]+:/g,"$1")+")")}}var sURL;if(/(\$\w+)#(\w+)?/.test(sFuncName)){sURL="http://jindo.dev.naver.com/docs/jindo/2.10.0/desktop/ko/classes/jindo."+encodeURIComponent(RegExp.$1)+".html#method_"+RegExp.$2}throw new TypeError(fpErrorMessage(sUsed,aSuggs,sURL))};var _getElementById=function(doc,id){docEle=doc.documentElement;var sCheckId="jindo"+(new Date()).getTime();var eDiv=doc.createElement("div");eDiv.style.display="none";if(typeof MSApp!="undefined"){MSApp.execUnsafeLocalFunction(function(){eDiv.innerHTML="<input type='hidden' name='"+sCheckId+"'/>"})}else{eDiv.innerHTML="<input type='hidden' name='"+sCheckId+"'/>"}docEle.insertBefore(eDiv,docEle.firstChild);if(doc.getElementById(sCheckId)){_getElementById=function(doc,id){var eId=doc.getElementById(id);if(eId==null){return eId}if(eId.attributes.id&&eId.attributes.id.value==id){return eId}var aEl=doc.all[id];for(var i=1;i<aEl.length;i++){if(aEl[i].attributes.id&&aEl[i].attributes.id.value==id){return aEl[i]}}}}else{_getElementById=function(doc,id){return doc.getElementById(id)}}docEle.removeChild(eDiv);return _getElementById(doc,id)};jindo.$Jindo.varType=function(){var oArgs=this.checkVarType(arguments,{s4str:["sTypeName:String+","fpFunc:Function+"],s4obj:["oTypeLists:Hash+"],g:["sTypeName:String+"]});var sDenyTypeListComma=jindo.$Jindo._denyTypeListComma;switch(oArgs+""){case"s4str":var sTypeNameComma=","+oArgs.sTypeName.replace(/\+$/,"")+",";if(sDenyTypeListComma.indexOf(sTypeNameComma)>-1){throw new Error("Not allowed Variable Type")}this._varTypeList[oArgs.sTypeName]=oArgs.fpFunc;return this;case"s4obj":var oTypeLists=oArgs.oTypeLists;for(var sTypeName in oTypeLists){if(oTypeLists.hasOwnProperty(sTypeName)){fpFunc=oTypeLists[sTypeName];arguments.callee.call(this,sTypeName,fpFunc)}}return this;case"g":return this._varTypeList[oArgs.sTypeName]}};jindo.$Jindo.VARTYPE_NOT_MATCHED={};(function(){var oVarTypeList=jindo.$Jindo._varTypeList={};var cache=jindo.$Jindo;var ___notMatched=cache.VARTYPE_NOT_MATCHED;oVarTypeList.Numeric=function(v){if(cache.isNumeric(v)){return v*1}return ___notMatched};oVarTypeList.Hash=function(val,bAutoCast){if(bAutoCast&&jindo.$H&&val instanceof jindo.$H){return val.$value()}else{if(cache.isHash(val)){return val}}return ___notMatched};oVarTypeList["$Class"]=function(val,bAutoCast){if((!cache.isFunction(val))||!val.extend){return ___notMatched}return val};var aDenyTypeList=[];for(var sTypeName in cache){if(cache.hasOwnProperty(sTypeName)){if(/^is(.+)$/.test(sTypeName)){aDenyTypeList.push(RegExp.$1)}}}cache._denyTypeListComma=aDenyTypeList.join(",");cache.varType("ArrayStyle",function(val,bAutoCast){if(!val){return ___notMatched}if(/(Arguments|NodeList|HTMLCollection|global|Window)/.test(jindo._p_._objToString.call(val))||/Object/.test(jindo._p_._objToString.call(val))&&cache.isNumeric(val.length)){return jindo._p_._toArray(val)}return ___notMatched});cache.varType("Form",function(val,bAutoCast){if(!val){return ___notMatched}if(bAutoCast&&val.$value){val=val.$value()}if(val.tagName&&val.tagName.toUpperCase()=="FORM"){return val}return ___notMatched})})();jindo._p_._createEle=function(sParentTag,sHTML,oDoc,bWantParent){var sId="R"+new Date().getTime()+parseInt(Math.random()*100000,10);var oDummy=oDoc.createElement("div");switch(sParentTag){case"select":case"table":case"dl":case"ul":case"fieldset":case"audio":oDummy.innerHTML="<"+sParentTag+' class="'+sId+'">'+sHTML+"</"+sParentTag+">";break;case"thead":case"tbody":case"col":oDummy.innerHTML="<table><"+sParentTag+' class="'+sId+'">'+sHTML+"</"+sParentTag+"></table>";break;case"tr":oDummy.innerHTML='<table><tbody><tr class="'+sId+'">'+sHTML+"</tr></tbody></table>";break;default:oDummy.innerHTML='<div class="'+sId+'">'+sHTML+"</div>"}var oFound;for(oFound=oDummy.firstChild;oFound;oFound=oFound.firstChild){if(oFound.className==sId){break}}return bWantParent?oFound:oFound.childNodes};jindo.$=function(sID){if(!arguments.length){throw new jindo.$Error(jindo.$Except.NOT_FOUND_ARGUMENT,"$")}var ret=[],arg=arguments,nArgLeng=arg.length,lastArgument=arg[nArgLeng-1],doc=document,el=null;var reg=/^<([a-z]+|h[1-5])>$/i;var reg2=/^<([a-z]+|h[1-5])(\s+[^>]+)?>/i;if(nArgLeng>1&&typeof lastArgument!="string"&&lastArgument.body){arg=Array.prototype.slice.apply(arg,[0,nArgLeng-1]);doc=lastArgument}for(var i=0;i<nArgLeng;i++){el=arg[i]&&arg[i].$value?arg[i].$value():arg[i];if(jindo.$Jindo.isString(el)||jindo.$Jindo.isNumeric(el)){el+="";el=el.replace(/^\s+|\s+$/g,"");el=el.replace(/<!--(.|\n)*?-->/g,"");if(el.indexOf("<")>-1){if(reg.test(el)){el=doc.createElement(RegExp.$1)}else{if(reg2.test(el)){var p={thead:"table",tbody:"table",tr:"tbody",td:"tr",dt:"dl",dd:"dl",li:"ul",legend:"fieldset",option:"select",source:"audio"};var tag=RegExp.$1.toLowerCase();var ele=jindo._p_._createEle(p[tag],el,doc);for(var i=0,leng=ele.length;i<leng;i++){ret.push(ele[i])}el=null}}}else{el=_getElementById(doc,el)}}if(el&&el.nodeType){ret[ret.length]=el}}return ret.length>1?ret:(ret[0]||null)};jindo.$Class=function(oDef){var oArgs=g_checkVarType(arguments,{"4obj":["oDef:Hash+"]},"$Class");function typeClass(){var t=this;var a=[];var superFunc=function(m,superClass,func){if(m!="constructor"&&func.toString().indexOf("$super")>-1){var funcArg=func.toString().replace(/function\s*\(([^\)]*)[\w\W]*/g,"$1").split(",");var funcStr=func.toString().replace(/function[^{]*{/,"").replace(/(\w|\.?)(this\.\$super|this)/g,function(m,m2,m3){if(!m2){return m3+".$super"}return m});funcStr=funcStr.substr(0,funcStr.length-1);func=superClass[m]=eval("false||function("+funcArg.join(",")+"){"+funcStr+"}")}return function(){var f=this.$this[m];var t=this.$this;var r=(t[m]=func).apply(t,arguments);t[m]=f;return r}};while(t._$superClass!==undefined){t.$super=new Object;t.$super.$this=this;for(var x in t._$superClass.prototype){if(t._$superClass.prototype.hasOwnProperty(x)){if(this[x]===undefined&&x!="$init"){this[x]=t._$superClass.prototype[x]}if(x!="constructor"&&x!="_$superClass"&&typeof t._$superClass.prototype[x]=="function"){t.$super[x]=superFunc(x,t._$superClass,t._$superClass.prototype[x])}else{t.$super[x]=t._$superClass.prototype[x]}}}if(typeof t.$super.$init=="function"){a[a.length]=t}t=t.$super}for(var i=a.length-1;i>-1;i--){a[i].$super.$init.apply(a[i].$super,arguments)}if(this.$autoBind){for(var i in this){if(/^\_/.test(i)){this[i]=jindo.$Fn(this[i],this).bind()}}}if(typeof this.$init=="function"){this.$init.apply(this,arguments)}}if(oDef.$static!==undefined){var i=0,x;for(x in oDef){if(oDef.hasOwnProperty(x)){x=="$static"||i++}}for(x in oDef.$static){if(oDef.$static.hasOwnProperty(x)){typeClass[x]=oDef.$static[x]}}if(!i){return oDef.$static}delete oDef.$static}typeClass.prototype=oDef;typeClass.prototype.constructor=typeClass;typeClass.prototype.kindOf=function(oClass){return jindo._p_._kindOf(this.constructor.prototype,oClass.prototype)};typeClass.extend=jindo.$Class.extend;return typeClass};jindo._p_._kindOf=function(oThis,oClass){if(oThis!=oClass){if(oThis._$superClass){return jindo._p_._kindOf(oThis._$superClass.prototype,oClass)}else{return false}}else{return true}};jindo.$Class.extend=function(superClass){var oArgs=g_checkVarType(arguments,{"4obj":["oDef:$Class"]},"<static> $Class#extend");this.prototype._$superClass=superClass;var superProto=superClass.prototype;for(var prop in superProto){if(jindo.$Jindo.isHash(superProto[prop])){jindo.$Jindo._warn(jindo.$Except.CANNOT_SET_OBJ_PROPERTY)}}for(var x in superClass){if(superClass.hasOwnProperty(x)){if(x=="prototype"){continue}this[x]=superClass[x]}}return this};jindo.VERSION="2.10.0";jindo.TYPE="desktop";jindo.$$=jindo.cssquery=(function(){var sVersion="3.0";var debugOption={repeat:1};var UID=1;var cost=0;var validUID={};var bSupportByClassName=document.getElementsByClassName?true:false;var safeHTML=false;var getUID4HTML=function(oEl){var nUID=safeHTML?(oEl._cssquery_UID&&oEl._cssquery_UID[0]):oEl._cssquery_UID;if(nUID&&validUID[nUID]==oEl){return nUID}nUID=UID++;oEl._cssquery_UID=safeHTML?[nUID]:nUID;validUID[nUID]=oEl;return nUID};function GEBID(oBase,sId,oDoc){if(oBase.nodeType===9||oBase.parentNode&&oBase.parentNode.tagName){return _getElementById(oDoc,sId)}else{var aEle=oBase.getElementsByTagName("*");for(var i=0,l=aEle.length;i<l;i++){if(aEle[i].id===sId){return aEle[i]}}}}var getUID4XML=function(oEl){var oAttr=oEl.getAttribute("_cssquery_UID");var nUID=safeHTML?(oAttr&&oAttr[0]):oAttr;if(!nUID){nUID=UID++;oEl.setAttribute("_cssquery_UID",safeHTML?[nUID]:nUID)}return nUID};var getUID=getUID4HTML;var uniqid=function(sPrefix){return(sPrefix||"")+new Date().getTime()+parseInt(Math.random()*100000000,10)};function getElementsByClass(searchClass,node,tag){var classElements=new Array();if(node==null){node=document}if(tag==null){tag="*"}var els=node.getElementsByTagName(tag);var elsLen=els.length;var pattern=new RegExp("(^|\\s)"+searchClass+"(\\s|$)");for(i=0,j=0;i<elsLen;i++){if(pattern.test(els[i].className)){classElements[j]=els[i];j++}}return classElements}var getChilds_dontShrink=function(oEl,sTagName,sClassName){if(bSupportByClassName&&sClassName){if(oEl.getElementsByClassName){return oEl.getElementsByClassName(sClassName)}if(oEl.querySelectorAll){return oEl.querySelectorAll(sClassName)}return getElementsByClass(sClassName,oEl,sTagName)}else{if(sTagName=="*"){return oEl.all||oEl.getElementsByTagName(sTagName)}}return oEl.getElementsByTagName(sTagName)};var clearKeys=function(){backupKeys._keys={}};var oDocument_dontShrink=document;var bXMLDocument=false;var backupKeys=function(sQuery){var oKeys=backupKeys._keys;sQuery=sQuery.replace(/'(\\'|[^'])*'/g,function(sAll){var uid=uniqid("QUOT");oKeys[uid]=sAll;return uid});sQuery=sQuery.replace(/"(\\"|[^"])*"/g,function(sAll){var uid=uniqid("QUOT");oKeys[uid]=sAll;return uid});sQuery=sQuery.replace(/\[(.*?)\]/g,function(sAll,sBody){if(sBody.indexOf("ATTR")==0){return sAll}var uid="["+uniqid("ATTR")+"]";oKeys[uid]=sAll;return uid});var bChanged;do{bChanged=false;sQuery=sQuery.replace(/\(((\\\)|[^)|^(])*)\)/g,function(sAll,sBody){if(sBody.indexOf("BRCE")==0){return sAll}var uid="_"+uniqid("BRCE");oKeys[uid]=sAll;bChanged=true;return uid})}while(bChanged);return sQuery};var restoreKeys=function(sQuery,bOnlyAttrBrace){var oKeys=backupKeys._keys;var bChanged;var rRegex=bOnlyAttrBrace?/(\[ATTR[0-9]+\])/g:/(QUOT[0-9]+|\[ATTR[0-9]+\])/g;do{bChanged=false;sQuery=sQuery.replace(rRegex,function(sKey){if(oKeys[sKey]){bChanged=true;return oKeys[sKey]}return sKey})}while(bChanged);sQuery=sQuery.replace(/_BRCE[0-9]+/g,function(sKey){return oKeys[sKey]?oKeys[sKey]:sKey});return sQuery};var restoreString=function(sKey){var oKeys=backupKeys._keys;var sOrg=oKeys[sKey];if(!sOrg){return sKey}return eval(sOrg)};var wrapQuot=function(sStr){return'"'+sStr.replace(/"/g,'\\"')+'"'};var getStyleKey=function(sKey){if(/^@/.test(sKey)){return sKey.substr(1)}return null};var getCSS=function(oEl,sKey){if(oEl.currentStyle){if(sKey=="float"){sKey="styleFloat"}return oEl.currentStyle[sKey]||oEl.style[sKey]}else{if(window.getComputedStyle){return oDocument_dontShrink.defaultView.getComputedStyle(oEl,null).getPropertyValue(sKey.replace(/([A-Z])/g,"-$1").toLowerCase())||oEl.style[sKey]}}if(sKey=="float"&&jindo._p_._JINDO_IS_IE){sKey="styleFloat"}return oEl.style[sKey]};var oCamels={accesskey:"accessKey",cellspacing:"cellSpacing",cellpadding:"cellPadding","class":"className",colspan:"colSpan","for":"htmlFor",maxlength:"maxLength",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",valign:"vAlign"};var getDefineCode=function(sKey){var sVal;var sStyleKey;if(bXMLDocument){sVal='oEl.getAttribute("'+sKey+'",2)'}else{if(sStyleKey=getStyleKey(sKey)){sKey="$$"+sStyleKey;sVal='getCSS(oEl, "'+sStyleKey+'")'}else{switch(sKey){case"checked":sVal='oEl.checked + ""';break;case"disabled":sVal='oEl.disabled + ""';break;case"enabled":sVal='!oEl.disabled + ""';break;case"readonly":sVal='oEl.readOnly + ""';break;case"selected":sVal='oEl.selected + ""';break;default:if(oCamels[sKey]){sVal="oEl."+oCamels[sKey]}else{sVal='oEl.getAttribute("'+sKey+'",2)'}}}}return"_"+sKey.replace(/\-/g,"_")+" = "+sVal};var getReturnCode=function(oExpr){var sStyleKey=getStyleKey(oExpr.key);var sVar="_"+(sStyleKey?"$$"+sStyleKey:oExpr.key);sVar=sVar.replace(/\-/g,"_");var sVal=oExpr.val?wrapQuot(oExpr.val):"";switch(oExpr.op){case"~=":return"("+sVar+' && (" " + '+sVar+' + " ").indexOf(" " + '+sVal+' + " ") > -1)';case"^=":return"("+sVar+" && "+sVar+".indexOf("+sVal+") == 0)";case"$=":return"("+sVar+" && "+sVar+".substr("+sVar+".length - "+oExpr.val.length+") == "+sVal+")";case"*=":return"("+sVar+" && "+sVar+".indexOf("+sVal+") > -1)";case"!=":return"("+sVar+" != "+sVal+")";case"=":return"("+sVar+" == "+sVal+")"}return"("+sVar+")"};var getNodeIndex=function(oEl){var nUID=getUID(oEl);var nIndex=oNodeIndexes[nUID]||0;if(nIndex==0){for(var oSib=(oEl.parentNode||oEl._IE5_parentNode).firstChild;oSib;oSib=oSib.nextSibling){if(oSib.nodeType!=1){continue}nIndex++;setNodeIndex(oSib,nIndex)}nIndex=oNodeIndexes[nUID]}return nIndex};var oNodeIndexes={};var setNodeIndex=function(oEl,nIndex){var nUID=getUID(oEl);oNodeIndexes[nUID]=nIndex};var unsetNodeIndexes=function(){setTimeout(function(){oNodeIndexes={}},0)};var oPseudoes_dontShrink={contains:function(oEl,sOption){return(oEl.innerText||oEl.textContent||"").indexOf(sOption)>-1},"last-child":function(oEl,sOption){for(oEl=oEl.nextSibling;oEl;oEl=oEl.nextSibling){if(oEl.nodeType==1){return false}}return true},"first-child":function(oEl,sOption){for(oEl=oEl.previousSibling;oEl;oEl=oEl.previousSibling){if(oEl.nodeType==1){return false}}return true},"only-child":function(oEl,sOption){var nChild=0;for(var oChild=(oEl.parentNode||oEl._IE5_parentNode).firstChild;oChild;oChild=oChild.nextSibling){if(oChild.nodeType==1){nChild++}if(nChild>1){return false}}return nChild?true:false},empty:function(oEl,_){return oEl.firstChild?false:true},"nth-child":function(oEl,nMul,nAdd){var nIndex=getNodeIndex(oEl);return nIndex%nMul==nAdd},"nth-last-child":function(oEl,nMul,nAdd){var oLast=(oEl.parentNode||oEl._IE5_parentNode).lastChild;for(;oLast;oLast=oLast.previousSibling){if(oLast.nodeType==1){break}}var nTotal=getNodeIndex(oLast);var nIndex=getNodeIndex(oEl);var nLastIndex=nTotal-nIndex+1;return nLastIndex%nMul==nAdd},checked:function(oEl){return !!oEl.checked},selected:function(oEl){return !!oEl.selected},enabled:function(oEl){return !oEl.disabled},disabled:function(oEl){return !!oEl.disabled}};var getExpression=function(sBody){var oRet={defines:"",returns:"true"};var sBody=restoreKeys(sBody,true);var aExprs=[];var aDefineCode=[],aReturnCode=[];var sId,sTagName;var sBody=sBody.replace(/:([\w-]+)(\(([^)]*)\))?/g,function(_1,sType,_2,sOption){switch(sType){case"not":var oInner=getExpression(sOption);var sFuncDefines=oInner.defines;var sFuncReturns=oInner.returnsID+oInner.returnsTAG+oInner.returns;aReturnCode.push("!(function() { "+sFuncDefines+" return "+sFuncReturns+" })()");break;case"nth-child":case"nth-last-child":sOption=restoreString(sOption);if(sOption=="even"){sOption="2n"}else{if(sOption=="odd"){sOption="2n+1"}}var nMul,nAdd;var matchstr=sOption.match(/([0-9]*)n([+-][0-9]+)*/);if(matchstr){nMul=matchstr[1]||1;nAdd=matchstr[2]||0}else{nMul=Infinity;nAdd=parseInt(sOption,10)}aReturnCode.push("oPseudoes_dontShrink["+wrapQuot(sType)+"](oEl, "+nMul+", "+nAdd+")");break;case"first-of-type":case"last-of-type":sType=(sType=="first-of-type"?"nth-of-type":"nth-last-of-type");sOption=1;case"nth-of-type":case"nth-last-of-type":sOption=restoreString(sOption);if(sOption=="even"){sOption="2n"}else{if(sOption=="odd"){sOption="2n+1"}}var nMul,nAdd;if(/([0-9]*)n([+-][0-9]+)*/.test(sOption)){nMul=parseInt(RegExp.$1,10)||1;nAdd=parseInt(RegExp.$2,20)||0}else{nMul=Infinity;nAdd=parseInt(sOption,10)}oRet.nth=[nMul,nAdd,sType];break;default:sOption=sOption?restoreString(sOption):"";aReturnCode.push("oPseudoes_dontShrink["+wrapQuot(sType)+"](oEl, "+wrapQuot(sOption)+")")}return""});var sBody=sBody.replace(/\[(@?[\w-]+)(([!^~$*]?=)([^\]]*))?\]/g,function(_1,sKey,_2,sOp,sVal){sKey=restoreString(sKey);sVal=restoreString(sVal);if(sKey=="checked"||sKey=="disabled"||sKey=="enabled"||sKey=="readonly"||sKey=="selected"){if(!sVal){sOp="=";sVal="true"}}aExprs.push({key:sKey,op:sOp,val:sVal});return""});var sClassName=null;var sBody=sBody.replace(/\.([\w-]+)/g,function(_,sClass){aExprs.push({key:"class",op:"~=",val:sClass});if(!sClassName){sClassName=sClass}return""});var sBody=sBody.replace(/#([\w-]+)/g,function(_,sIdValue){if(bXMLDocument){aExprs.push({key:"id",op:"=",val:sIdValue})}else{sId=sIdValue}return""});sTagName=sBody=="*"?"":sBody;var oVars={};for(var i=0,oExpr;oExpr=aExprs[i];i++){var sKey=oExpr.key;if(!oVars[sKey]){aDefineCode.push(getDefineCode(sKey))}aReturnCode.unshift(getReturnCode(oExpr));oVars[sKey]=true}if(aDefineCode.length){oRet.defines="var "+aDefineCode.join(",")+";"}if(aReturnCode.length){oRet.returns=aReturnCode.join("&&")}oRet.quotID=sId?wrapQuot(sId):"";oRet.quotTAG=sTagName?wrapQuot(bXMLDocument?sTagName:sTagName.toUpperCase()):"";if(bSupportByClassName){oRet.quotCLASS=sClassName?wrapQuot(sClassName):""}oRet.returnsID=sId?"oEl.id == "+oRet.quotID+" && ":"";oRet.returnsTAG=sTagName&&sTagName!="*"?"oEl.tagName == "+oRet.quotTAG+" && ":"";return oRet};var splitToParts=function(sQuery){var aParts=[];var sRel=" ";var sBody=sQuery.replace(/(.*?)\s*(!?[+>~ ]|!)\s*/g,function(_,sBody,sRelative){if(sBody){aParts.push({rel:sRel,body:sBody})}sRel=sRelative.replace(/\s+$/g,"")||" ";return""});if(sBody){aParts.push({rel:sRel,body:sBody})}return aParts};var isNth_dontShrink=function(oEl,sTagName,nMul,nAdd,sDirection){var nIndex=0;for(var oSib=oEl;oSib;oSib=oSib[sDirection]){if(oSib.nodeType==1&&(!sTagName||sTagName==oSib.tagName)){nIndex++}}return nIndex%nMul==nAdd};var compileParts=function(aParts){var aPartExprs=[];for(var i=0,oPart;oPart=aParts[i];i++){aPartExprs.push(getExpression(oPart.body))}var sFunc="";var sPushCode="aRet.push(oEl); if (oOptions.single) { bStop = true; }";for(var i=aParts.length-1,oPart;oPart=aParts[i];i--){var oExpr=aPartExprs[i];var sPush=(debugOption.callback?"cost++;":"")+oExpr.defines;var sReturn="if (bStop) {"+(i==0?"return aRet;":"return;")+"}";if(oExpr.returns=="true"){sPush+=(sFunc?sFunc+"(oEl);":sPushCode)+sReturn}else{sPush+="if ("+oExpr.returns+") {"+(sFunc?sFunc+"(oEl);":sPushCode)+sReturn+"}"}var sCheckTag="oEl.nodeType != 1";if(oExpr.quotTAG){sCheckTag="oEl.tagName != "+oExpr.quotTAG}var sTmpFunc="(function(oBase"+(i==0?", oOptions) { var bStop = false; var aRet = [];":") {");if(oExpr.nth){sPush="if (isNth_dontShrink(oEl, "+(oExpr.quotTAG?oExpr.quotTAG:"false")+","+oExpr.nth[0]+","+oExpr.nth[1]+',"'+(oExpr.nth[2]=="nth-of-type"?"previousSibling":"nextSibling")+'")) {'+sPush+"}"}switch(oPart.rel){case" ":if(oExpr.quotID){sTmpFunc+="var oEl = GEBID(oBase,"+oExpr.quotID+",oDocument_dontShrink);var oCandi = oEl;for (; oCandi; oCandi = (oCandi.parentNode || oCandi._IE5_parentNode)) {if (oCandi == oBase) break;}if (!oCandi || "+sCheckTag+") return aRet;"+sPush}else{sTmpFunc+="var aCandi = getChilds_dontShrink(oBase, "+(oExpr.quotTAG||'"*"')+", "+(oExpr.quotCLASS||"null")+");for (var i = 0, oEl; oEl = aCandi[i]; i++) {"+(oExpr.quotCLASS?"if ("+sCheckTag+") continue;":"")+sPush+"}"}break;case">":if(oExpr.quotID){sTmpFunc+="var oEl = GEBID(oBase,"+oExpr.quotID+",oDocument_dontShrink);if ((oEl.parentNode || oEl._IE5_parentNode) != oBase || "+sCheckTag+") return aRet;"+sPush}else{sTmpFunc+="for (var oEl = oBase.firstChild; oEl; oEl = oEl.nextSibling) {if ("+sCheckTag+") { continue; }"+sPush+"}"}break;case"+":if(oExpr.quotID){sTmpFunc+="var oEl = GEBID(oBase,"+oExpr.quotID+",oDocument_dontShrink);var oPrev;for (oPrev = oEl.previousSibling; oPrev; oPrev = oPrev.previousSibling) { if (oPrev.nodeType == 1) break; }if (!oPrev || oPrev != oBase || "+sCheckTag+") return aRet;"+sPush}else{sTmpFunc+="for (var oEl = oBase.nextSibling; oEl; oEl = oEl.nextSibling) { if (oEl.nodeType == 1) break; }if (!oEl || "+sCheckTag+") { return aRet; }"+sPush}break;case"~":if(oExpr.quotID){sTmpFunc+="var oEl = GEBID(oBase,"+oExpr.quotID+",oDocument_dontShrink);var oCandi = oEl;for (; oCandi; oCandi = oCandi.previousSibling) { if (oCandi == oBase) break; }if (!oCandi || "+sCheckTag+") return aRet;"+sPush}else{sTmpFunc+="for (var oEl = oBase.nextSibling; oEl; oEl = oEl.nextSibling) {if ("+sCheckTag+") { continue; }if (!markElement_dontShrink(oEl, "+i+")) { break; }"+sPush+"}"}break;case"!":if(oExpr.quotID){sTmpFunc+="var oEl = GEBID(oBase,"+oExpr.quotID+",oDocument_dontShrink);for (; oBase; oBase = (oBase.parentNode || oBase._IE5_parentNode)) { if (oBase == oEl) break; }if (!oBase || "+sCheckTag+") return aRet;"+sPush}else{sTmpFunc+="for (var oEl = (oBase.parentNode || oBase._IE5_parentNode); oEl; oEl = oEl && (oEl.parentNode || oEl._IE5_parentNode)) {if ("+sCheckTag+") { continue; }"+sPush+"}"}break;case"!>":if(oExpr.quotID){sTmpFunc+="var oEl = GEBID(oBase,"+oExpr.quotID+",oDocument_dontShrink);var oRel = (oBase.parentNode || oBase._IE5_parentNode);if (!oRel || oEl != oRel || ("+sCheckTag+")) return aRet;"+sPush}else{sTmpFunc+="var oEl = (oBase.parentNode || oBase._IE5_parentNode);if (!oEl || "+sCheckTag+") { return aRet; }"+sPush}break;case"!+":if(oExpr.quotID){sTmpFunc+="var oEl = GEBID(oBase,"+oExpr.quotID+",oDocument_dontShrink);var oRel;for (oRel = oBase.previousSibling; oRel; oRel = oRel.previousSibling) { if (oRel.nodeType == 1) break; }if (!oRel || oEl != oRel || ("+sCheckTag+")) return aRet;"+sPush}else{sTmpFunc+="for (oEl = oBase.previousSibling; oEl; oEl = oEl.previousSibling) { if (oEl.nodeType == 1) break; }if (!oEl || "+sCheckTag+") { return aRet; }"+sPush}break;case"!~":if(oExpr.quotID){sTmpFunc+="var oEl = GEBID(oBase,"+oExpr.quotID+",oDocument_dontShrink);var oRel;for (oRel = oBase.previousSibling; oRel; oRel = oRel.previousSibling) { if (oRel.nodeType != 1) { continue; }if (oRel == oEl) { break; }}if (!oRel || ("+sCheckTag+")) return aRet;"+sPush}else{sTmpFunc+="for (oEl = oBase.previousSibling; oEl; oEl = oEl.previousSibling) {if ("+sCheckTag+") { continue; }if (!markElement_dontShrink(oEl, "+i+")) { break; }"+sPush+"}"}}sTmpFunc+=(i==0?"return aRet;":"")+"})";sFunc=sTmpFunc}eval("var fpCompiled = "+sFunc+";");return fpCompiled};var parseQuery=function(sQuery){var sCacheKey=sQuery;var fpSelf=arguments.callee;var fpFunction=fpSelf._cache[sCacheKey];if(!fpFunction){sQuery=backupKeys(sQuery);var aParts=splitToParts(sQuery);fpFunction=fpSelf._cache[sCacheKey]=compileParts(aParts);fpFunction.depth=aParts.length}return fpFunction};parseQuery._cache={};var parseTestQuery=function(sQuery){var fpSelf=arguments.callee;var aSplitQuery=backupKeys(sQuery).split(/\s*,\s*/);var aResult=[];var nLen=aSplitQuery.length;var aFunc=[];for(var i=0;i<nLen;i++){aFunc.push((function(sQuery){var sCacheKey=sQuery;var fpFunction=fpSelf._cache[sCacheKey];if(!fpFunction){sQuery=backupKeys(sQuery);var oExpr=getExpression(sQuery);eval("fpFunction = function(oEl) { "+oExpr.defines+"return ("+oExpr.returnsID+oExpr.returnsTAG+oExpr.returns+"); };")}return fpFunction})(restoreKeys(aSplitQuery[i])))}return aFunc};parseTestQuery._cache={};var distinct=function(aList){var aDistinct=[];var oDummy={};for(var i=0,oEl;oEl=aList[i];i++){var nUID=getUID(oEl);if(oDummy[nUID]){continue}aDistinct.push(oEl);oDummy[nUID]=true}return aDistinct};var markElement_dontShrink=function(oEl,nDepth){var nUID=getUID(oEl);if(cssquery._marked[nDepth][nUID]){return false}cssquery._marked[nDepth][nUID]=true;return true};var getParentElement=function(oParent){if(!oParent){return document}var nParentNodeType;oParent=oParent.$value?oParent.$value():oParent;if(jindo.$Jindo.isString(oParent)){try{oParent=document.getElementById(oParent)}catch(e){oParent=document}}nParentNodeType=oParent.nodeType;if(nParentNodeType!=1&&nParentNodeType!=9&&nParentNodeType!=10&&nParentNodeType!=11){oParent=oParent.ownerDocument||oParent.document}return oParent||oParent.ownerDocument||oParent.document};var oResultCache=null;var bUseResultCache=false;var bExtremeMode=false;var old_cssquery=function(sQuery,oParent,oOptions){var oArgs=g_checkVarType(arguments,{"4str":["sQuery:String+"],"4var":["sQuery:String+","oParent:Variant"],"4var2":["sQuery:String+","oParent:Variant","oOptions:Variant"]},"cssquery");oParent=getParentElement(oParent);oOptions=oOptions&&oOptions.$value?oOptions.$value():oOptions;if(typeof sQuery=="object"){var oResult={};for(var k in sQuery){if(sQuery.hasOwnProperty(k)){oResult[k]=arguments.callee(sQuery[k],oParent,oOptions)}}return oResult}cost=0;var executeTime=new Date().getTime();var aRet;for(var r=0,rp=debugOption.repeat;r<rp;r++){aRet=(function(sQuery,oParent,oOptions){if(oOptions){if(!oOptions.oneTimeOffCache){oOptions.oneTimeOffCache=false}}else{oOptions={oneTimeOffCache:false}}cssquery.safeHTML(oOptions.oneTimeOffCache);if(!oParent){oParent=document}oDocument_dontShrink=oParent.ownerDocument||oParent.document||oParent;if(/\bMSIE\s([0-9]+(\.[0-9]+)*);/.test(jindo._p_._j_ag)&&parseFloat(RegExp.$1)<6){try{oDocument_dontShrink.location}catch(e){oDocument_dontShrink=document}oDocument_dontShrink.firstChild=oDocument_dontShrink.getElementsByTagName("html")[0];oDocument_dontShrink.firstChild._IE5_parentNode=oDocument_dontShrink}bXMLDocument=(typeof XMLDocument!=="undefined")?(oDocument_dontShrink.constructor===XMLDocument):(!oDocument_dontShrink.location);getUID=bXMLDocument?getUID4XML:getUID4HTML;clearKeys();var aSplitQuery=backupKeys(sQuery).split(/\s*,\s*/);var aResult=[];var nLen=aSplitQuery.length;for(var i=0;i<nLen;i++){aSplitQuery[i]=restoreKeys(aSplitQuery[i])}for(var i=0;i<nLen;i++){var sSingleQuery=aSplitQuery[i];var aSingleQueryResult=null;var sResultCacheKey=sSingleQuery+(oOptions.single?"_single":"");var aCache=bUseResultCache?oResultCache[sResultCacheKey]:null;if(aCache){for(var j=0,oCache;oCache=aCache[j];j++){if(oCache.parent==oParent){aSingleQueryResult=oCache.result;break}}}if(!aSingleQueryResult){var fpFunction=parseQuery(sSingleQuery);cssquery._marked=[];for(var j=0,nDepth=fpFunction.depth;j<nDepth;j++){cssquery._marked.push({})}aSingleQueryResult=distinct(fpFunction(oParent,oOptions));if(bUseResultCache&&!oOptions.oneTimeOffCache){if(!(oResultCache[sResultCacheKey] instanceof Array)){oResultCache[sResultCacheKey]=[]}oResultCache[sResultCacheKey].push({parent:oParent,result:aSingleQueryResult})}}aResult=aResult.concat(aSingleQueryResult)}unsetNodeIndexes();return aResult})(sQuery,oParent,oOptions)}executeTime=new Date().getTime()-executeTime;if(debugOption.callback){debugOption.callback(sQuery,cost,executeTime)}return aRet};var cssquery;if(document.querySelectorAll){function _isNonStandardQueryButNotException(sQuery){return/\[\s*(?:checked|selected|disabled)/.test(sQuery)}function _commaRevise(sQuery,sChange){return sQuery.replace(/\,/gi,sChange)}function _startCombinator(sQuery){return/^[~>+]/.test(sQuery)}function _addQueryId(el,sIdName){var sQueryId,sValue;if(/^\w+$/.test(el.id)){sQueryId="#"+el.id}else{sValue="C"+new Date().getTime()+Math.floor(Math.random()*1000000);el.setAttribute(sIdName,sValue);sQueryId="["+sIdName+"="+sValue+"]"}return sQueryId}function _getSelectorMethod(sQuery,bDocument){var oRet={method:null,query:null};if(/^\s*[a-z]+\s*$/i.test(sQuery)){oRet.method="getElementsByTagName"}else{if(/^\s*([#\.])([\w\-]+)\s*$/i.test(sQuery)){oRet.method=RegExp.$1=="#"?"getElementById":"getElementsByClassName";oRet.query=RegExp.$2}}if(!document[oRet.method]||RegExp.$1=="#"&&!bDocument){oRet.method=oRet.query=null}return oRet}var _div=document.createElement("div");cssquery=function(sQuery,oParent,oOptions){var oArgs=g_checkVarType(arguments,{"4str":["sQuery:String+"],"4var":["sQuery:String+","oParent:Variant"],"4var2":["sQuery:String+","oParent:Variant","oOptions:Variant"]},"cssquery"),sTempId,aRet,nParentNodeType,bUseQueryId,oOldParent,queryid,_clone,sTagName,vSelectorMethod,sQueryAttrName="queryid";oParent=getParentElement(oParent);oOptions=oOptions&&oOptions.$value?oOptions.$value():oOptions;var re=/\[(.*?)=([\w\d]*)\]/g;if(re.test(sQuery)){sQuery=sQuery.replace(re,"[$1='$2']")}nParentNodeType=oParent.nodeType;try{if(_isNonStandardQueryButNotException(sQuery)){return old_cssquery(sQuery,oParent,oOptions)}sTagName=(oParent.tagName||"").toUpperCase();vSelectorMethod=_getSelectorMethod(sQuery,nParentNodeType==9);if(vSelectorMethod.query){sQuery=vSelectorMethod.query}vSelectorMethod=vSelectorMethod.method;if(nParentNodeType!==9&&sTagName!="HTML"){if(nParentNodeType===11){oParent=oParent.cloneNode(true);_clone=_div.cloneNode(true);_clone.appendChild(oParent);oParent=_clone;_clone=null}if(!vSelectorMethod){bUseQueryId=true;queryid=_addQueryId(oParent,sQueryAttrName);sQuery=_commaRevise(queryid+" "+sQuery,", "+queryid+" ")}if((_parent=oParent.parentNode)||sTagName==="BODY"||jindo.$Element._contain((oParent.ownerDocument||oParent.document).body,oParent)){if(!vSelectorMethod){oOldParent=oParent;oParent=_parent}}else{if(!vSelectorMethod){_clone=_div.cloneNode(true);oOldParent=oParent;_clone.appendChild(oOldParent);oParent=_clone}}}else{oParent=(oParent.ownerDocument||oParent.document||oParent);if(_startCombinator(sQuery)){return[]}}if(oOptions&&oOptions.single){if(vSelectorMethod){aRet=oParent[vSelectorMethod](sQuery);aRet=[vSelectorMethod=="getElementById"?aRet:aRet[0]]}else{aRet=[oParent.querySelector(sQuery)]}}else{if(vSelectorMethod){aRet=oParent[vSelectorMethod](sQuery);if(vSelectorMethod=="getElementById"){aRet=aRet?[aRet]:[]}}else{aRet=oParent.querySelectorAll(sQuery)}aRet=jindo._p_._toArray(aRet)}}catch(e){aRet=old_cssquery(sQuery,oParent,oOptions)}if(bUseQueryId){oOldParent.removeAttribute(sQueryAttrName);_clone=null}return aRet}}else{cssquery=old_cssquery}cssquery.test=function(oEl,sQuery){clearKeys();try{var oArgs=g_checkVarType(arguments,{"4ele":["oEl:Element+","sQuery:String+"],"4doc":["oEl:Document+","sQuery:String+"]},"<static> cssquery#test");eEl=oArgs.oEl;sQuery=oArgs.sQuery}catch(e){return false}var aFunc=parseTestQuery(sQuery);for(var i=0,nLen=aFunc.length;i<nLen;i++){if(aFunc[i](oEl)){return true}}return false};cssquery.useCache=function(bFlag){if(bFlag!==undefined){bUseResultCache=bFlag;cssquery.clearCache()}return bUseResultCache};cssquery.clearCache=function(){oResultCache={}};cssquery.getSingle=function(sQuery,oParent,oOptions){oOptions=oOptions&&oOptions.$value?oOptions.$value():oOptions;return cssquery(sQuery,oParent,{single:true,oneTimeOffCache:oOptions?(!!oOptions.oneTimeOffCache):false})[0]||null};cssquery.xpath=function(sXPath,oParent){sXPath=sXPath&&sXPath.$value?sXPath.$value():sXPath;sXPath=sXPath.replace(/\/(\w+)(\[([0-9]+)\])?/g,function(_1,sTag,_2,sTh){sTh=sTh||"1";return">"+sTag+":nth-of-type("+sTh+")"});return old_cssquery(sXPath,oParent)};cssquery.debug=function(fpCallback,nRepeat){var oArgs=g_checkVarType(arguments,{"4fun":["fpCallback:Function+"],"4fun2":["fpCallback:Function+","nRepeat:Numeric"]},"<static> cssquery#debug");debugOption.callback=oArgs.fpCallback;debugOption.repeat=oArgs.nRepeat||1};cssquery.safeHTML=function(bFlag){if(arguments.length>0){safeHTML=bFlag&&jindo._p_._JINDO_IS_IE}return safeHTML||!jindo._p_._JINDO_IS_IE};cssquery.version=sVersion;cssquery.release=function(){if(jindo._p_._JINDO_IS_IE){delete validUID;validUID={};if(bUseResultCache){cssquery.clearCache()}}};cssquery._getCacheInfo=function(){return{uidCache:validUID,eleCache:oResultCache}};cssquery._resetUID=function(){UID=0};cssquery.extreme=function(bExtreme){if(arguments.length==0){bExtreme=true}bExtremeMode=bExtreme};return cssquery})();jindo.$Agent=function(){var cl=arguments.callee;var cc=cl._cached;if(cc){return cc}if(!(this instanceof cl)){return new cl}if(!cc){cl._cached=this}this._navigator=navigator;this._dm=document.documentMode};jindo.$Agent.prototype.navigator=function(){var info={},ver=-1,nativeVersion=-1,u=this._navigator.userAgent,v=this._navigator.vendor||"",dm=this._dm;function f(s,h){return((h||"").indexOf(s)>-1)}info.getName=function(){var name="";for(var x in info){if(x!=="mobile"&&typeof info[x]=="boolean"&&info[x]&&info.hasOwnProperty(x)){name=x}}return name};info.webkit=f("WebKit",u);info.opera=(window.opera!==undefined)||f("Opera",u)||f("OPR",u);info.ie=!info.opera&&(f("MSIE",u)||f("Trident",u));info.chrome=info.webkit&&!info.opera&&f("Chrome",u)||f("CriOS",u);info.safari=info.webkit&&!info.chrome&&!info.opera&&f("Apple",v);info.firefox=f("Firefox",u);info.mozilla=f("Gecko",u)&&!info.safari&&!info.chrome&&!info.firefox&&!info.ie;info.camino=f("Camino",v);info.netscape=f("Netscape",u);info.omniweb=f("OmniWeb",u);info.icab=f("iCab",v);info.konqueror=f("KDE",v);info.mobile=(f("Mobile",u)||f("Android",u)||f("Nokia",u)||f("webOS",u)||f("Opera Mini",u)||f("BlackBerry",u)||(f("Windows",u)&&f("PPC",u))||f("Smartphone",u)||f("IEMobile",u))&&!f("iPad",u);info.msafari=((!f("IEMobile",u)&&f("Mobile",u))||(f("iPad",u)&&f("Safari",u)))&&!info.chrome&&!info.opera&&!info.firefox;info.mopera=f("Opera Mini",u);info.mie=f("PPC",u)||f("Smartphone",u)||f("IEMobile",u);try{if(info.ie){if(dm>0){ver=dm;if(u.match(/(?:Trident)\/([\d.]+)/)){var nTridentNum=parseFloat(RegExp.$1,10);if(nTridentNum>3){nativeVersion=nTridentNum+4}}else{nativeVersion=ver}}else{nativeVersion=ver=u.match(/(?:MSIE) ([\d.]+)/)[1]}}else{if(info.safari||info.msafari){ver=parseFloat(u.match(/Safari\/([\d.]+)/)[1]);if(ver==100){ver=1.1}else{if(u.match(/Version\/([\d.]+)/)){ver=RegExp.$1}else{ver=[1,1.2,-1,1.3,2,3][Math.floor(ver/100)]}}}else{if(info.mopera){ver=u.match(/(?:Opera\sMini)\/([\d.]+)/)[1]}else{if(info.opera){ver=u.match(/(?:Version|OPR|Opera)[\/\s]?([\d.]+)(?!.*Version)/)[1]}else{if(info.firefox||info.omniweb){ver=u.match(/(?:Firefox|OmniWeb)\/([\d.]+)/)[1]}else{if(info.mozilla){ver=u.match(/rv:([\d.]+)/)[1]}else{if(info.icab){ver=u.match(/iCab[ \/]([\d.]+)/)[1]}else{if(info.chrome){ver=u.match(/(?:Chrome|CriOS)[ \/]([\d.]+)/)[1]}}}}}}}}info.version=parseFloat(ver);info.nativeVersion=parseFloat(nativeVersion);if(isNaN(info.version)){info.version=-1}}catch(e){info.version=-1}this.navigator=function(){return info};return info};jindo.$Agent.prototype.os=function(){var info={},u=this._navigator.userAgent,p=this._navigator.platform,f=function(s,h){return(h.indexOf(s)>-1)},aMatchResult=null;info.getName=function(){var name="";for(x in info){if(info[x]===true&&info.hasOwnProperty(x)){name=x}}return name};info.win=f("Win",p);info.mac=f("Mac",p);info.linux=f("Linux",p);info.win2000=info.win&&(f("NT 5.0",u)||f("Windows 2000",u));info.winxp=info.win&&f("NT 5.1",u);info.xpsp2=info.winxp&&f("SV1",u);info.vista=info.win&&f("NT 6.0",u);info.win7=info.win&&f("NT 6.1",u);info.win8=info.win&&f("NT 6.2",u);info.ipad=f("iPad",u);info.iphone=f("iPhone",u)&&!info.ipad;info.android=f("Android",u);info.nokia=f("Nokia",u);info.webos=f("webOS",u);info.blackberry=f("BlackBerry",u);info.mwin=f("PPC",u)||f("Smartphone",u)||f("IEMobile",u)||f("Windows Phone",u);info.ios=info.ipad||info.iphone;info.symbianos=f("SymbianOS",u);info.version=null;if(info.win){aMatchResult=u.match(/Windows NT ([\d|\.]+)/);if(aMatchResult!=null&&aMatchResult[1]!=undefined){info.version=aMatchResult[1]}}else{if(info.mac){aMatchResult=u.match(/Mac OS X ([\d|_]+)/);if(aMatchResult!=null&&aMatchResult[1]!=undefined){info.version=String(aMatchResult[1]).split("_").join(".")}}else{if(info.android){aMatchResult=u.match(/Android ([\d|\.]+)/);if(aMatchResult!=null&&aMatchResult[1]!=undefined){info.version=aMatchResult[1]}}else{if(info.ios){aMatchResult=u.match(/(iPhone )?OS ([\d|_]+)/);if(aMatchResult!=null&&aMatchResult[2]!=undefined){info.version=String(aMatchResult[2]).split("_").join(".")}}else{if(info.blackberry){aMatchResult=u.match(/Version\/([\d|\.]+)/);if(aMatchResult==null){aMatchResult=u.match(/BlackBerry\s?\d{4}\/([\d|\.]+)/)}if(aMatchResult!=null&&aMatchResult[1]!=undefined){info.version=aMatchResult[1]}}else{if(info.symbianos){aMatchResult=u.match(/SymbianOS\/(\d+.\w+)/);if(aMatchResult!=null&&aMatchResult[1]!=undefined){info.version=aMatchResult[1]}}else{if(info.webos){aMatchResult=u.match(/webOS\/([\d|\.]+)/);if(aMatchResult!=null&&aMatchResult[1]!=undefined){info.version=aMatchResult[1]}}else{if(info.mwin){aMatchResult=u.match(/Windows CE ([\d|\.]+)/);if(aMatchResult!=null&&aMatchResult[1]!=undefined){info.version=aMatchResult[1]}if(!info.version&&(aMatchResult=u.match(/Windows Phone (OS )?([\d|\.]+)/))){info.version=aMatchResult[2]}}}}}}}}}this.os=function(){return info};return info};jindo.$Agent.prototype.flash=function(){var info={};var p=this._navigator.plugins;var m=this._navigator.mimeTypes;var f=null;info.installed=false;info.version=-1;if(!jindo.$Jindo.isUndefined(p)&&p.length){f=p["Shockwave Flash"];if(f){info.installed=true;if(f.description){info.version=parseFloat(f.description.match(/[0-9.]+/)[0])}}if(p["Shockwave Flash 2.0"]){info.installed=true;info.version=2}}else{if(!jindo.$Jindo.isUndefined(m)&&m.length){f=m["application/x-shockwave-flash"];info.installed=(f&&f.enabledPlugin)}else{try{info.version=parseFloat(new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").match(/(.\d?),/)[1]);info.installed=true}catch(e){}}}this.flash=function(){return info};this.info=this.flash;return info};jindo.$Agent.prototype.silverlight=function(){var info=new Object;var p=this._navigator.plugins;var s=null;info.installed=false;info.version=-1;if(!jindo.$Jindo.isUndefined(p)&&p.length){s=p["Silverlight Plug-In"];if(s){info.installed=true;info.version=parseInt(s.description.split(".")[0],10);if(s.description=="1.0.30226.2"){info.version=2}}}else{try{s=new ActiveXObject("AgControl.AgControl");info.installed=true;if(s.isVersionSupported("3.0")){info.version=3}else{if(s.isVersionSupported("2.0")){info.version=2}else{if(s.isVersionSupported("1.0")){info.version=1}}}}catch(e){}}this.silverlight=function(){return info};return info};jindo.$A=function(array){var cl=arguments.callee;if(array instanceof cl){return array}if(!(this instanceof cl)){try{jindo.$Jindo._maxWarn(arguments.length,1,"$A");return new cl(array)}catch(e){if(e instanceof TypeError){return null}throw e}}var oArgs=g_checkVarType(arguments,{"4voi":[],"4arr":["aPram:Array+"],"4nul":["oNull:Null"],"4und":["oUndefined:Undefined"],arrt:["aPram:ArrayStyle"]},"$A");if(oArgs==null){array=[]}switch(oArgs+""){case"arrt":case"4arr":array=oArgs.aPram;break;case"4nul":case"4und":case"4voi":array=[]}this._array=[];for(var i=0;i<array.length;i++){this._array[this._array.length]=array[i]}};jindo.$A.checkVarTypeObj={"4fun":["fCallback:Function+"],"4thi":["fCallback:Function+","oThis:Variant"]};jindo.$A.prototype.toString=function(){return this._array.toString()};jindo.$A.prototype.get=function(nIndex){g_checkVarType(arguments,{"4num":["nIndex:Numeric"]},"$A#get");return this._array[nIndex]};jindo.$A.prototype.set=function(nIndex,vValue){g_checkVarType(arguments,{"4num":["nIndex:Numeric","vValue:Variant"]},"$A#set");this._array[nIndex]=vValue;return this};jindo.$A.prototype.length=function(nLen,oValue){var oArgs=g_checkVarType(arguments,{"4num":[jindo.$Jindo._F("nLen:Numeric")],sv:["nLen:Numeric","vValue:Variant"],"4voi":[]},"$A#length");switch(oArgs+""){case"4num":this._array.length=oArgs.nLen;return this;case"sv":var l=this._array.length;this._array.length=oArgs.nLen;for(var i=l;i<nLen;i++){this._array[i]=oArgs.vValue}return this;case"4voi":return this._array.length}};jindo.$A.prototype.has=function(oValue){return(this.indexOf(oValue)>-1)};jindo.$A.prototype.indexOf=function(oValue){if(this._array.indexOf){jindo.$A.prototype.indexOf=function(oValue){return this._array.indexOf(oValue)}}else{jindo.$A.prototype.indexOf=function(oValue){for(var i=0;i<this._array.length;i++){if(this._array[i]==oValue){return i}}return -1}}return this.indexOf(oValue)};jindo.$A.prototype.$value=function(){return this._array};jindo.$A.prototype.push=function(oValue1){return this._array.push.apply(this._array,jindo._p_._toArray(arguments))};jindo.$A.prototype.pop=function(){return this._array.pop()};jindo.$A.prototype.shift=function(){return this._array.shift()};jindo.$A.prototype.unshift=function(oValue1){this._array.unshift.apply(this._array,jindo._p_._toArray(arguments));return this._array.length};jindo.$A.prototype.forEach=function(fCallback,oThis){function forEachBody(fpEach){return function(fCallback,oThis){var oArgs=g_checkVarType(arguments,jindo.$A.checkVarTypeObj,"$A#forEach");var that=this;function f(v,i,a){try{fCallback.apply(oThis||that,jindo._p_._toArray(arguments))}catch(e){if(!(e instanceof that.constructor.Continue)){throw e}}}fpEach(this,f);return this}}if(this._array.forEach){jindo.$A.prototype.forEach=forEachBody(function(scope,fp){try{scope._array.forEach(fp)}catch(e){if(!(e instanceof scope.constructor.Break)){throw e}}})}else{jindo.$A.prototype.forEach=forEachBody(function(scope,fp){var arr=scope._array;for(var i=0,l=arr.length;i<l;i++){try{fp(arr[i],i,arr)}catch(e){if(e instanceof scope.constructor.Break){break}throw e}}})}return this.forEach.apply(this,jindo._p_._toArray(arguments))};jindo.$A.prototype.slice=function(nStart,nEnd){var a=this._array.slice.call(this._array,nStart,nEnd);return jindo.$A(a)};jindo.$A.prototype.splice=function(nIndex,nHowMany){var a=this._array.splice.apply(this._array,jindo._p_._toArray(arguments));return jindo.$A(a)};jindo.$A.prototype.shuffle=function(){this._array.sort(function(a,b){return Math.random()>Math.random()?1:-1});return this};jindo.$A.prototype.reverse=function(){this._array.reverse();return this};jindo.$A.prototype.empty=function(){this._array.length=0;return this};jindo.$A.prototype.concat=function(vValue){var aRes=[];if(!arguments.length){return this}else{aRes=this._array.concat();for(var i=0,vVal;vVal=arguments[i];i++){aRes=aRes.concat(vVal instanceof jindo.$A?vVal._array:vVal)}return jindo.$A(aRes)}};jindo.$A.prototype.sort=function(fpSort){var oArgs=g_checkVarType(arguments,{"void":[],"4fp":["fpSort:Function+"]},"$A#sort");if(fpSort){this._array.sort(jindo.$Fn(oArgs.fpSort,this).bind())}else{this._array.sort()}return this};jindo.$A.Break=jindo.$Jindo.Break;jindo.$A.Continue=jindo.$Jindo.Continue;jindo.$A.prototype.map=function(fCallback,oThis){function mapBody(fpEach){return function(fCallback,oThis){var oArgs=g_checkVarType(arguments,jindo.$A.checkVarTypeObj,"$A#map");if(oArgs==null){return this}var returnArr=[];var that=this;function f(v,i,a){try{returnArr.push(fCallback.apply(oThis||that,jindo._p_._toArray(arguments)))}catch(e){if(e instanceof that.constructor.Continue){returnArr.push(v)}else{throw e}}}fpEach(this,f);return jindo.$A(returnArr)}}if(this._array.map){jindo.$A.prototype.map=mapBody(function(scope,fp){scope.forEach(fp)})}else{jindo.$A.prototype.map=mapBody(function(scope,fp){var arr=scope._array;for(var i=0,l=scope._array.length;i<l;i++){try{fp(arr[i],i,arr)}catch(e){if(e instanceof scope.constructor.Break){break}else{throw e}}}})}return this.map.apply(this,jindo._p_._toArray(arguments))};jindo.$A.prototype.filter=function(fCallback,oThis){function filterBody(fpEach){return function(fCallback,oThis){var oArgs=g_checkVarType(arguments,jindo.$A.checkVarTypeObj,"$A#filter");if(oArgs==null){return this}var returnArr=[];var that=this;function f(v,i,a){try{if(fCallback.apply(oThis||that,jindo._p_._toArray(arguments))){returnArr.push(v)}}catch(e){if(!(e instanceof that.constructor.Continue)){throw e}}}fpEach(this,f);return jindo.$A(returnArr)}}if(this._array.filter){jindo.$A.prototype.filter=filterBody(function(scope,fp){try{scope.forEach(fp)}catch(e){if(!(e instanceof scope.constructor.Break)){throw e}}})}else{jindo.$A.prototype.filter=filterBody(function(scope,fp){var arr=scope._array;for(var i=0,l=scope._array.length;i<l;i++){try{fp(arr[i],i,arr)}catch(e){if(e instanceof scope.constructor.Break){break}else{throw e}}}})}return this.filter.apply(this,jindo._p_._toArray(arguments))};jindo.$A.prototype.every=function(fCallback,oThis){var ___checkVarType=g_checkVarType;var ___checkObj=jindo.$A.checkVarTypeObj;if(this._array.every){jindo.$A.prototype.every=function(fCallback,oThis){___checkVarType(arguments,___checkObj,"$A#every");return this._array.every(fCallback,oThis||this)}}else{jindo.$A.prototype.every=function(fCallback,oThis){___checkVarType(arguments,___checkObj,"$A#every");var result=true;var arr=this._array;for(var i=0,l=arr.length;i<l;i++){if(fCallback.call(oThis||this,arr[i],i,arr)===false){result=false;break}}return result}}return this.every.apply(this,jindo._p_._toArray(arguments))};jindo.$A.prototype.some=function(fCallback,oThis){var ___checkVarType=g_checkVarType;var ___checkObj=jindo.$A.checkVarTypeObj;if(this._array.some){jindo.$A.prototype.some=function(fCallback,oThis){___checkVarType(arguments,___checkObj,"$A#some");return this._array.some(fCallback,oThis||this)}}else{jindo.$A.prototype.some=function(fCallback,oThis){___checkVarType(arguments,___checkObj,"$A#some");var result=false;var arr=this._array;for(var i=0,l=arr.length;i<l;i++){if(fCallback.call(oThis||this,arr[i],i,arr)===true){result=true;break}}return result}}return this.some.apply(this,jindo._p_._toArray(arguments))};jindo.$A.prototype.refuse=function(oValue1){var a=jindo.$A(jindo._p_._toArray(arguments));return this.filter(function(v,i){return !(a.indexOf(v)>-1)})};jindo.$A.prototype.unique=function(){var a=this._array,b=[],l=a.length;var i,j;for(i=0;i<l;i++){for(j=0;j<b.length;j++){if(a[i]==b[j]){break}}if(j>=b.length){b[j]=a[i]}}this._array=b;return this};jindo.$H=function(hashObject){var cl=arguments.callee;if(hashObject instanceof cl){return hashObject}if(!(this instanceof cl)){try{jindo.$Jindo._maxWarn(arguments.length,1,"$H");return new cl(hashObject||{})}catch(e){if(e instanceof TypeError){return null}throw e}}var oArgs=g_checkVarType(arguments,{"4obj":["oObj:Hash+"],"4vod":[]},"$H");this._table={};for(var k in hashObject){if(hashObject.hasOwnProperty(k)){this._table[k]=hashObject[k]}}};jindo.$H.prototype.$value=function(){return this._table};jindo.$H.prototype.$=function(key,value){var oArgs=g_checkVarType(arguments,{s4var:[jindo.$Jindo._F("key:String+"),"value:Variant"],s4var2:["key:Numeric","value:Variant"],g4str:["key:String+"],s4obj:["oObj:Hash+"],g4num:["key:Numeric"]},"$H#$");switch(oArgs+""){case"s4var":case"s4var2":this._table[key]=value;return this;case"s4obj":var obj=oArgs.oObj;for(var i in obj){if(obj.hasOwnProperty(i)){this._table[i]=obj[i]}}return this;default:return this._table[key]}};jindo.$H.prototype.length=function(){var index=0;var sortedIndex=this["__jindo_sorted_index"];if(sortedIndex){return sortedIndex.length}else{for(var k in this._table){if(this._table.hasOwnProperty(k)){if(Object.prototype[k]!==undefined&&Object.prototype[k]===this._table[k]){continue}index++}}}return index};jindo.$H.prototype.forEach=function(callback,scopeObject){var oArgs=g_checkVarType(arguments,{"4fun":["callback:Function+"],"4obj":["callback:Function+","thisObject:Variant"]},"$H#forEach");var t=this._table;var h=this.constructor;var sortedIndex=this["__jindo_sorted_index"];if(sortedIndex){for(var i=0,l=sortedIndex.length;i<l;i++){try{var k=sortedIndex[i];callback.call(scopeObject||this,t[k],k,t)}catch(e){if(e instanceof h.Break){break}if(e instanceof h.Continue){continue}throw e}}}else{for(var k in t){if(t.hasOwnProperty(k)){if(!t.propertyIsEnumerable(k)){continue}try{callback.call(scopeObject||this,t[k],k,t)}catch(e){if(e instanceof h.Break){break}if(e instanceof h.Continue){continue}throw e}}}}return this};jindo.$H.prototype.filter=function(callback,thisObject){var oArgs=g_checkVarType(arguments,{"4fun":["callback:Function+"],"4obj":["callback:Function+","thisObject:Variant"]},"$H#filter");var h=jindo.$H();var t=this._table;var hCon=this.constructor;for(var k in t){if(t.hasOwnProperty(k)){if(!t.propertyIsEnumerable(k)){continue}try{if(callback.call(thisObject||this,t[k],k,t)){h.add(k,t[k])}}catch(e){if(e instanceof hCon.Break){break}if(e instanceof hCon.Continue){continue}throw e}}}return h};jindo.$H.prototype.map=function(callback,thisObject){var oArgs=g_checkVarType(arguments,{"4fun":["callback:Function+"],"4obj":["callback:Function+","thisObject:Variant"]},"$H#map");var h=jindo.$H();var t=this._table;var hCon=this.constructor;for(var k in t){if(t.hasOwnProperty(k)){if(!t.propertyIsEnumerable(k)){continue}try{h.add(k,callback.call(thisObject||this,t[k],k,t))}catch(e){if(e instanceof hCon.Break){break}if(e instanceof hCon.Continue){h.add(k,t[k])}else{throw e}}}}return h};jindo.$H.prototype.add=function(key,value){var oArgs=g_checkVarType(arguments,{"4str":["key:String+","value:Variant"],"4num":["key:Numeric","value:Variant"]},"$H#add");var sortedIndex=this["__jindo_sorted_index"];if(sortedIndex&&this._table[key]==undefined){this["__jindo_sorted_index"].push(key)}this._table[key]=value;return this};jindo.$H.prototype.remove=function(key){var oArgs=g_checkVarType(arguments,{"4str":["key:String+"],"4num":["key:Numeric"]},"$H#remove");if(this._table[key]===undefined){return null}var val=this._table[key];delete this._table[key];var sortedIndex=this["__jindo_sorted_index"];if(sortedIndex){var newSortedIndex=[];for(var i=0,l=sortedIndex.length;i<l;i++){if(sortedIndex[i]!=key){newSortedIndex.push(sortedIndex[i])}}this["__jindo_sorted_index"]=newSortedIndex}return val};jindo.$H.prototype.search=function(value){var oArgs=g_checkVarType(arguments,{"4str":["value:Variant"]},"$H#search");var result=false;var t=this._table;for(var k in t){if(t.hasOwnProperty(k)){if(!t.propertyIsEnumerable(k)){continue}var v=t[k];if(v===value){result=k;break}}}return result};jindo.$H.prototype.hasKey=function(key){var oArgs=g_checkVarType(arguments,{"4str":["key:String+"],"4num":["key:Numeric"]},"$H#hasKey");return this._table[key]!==undefined};jindo.$H.prototype.hasValue=function(value){var oArgs=g_checkVarType(arguments,{"4str":["value:Variant"]},"$H#hasValue");return(this.search(value)!==false)};jindo._p_.defaultSort=function(oArgs,that,type){var aSorted=[];var fpSort=oArgs.fpSort;for(var k in that._table){if(that._table.hasOwnProperty(k)){(function(k,v){aSorted.push({key:k,val:v})})(k,that._table[k])}}if(oArgs+""==="vo"){fpSort=function(a,b){return a===b?0:a>b?1:-1}}aSorted.sort(function(beforeVal,afterVal){return fpSort.call(that,beforeVal[type],afterVal[type])});var sortedKey=[];for(var i=0,l=aSorted.length;i<l;i++){sortedKey.push(aSorted[i].key)}return sortedKey};jindo.$H.prototype.sort=function(fpSort){var oArgs=g_checkVarType(arguments,{vo:[],"4fp":["fpSort:Function+"]},"$H#sort");this["__jindo_sorted_index"]=jindo._p_.defaultSort(oArgs,this,"val");return this};jindo.$H.prototype.ksort=function(fpSort){var oArgs=g_checkVarType(arguments,{vo:[],"4fp":["fpSort:Function+"]},"$H#ksort");this["__jindo_sorted_index"]=jindo._p_.defaultSort(oArgs,this,"key");return this};jindo.$H.prototype.keys=function(){var keys=this["__jindo_sorted_index"];if(!keys){keys=[];for(var k in this._table){if(this._table.hasOwnProperty(k)){keys.push(k)}}}return keys};jindo.$H.prototype.values=function(){var values=[];for(var k in this._table){if(this._table.hasOwnProperty(k)){values[values.length]=this._table[k]}}return values};jindo.$H.prototype.toQueryString=function(){var buf=[],val=null,idx=0;for(var k in this._table){if(this._table.hasOwnProperty(k)){val=this._table[k];if(jindo.$Jindo.isArray(val)){for(i=0;i<val.length;i++){buf[buf.length]=encodeURIComponent(k)+"[]="+encodeURIComponent(val[i]+"")}}else{buf[buf.length]=encodeURIComponent(k)+"="+encodeURIComponent(this._table[k]+"")}}}return buf.join("&")};jindo.$H.prototype.empty=function(){this._table={};delete this["__jindo_sorted_index"];return this};jindo.$H.Break=jindo.$Jindo.Break;jindo.$H.Continue=jindo.$Jindo.Continue;jindo.$Fn=function(func,thisObject){var cl=arguments.callee;if(func instanceof cl){return func}if(!(this instanceof cl)){try{jindo.$Jindo._maxWarn(arguments.length,2,"$Fn");return new cl(func,thisObject)}catch(e){if(e instanceof TypeError){return null}throw e}}var oArgs=g_checkVarType(arguments,{"4fun":["func:Function+"],"4fun2":["func:Function+","thisObject:Variant"],"4str":["func:String+","thisObject:String+"]},"$Fn");this._tmpElm=null;this._key=null;switch(oArgs+""){case"4str":this._func=eval("false||function("+func+"){"+thisObject+"}");break;case"4fun":case"4fun2":this._func=func;this._this=thisObject}};jindo.$Fn._commonPram=function(oPram,sMethod){return g_checkVarType(oPram,{"4ele":["eElement:Element+","sEvent:String+"],"4ele2":["eElement:Element+","sEvent:String+","bUseCapture:Boolean"],"4str":["eElement:String+","sEvent:String+"],"4str2":["eElement:String+","sEvent:String+","bUseCapture:Boolean"],"4arr":["aElement:Array+","sEvent:String+"],"4arr2":["aElement:Array+","sEvent:String+","bUseCapture:Boolean"],"4doc":["eElement:Document+","sEvent:String+"],"4win":["eElement:Window+","sEvent:String+"],"4doc2":["eElement:Document+","sEvent:String+","bUseCapture:Boolean"],"4win2":["eElement:Window+","sEvent:String+","bUseCapture:Boolean"]},sMethod)};jindo.$Fn.prototype.$value=function(){return this._func};jindo.$Fn.prototype.bind=function(){var a=jindo._p_._toArray(arguments);var f=this._func;var t=this._this||this;var b;if(f.bind){a.unshift(t);b=Function.prototype.bind.apply(f,a)}else{b=function(){var args=jindo._p_._toArray(arguments);if(a.length){args=a.concat(args)}return f.apply(t,args)}}return b};jindo.$Fn.prototype.attach=function(oElement,sEvent,bUseCapture){var oArgs=jindo.$Fn._commonPram(arguments,"$Fn#attach");var fn=null,l,ev=sEvent,el=oElement,ua=jindo._p_._j_ag;if(bUseCapture!==true){bUseCapture=false}this._bUseCapture=bUseCapture;switch(oArgs+""){case"4arr":case"4arr2":var el=oArgs.aElement;var ev=oArgs.sEvent;for(var i=0,l=el.length;i<l;i++){this.attach(el[i],ev,!!bUseCapture)}return this}fn=this._bind=this._bind?this._bind:this.bind();jindo.$Element(el).attach(ev,fn);return this};jindo.$Fn.prototype.detach=function(oElement,sEvent,bUseCapture){var oArgs=jindo.$Fn._commonPram(arguments,"$Fn#detach");var fn=null,l,el=oElement,ev=sEvent,ua=jindo._p_._j_ag;switch(oArgs+""){case"4arr":case"4arr2":var el=oArgs.aElement;var ev=oArgs.sEvent;for(var i=0,l=el.length;i<l;i++){this.detach(el[i],ev,!!bUseCapture)}return this}fn=this._bind=this._bind?this._bind:this.bind();jindo.$Element(oArgs.eElement).detach(oArgs.sEvent,fn);return this};jindo.$Fn.prototype.delay=function(nSec,args){var oArgs=g_checkVarType(arguments,{"4num":["nSec:Numeric"],"4arr":["nSec:Numeric","args:Array+"]},"$Fn#delay");switch(oArgs+""){case"4num":args=args||[];break;case"4arr":args=oArgs.args}this._delayKey=setTimeout(this.bind.apply(this,args),nSec*1000);return this};jindo.$Fn.prototype.setInterval=function(nSec,args){var oArgs=g_checkVarType(arguments,{"4num":["nSec:Numeric"],"4arr":["nSec:Numeric","args:Array+"]},"$Fn#setInterval");switch(oArgs+""){case"4num":args=args||[];break;case"4arr":args=oArgs.args}this._repeatKey=setInterval(this.bind.apply(this,args),nSec*1000);return this};jindo.$Fn.prototype.repeat=jindo.$Fn.prototype.setInterval;jindo.$Fn.prototype.stopDelay=function(){if(this._delayKey!==undefined){window.clearTimeout(this._delayKey);delete this._delayKey}return this};jindo.$Fn.prototype.stopRepeat=function(){if(this._repeatKey!==undefined){window.clearInterval(this._repeatKey);delete this._repeatKey}return this};jindo.$Event=(function(isMobile){if(isMobile){return function(e){var cl=arguments.callee;if(e instanceof cl){return e}if(!(this instanceof cl)){return new cl(e)}this._event=this._posEvent=e;this._globalEvent=window.event;this.type=e.type.toLowerCase();if(this.type=="dommousescroll"){this.type="mousewheel"}else{if(this.type=="domcontentloaded"){this.type="domready"}}this.realType=this.type;this.isTouch=false;if(this.type.indexOf("touch")>-1){this._posEvent=e.changedTouches[0];this.isTouch=true}this.canceled=false;this.element=e.target||e.srcElement;this.srcElement=this.element;this.currentElement=e.currentTarget;this.relatedElement=null;this.delegatedElement=null;if(!jindo.$Jindo.isUndefined(e.relatedTarget)){this.relatedElement=e.relatedTarget}else{if(e.fromElement&&e.toElement){this.relatedElement=e[(this.type=="mouseout")?"toElement":"fromElement"]}}}}else{return function(e){var cl=arguments.callee;if(e instanceof cl){return e}if(!(this instanceof cl)){return new cl(e)}if(e===undefined){e=window.event}if(e===window.event&&document.createEventObject){e=document.createEventObject(e)}this.isTouch=false;this._event=this._posEvent=e;this._globalEvent=window.event;this.type=e.type.toLowerCase();if(this.type=="dommousescroll"){this.type="mousewheel"}else{if(this.type=="domcontentloaded"){this.type="domready"}}this.realType=this.type;this.canceled=false;this.element=e.target||e.srcElement;this.srcElement=this.element;this.currentElement=e.currentTarget;this.relatedElement=null;this.delegatedElement=null;if(e.relatedTarget!==undefined){this.relatedElement=e.relatedTarget}else{if(e.fromElement&&e.toElement){this.relatedElement=e[(this.type=="mouseout")?"toElement":"fromElement"]}}}}})(jindo._p_._JINDO_IS_MO);jindo._p_.customEvent={};jindo._p_.customEventStore={};jindo._p_.normalCustomEvent={};jindo._p_.hasCustomEvent=function(sName){return !!(jindo._p_.getCustomEvent(sName)||jindo._p_.normalCustomEvent[sName])};jindo._p_.getCustomEvent=function(sName){return jindo._p_.customEvent[sName]};jindo._p_.addCustomEventListener=function(eEle,sElementId,sEvent,vFilter,oCustomInstance){if(!jindo._p_.customEventStore[sElementId]){jindo._p_.customEventStore[sElementId]={};jindo._p_.customEventStore[sElementId].ele=eEle}if(!jindo._p_.customEventStore[sElementId][sEvent]){jindo._p_.customEventStore[sElementId][sEvent]={}}if(!jindo._p_.customEventStore[sElementId][sEvent][vFilter]){jindo._p_.customEventStore[sElementId][sEvent][vFilter]={custom:oCustomInstance}}};jindo._p_.setCustomEventListener=function(sElementId,sEvent,vFilter,aNative,aWrap){jindo._p_.customEventStore[sElementId][sEvent][vFilter].real_listener=aNative;jindo._p_.customEventStore[sElementId][sEvent][vFilter].wrap_listener=aWrap};jindo._p_.getCustomEventListener=function(sElementId,sEvent,vFilter){var store=jindo._p_.customEventStore[sElementId];if(store&&store[sEvent]&&store[sEvent][vFilter]){return store[sEvent][vFilter]}return{}};jindo._p_.getNormalEventListener=function(sElementId,sEvent,vFilter){var store=jindo._p_.normalCustomEvent[sEvent];if(store&&store[sElementId]&&store[sElementId][vFilter]){return store[sElementId][vFilter]}return{}};jindo._p_.hasCustomEventListener=function(sElementId,sEvent,vFilter){var store=jindo._p_.customEventStore[sElementId];if(store&&store[sEvent]&&store[sEvent][vFilter]){return true}return false};jindo.$Event.customEvent=function(sName,oEvent){var oArgs=g_checkVarType(arguments,{s4str:["sName:String+"],s4obj:["sName:String+","oEvent:Hash+"]},"$Event.customEvent");switch(oArgs+""){case"s4str":if(jindo._p_.hasCustomEvent(sName)){throw new jindo.$Error("The Custom Event Name have to unique.")}else{jindo._p_.normalCustomEvent[sName]={}}return this;case"s4obj":if(jindo._p_.hasCustomEvent(sName)){throw new jindo.$Error("The Custom Event Name have to unique.")}else{jindo._p_.normalCustomEvent[sName]={};jindo._p_.customEvent[sName]=function(){this.name=sName;this.real_listener=[];this.wrap_listener=[]};var _proto=jindo._p_.customEvent[sName].prototype;_proto.events=[];for(var i in oEvent){_proto[i]=oEvent[i];_proto.events.push(i)}jindo._p_.customEvent[sName].prototype.fireEvent=function(oCustomEvent){for(var i=0,l=this.wrap_listener.length;i<l;i++){this.wrap_listener[i](oCustomEvent)}}}return this}};jindo.$Event.prototype.mouse=function(bIsScrollbar){g_checkVarType(arguments,{voi:[],bol:["bIsScrollbar:Boolean"]});var e=this._event;var ele=this.element;var delta=0;var left=false,mid=false,right=false;var left=e.which?e.button==0:!!(e.button&1);var mid=e.which?e.button==1:!!(e.button&4);var right=e.which?e.button==2:!!(e.button&2);var ret={};if(e.wheelDelta){delta=e.wheelDelta/120}else{if(e.detail){delta=-e.detail/3}}var scrollbar;if(bIsScrollbar){scrollbar=_event_isScroll(ele,e)}ret={delta:delta,left:left,middle:mid,right:right,scrollbar:scrollbar};this.mouse=function(bIsScrollbar){if(bIsScrollbar){ret.scrollbar=_event_isScroll(this.element,this._event);this.mouse=function(){return ret}}return ret};return ret};function _event_getScrollbarSize(){var oScrollbarSize={x:0,y:0};var elDummy=jindo.$(['<div style="',["overflow:scroll","width:100px","height:100px","position:absolute","left:-1000px","border:0","margin:0","padding:0"].join(" !important;"),' !important;">'].join(""));document.body.insertBefore(elDummy,document.body.firstChild);oScrollbarSize={x:elDummy.offsetWidth-elDummy.scrollWidth,y:elDummy.offsetHeight-elDummy.scrollHeight};document.body.removeChild(elDummy);elDummy=null;_event_getScrollbarSize=function(){return oScrollbarSize};return oScrollbarSize}function _ie_check_scroll(ele,e){var iePattern=jindo._p_._j_ag.match(/(?:MSIE) ([0-9.]+)/);if(document.body.componentFromPoint&&iePattern&&parseInt(iePattern[1],10)==8){_ie_check_scroll=function(ele,e){return !/HTMLGenericElement/.test(ele+"")&&/(scrollbar|outside)/.test(ele.componentFromPoint(e.clientX,e.clientY))&&ele.clientHeight!==ele.scrollHeight}}else{_ie_check_scroll=function(ele,e){return/(scrollbar|outside)/.test(ele.componentFromPoint(e.clientX,e.clientY))}}return _ie_check_scroll(ele,e)}function _event_isScroll(ele,e){if(ele.componentFromPoint){return _ie_check_scroll(ele,e)}if(jindo._p_._JINDO_IS_FF){try{var name=e.originalTarget.localName;return(name==="thumb"||name==="slider"||name==="scrollcorner"||name==="scrollbarbutton")}catch(ex){return true}}var sDisplay=jindo.$Element(ele).css("display");if(sDisplay==="inline"){return false}var oPos={x:e.offsetX||e.layerX||0,y:e.offsetY||e.layerY||0};if(jindo._p_._JINDO_IS_WK){oPos.x-=ele.clientLeft;oPos.y-=ele.clientTop}var oScrollbarSize=_event_getScrollbarSize();var oScrollPos={x:[ele.clientWidth,ele.clientWidth+oScrollbarSize.x],y:[ele.clientHeight,ele.clientHeight+oScrollbarSize.y]};return((oScrollPos.x[0]<=oPos.x&&oPos.x<=oScrollPos.x[1])||(oScrollPos.y[0]<=oPos.y&&oPos.y<=oScrollPos.y[1]))}jindo.$Event.prototype.key=function(){var e=this._event;var k=e.keyCode||e.charCode;var ret={keyCode:k,alt:e.altKey,ctrl:e.ctrlKey,meta:e.metaKey,shift:e.shiftKey,up:(k==38),down:(k==40),left:(k==37),right:(k==39),enter:(k==13),esc:(k==27)};this.key=function(){return ret};return ret};jindo.$Event.prototype.pos=function(bGetOffset){g_checkVarType(arguments,{voi:[],bol:["bGetOffset:Boolean"]});var e=this._posEvent;var doc=(this.element.ownerDocument||document);var b=doc.body;var de=doc.documentElement;var pos=[b.scrollLeft||de.scrollLeft,b.scrollTop||de.scrollTop];var ret={clientX:e.clientX,clientY:e.clientY,pageX:"pageX" in e?e.pageX:e.clientX+pos[0]-b.clientLeft,pageY:"pageY" in e?e.pageY:e.clientY+pos[1]-b.clientTop,layerX:"offsetX" in e?e.offsetX:e.layerX-1,layerY:"offsetY" in e?e.offsetY:e.layerY-1};if(bGetOffset&&jindo.$Element){var offset=jindo.$Element(this.element).offset();ret.offsetX=ret.pageX-offset.left;ret.offsetY=ret.pageY-offset.top}return ret};jindo.$Event.prototype.stop=function(nCancel){g_checkVarType(arguments,{voi:[],num:["nCancel:Numeric"]});nCancel=nCancel||jindo.$Event.CANCEL_ALL;var e=(window.event&&window.event==this._globalEvent)?this._globalEvent:this._event;var b=!!(nCancel&jindo.$Event.CANCEL_BUBBLE);var d=!!(nCancel&jindo.$Event.CANCEL_DEFAULT);var type=this.realType;if(b&&(type==="focusin"||type==="focusout")){jindo.$Jindo._warn("The "+type+" event can't stop bubble.")}this.canceled=true;if(d){if(e.preventDefault!==undefined){e.preventDefault()}else{e.returnValue=false}}if(b){if(e.stopPropagation!==undefined){e.stopPropagation()}else{e.cancelBubble=true}}return this};jindo.$Event.prototype.stopDefault=function(){return this.stop(jindo.$Event.CANCEL_DEFAULT)};jindo.$Event.prototype.stopBubble=function(){return this.stop(jindo.$Event.CANCEL_BUBBLE)};jindo.$Event.CANCEL_BUBBLE=1;jindo.$Event.CANCEL_DEFAULT=2;jindo.$Event.CANCEL_ALL=3;jindo.$Event.prototype.$value=function(){return this._event};(function(aType){var sTouches="Touch";for(var i=0,l=aType.length;i<l;i++){jindo.$Event.prototype[aType[i]+sTouches]=(function(sType){return function(nIndex){if(this.isTouch){var oRet=[];var ev=this._event[sType+"es"];var l=ev.length;var e;for(var i=0;i<l;i++){e=ev[i];oRet.push({id:e.identifier,event:this,element:e.target,_posEvent:e,pos:jindo.$Event.prototype.pos})}this[sType]=function(nIndex){var oArgs=g_checkVarType(arguments,{"void":[],"4num":["nIndex:Numeric"]},"$Event#"+sType);if(oArgs+""=="void"){return oRet}return oRet[nIndex]}}else{this[sType]=function(nIndex){throw new jindo.$Error(jindo.$Except.NOT_SUPPORT_METHOD,"$Event#"+sType)}}return this[sType].apply(this,jindo._p_._toArray(arguments))}})(aType[0]+sTouches)}})(["changed","target"]);jindo.$Element=function(el){var cl=arguments.callee;if(el&&el instanceof cl){return el}if(!(this instanceof cl)){try{jindo.$Jindo._maxWarn(arguments.length,1,"$Element");return new cl(el)}catch(e){if(e instanceof TypeError){return null}throw e}}var cache=jindo.$Jindo;var oArgs=cache.checkVarType(arguments,{"4str":["sID:String+"],"4nod":["oEle:Node"],"4doc":["oEle:Document+"],"4win":["oEle:Window+"]},"$Element");switch(oArgs+""){case"4str":el=jindo.$(el);break;default:el=oArgs.oEle}this._element=el;if(this._element!=null){if(this._element.__jindo__id){this._key=this._element.__jindo__id}else{try{this._element.__jindo__id=this._key=jindo._p_._makeRandom()}catch(e){}}this.tag=(this._element.tagName||"").toLowerCase()}else{throw new TypeError("{not_found_element}")}};jindo._p_.NONE_GROUP="_jindo_event_none";jindo._p_.splitEventSelector=function(sEvent){var matches=sEvent.match(/^([a-z_]*)(.*)/i);var eventName=jindo._p_.trim(matches[1]);var selector=jindo._p_.trim(matches[2].replace("@",""));return{type:selector?"delegate":"normal",event:eventName,selector:selector}};jindo._p_._makeRandom=function(){return"e"+new Date().getTime()+parseInt(Math.random()*100000000,10)};jindo._p_.releaseEventHandlerForAllChildren=function(wel){var children=wel._element.all||wel._element.getElementsByTagName("*"),nChildLength=children.length,elChild=null,i;for(i=0;i<nChildLength;i++){elChild=children[i];if(elChild.nodeType==1&&elChild.__jindo__id){jindo.$Element.eventManager.cleanUpUsingKey(elChild.__jindo__id,true)}}children=elChild=null};jindo._p_.canUseClassList=function(){var result="classList" in document.body&&"classList" in document.createElementNS("http://www.w3.org/2000/svg","g");jindo._p_.canUseClassList=function(){return result};return jindo._p_.canUseClassList()};jindo._p_.vendorPrefixObj={"-moz":"Moz","-ms":"ms","-o":"O","-webkit":"webkit"};jindo._p_.cssNameToJavaScriptName=function(sName){if(/^(\-(?:moz|ms|o|webkit))/.test(sName)){var vandorPerfix=RegExp.$1;sName=sName.replace(vandorPerfix,jindo._p_.vendorPrefixObj[vandorPerfix])}return sName.replace(/(:?-(\w))/g,function(_,_,m){return m.toUpperCase()})};jindo._p_.getStyleIncludeVendorPrefix=function(_test){var styles=["Transition","Transform","Animation","Perspective"];var vendors=["webkit","-","Moz","O","ms"];var style="";var vendor="";var vendorStyle="";var result={};var styleObj=_test||document.body.style;for(var i=0,l=styles.length;i<l;i++){style=styles[i];for(var j=0,m=vendors.length;j<m;j++){vendor=vendors[j];vendorStyle=vendor!="-"?(vendor+style):style.toLowerCase();if(typeof styleObj[vendorStyle]!=="undefined"){result[style.toLowerCase()]=vendorStyle;break}result[style.toLowerCase()]=false}}if(_test){return result}jindo._p_.getStyleIncludeVendorPrefix=function(){return result};return jindo._p_.getStyleIncludeVendorPrefix()};jindo._p_.getTransformStringForValue=function(_test){var info=jindo._p_.getStyleIncludeVendorPrefix(_test);var transform=info.transform;if(info.transform==="MozTransform"){transform="-moz-transform"}else{if(info.transform==="webkitTransform"){transform="-webkit-transform"}else{if(info.transform==="OTransform"){transform="-o-transform"}else{if(info.transform==="msTransform"){transform="-ms-transform"}}}}if(_test){return transform}jindo._p_.getTransformStringForValue=function(){return transform};return jindo._p_.getTransformStringForValue()};jindo._p_.setOpacity=function(ele,val){ele.offsetHeight;ele.style.opacity=val};jindo.$Element._eventBind=function(oEle,sEvent,fAroundFunc,bUseCapture){if(oEle.addEventListener){if(document.documentMode==9){jindo.$Element._eventBind=function(oEle,sEvent,fAroundFunc,bUseCapture){if(/resize/.test(sEvent)){oEle.attachEvent("on"+sEvent,fAroundFunc)}else{oEle.addEventListener(sEvent,fAroundFunc,!!bUseCapture)}}}else{jindo.$Element._eventBind=function(oEle,sEvent,fAroundFunc,bUseCapture){oEle.addEventListener(sEvent,fAroundFunc,!!bUseCapture)}}}else{jindo.$Element._eventBind=function(oEle,sEvent,fAroundFunc){oEle.attachEvent("on"+sEvent,fAroundFunc)}}jindo.$Element._eventBind(oEle,sEvent,fAroundFunc,bUseCapture)};jindo.$Element._unEventBind=function(oEle,sEvent,fAroundFunc){if(oEle.removeEventListener){if(document.documentMode==9){jindo.$Element._unEventBind=function(oEle,sEvent,fAroundFunc){if(/resize/.test(sEvent)){oEle.detachEvent("on"+sEvent,fAroundFunc)}else{oEle.removeEventListener(sEvent,fAroundFunc,false)}}}else{jindo.$Element._unEventBind=function(oEle,sEvent,fAroundFunc){oEle.removeEventListener(sEvent,fAroundFunc,false)}}}else{jindo.$Element._unEventBind=function(oEle,sEvent,fAroundFunc){oEle.detachEvent("on"+sEvent,fAroundFunc)}}jindo.$Element._unEventBind(oEle,sEvent,fAroundFunc)};jindo.$Element.prototype.$value=function(){return this._element};jindo.$Element.prototype.visible=function(bVisible,sDisplay){var oArgs=g_checkVarType(arguments,{g:[],s4bln:[jindo.$Jindo._F("bVisible:Boolean")],s4str:["bVisible:Boolean","sDisplay:String+"]},"$Element#visible");switch(oArgs+""){case"g":return(this._getCss(this._element,"display")!="none");case"s4bln":this[bVisible?"show":"hide"]();return this;case"s4str":this[bVisible?"show":"hide"](sDisplay);return this}};jindo.$Element.prototype.show=function(sDisplay){var oArgs=g_checkVarType(arguments,{"4voi":[],"4str":["sDisplay:String+"]},"$Element#show");var s=this._element.style;var b="block";var c={p:b,div:b,form:b,h1:b,h2:b,h3:b,h4:b,ol:b,ul:b,fieldset:b,td:"table-cell",th:"table-cell",li:"list-item",table:"table",thead:"table-header-group",tbody:"table-row-group",tfoot:"table-footer-group",tr:"table-row",col:"table-column",colgroup:"table-column-group",caption:"table-caption",dl:b,dt:b,dd:b};try{switch(oArgs+""){case"4voi":var type=c[this.tag];s.display=type||"inline";break;case"4str":s.display=sDisplay}}catch(e){s.display="block"}return this};jindo.$Element.prototype.hide=function(){this._element.style.display="none";return this};jindo.$Element.prototype.toggle=function(sDisplay){var oArgs=g_checkVarType(arguments,{"4voi":[],"4str":["sDisplay:String+"]},"$Element#toggle");this[this._getCss(this._element,"display")=="none"?"show":"hide"].apply(this,arguments);return this};jindo.$Element.prototype.opacity=function(value){var oArgs=g_checkVarType(arguments,{g:[],s:["nOpacity:Numeric"],str:["sOpacity:String"]},"$Element#opacity"),e=this._element,b=(this._getCss(e,"display")!="none"),v;switch(oArgs+""){case"g":if(typeof e.style.opacity!="undefined"&&(v=e.style.opacity).length||(v=this._getCss(e,"opacity"))){v=parseFloat(v);if(isNaN(v)){v=b?1:0}}else{v=typeof e.filters.alpha=="undefined"?(b?100:0):e.filters.alpha.opacity;v=v/100}return v;case"s":value=oArgs.nOpacity;e.style.zoom=1;value=Math.max(Math.min(value,1),0);if(typeof e.style.opacity!="undefined"){e.style.opacity=value}else{value=Math.ceil(value*100);if(typeof e.filters!="unknown"&&typeof e.filters.alpha!="undefined"){e.filters.alpha.opacity=value}else{e.style.filter=(e.style.filter+" alpha(opacity="+value+")")}}return this;case"str":if(value===""){e.style.zoom=e.style.opacity=""}return this}};jindo._p_._revisionCSSAttr=function(name,vendorPrefix){var custumName=jindo.$Element.hook(name);if(custumName){name=custumName}else{name=jindo._p_.cssNameToJavaScriptName(name).replace(/^(animation|perspective|transform|transition)/i,function(_1){return vendorPrefix[_1.toLowerCase()]})}return name};jindo._p_.changeTransformValue=function(name,_test){return(name+"").replace(/([\s|-]*)(?:transform)/,function(_,m1){return jindo._p_.trim(m1).length>0?_:m1+jindo._p_.getTransformStringForValue(_test)})};jindo.$Element.prototype.css=function(sName,sValue){var oArgs=g_checkVarType(arguments,{g:["sName:String+"],s4str:[jindo.$Jindo._F("sName:String+"),jindo.$Jindo._F("vValue:String+")],s4num:["sName:String+","vValue:Numeric"],s4obj:["oObj:Hash+"]},"$Element#css");var e=this._element;switch(oArgs+""){case"s4str":case"s4num":var obj={};sName=jindo._p_._revisionCSSAttr(sName,jindo._p_.getStyleIncludeVendorPrefix());obj[sName]=sValue;sName=obj;break;case"s4obj":sName=oArgs.oObj;var obj={};var vendorPrefix=jindo._p_.getStyleIncludeVendorPrefix();for(i in sName){if(sName.hasOwnProperty(i)){obj[jindo._p_._revisionCSSAttr(i,vendorPrefix)]=sName[i]}}sName=obj;break;case"g":var vendorPrefix=jindo._p_.getStyleIncludeVendorPrefix();sName=jindo._p_._revisionCSSAttr(sName,vendorPrefix);var _getCss=this._getCss;if(sName=="opacity"){return this.opacity()}if((jindo._p_._JINDO_IS_FF||jindo._p_._JINDO_IS_OP)&&(sName=="backgroundPositionX"||sName=="backgroundPositionY")){var bp=_getCss(e,"backgroundPosition").split(/\s+/);return(sName=="backgroundPositionX")?bp[0]:bp[1]}if((!window.getComputedStyle)&&sName=="backgroundPosition"){return _getCss(e,"backgroundPositionX")+" "+_getCss(e,"backgroundPositionY")}if((!jindo._p_._JINDO_IS_OP&&window.getComputedStyle)&&(sName=="padding"||sName=="margin")){var top=_getCss(e,sName+"Top");var right=_getCss(e,sName+"Right");var bottom=_getCss(e,sName+"Bottom");var left=_getCss(e,sName+"Left");if((top==right)&&(bottom==left)){return top}else{if(top==bottom){if(right==left){return top+" "+right}else{return top+" "+right+" "+bottom+" "+left}}else{return top+" "+right+" "+bottom+" "+left}}}return _getCss(e,sName)}var v,type;for(var k in sName){if(sName.hasOwnProperty(k)){v=sName[k];if(!(jindo.$Jindo.isString(v)||jindo.$Jindo.isNumeric(v))){continue}if(k=="opacity"){this.opacity(v);continue}if(k=="cssFloat"&&jindo._p_._JINDO_IS_IE){k="styleFloat"}if((jindo._p_._JINDO_IS_FF||jindo._p_._JINDO_IS_OP)&&(k=="backgroundPositionX"||k=="backgroundPositionY")){var bp=this.css("backgroundPosition").split(/\s+/);v=k=="backgroundPositionX"?v+" "+bp[1]:bp[0]+" "+v;this._setCss(e,"backgroundPosition",v)}else{this._setCss(e,k,/transition/i.test(k)?jindo._p_.changeTransformValue(v):v)}}}return this};jindo.$Element.prototype._getCss=function(e,sName){var fpGetCss;if(window.getComputedStyle){fpGetCss=function(e,sName){try{if(sName=="cssFloat"){sName="float"}var d=e.ownerDocument||e.document||document;var sVal=e.style[sName];if(!e.style[sName]){var computedStyle=d.defaultView.getComputedStyle(e,null);sName=sName.replace(/([A-Z])/g,"-$1").replace(/^(webkit|ms)/g,"-$1").toLowerCase();sVal=computedStyle.getPropertyValue(sName);sVal=sVal===undefined?computedStyle[sName]:sVal}if(sName=="textDecoration"){sVal=sVal.replace(",","")}return sVal}catch(ex){throw new jindo.$Error((e.tagName||"document")+jindo.$Except.NOT_USE_CSS,"$Element#css")}}}else{if(e.currentStyle){fpGetCss=function(e,sName){try{if(sName=="cssFloat"){sName="styleFloat"}var sStyle=e.style[sName];if(sStyle){return sStyle}else{var oCurrentStyle=e.currentStyle;if(oCurrentStyle){return oCurrentStyle[sName]}}return sStyle}catch(ex){throw new jindo.$Error((e.tagName||"document")+jindo.$Except.NOT_USE_CSS,"$Element#css")}}}else{fpGetCss=function(e,sName){try{if(sName=="cssFloat"&&jindo._p_._JINDO_IS_IE){sName="styleFloat"}return e.style[sName]}catch(ex){throw new jindo.$Error((e.tagName||"document")+jindo.$Except.NOT_USE_CSS,"$Element#css")}}}}jindo.$Element.prototype._getCss=fpGetCss;return fpGetCss(e,sName)};jindo.$Element.prototype._setCss=function(e,k,v){if(("#top#left#right#bottom#").indexOf(k+"#")>0&&(typeof v=="number"||(/\d$/.test(v)))){e.style[k]=parseInt(v,10)+"px"}else{e.style[k]=v}};jindo.$Element.prototype.attr=function(sName,sValue){var oArgs=g_checkVarType(arguments,{g:["sName:String+"],s4str:["sName:String+","vValue:String+"],s4num:["sName:String+","vValue:Numeric"],s4nul:["sName:String+","vValue:Null"],s4bln:["sName:String+","vValue:Boolean"],s4arr:["sName:String+","vValue:Array+"],s4obj:[jindo.$Jindo._F("oObj:Hash+")]},"$Element#attr");var e=this._element,aValue=null,i,length,nIndex,fGetIndex,elOption,wa;switch(oArgs+""){case"s4str":case"s4nul":case"s4num":case"s4bln":case"s4arr":var obj={};obj[sName]=sValue;sName=obj;break;case"s4obj":sName=oArgs.oObj;break;case"g":if(sName=="class"||sName=="className"){return e.className}else{if(sName=="style"){return e.style.cssText}else{if(sName=="checked"||sName=="disabled"){return !!e[sName]}else{if(sName=="value"){if(this.tag=="button"){return e.getAttributeNode("value").value}else{if(this.tag=="select"){if(e.multiple){for(i=0,length=e.options.length;i<length;i++){elOption=e.options[i];if(elOption.selected){if(!aValue){aValue=[]}sValue=elOption.value;if(sValue==""){sValue=elOption.text}aValue.push(sValue)}}return aValue}else{if(e.selectedIndex<0){return null}sValue=e.options[e.selectedIndex].value;return(sValue=="")?e.options[e.selectedIndex].text:sValue}}else{return e.value}}}else{if(sName=="href"){return e.getAttribute(sName,2)}}}}}return e.getAttribute(sName)}fGetIndex=function(oOPtions,vValue){var nIndex=-1,i,length,elOption;for(i=0,length=oOPtions.length;i<length;i++){elOption=oOPtions[i];if(elOption.value===vValue||elOption.text===vValue){nIndex=i;break}}return nIndex};for(var k in sName){if(sName.hasOwnProperty(k)){var v=sName[k];if(jindo.$Jindo.isNull(v)){if(this.tag=="select"){if(e.multiple){for(i=0,length=e.options.length;i<length;i++){e.options[i].selected=false}}else{e.selectedIndex=-1}}else{e.removeAttribute(k)}}else{if(k=="class"||k=="className"){e.className=v}else{if(k=="style"){e.style.cssText=v}else{if(k=="checked"||k=="disabled"){e[k]=v}else{if(k=="value"){if(this.tag=="select"){if(e.multiple){if(jindo.$Jindo.isArray(v)){wa=jindo.$A(v);for(i=0,length=e.options.length;i<length;i++){elOption=e.options[i];elOption.selected=wa.has(elOption.value)||wa.has(elOption.text)}}else{e.selectedIndex=fGetIndex(e.options,v)}}else{e.selectedIndex=fGetIndex(e.options,v)}}else{e.value=v}}else{e.setAttribute(k,v)}}}}}}}return this};jindo.$Element.prototype.width=function(width){var oArgs=g_checkVarType(arguments,{g:[],s:["nWidth:Numeric"]},"$Element#width");switch(oArgs+""){case"g":return this._element.offsetWidth;case"s":width=oArgs.nWidth;var e=this._element;e.style.width=width+"px";var off=e.offsetWidth;if(off!=width&&off!==0){var w=(width*2-off);if(w>0){e.style.width=w+"px"}}return this}};jindo.$Element.prototype.height=function(height){var oArgs=g_checkVarType(arguments,{g:[],s:["nHeight:Numeric"]},"$Element#height");switch(oArgs+""){case"g":return this._element.offsetHeight;case"s":height=oArgs.nHeight;var e=this._element;e.style.height=height+"px";var off=e.offsetHeight;if(off!=height&&off!==0){var height=(height*2-off);if(height>0){e.style.height=height+"px"}}return this}};jindo.$Element.prototype.className=function(sClass){var oArgs=g_checkVarType(arguments,{g:[],s:[jindo.$Jindo._F("sClass:String+")]},"$Element#className");var e=this._element;switch(oArgs+""){case"g":return e.className;case"s":e.className=sClass;return this}};jindo.$Element.prototype.hasClass=function(sClass){var ___checkVarType=g_checkVarType;if(jindo._p_.canUseClassList()){jindo.$Element.prototype.hasClass=function(sClass){var oArgs=___checkVarType(arguments,{"4str":["sClass:String+"]},"$Element#hasClass");return this._element.classList.contains(sClass)}}else{jindo.$Element.prototype.hasClass=function(sClass){var oArgs=___checkVarType(arguments,{"4str":["sClass:String+"]},"$Element#hasClass");return(" "+this._element.className+" ").indexOf(" "+sClass+" ")>-1}}return this.hasClass.apply(this,arguments)};jindo.$Element.prototype.addClass=function(sClass){if(this._element.classList){jindo.$Element.prototype.addClass=function(sClass){if(this._element==null){return this}var oArgs=g_checkVarType(arguments,{"4str":["sClass:String+"]},"$Element#addClass");var aClass=(sClass+"").split(/\s+/);var flistApi=this._element.classList;for(var i=aClass.length;i--;){aClass[i]!=""&&flistApi.add(aClass[i])}return this}}else{jindo.$Element.prototype.addClass=function(sClass){var oArgs=g_checkVarType(arguments,{"4str":["sClass:String+"]},"$Element#addClass");var e=this._element;var sClassName=e.className;var aClass=(sClass+"").split(" ");var sEachClass;for(var i=aClass.length-1;i>=0;i--){sEachClass=aClass[i];if((" "+sClassName+" ").indexOf(" "+sEachClass+" ")==-1){sClassName=sClassName+" "+sEachClass}}e.className=sClassName.replace(/\s+$/,"").replace(/^\s+/,"");return this}}return this.addClass.apply(this,arguments)};jindo.$Element.prototype.removeClass=function(sClass){if(this._element.classList){jindo.$Element.prototype.removeClass=function(sClass){var oArgs=g_checkVarType(arguments,{"4str":["sClass:String+"]},"$Element#removeClass");if(this._element==null){return this}var flistApi=this._element.classList;var aClass=(sClass+"").split(" ");for(var i=aClass.length;i--;){aClass[i]!=""&&flistApi.remove(aClass[i])}return this}}else{jindo.$Element.prototype.removeClass=function(sClass){var oArgs=g_checkVarType(arguments,{"4str":["sClass:String+"]},"$Element#removeClass");var e=this._element;var sClassName=e.className;var aClass=(sClass+"").split(" ");var sEachClass;for(var i=aClass.length-1;i>=0;i--){if(/\W/g.test(aClass[i])){aClass[i]=aClass[i].replace(/(\W)/g,"\\$1")}sClassName=(" "+sClassName+" ").replace(new RegExp("\\s+"+aClass[i]+"(?=\\s+)","g")," ")}e.className=sClassName.replace(/\s+$/,"").replace(/^\s+/,"");return this}}return this.removeClass.apply(this,arguments)};jindo.$Element.prototype.toggleClass=function(sClass,sClass2){var ___checkVarType=g_checkVarType;if(jindo._p_.canUseClassList()){jindo.$Element.prototype.toggleClass=function(sClass,sClass2){var oArgs=___checkVarType(arguments,{"4str":["sClass:String+"],"4str2":["sClass:String+","sClass2:String+"]},"$Element#toggleClass");switch(oArgs+""){case"4str":this._element.classList.toggle(sClass+"");break;case"4str2":sClass=sClass+"";sClass2=sClass2+"";if(this.hasClass(sClass)){this.removeClass(sClass);this.addClass(sClass2)}else{this.addClass(sClass);this.removeClass(sClass2)}}return this}}else{jindo.$Element.prototype.toggleClass=function(sClass,sClass2){var oArgs=___checkVarType(arguments,{"4str":["sClass:String+"],"4str2":["sClass:String+","sClass2:String+"]},"$Element#toggleClass");sClass2=sClass2||"";if(this.hasClass(sClass)){this.removeClass(sClass);if(sClass2){this.addClass(sClass2)}}else{this.addClass(sClass);if(sClass2){this.removeClass(sClass2)}}return this}}return this.toggleClass.apply(this,arguments)};jindo.$Element.prototype.cssClass=function(vClass,bCondition){var oArgs=g_checkVarType(arguments,{g:["sClass:String+"],s4bln:["sClass:String+","bCondition:Boolean"],s4obj:["oObj:Hash+"]},"$Element#cssClass");switch(oArgs+""){case"g":return this.hasClass(oArgs.sClass);case"s4bln":if(oArgs.bCondition){this.addClass(oArgs.sClass)}else{this.removeClass(oArgs.sClass)}return this;case"s4obj":var e=this._element;vClass=oArgs.oObj;var sClassName=e.className;for(var sEachClass in vClass){if(vClass.hasOwnProperty(sEachClass)){if(vClass[sEachClass]){if((" "+sClassName+" ").indexOf(" "+sEachClass+" ")==-1){sClassName=(sClassName+" "+sEachClass).replace(/^\s+/,"")}}else{if((" "+sClassName+" ").indexOf(" "+sEachClass+" ")>-1){sClassName=(" "+sClassName+" ").replace(" "+sEachClass+" "," ").replace(/\s+$/,"").replace(/^\s+/,"")}}}}e.className=sClassName;return this}};jindo.$Element.prototype.text=function(sText){var oArgs=g_checkVarType(arguments,{g:[],s4str:["sText:String+"],s4num:[jindo.$Jindo._F("sText:Numeric")],s4bln:["sText:Boolean"]},"$Element#text"),ele=this._element,tag=this.tag,prop,oDoc;switch(oArgs+""){case"g":prop=(ele.textContent!==undefined)?"textContent":"innerText";if(tag=="textarea"||tag=="input"){prop="value"}return ele[prop];case"s4str":case"s4num":case"s4bln":try{if(tag=="textarea"||tag=="input"){ele.value=sText+""}else{var oDoc=ele.ownerDocument||ele.document||document;this.empty();ele.appendChild(oDoc.createTextNode(sText))}}catch(e){return ele.innerHTML=(sText+"").replace(/&/g,"&amp;").replace(/</g,"&lt;")}return this}};jindo.$Element.prototype.html=function(sHTML){var isIe=jindo._p_._JINDO_IS_IE;var isFF=jindo._p_._JINDO_IS_FF;var _param={g:[],s4str:[jindo.$Jindo._F("sText:String+")],s4num:["sText:Numeric"],s4bln:["sText:Boolean"]};var ___checkVarType=g_checkVarType;if(isIe){jindo.$Element.prototype.html=function(sHTML){var oArgs=___checkVarType(arguments,_param,"$Element#html");switch(oArgs+""){case"g":return this._element.innerHTML;case"s4str":case"s4num":case"s4bln":sHTML+="";if(jindo.cssquery){jindo.cssquery.release()}var oEl=this._element;while(oEl.firstChild){oEl.removeChild(oEl.firstChild)}var sId="R"+new Date().getTime()+parseInt(Math.random()*100000,10);var oDoc=oEl.ownerDocument||oEl.document||document;var oDummy;var sTag=oEl.tagName.toLowerCase();switch(sTag){case"select":case"table":oDummy=oDoc.createElement("div");oDummy.innerHTML="<"+sTag+' class="'+sId+'">'+sHTML+"</"+sTag+">";break;case"tr":case"thead":case"tbody":case"colgroup":oDummy=oDoc.createElement("div");oDummy.innerHTML="<table><"+sTag+' class="'+sId+'">'+sHTML+"</"+sTag+"></table>";break;default:oEl.innerHTML=sHTML}if(oDummy){var oFound;for(oFound=oDummy.firstChild;oFound;oFound=oFound.firstChild){if(oFound.className==sId){break}}if(oFound){var notYetSelected=true;for(var oChild;oChild=oEl.firstChild;){oChild.removeNode(true)}for(var oChild=oFound.firstChild;oChild;oChild=oFound.firstChild){if(sTag=="select"){var cloneNode=oChild.cloneNode(true);if(oChild.selected&&notYetSelected){notYetSelected=false;cloneNode.selected=true}oEl.appendChild(cloneNode);oChild.removeNode(true)}else{oEl.appendChild(oChild)}}oDummy.removeNode&&oDummy.removeNode(true)}oDummy=null}return this}}}else{if(isFF){jindo.$Element.prototype.html=function(sHTML){var oArgs=___checkVarType(arguments,_param,"$Element#html");switch(oArgs+""){case"g":return this._element.innerHTML;case"s4str":case"s4num":case"s4bln":sHTML+="";var oEl=this._element;if(!oEl.parentNode){var sId="R"+new Date().getTime()+parseInt(Math.random()*100000,10);var oDoc=oEl.ownerDocument||oEl.document||document;var oDummy;var sTag=oEl.tagName.toLowerCase();switch(sTag){case"select":case"table":oDummy=oDoc.createElement("div");oDummy.innerHTML="<"+sTag+' class="'+sId+'">'+sHTML+"</"+sTag+">";break;case"tr":case"thead":case"tbody":case"colgroup":oDummy=oDoc.createElement("div");oDummy.innerHTML="<table><"+sTag+' class="'+sId+'">'+sHTML+"</"+sTag+"></table>";break;default:oEl.innerHTML=sHTML}if(oDummy){var oFound;for(oFound=oDummy.firstChild;oFound;oFound=oFound.firstChild){if(oFound.className==sId){break}}if(oFound){for(var oChild;oChild=oEl.firstChild;){oChild.removeNode(true)}for(var oChild=oFound.firstChild;oChild;oChild=oFound.firstChild){oEl.appendChild(oChild)}oDummy.removeNode&&oDummy.removeNode(true)}oDummy=null}}else{oEl.innerHTML=sHTML}return this}}}else{jindo.$Element.prototype.html=function(sHTML){var oArgs=___checkVarType(arguments,_param,"$Element#html");switch(oArgs+""){case"g":return this._element.innerHTML;case"s4str":case"s4num":case"s4bln":sHTML+="";var oEl=this._element;oEl.innerHTML=sHTML;return this}}}}return this.html.apply(this,arguments)};jindo.$Element.prototype.outerHTML=function(){var e=this._element;e=jindo.$Jindo.isDocument(e)?e.documentElement:e;if(e.outerHTML!==undefined){return e.outerHTML}var oDoc=e.ownerDocument||e.document||document;var div=oDoc.createElement("div");var par=e.parentNode;if(!par){return e.innerHTML}par.insertBefore(div,e);div.style.display="none";div.appendChild(e);var s=div.innerHTML;par.insertBefore(e,div);par.removeChild(div);return s};jindo.$Element.prototype.toString=function(){return this.outerHTML()||"[object $Element]"};jindo.$Element.prototype.attach=function(sEvent,fpCallback){var oArgs=g_checkVarType(arguments,{"4str":["sEvent:String+","fpCallback:Function+"],"4obj":["hListener:Hash+"]},"$Element#attach");var oSpilt,hListener;switch(oArgs+""){case"4str":oSpilt=jindo._p_.splitEventSelector(oArgs.sEvent);this._add(oSpilt.type,oSpilt.event,oSpilt.selector,fpCallback);break;case"4obj":hListener=oArgs.hListener;for(var i in hListener){this.attach(i,hListener[i])}break}return this};jindo.$Element.prototype.detach=function(sEvent,fpCallback){var oArgs=g_checkVarType(arguments,{"4str":["sEvent:String+","fpCallback:Function+"],"4obj":["hListener:Hash+"]},"$Element#detach");var oSpilt,hListener;switch(oArgs+""){case"4str":oSpilt=jindo._p_.splitEventSelector(oArgs.sEvent);this._del(oSpilt.type,oSpilt.event,oSpilt.selector,fpCallback);break;case"4obj":hListener=oArgs.hListener;for(var i in hListener){this.detach(i,hListener[i])}break}return this};jindo.$Element.prototype.delegate=function(sEvent,vFilter,fpCallback){var oArgs=g_checkVarType(arguments,{"4str":["sEvent:String+","vFilter:String+","fpCallback:Function+"],"4fun":["sEvent:String+","vFilter:Function+","fpCallback:Function+"]},"$Element#delegate");return this._add("delegate",sEvent,vFilter,fpCallback)};jindo.$Element.prototype.undelegate=function(sEvent,vFilter,fpCallback){var oArgs=g_checkVarType(arguments,{"4str":["sEvent:String+","vFilter:String+","fpCallback:Function+"],"4fun":["sEvent:String+","vFilter:Function+","fpCallback:Function+"],group_for_string:["sEvent:String+","vFilter:String+"],group_for_function:["sEvent:String+","vFilter:Function+"]},"$Element#undelegate");return this._del("delegate",sEvent,vFilter,fpCallback)};jindo._p_.customEventAttach=function(sType,sEvent,vFilter,fpCallback,fpCallbackBind,eEle,fpAdd){if(!jindo._p_.hasCustomEventListener(eEle.__jindo__id,sEvent,vFilter)){var CustomEvent=jindo._p_.getCustomEvent(sEvent);var customInstance=new CustomEvent();var events=customInstance.events;customInstance.real_listener.push(fpCallback);customInstance.wrap_listener.push(fpCallbackBind);for(var i=0,l=events.length;i<l;i++){customInstance["_fp"+events[i]]=jindo.$Fn(customInstance[events[i]],customInstance).bind();fpAdd(sType,events[i],vFilter,customInstance["_fp"+events[i]])}jindo._p_.addCustomEventListener(eEle,eEle.__jindo__id,sEvent,vFilter,customInstance)}else{var customInstance=jindo._p_.getCustomEventListener(eEle.__jindo__id,sEvent,vFilter).custom;if(customInstance.real_listener){customInstance.real_listener.push(fpCallback);customInstance.wrap_listener.push(fpCallbackBind)}}};jindo._p_.normalCustomEventAttach=function(ele,sEvent,jindo_id,vFilter,fpCallback,fpCallbackBind){if(!jindo._p_.normalCustomEvent[sEvent][jindo_id]){jindo._p_.normalCustomEvent[sEvent][jindo_id]={};jindo._p_.normalCustomEvent[sEvent][jindo_id].ele=ele;jindo._p_.normalCustomEvent[sEvent][jindo_id][vFilter]={};jindo._p_.normalCustomEvent[sEvent][jindo_id][vFilter].real_listener=[];jindo._p_.normalCustomEvent[sEvent][jindo_id][vFilter].wrap_listener=[]}jindo._p_.normalCustomEvent[sEvent][jindo_id][vFilter].real_listener.push(fpCallback);jindo._p_.normalCustomEvent[sEvent][jindo_id][vFilter].wrap_listener.push(fpCallbackBind)};jindo.$Element.prototype._add=function(sType,sEvent,vFilter,fpCallback){var oManager=jindo.$Element.eventManager;var realEvent=sEvent;sEvent=sEvent.toLowerCase();var oEvent=oManager.splitGroup(sEvent);sEvent=oEvent.event;var sGroup=oEvent.group;var ele=this._element;var jindo_id=ele.__jindo__id;var oDoc=ele.ownerDocument||ele.document||document;if(jindo._p_.hasCustomEvent(sEvent)){vFilter=vFilter||"_NONE_";var fpCallbackBind=jindo.$Fn(fpCallback,this).bind();jindo._p_.normalCustomEventAttach(ele,sEvent,jindo_id,vFilter,fpCallback,fpCallbackBind);if(jindo._p_.getCustomEvent(sEvent)){jindo._p_.customEventAttach(sType,sEvent,vFilter,fpCallback,fpCallbackBind,ele,jindo.$Fn(this._add,this).bind())}}else{if(sEvent=="domready"&&jindo.$Jindo.isWindow(ele)){jindo.$Element(oDoc).attach(sEvent,fpCallback);return this}if(sEvent=="load"&&ele===oDoc){jindo.$Element(window).attach(sEvent,fpCallback);return this}if((!document.addEventListener)&&("domready"==sEvent)){if(window.top!=window){throw jindo.$Error(jindo.$Except.NOT_WORK_DOMREADY,"$Element#attach")}jindo.$Element._domready(ele,fpCallback);return this}sEvent=oManager.revisionEvent(sType,sEvent,realEvent);fpCallback=oManager.revisionCallback(sType,sEvent,realEvent,fpCallback);if(!oManager.isInit(this._key)){oManager.init(this._key,ele)}if(!oManager.hasEvent(this._key,sEvent,realEvent)){oManager.initEvent(this,sEvent,realEvent,sGroup)}if(!oManager.hasGroup(this._key,sEvent,sGroup)){oManager.initGroup(this._key,sEvent,sGroup)}oManager.addEventListener(this._key,sEvent,sGroup,sType,vFilter,fpCallback)}return this};jindo._p_.customEventDetach=function(sType,sEvent,vFilter,fpCallback,eEle,fpDel){var customObj=jindo._p_.getCustomEventListener(eEle.__jindo__id,sEvent,vFilter);var customInstance=customObj.custom;var events=customInstance.events;for(var i=0,l=events.length;i<l;i++){fpDel(sType,events[i],vFilter,customInstance["_fp"+events[i]])}};jindo.$Element.prototype._del=function(sType,sEvent,vFilter,fpCallback){var oManager=jindo.$Element.eventManager;var realEvent=sEvent;sEvent=sEvent.toLowerCase();var oEvent=oManager.splitGroup(sEvent);sEvent=oEvent.event;var sGroup=oEvent.group;var oDoc=this._element.ownerDocument||this._element.document||document;if(jindo._p_.hasCustomEvent(sEvent)){var jindo_id=this._element.__jindo__id;vFilter=vFilter||"_NONE_";var oNormal=jindo._p_.getNormalEventListener(jindo_id,sEvent,vFilter);var aWrap=oNormal.wrap_listener;var aReal=oNormal.real_listener;var aNewWrap=[];var aNewReal=[];for(var i=0,l=aReal.length;i<l;i++){if(aReal[i]!=fpCallback){aNewWrap.push(aWrap[i]);aNewReal.push(aReal[i])}}if(aNewReal.length==0){var oNormalJindo=jindo._p_.normalCustomEvent[sEvent][jindo_id];var count=0;for(var i in oNormalJindo){if(i!=="ele"){count++;break}}if(count===0){delete jindo._p_.normalCustomEvent[sEvent][jindo_id]}else{delete jindo._p_.normalCustomEvent[sEvent][jindo_id][vFilter]}}if(jindo._p_.customEvent[sEvent]){jindo._p_.setCustomEventListener(jindo_id,sEvent,vFilter,aNewReal,aNewWrap);if(aNewReal.length==0){jindo._p_.customEventDetach(sType,sEvent,vFilter,fpCallback,this._element,jindo.$Fn(this._del,this).bind());delete jindo._p_.customEventStore[jindo_id][sEvent][vFilter]}}}else{if(sEvent=="domready"&&jindo.$Jindo.isWindow(this._element)){jindo.$Element(oDoc).detach(sEvent,fpCallback);return this}if(sEvent=="load"&&this._element===oDoc){jindo.$Element(window).detach(sEvent,fpCallback);return this}sEvent=oManager.revisionEvent(sType,sEvent,realEvent);if((!document.addEventListener)&&("domready"==sEvent)){var aNewDomReady=[];var list=jindo.$Element._domready.list;for(var i=0,l=list.length;i<l;i++){if(list[i]!=fpCallback){aNewDomReady.push(list[i])}}jindo.$Element._domready.list=aNewDomReady;return this}if(sGroup===jindo._p_.NONE_GROUP&&!jindo.$Jindo.isFunction(fpCallback)&&!vFilter){throw new jindo.$Error(jindo.$Except.HAS_FUNCTION_FOR_GROUP,"$Element#"+(sType=="normal"?"detach":"delegate"))}oManager.removeEventListener(this._key,sEvent,sGroup,sType,vFilter,fpCallback)}return this};jindo._p_.mouseTouchPointerEvent=function(sEvent){var eventMap={};if(window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0){eventMap={mousedown:"MSPointerDown",mouseup:"MSPointerUp",mousemove:"MSPointerMove",mouseover:"MSPointerOver",mouseout:"MSPointerOut",touchstart:"MSPointerDown",touchend:"MSPointerUp",touchmove:"MSPointerMove",pointerdown:"MSPointerDown",pointerup:"MSPointerUp",pointermove:"MSPointerMove",pointerover:"MSPointerOver",pointerout:"MSPointerOut",pointercancel:"MSPointerCancel"}}else{if(jindo._p_._JINDO_IS_MO){eventMap={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove",pointerdown:"touchstart",pointerup:"touchend",pointermove:"touchmove"}}}jindo._p_.mouseTouchPointerEvent=function(sEvent){return eventMap[sEvent]?eventMap[sEvent]:sEvent};return jindo._p_.mouseTouchPointerEvent(sEvent)};jindo.$Element.eventManager=(function(){var eventStore={};function bind(fpFunc,oScope,aPram){return function(){var args=jindo._p_._toArray(arguments,0);if(aPram.length){args=aPram.concat(args)}return fpFunc.apply(oScope,args)}}return{revisionCallback:function(sType,sEvent,realEvent,fpCallback){if((document.addEventListener||jindo._p_._JINDO_IS_IE&&(sType=="delegate"))&&(realEvent=="mouseenter"||realEvent=="mouseleave")){var fpWrapCallback=jindo.$Element.eventManager._fireWhenElementBoundary(sType,fpCallback);fpWrapCallback._origin_=fpCallback;fpCallback=fpWrapCallback}return fpCallback},_fireWhenElementBoundary:function(sType,fpCallback){return function(oEvent){var woRelatedElement=oEvent.relatedElement?jindo.$Element(oEvent.relatedElement):null;var eElement=oEvent.currentElement;if(sType=="delegate"){eElement=oEvent.element}if(woRelatedElement&&(woRelatedElement.isEqual(eElement)||woRelatedElement.isChildOf(eElement))){return}fpCallback(oEvent)}},revisionEvent:function(sType,sEvent,realEvent){if(document.addEventListener!==undefined){this.revisionEvent=function(sType,sEvent,realEvent){if(/^ms/i.test(realEvent)){return realEvent}var customEvent=jindo.$Event.hook(sEvent);if(customEvent){if(jindo.$Jindo.isFunction(customEvent)){return customEvent()}else{return customEvent}}sEvent=sEvent.toLowerCase();if(sEvent=="domready"||sEvent=="domcontentloaded"){sEvent="DOMContentLoaded"}else{if(sEvent=="mousewheel"&&!jindo._p_._JINDO_IS_WK&&!jindo._p_._JINDO_IS_OP&&!jindo._p_._JINDO_IS_IE){sEvent="DOMMouseScroll"}else{if(sEvent=="mouseenter"&&(!jindo._p_._JINDO_IS_IE||sType=="delegate")){sEvent="mouseover"}else{if(sEvent=="mouseleave"&&(!jindo._p_._JINDO_IS_IE||sType=="delegate")){sEvent="mouseout"}else{if(sEvent=="transitionend"||sEvent=="transitionstart"){var sPostfix=sEvent.replace("transition","");var info=jindo._p_.getStyleIncludeVendorPrefix();if(info.transition!="transition"){sPostfix=sPostfix.substr(0,1).toUpperCase()+sPostfix.substr(1)}sEvent=info.transition+sPostfix}else{if(sEvent=="animationstart"||sEvent=="animationend"||sEvent=="animationiteration"){var sPostfix=sEvent.replace("animation","");var info=jindo._p_.getStyleIncludeVendorPrefix();if(info.animation!="animation"){sPostfix=sPostfix.substr(0,1).toUpperCase()+sPostfix.substr(1)}sEvent=info.animation+sPostfix}else{if(sEvent==="focusin"||sEvent==="focusout"){sEvent=sEvent==="focusin"?"focus":"blur"}}}}}}}return jindo._p_.mouseTouchPointerEvent(sEvent)}}else{this.revisionEvent=function(sType,sEvent,realEvent){if(/^ms/i.test(realEvent)){return realEvent}var customEvent=jindo.$Event.hook(sEvent);if(customEvent){if(jindo.$Jindo.isFunction(customEvent)){return customEvent()}else{return customEvent}}if(sType=="delegate"&&sEvent=="mouseenter"){sEvent="mouseover"}else{if(sType=="delegate"&&sEvent=="mouseleave"){sEvent="mouseout"}}return jindo._p_.mouseTouchPointerEvent(sEvent)}}return this.revisionEvent(sType,sEvent,realEvent)},test:function(){return eventStore},isInit:function(sKey){return !!eventStore[sKey]},init:function(sKey,eEle){eventStore[sKey]={ele:eEle,event:{}}},getEventConfig:function(sKey){return eventStore[sKey]},hasEvent:function(sKey,sEvent,realEvent){if(!document.addEventListener&&sEvent.toLowerCase()=="domready"){if(jindo.$Element._domready.list){return jindo.$Element._domready.list.length>0?true:false}else{return false}}try{return !!eventStore[sKey]["event"][sEvent]}catch(e){return false}},hasGroup:function(sKey,sEvent,sGroup){return !!eventStore[sKey]["event"][sEvent]["type"][sGroup]},createEvent:function(wEvent,realEvent,element,delegatedElement){if(wEvent.currentTarget===undefined){wEvent.currentTarget=element}var weEvent=jindo.$Event(wEvent);if(!weEvent.currentElement){weEvent.currentElement=element}weEvent.realType=realEvent;weEvent.delegatedElement=delegatedElement;return weEvent},initEvent:function(oThis,sEvent,realEvent,sGroup){var sKey=oThis._key;var oEvent=eventStore[sKey]["event"];var that=this;var fAroundFunc=bind(function(sEvent,realEvent,scope,wEvent){wEvent=wEvent||window.event;var oEle=wEvent.target||wEvent.srcElement;var oManager=jindo.$Element.eventManager;var oConfig=oManager.getEventConfig((wEvent.currentTarget||this._element).__jindo__id);var oType=oConfig.event[sEvent].type;for(var i in oType){if(oType.hasOwnProperty(i)){var aNormal=oType[i].normal;for(var j=0,l=aNormal.length;j<l;j++){aNormal[j].call(this,scope.createEvent(wEvent,realEvent,this._element,null))}var oDelegate=oType[i].delegate;var aResultFilter;var afpFilterCallback;for(var k in oDelegate){if(oDelegate.hasOwnProperty(k)){aResultFilter=oDelegate[k].checker(oEle);if(aResultFilter[0]){afpFilterCallback=oDelegate[k].callback;var weEvent;for(var m=0,leng=afpFilterCallback.length;m<leng;m++){weEvent=scope.createEvent(wEvent,realEvent,this._element,aResultFilter[1]);weEvent.element=aResultFilter[1];afpFilterCallback[m].call(this,weEvent)}}}}}}},oThis,[sEvent,realEvent,this]);oEvent[sEvent]={listener:fAroundFunc,type:{}};jindo.$Element._eventBind(oThis._element,sEvent,fAroundFunc,(realEvent==="focusin"||realEvent==="focusout"))},initGroup:function(sKey,sEvent,sGroup){var oType=eventStore[sKey]["event"][sEvent]["type"];oType[sGroup]={normal:[],delegate:{}}},addEventListener:function(sKey,sEvent,sGroup,sType,vFilter,fpCallback){var oEventInfo=eventStore[sKey]["event"][sEvent]["type"][sGroup];if(sType==="normal"){oEventInfo.normal.push(fpCallback)}else{if(sType==="delegate"){if(!this.hasDelegate(oEventInfo,vFilter)){this.initDelegate(eventStore[sKey].ele,oEventInfo,vFilter)}this.addDelegate(oEventInfo,vFilter,fpCallback)}}},hasDelegate:function(oEventInfo,vFilter){return !!oEventInfo.delegate[vFilter]},containsElement:function(eOwnEle,eTarget,sCssquery,bContainOwn){if(eOwnEle==eTarget&&bContainOwn){return jindo.$$.test(eTarget,sCssquery)}var aSelectElement=jindo.$$(sCssquery,eOwnEle);for(var i=0,l=aSelectElement.length;i<l;i++){if(aSelectElement[i]==eTarget){return true}}return false},initDelegate:function(eOwnEle,oEventInfo,vFilter){var fpCheck;if(jindo.$Jindo.isString(vFilter)){fpCheck=bind(function(eOwnEle,sCssquery,oEle){var eIncludeEle=oEle;var isIncludeEle=this.containsElement(eOwnEle,oEle,sCssquery,true);if(!isIncludeEle){var aPropagationElements=this._getParent(eOwnEle,oEle);for(var i=0,leng=aPropagationElements.length;i<leng;i++){eIncludeEle=aPropagationElements[i];if(this.containsElement(eOwnEle,eIncludeEle,sCssquery)){isIncludeEle=true;break}}}return[isIncludeEle,eIncludeEle]},this,[eOwnEle,vFilter])}else{fpCheck=bind(function(eOwnEle,fpFilter,oEle){var eIncludeEle=oEle;var isIncludeEle=fpFilter(eOwnEle,oEle);if(!isIncludeEle){var aPropagationElements=this._getParent(eOwnEle,oEle);for(var i=0,leng=aPropagationElements.length;i<leng;i++){eIncludeEle=aPropagationElements[i];if(fpFilter(eOwnEle,eIncludeEle)){isIncludeEle=true;break}}}return[isIncludeEle,eIncludeEle]},this,[eOwnEle,vFilter])}oEventInfo.delegate[vFilter]={checker:fpCheck,callback:[]}},addDelegate:function(oEventInfo,vFilter,fpCallback){oEventInfo.delegate[vFilter].callback.push(fpCallback)},removeEventListener:function(sKey,sEvent,sGroup,sType,vFilter,fpCallback){var oEventInfo;try{oEventInfo=eventStore[sKey]["event"][sEvent]["type"][sGroup]}catch(e){return}var aNewCallback=[];var aOldCallback;if(sType==="normal"){aOldCallback=oEventInfo.normal}else{aOldCallback=oEventInfo.delegate[vFilter].callback}if(sEvent==jindo._p_.NONE_GROUP||jindo.$Jindo.isFunction(fpCallback)){for(var i=0,l=aOldCallback.length;i<l;i++){if((aOldCallback[i]._origin_||aOldCallback[i])!=fpCallback){aNewCallback.push(aOldCallback[i])}}}if(sType==="normal"){delete oEventInfo.normal;oEventInfo.normal=aNewCallback}else{if(sType==="delegate"){delete oEventInfo.delegate[vFilter].callback;oEventInfo.delegate[vFilter].callback=aNewCallback}}this.cleanUp(sKey,sEvent)},cleanUpAll:function(){var oEvent;for(var sKey in eventStore){if(eventStore.hasOwnProperty(sKey)){this.cleanUpUsingKey(sKey,true)}}},cleanUpUsingKey:function(sKey,bForce){var oEvent;if(!eventStore[sKey]||!eventStore[sKey].event){return}oEvent=eventStore[sKey].event;for(var sEvent in oEvent){if(oEvent.hasOwnProperty(sEvent)){this.cleanUp(sKey,sEvent,bForce)}}},cleanUp:function(sKey,sEvent,bForce){var oTypeInfo;try{oTypeInfo=eventStore[sKey]["event"][sEvent]["type"]}catch(e){return}var oEventInfo;var bHasEvent=false;if(!bForce){for(var i in oTypeInfo){if(oTypeInfo.hasOwnProperty(i)){oEventInfo=oTypeInfo[i];if(oEventInfo.normal.length){bHasEvent=true;break}var oDele=oEventInfo.delegate;for(var j in oDele){if(oDele.hasOwnProperty(j)){if(oDele[j].callback.length){bHasEvent=true;break}}}if(bHasEvent){break}}}}if(!bHasEvent){jindo.$Element._unEventBind(eventStore[sKey].ele,sEvent,eventStore[sKey]["event"][sEvent]["listener"]);delete eventStore[sKey]["event"][sEvent];var bAllDetach=true;var oEvent=eventStore[sKey]["event"];for(var k in oEvent){if(oEvent.hasOwnProperty(k)){bAllDetach=false;break}}if(bAllDetach){delete eventStore[sKey]}}},splitGroup:function(sEvent){var aMatch=/\s*(.+?)\s*\(\s*(.*?)\s*\)/.exec(sEvent);if(aMatch){return{event:aMatch[1].toLowerCase(),group:aMatch[2].toLowerCase()}}else{return{event:sEvent.toLowerCase(),group:jindo._p_.NONE_GROUP}}},_getParent:function(oOwnEle,oEle){var e=oOwnEle;var a=[],p=null;var oDoc=oEle.ownerDocument||oEle.document||document;while(oEle.parentNode&&p!=e){p=oEle.parentNode;if(p==oDoc.documentElement){break}a[a.length]=p;oEle=p}return a}}})();jindo.$Element._domready=function(doc,func){if(jindo.$Element._domready.list===undefined){var f=null;jindo.$Element._domready.list=[func];var done=false,execFuncs=function(){if(!done){done=true;var l=jindo.$Element._domready.list.concat();var evt={type:"domready",target:doc,currentTarget:doc};while(f=l.shift()){f(evt)}}};(function(){try{doc.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,50);return}execFuncs()})();doc.onreadystatechange=function(){if(doc.readyState=="complete"){doc.onreadystatechange=null;execFuncs()}}}else{jindo.$Element._domready.list.push(func)}};jindo.$Element.prototype.appear=function(duration,callback){var oTransition=jindo._p_.getStyleIncludeVendorPrefix();var name=oTransition.transition;var endName;if(name=="transition"){endName="end"}else{endName="End"}function appear(){var oArgs=g_checkVarType(arguments,{"4voi":[],"4num":["nDuration:Numeric"],"4fun":["nDuration:Numeric","fpCallback:Function+"]},"$Element#appear");switch(oArgs+""){case"4voi":duration=0.3;callback=function(){};break;case"4num":duration=oArgs.nDuration;callback=function(){};break;case"4fun":duration=oArgs.nDuration;callback=oArgs.fpCallback}return[duration,callback]}if(oTransition.transition){jindo.$Element.prototype.appear=function(duration,callback){var aOption=appear.apply(this,jindo._p_._toArray(arguments));duration=aOption[0];callback=aOption[1];var self=this;if(this.visible()){setTimeout(function(){callback.call(self,self)},16);return this}var ele=this._element;var name=oTransition.transition;var bindFunc=function(){self.show();ele.style[name+"Property"]="";ele.style[name+"Duration"]="";ele.style[name+"TimingFunction"]="";ele.style.opacity="";callback.call(self,self);ele.removeEventListener(name+endName,arguments.callee,false)};if(!this.visible()){ele.style.opacity=ele.style.opacity||0;self.show()}ele.addEventListener(name+endName,bindFunc,false);ele.style[name+"Property"]="opacity";ele.style[name+"Duration"]=duration+"s";ele.style[name+"TimingFunction"]="linear";jindo._p_.setOpacity(ele,"1");return this}}else{jindo.$Element.prototype.appear=function(duration,callback){var aOption=appear.apply(this,jindo._p_._toArray(arguments));duration=aOption[0];callback=aOption[1];var self=this;var op=this.opacity();if(this._getCss(this._element,"display")=="none"){op=0}if(op==1){return this}try{clearTimeout(this._fade_timer)}catch(e){}var step=(1-op)/((duration||0.3)*100);var func=function(){op+=step;self.opacity(op);if(op>=1){self._element.style.filter="";callback.call(self,self)}else{self._fade_timer=setTimeout(func,10)}};this.show();func();return this}}return this.appear.apply(this,arguments)};jindo.$Element.prototype.disappear=function(duration,callback){var oTransition=jindo._p_.getStyleIncludeVendorPrefix();var name=oTransition.transition;var endName;if(name=="transition"){endName="end"}else{endName="End"}function disappear(){var oArgs=g_checkVarType(arguments,{"4voi":[],"4num":["nDuration:Numeric"],"4fun":["nDuration:Numeric","fpCallback:Function+"]},"$Element#disappear");switch(oArgs+""){case"4voi":duration=0.3;callback=function(){};break;case"4num":duration=oArgs.nDuration;callback=function(){};break;case"4fun":duration=oArgs.nDuration;callback=oArgs.fpCallback}return[duration,callback]}if(oTransition.transition){jindo.$Element.prototype.disappear=function(duration,callback){var aOption=disappear.apply(this,jindo._p_._toArray(arguments));duration=aOption[0];callback=aOption[1];var self=this;if(!this.visible()){setTimeout(function(){callback.call(self,self)},16);return this}var name=oTransition.transition;var ele=this._element;var bindFunc=function(){self.hide();ele.style[name+"Property"]="";ele.style[name+"Duration"]="";ele.style[name+"TimingFunction"]="";ele.style.opacity="";callback.call(self,self);ele.removeEventListener(name+endName,arguments.callee,false)};ele.addEventListener(name+endName,bindFunc,false);ele.style[name+"Property"]="opacity";ele.style[name+"Duration"]=duration+"s";ele.style[name+"TimingFunction"]="linear";jindo._p_.setOpacity(ele,"0");return this}}else{jindo.$Element.prototype.disappear=function(duration,callback){var aOption=disappear.apply(this,jindo._p_._toArray(arguments));duration=aOption[0];callback=aOption[1];var self=this;var op=this.opacity();if(op==0){return this}try{clearTimeout(this._fade_timer)}catch(e){}var step=op/((duration||0.3)*100);var func=function(){op-=step;self.opacity(op);if(op<=0){self._element.style.display="none";self.opacity(1);callback.call(self,self)}else{self._fade_timer=setTimeout(func,10)}};func();return this}}return this.disappear.apply(this,arguments)};jindo.$Element.prototype.offset=function(nTop,nLeft){var oArgs=g_checkVarType(arguments,{g:[],s:["nTop:Numeric","nLeft:Numeric"]},"$Element#offset");switch(oArgs+""){case"g":return this.offset_get();case"s":return this.offset_set(oArgs.nTop,oArgs.nLeft)}};jindo.$Element.prototype.offset_set=function(nTop,nLeft){var oEl=this._element;var oPhantom=null;if(isNaN(parseFloat(this._getCss(oEl,"top")))){oEl.style.top="0px"}if(isNaN(parseFloat(this._getCss(oEl,"left")))){oEl.style.left="0px"}var oPos=this.offset_get();var oGap={top:nTop-oPos.top,left:nLeft-oPos.left};oEl.style.top=parseFloat(this._getCss(oEl,"top"))+oGap.top+"px";oEl.style.left=parseFloat(this._getCss(oEl,"left"))+oGap.left+"px";return this};jindo.$Element.prototype.offset_get=function(nTop,nLeft){var oEl=this._element;var oPhantom=null;var bOnlySafari=jindo._p_._JINDO_IS_SP&&!jindo._p_._JINDO_IS_CH;var bIE=jindo._p_._JINDO_IS_IE;var nVer=0;if(bIE){if(document.documentMode){nVer=document.documentMode}else{nVer=jindo.$Agent().navigator().version}}var fpSafari=function(oEl){var oPos={left:0,top:0};for(var oParent=oEl,oOffsetParent=oParent.offsetParent;oParent=oParent.parentNode;){if(oParent.offsetParent){oPos.left-=oParent.scrollLeft;oPos.top-=oParent.scrollTop}if(oParent==oOffsetParent){oPos.left+=oEl.offsetLeft+oParent.clientLeft;oPos.top+=oEl.offsetTop+oParent.clientTop;if(!oParent.offsetParent){oPos.left+=oParent.offsetLeft;oPos.top+=oParent.offsetTop}oOffsetParent=oParent.offsetParent;oEl=oParent}}return oPos};var fpOthers=function(oEl){var oPos={left:0,top:0};var oDoc=oEl.ownerDocument||oEl.document||document;var oHtml=oDoc.documentElement;var oBody=oDoc.body;if(oEl.getBoundingClientRect){if(!oPhantom){var bHasFrameBorder=(window==top);if(!bHasFrameBorder){try{bHasFrameBorder=(window.frameElement&&window.frameElement.frameBorder==1)}catch(e){}}if((bIE&&nVer<8&&window.external)&&bHasFrameBorder&&document.body.contains(oEl)){oPhantom={left:2,top:2};oBase=null}else{oPhantom={left:0,top:0}}}var box;try{box=oEl.getBoundingClientRect()}catch(e){box={left:0,top:0}}if(oEl!==oHtml&&oEl!==oBody){oPos.left=box.left-oPhantom.left;oPos.top=box.top-oPhantom.top;oPos.left+=oHtml.scrollLeft||oBody.scrollLeft;oPos.top+=oHtml.scrollTop||oBody.scrollTop}}else{if(oDoc.getBoxObjectFor){var box=oDoc.getBoxObjectFor(oEl);var vpBox=oDoc.getBoxObjectFor(oHtml||oBody);oPos.left=box.screenX-vpBox.screenX;oPos.top=box.screenY-vpBox.screenY}else{for(var o=oEl;o;o=o.offsetParent){oPos.left+=o.offsetLeft;oPos.top+=o.offsetTop}for(var o=oEl.parentNode;o;o=o.parentNode){if(o.tagName=="BODY"){break}if(o.tagName=="TR"){oPos.top+=2}oPos.left-=o.scrollLeft;oPos.top-=o.scrollTop}}}return oPos};return(bOnlySafari?fpSafari:fpOthers)(oEl)};jindo.$Element.prototype.evalScripts=function(sHTML){var oArgs=g_checkVarType(arguments,{"4str":["sHTML:String+"]},"$Element#evalScripts");var aJS=[];var leftScript="<script(\\s[^>]+)*>(.*?)</";var rightScript="script>";sHTML=sHTML.replace(new RegExp(leftScript+rightScript,"gi"),function(_1,_2,sPart){aJS.push(sPart);return""});eval(aJS.join("\n"));return this};jindo.$Element.prototype.clone=function(bDeep){var oArgs=g_checkVarType(arguments,{"default":[],set:["bDeep:Boolean"]},"$Element#clone");if(oArgs+""=="default"){bDeep=true}return jindo.$Element(this._element.cloneNode(bDeep))};jindo.$Element._common=function(oElement,sMethod){try{return jindo.$Element(oElement)._element}catch(e){throw TypeError(e.message.replace(/\$Element/g,"$Element#"+sMethod).replace(/Element\.html/g,"Element.html#"+sMethod))}};jindo.$Element._prepend=function(oParent,oChild){var nodes=oParent.childNodes;if(nodes.length>0){oParent.insertBefore(oChild,nodes[0])}else{oParent.appendChild(oChild)}};jindo.$Element.prototype.append=function(oElement){this._element.appendChild(jindo.$Element._common(oElement,"append"));return this};jindo.$Element.prototype.prepend=function(oElement){jindo.$Element._prepend(this._element,jindo.$Element._common(oElement,"prepend"));return this};jindo.$Element.prototype.replace=function(oElement){oElement=jindo.$Element._common(oElement,"replace");if(jindo.cssquery){jindo.cssquery.release()}var e=this._element;var oParentNode=e.parentNode;if(oParentNode&&oParentNode.replaceChild){oParentNode.replaceChild(oElement,e);return this}var _o=oElement;oParentNode.insertBefore(_o,e);oParentNode.removeChild(e);return this};jindo.$Element.prototype.appendTo=function(oElement){jindo.$Element._common(oElement,"appendTo").appendChild(this._element);return this};jindo.$Element.prototype.prependTo=function(oElement){jindo.$Element._prepend(jindo.$Element._common(oElement,"prependTo"),this._element);return this};jindo.$Element.prototype.before=function(oElement){var o=jindo.$Element._common(oElement,"before");this._element.parentNode.insertBefore(o,this._element);return this};jindo.$Element.prototype.after=function(oElement){oElement=jindo.$Element._common(oElement,"after");this.before(oElement);jindo.$Element(oElement).before(this);return this};jindo.$Element.prototype.parent=function(pFunc,limit){var oArgs=g_checkVarType(arguments,{"4voi":[],"4fun":["fpFunc:Function+"],"4nul":["fpFunc:Null"],for_function_number:["fpFunc:Function+","nLimit:Numeric"],for_null_number:["fpFunc:Null","nLimit:Numeric"]},"$Element#parent");var e=this._element;switch(oArgs+""){case"4voi":return e.parentNode?jindo.$Element(e.parentNode):null;case"4fun":case"4nul":limit=-1;break;case"for_function_number":case"for_null_number":if(oArgs.nLimit==0){limit=-1}}var a=[],p=null;while(e.parentNode&&limit--!=0){try{p=jindo.$Element(e.parentNode)}catch(e){p=null}if(e.parentNode==document.documentElement){break}if(!pFunc||(pFunc&&pFunc.call(this,p))){a[a.length]=p}e=e.parentNode}return a};jindo.$Element.prototype.child=function(pFunc,limit){var oArgs=g_checkVarType(arguments,{"4voi":[],"4fun":["fpFunc:Function+"],"4nul":["fpFunc:Null"],for_function_number:["fpFunc:Function+","nLimit:Numeric"],for_null_number:["fpFunc:Null","nLimit:Numeric"]},"$Element#child");var e=this._element;var a=[],c=null,f=null;switch(oArgs+""){case"4voi":var child=e.childNodes;var filtered=[];for(var i=0,l=child.length;i<l;i++){if(child[i].nodeType==1){try{filtered.push(jindo.$Element(child[i]))}catch(e){filtered.push(null)}}}return filtered;case"4fun":case"4nul":limit=-1;break;case"for_function_number":case"for_null_number":if(oArgs.nLimit==0){limit=-1}}(f=function(el,lim,context){var ch=null,o=null;for(var i=0;i<el.childNodes.length;i++){ch=el.childNodes[i];if(ch.nodeType!=1){continue}try{o=jindo.$Element(el.childNodes[i])}catch(e){o=null}if(!pFunc||(pFunc&&pFunc.call(context,o))){a[a.length]=o}if(lim!=0){f(el.childNodes[i],lim-1)}}})(e,limit-1,this);return a};jindo.$Element.prototype.prev=function(pFunc){var oArgs=g_checkVarType(arguments,{"4voi":[],"4fun":["fpFunc:Function+"],"4nul":["fpFunc:Null"]},"$Element#prev");var e=this._element;var a=[];switch(oArgs+""){case"4voi":if(!e){return null}do{e=e.previousSibling;if(!e||e.nodeType!=1){continue}try{if(e==null){return null}return jindo.$Element(e)}catch(e){return null}}while(e);try{if(e==null){return null}return jindo.$Element(e)}catch(e){return null}case"4fun":case"4nul":if(!e){return a}do{e=e.previousSibling;if(!e||e.nodeType!=1){continue}if(!pFunc||pFunc.call(this,e)){try{if(e==null){a[a.length]=null}else{a[a.length]=jindo.$Element(e)}}catch(e){a[a.length]=null}}}while(e);try{return a}catch(e){return null}}};jindo.$Element.prototype.next=function(pFunc){var oArgs=g_checkVarType(arguments,{"4voi":[],"4fun":["fpFunc:Function+"],"4nul":["fpFunc:Null"]},"$Element#next");var e=this._element;var a=[];switch(oArgs+""){case"4voi":if(!e){return null}do{e=e.nextSibling;if(!e||e.nodeType!=1){continue}try{if(e==null){return null}return jindo.$Element(e)}catch(e){return null}}while(e);try{if(e==null){return null}return jindo.$Element(e)}catch(e){return null}case"4fun":case"4nul":if(!e){return a}do{e=e.nextSibling;if(!e||e.nodeType!=1){continue}if(!pFunc||pFunc.call(this,e)){try{if(e==null){a[a.length]=null}else{a[a.length]=jindo.$Element(e)}}catch(e){a[a.length]=null}}}while(e);try{return a}catch(e){return null}}};jindo.$Element.prototype.first=function(){var el=this._element.firstElementChild||this._element.firstChild;if(!el){return null}while(el&&el.nodeType!=1){el=el.nextSibling}try{return el?jindo.$Element(el):null}catch(e){return null}};jindo.$Element.prototype.last=function(){var el=this._element.lastElementChild||this._element.lastChild;if(!el){return null}while(el&&el.nodeType!=1){el=el.previousSibling}try{return el?jindo.$Element(el):null}catch(e){return null}};jindo.$Element._contain=function(eParent,eChild){if(document.compareDocumentPosition){return !!(eParent.compareDocumentPosition(eChild)&16)}else{if(eParent.contains){return(eParent!==eChild)&&(eParent.contains?eParent.contains(eChild):true)}else{if(document.body.contains){if(eParent===(eChild.ownerDocument||eChild.document)&&eChild.tagName&&eChild.tagName.toUpperCase()==="BODY"){return true}if(eParent.nodeType===9&&eParent!==eChild){eParent=eParent.body}try{return(eParent!==eChild)&&(eParent.contains?eParent.contains(eChild):true)}catch(e){return false}}else{var e=eParent;var el=eChild;while(e&&e.parentNode){e=e.parentNode;if(e==el){return true}}return false}}}};jindo.$Element.prototype.isChildOf=function(element){try{return jindo.$Element._contain(jindo.$Element(element)._element,this._element)}catch(e){return false}};jindo.$Element.prototype.isParentOf=function(element){try{return jindo.$Element._contain(this._element,jindo.$Element(element)._element)}catch(e){return false}};jindo.$Element.prototype.isEqual=function(element){try{return(this._element===jindo.$Element(element)._element)}catch(e){return false}};jindo.$Element.prototype.fireEvent=function(sEvent,oProps){var _oParam={"4str":[jindo.$Jindo._F("sEvent:String+")],"4obj":["sEvent:String+","oProps:Hash+"]};jindo._p_.fireCustomEvent=function(ele,sEvent,self,bIsNormalType){var oInfo=jindo._p_.normalCustomEvent[sEvent];var targetEle,oEvent;for(var i in oInfo){oEvent=oInfo[i];targetEle=oEvent.ele;var wrap_listener;for(var sCssquery in oEvent){if(sCssquery==="_NONE_"){if(targetEle==ele||self.isChildOf(targetEle)){wrap_listener=oEvent[sCssquery].wrap_listener;for(var k=0,l=wrap_listener.length;k<l;k++){wrap_listener[k]()}}}else{if(jindo.$Element.eventManager.containsElement(targetEle,ele,sCssquery,false)){wrap_listener=oEvent[sCssquery].wrap_listener;for(var k=0,l=wrap_listener.length;k<l;k++){wrap_listener[k]()}}}}}};function IE(sEvent,oProps){var oArgs=g_checkVarType(arguments,_oParam,"$Element#fireEvent");var ele=this._element;if(jindo._p_.normalCustomEvent[sEvent]){jindo._p_.fireCustomEvent(ele,sEvent,this,!!jindo._p_.normalCustomEvent[sEvent]);return this}sEvent=(sEvent+"").toLowerCase();var oEvent=document.createEventObject();switch(oArgs+""){case"4obj":oProps=oArgs.oProps;for(k in oProps){if(oProps.hasOwnProperty(k)){oEvent[k]=oProps[k]}}oEvent.button=(oProps.left?1:0)+(oProps.middle?4:0)+(oProps.right?2:0);oEvent.relatedTarget=oProps.relatedElement||null}if(this.tag=="input"&&sEvent=="click"){if(ele.type=="checkbox"){ele.checked=(!ele.checked)}else{if(ele.type=="radio"){ele.checked=true}}}this._element.fireEvent("on"+sEvent,oEvent);return this}function DOM2(sEvent,oProps){var oArgs=g_checkVarType(arguments,_oParam,"$Element#fireEvent");var ele=this._element;var oldEvent=sEvent;sEvent=jindo.$Element.eventManager.revisionEvent("",sEvent,sEvent);if(jindo._p_.normalCustomEvent[sEvent]){jindo._p_.fireCustomEvent(ele,sEvent,this,!!jindo._p_.normalCustomEvent[sEvent]);return this}var sType="HTMLEvents";sEvent=(sEvent+"").toLowerCase();if(sEvent=="click"||sEvent.indexOf("mouse")==0){sType="MouseEvent"}else{if(oldEvent.indexOf("wheel")>0){sEvent="DOMMouseScroll";sType=jindo._p_._JINDO_IS_FF?"MouseEvent":"MouseWheelEvent"}else{if(sEvent.indexOf("key")==0){sType="KeyboardEvent"}else{if(sEvent.indexOf("pointer")>0){sType="MouseEvent";sEvent=oldEvent}}}}var evt;switch(oArgs+""){case"4obj":oProps=oArgs.oProps;oProps.button=0+(oProps.middle?1:0)+(oProps.right?2:0);oProps.ctrl=oProps.ctrl||false;oProps.alt=oProps.alt||false;oProps.shift=oProps.shift||false;oProps.meta=oProps.meta||false;switch(sType){case"MouseEvent":evt=document.createEvent(sType);evt.initMouseEvent(sEvent,true,true,null,oProps.detail||0,oProps.screenX||0,oProps.screenY||0,oProps.clientX||0,oProps.clientY||0,oProps.ctrl,oProps.alt,oProps.shift,oProps.meta,oProps.button,oProps.relatedElement||null);break;case"KeyboardEvent":if(window.KeyEvent){evt=document.createEvent("KeyEvents");evt.initKeyEvent(sEvent,true,true,window,oProps.ctrl,oProps.alt,oProps.shift,oProps.meta,oProps.keyCode,oProps.keyCode)}else{try{evt=document.createEvent("Events")}catch(e){evt=document.createEvent("UIEvents")}finally{evt.initEvent(sEvent,true,true);evt.ctrlKey=oProps.ctrl;evt.altKey=oProps.alt;evt.shiftKey=oProps.shift;evt.metaKey=oProps.meta;evt.keyCode=oProps.keyCode;evt.which=oProps.keyCode}}break;default:evt=document.createEvent(sType);evt.initEvent(sEvent,true,true)}break;case"4str":evt=document.createEvent(sType);evt.initEvent(sEvent,true,true)}ele.dispatchEvent(evt);return this}jindo.$Element.prototype.fireEvent=(document.dispatchEvent!==undefined)?DOM2:IE;return this.fireEvent.apply(this,jindo._p_._toArray(arguments))};jindo.$Element.prototype.empty=function(){if(jindo.cssquery){jindo.cssquery.release()}this.html("");return this};jindo.$Element.prototype.remove=function(oChild){if(jindo.cssquery){jindo.cssquery.release()}var ___element=jindo.$Element;___element(___element._common(oChild,"remove")).leave();return this};jindo.$Element.prototype.leave=function(){var e=this._element;if(e.parentNode){if(jindo.cssquery){jindo.cssquery.release()}e.parentNode.removeChild(e)}return this};jindo.$Element.prototype.wrap=function(wrapper){var e=this._element;wrapper=jindo.$Element._common(wrapper,"wrap");if(e.parentNode){e.parentNode.insertBefore(wrapper,e)}wrapper.appendChild(e);return this};jindo.$Element.prototype.ellipsis=function(stringTail){var oArgs=g_checkVarType(arguments,{"4voi":[],"4str":["stringTail:String+"]},"$Element#ellipsis");stringTail=stringTail||"...";var txt=this.text();var len=txt.length;var padding=parseInt(this._getCss(this._element,"paddingTop"),10)+parseInt(this._getCss(this._element,"paddingBottom"),10);var cur_h=this._element.offsetHeight-padding;var i=0;var h=this.text("A")._element.offsetHeight-padding;if(cur_h<h*1.5){this.text(txt);return this}cur_h=h;while(cur_h<h*1.5){i+=Math.max(Math.ceil((len-i)/2),1);cur_h=this.text(txt.substring(0,i)+stringTail)._element.offsetHeight-padding}while(cur_h>h*1.5){i--;cur_h=this.text(txt.substring(0,i)+stringTail)._element.offsetHeight-padding}return this};jindo.$Element.prototype.indexOf=function(element){try{var e=jindo.$Element(element)._element;var n=this._element.childNodes;var c=0;var l=n.length;for(var i=0;i<l;i++){if(n[i].nodeType!=1){continue}if(n[i]===e){return c}c++}}catch(e){}return -1};jindo.$Element.prototype.queryAll=function(sSelector){var oArgs=g_checkVarType(arguments,{"4str":["sSelector:String+"]},"$Element#queryAll");var arrEle=jindo.cssquery(sSelector,this._element);var returnArr=[];for(var i=0,l=arrEle.length;i<l;i++){returnArr.push(jindo.$Element(arrEle[i]))}return returnArr};jindo.$Element.prototype.query=function(sSelector){var oArgs=g_checkVarType(arguments,{"4str":["sSelector:String+"]},"$Element#query");var ele=jindo.cssquery.getSingle(sSelector,this._element);return ele===null?ele:jindo.$Element(ele)};jindo.$Element.prototype.test=function(sSelector){var oArgs=g_checkVarType(arguments,{"4str":["sSelector:String+"]},"$Element#test");return jindo.cssquery.test(this._element,sSelector)};jindo.$Element.prototype.xpathAll=function(sXPath){var oArgs=g_checkVarType(arguments,{"4str":["sXPath:String+"]},"$Element#xpathAll");var arrEle=jindo.cssquery.xpath(sXPath,this._element);var returnArr=[];for(var i=0,l=arrEle.length;i<l;i++){returnArr.push(jindo.$Element(arrEle[i]))}return returnArr};jindo.$Element.insertAdjacentHTML=function(ins,html,insertType,type,fn,sType){var aArg=[html];aArg.callee=arguments.callee;var oArgs=g_checkVarType(aArg,{"4str":["sHTML:String+"]},"$Element#"+sType);var _ele=ins._element;html=html+"";if(_ele.insertAdjacentHTML&&!(/^<(option|tr|td|th|col)(?:.*?)>/.test(jindo._p_.trim(html).toLowerCase()))){_ele.insertAdjacentHTML(insertType,html)}else{var oDoc=_ele.ownerDocument||_ele.document||document;var fragment=oDoc.createDocumentFragment();var defaultElement;var sTag=jindo._p_.trim(html);var oParentTag={option:"select",tr:"tbody",thead:"table",tbody:"table",col:"table",td:"tr",th:"tr",div:"div"};var aMatch=/^\<(option|tr|thead|tbody|td|th|col)(?:.*?)\>/i.exec(sTag);var sChild=aMatch===null?"div":aMatch[1].toLowerCase();var sParent=oParentTag[sChild];defaultElement=jindo._p_._createEle(sParent,sTag,oDoc,true);var scripts=defaultElement.getElementsByTagName("script");for(var i=0,l=scripts.length;i<l;i++){scripts[i].parentNode.removeChild(scripts[i])}if(_ele.tagName.toLowerCase()=="table"&&!_ele.getElementsByTagName("tbody").length&&!sTag.match(/<tbody[^>]*>/i)){var elTbody=oDoc.createElement("tbody"),bTheadTfoot=sTag.match(/^<t(head|foot)[^>]*>/i);if(!bTheadTfoot){fragment.appendChild(elTbody);fragment=elTbody}}while(defaultElement[type]){fragment.appendChild(defaultElement[type])}bTheadTfoot&&fragment.appendChild(elTbody);fn(fragment.cloneNode(true))}return ins};jindo.$Element.prototype.appendHTML=function(sHTML){return jindo.$Element.insertAdjacentHTML(this,sHTML,"beforeEnd","firstChild",jindo.$Fn(function(oEle){var ele=this._element;if(ele.tagName.toLowerCase()==="table"){var nodes=ele.childNodes;for(var i=0,l=nodes.length;i<l;i++){if(nodes[i].nodeType==1){ele=nodes[i];break}}}ele.appendChild(oEle)},this).bind(),"appendHTML")};jindo.$Element.prototype.prependHTML=function(sHTML){var ___element=jindo.$Element;return ___element.insertAdjacentHTML(this,sHTML,"afterBegin","firstChild",jindo.$Fn(function(oEle){var ele=this._element;if(ele.tagName.toLowerCase()==="table"){var nodes=ele.childNodes;for(var i=0,l=nodes.length;i<l;i++){if(nodes[i].nodeType==1){ele=nodes[i];break}}}___element._prepend(ele,oEle)},this).bind(),"prependHTML")};jindo.$Element.prototype.beforeHTML=function(sHTML){return jindo.$Element.insertAdjacentHTML(this,sHTML,"beforeBegin","firstChild",jindo.$Fn(function(oEle){this._element.parentNode.insertBefore(oEle,this._element)},this).bind(),"beforeHTML")};jindo.$Element.prototype.afterHTML=function(sHTML){return jindo.$Element.insertAdjacentHTML(this,sHTML,"afterEnd","firstChild",jindo.$Fn(function(oEle){this._element.parentNode.insertBefore(oEle,this._element.nextSibling)},this).bind(),"afterHTML")};jindo.$Element.prototype.hasEventListener=function(sEvent){var oArgs=g_checkVarType(arguments,{"4str":["sEvent:String+"]},"$Element#hasEventListener"),oDoc,bHasEvent=false,sLowerCaseEvent=oArgs.sEvent.toLowerCase();if(this._key){oDoc=this._element.ownerDocument||this._element.document||document;if(sLowerCaseEvent=="load"&&this._element===oDoc){bHasEvent=jindo.$Element(window).hasEventListener(oArgs.sEvent)}else{if(sLowerCaseEvent=="domready"&&jindo.$Jindo.isWindow(this._element)){bHasEvent=jindo.$Element(oDoc).hasEventListener(oArgs.sEvent)}else{var realEvent=jindo.$Element.eventManager.revisionEvent("",sEvent);bHasEvent=!!jindo.$Element.eventManager.hasEvent(this._key,realEvent,oArgs.sEvent)}}return bHasEvent}return false};jindo.$Element.prototype.preventTapHighlight=function(bFlag){if(jindo._p_._JINDO_IS_MO){var sClassName="no_tap_highlight"+new Date().getTime();var elStyleTag=document.createElement("style");var elHTML=document.getElementsByTagName("html")[0];elStyleTag.type="text/css";elHTML.insertBefore(elStyleTag,elHTML.firstChild);var oSheet=elStyleTag.sheet||elStyleTag.styleSheet;oSheet.insertRule("."+sClassName+" { -webkit-tap-highlight-color: rgba(0,0,0,0); }",0);oSheet.insertRule("."+sClassName+" * { -webkit-tap-highlight-color: rgba(0,0,0,.25); }",0);jindo.$Element.prototype.preventTapHighlight=function(bFlag){return this[bFlag?"addClass":"removeClass"](sClassName)}}else{jindo.$Element.prototype.preventTapHighlight=function(bFlag){return this}}return this.preventTapHighlight.apply(this,jindo._p_._toArray(arguments))};jindo.$Element.prototype.data=function(sKey,vValue){var oType={g:["sKey:String+"],s4var:["sKey:String+","vValue:Variant"],s4obj:["oObj:Hash+"]};var jindoKey="_jindo";function toCamelCase(name){return name.replace(/\-(.)/g,function(_,a){return a.toUpperCase()})}function toDash(name){return name.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})}if(document.body.dataset){jindo.$Element.prototype.data=function(sKey,vValue){var sToStr,oArgs=g_checkVarType(arguments,oType,"$Element#data");var isNull=jindo.$Jindo.isNull;switch(oArgs+""){case"g":sKey=toCamelCase(sKey);var isMakeFromJindo=this._element.dataset[sKey+jindoKey];var sDateSet=this._element.dataset[sKey];if(sDateSet){if(isMakeFromJindo){return window.JSON.parse(sDateSet)}return sDateSet}return null;case"s4var":var oData;if(isNull(vValue)){sKey=toCamelCase(sKey);delete this._element.dataset[sKey];delete this._element.dataset[sKey+jindoKey];return this}else{oData={};oData[sKey]=vValue;sKey=oData}case"s4obj":var sChange;for(var i in sKey){sChange=toCamelCase(i);if(isNull(sKey[i])){delete this._element.dataset[sChange];delete this._element.dataset[sChange+jindoKey]}else{sToStr=jindo.$Json._oldToString(sKey[i]);if(sToStr!=null){this._element.dataset[sChange]=sToStr;this._element.dataset[sChange+jindoKey]="jindo"}}}return this}}}else{jindo.$Element.prototype.data=function(sKey,vValue){var sToStr,oArgs=g_checkVarType(arguments,oType,"$Element#data");var isNull=jindo.$Jindo.isNull;switch(oArgs+""){case"g":sKey=toDash(sKey);var isMakeFromJindo=this._element.getAttribute("data-"+sKey+jindoKey);var sVal=this._element.getAttribute("data-"+sKey);if(isMakeFromJindo){return(sVal!=null)?eval("("+sVal+")"):null}else{return sVal}case"s4var":var oData;if(isNull(vValue)){sKey=toDash(sKey);this._element.removeAttribute("data-"+sKey);this._element.removeAttribute("data-"+sKey+jindoKey);return this}else{oData={};oData[sKey]=vValue;sKey=oData}case"s4obj":var sChange;for(var i in sKey){sChange=toDash(i);if(isNull(sKey[i])){this._element.removeAttribute("data-"+sChange);this._element.removeAttribute("data-"+sChange+jindoKey)}else{sToStr=jindo.$Json._oldToString(sKey[i]);if(sToStr!=null){this._element.setAttribute("data-"+sChange,sToStr);this._element.setAttribute("data-"+sChange+jindoKey,"jindo")}}}return this}}}return this.data.apply(this,jindo._p_._toArray(arguments))};jindo.$ElementList=function(els){var cl=arguments.callee;if(els instanceof cl){return els}if(!(this instanceof cl)){try{return new cl(els)}catch(e){if(e instanceof TypeError){return null}throw e}}var oArgs=g_checkVarType(arguments,{"4arr":["aEle:Array+"],"4str":["sCssQuery:String+"],"4nul":["oEle:Null"],"4und":["oEle:Undefined"]},"$ElementList");switch(oArgs+""){case"4arr":els=oArgs.aEle;break;case"4str":els=jindo.cssquery(oArgs.sCssQuery);break;case"4nul":case"4und":els=[]}this._elements=[];for(var i=0,l=els.length;i<l;i++){this._elements.push(jindo.$Element(els[i]))}};(function(proto){var setters=["show","hide","toggle","addClass","removeClass","toggleClass","fireEvent","leave","empty","className","width","height","text","html","css","attr"];for(var i=0,l=setters.length;i<l;i++){var name=setters[i];if(jindo.$Element.prototype[name]){proto[setters[i]]=(function(name){return function(){try{var args=[];for(var j=0,m=arguments.length;j<m;j++){args.push(arguments[j])}for(var k=0,n=this._elements.length;k<n;k++){this._elements[k][name].apply(this._elements[k],args)}return this}catch(e){throw TypeError(e.message.replace(/\$Element/g,"$Elementlist#"+name).replace(/Element\.html/g,"Elementlist.html#"+name))}}})(setters[i])}}var setters2=["appear","disappear"];for(var i=0,l=setters2.length;i<l;i++){if(jindo.$Element.prototype[name]){proto[setters2[i]]=(function(name){return function(duration,callback){try{var self=this;for(var j=0,m=this._elements.length;j<m;j++){if(j==m-1){this._elements[j][name](duration,function(){callback&&callback(self)})}else{this._elements[j][name](duration)}}return this}catch(e){throw TypeError(e.message.replace(/\$Element/g,"$Elementlist#"+name).replace(/Element\.html/g,"Elementlist.html#"+name))}}})(setters2[i])}}})(jindo.$ElementList.prototype);jindo.$ElementList.prototype.get=function(idx){var oArgs=g_checkVarType(arguments,{"4num":["nIdx:Numeric"]},"$ElementList#get");return this._elements[idx]};jindo.$ElementList.prototype.getFirst=function(){return this._elements[0]};jindo.$ElementList.prototype.getLast=function(){return this._elements[Math.max(this._elements.length-1,0)]};jindo.$ElementList.prototype.length=function(nLen,oValue){var oArgs=g_checkVarType(arguments,{"4voi":[],"4num":[jindo.$Jindo._F("nLen:Numeric")],"4var":["nLen:Numeric","oValue:Variant"]},"$ElementList#length");var waEle=jindo.$A(this._elements);try{return waEle.length.apply(waEle,jindo._p_._toArray(arguments))}catch(e){throw TypeError(e.message.replace(/\$A/g,"$Elementlist#length").replace(/A\.html/g,"Elementlist.html#length"))}};jindo.$ElementList.prototype.$value=function(){return this._elements};jindo.$Form=function(el){var cl=arguments.callee;if(el instanceof cl){return el}if(!(this instanceof cl)){try{jindo.$Jindo._maxWarn(arguments.length,1,"$Form");return new cl(el)}catch(e){if(e instanceof TypeError){return null}throw e}}var oArgs=g_checkVarType(arguments,{"4str":["oForm:String+"],"4ele":["oForm:Element+"]},"$Form");switch(oArgs+""){case"4str":el=jindo.$(el);break}if(!(el.tagName&&el.tagName.toUpperCase()=="FORM")){throw TypeError("only form")}this._form=el};jindo.$Form.prototype.$value=function(){return this._form};jindo.$Form.prototype.serialize=function(){var self=this;var oRet={};var nLen=arguments.length;var fpInsert=function(eEle,sKey){if(!eEle.disabled){var sVal=self.value(sKey);if(sVal!==undefined){oRet[sKey]=sVal}}};if(nLen==0){var len=this._form.elements.length;for(var i=0;i<len;i++){var o=this._form.elements[i];if(o.name){fpInsert(o,o.name)}}}else{for(var i=0;i<nLen;i++){fpInsert(this.element(arguments[i]),arguments[i])}}return jindo.$H(oRet).toQueryString()};jindo.$Form.prototype.element=function(sKey){var oArgs=g_checkVarType(arguments,{"4voi":[],"4str":[jindo.$Jindo._F("sKey:String+")]},"$Form#element");switch(oArgs+""){case"4voi":return jindo._p_._toArray(this._form.elements);case"4str":return this._form.elements[sKey+""]}};jindo.$Form.prototype.enable=function(sKey){var oArgs=g_checkVarType(arguments,{s4bln:["sName:String+","bEnable:Boolean"],s4obj:["oObj:Hash+"],g:[jindo.$Jindo._F("sName:String+")]},"$Form#enable");switch(oArgs+""){case"s4bln":var aEls=this._form[sKey];if(!aEls){return this}aEls=aEls.nodeType==1?[aEls]:aEls;var sFlag=oArgs.bEnable;for(var i=0;i<aEls.length;i++){aEls[i].disabled=!sFlag}return this;case"s4obj":sKey=oArgs.oObj;var self=this;for(var k in sKey){if(sKey.hasOwnProperty(k)){self.enable(k,sKey[k])}}return this;case"g":var aEls=this._form[sKey];if(!aEls){return this}aEls=aEls.nodeType==1?[aEls]:aEls;var bEnabled=true;for(var i=0;i<aEls.length;i++){if(aEls[i].disabled){bEnabled=false;break}}return bEnabled}};jindo.$Form.prototype.value=function(sKey){var oArgs=g_checkVarType(arguments,{s4str:["sKey:String+","vValue:Variant"],s4obj:[jindo.$Jindo._F("oObj:Hash+")],g:["sKey:String+"]},"$Form#value");var elOption,sValue;if(oArgs+""=="s4obj"){var self=this;sKey=oArgs.oObj;for(var k in sKey){if(sKey.hasOwnProperty(k)){self.value(k,sKey[k])}}return this}var aEls=this._form[sKey];if(!aEls){throw new jindo.$Error(sKey+jindo.$Except.NONE_ELEMENT,"$Form#value")}aEls=aEls.nodeType==1?[aEls]:aEls;switch(oArgs+""){case"s4str":var sVal=oArgs.vValue;var nLen=aEls.length;for(var i=0;i<nLen;i++){var o=aEls[i];switch(o.type){case"radio":o.checked=(o.value==sVal);break;case"checkbox":if(sVal.constructor==Array){o.checked=jindo.$A(sVal).has(o.value)}else{o.checked=(o.value==sVal)}break;case"select-one":var nIndex=-1;for(var i=0,len=o.options.length;i<len;i++){elOption=o.options[i];if(elOption.value==sVal||elOption.text==sVal){nIndex=i;continue}}o.selectedIndex=nIndex;break;case"select-multiple":var nIndex=-1;if(jindo.$Jindo.isArray(sVal)){var waVal=jindo.$A(sVal);for(var i=0,len=o.options.length;i<len;i++){elOption=o.options[i];o.options[i].selected=waVal.has(elOption.value)||waVal.has(elOption.text)}}else{for(var i=0,len=o.options.length;i<len;i++){elOption=o.options[i];if(elOption.value==sVal||elOption.text==sVal){nIndex=i;continue}}o.selectedIndex=nIndex}break;default:o.value=sVal}}return this;case"g":var aRet=[];var nLen=aEls.length;for(var i=0;i<nLen;i++){var o=aEls[i];switch(o.type){case"radio":case"checkbox":if(o.checked){aRet.push(o.value)}break;case"select-one":if(o.selectedIndex!=-1){elOption=o.options[o.selectedIndex];sValue=elOption.value==""?elOption.text:elOption.value;aRet.push(sValue)}break;case"select-multiple":if(o.selectedIndex!=-1){for(var i=0,len=o.options.length;i<len;i++){elOption=o.options[i];if(elOption.selected){sValue=elOption.value==""?elOption.text:elOption.value;aRet.push(sValue)}}}break;default:aRet.push(o.value)}}return aRet.length>1?aRet:aRet[0]}};jindo.$Form.prototype.submit=function(sTargetName,fValidation){var oArgs=g_checkVarType(arguments,{voi:[],"4str":["sTargetName:String+"],"4fun":["fValidation:Function+"],"4fun2":["sTargetName:String+","fValidation:Function+"]},"$Form#submit");var sOrgTarget=null;switch(oArgs+""){case"4str":sOrgTarget=this._form.target;this._form.target=oArgs.sTargetName;break;case"4fun":case"4fun2":if(!oArgs.fValidation.call(this,this._form)){return this}if(oArgs+""=="4fun2"){sOrgTarget=this._form.target;this._form.target=oArgs.sTargetName}}this._form.submit();if(!jindo.$Jindo.isNull(sOrgTarget)){this._form.target=sOrgTarget}return this};jindo.$Form.prototype.reset=function(fValidation){var oArgs=g_checkVarType(arguments,{"4voi":[],"4fun":["fValidation:Function+"]},"$Form#reset");if(oArgs+""=="4fun"){if(!fValidation.call(this,this._form)){return this}}this._form.reset();return this};jindo.$Document=function(el){var cl=arguments.callee;if(el instanceof cl){return el}if(!(this instanceof cl)){try{jindo.$Jindo._maxWarn(arguments.length,1,"$Document");return new cl(el||document)}catch(e){if(e instanceof TypeError){return null}throw e}}var oArgs=g_checkVarType(arguments,{"4doc":["oDocument:Document+"]},"$Document");if(oArgs==null){this._doc=document}else{this._doc=el}this._docKey=this.renderingMode()=="Standards"?"documentElement":"body"};(function(){var qu=jindo.cssquery;var type={query:qu.getSingle,queryAll:qu,xpathAll:qu.xpath};for(var i in type){jindo.$Document.prototype[i]=(function(sMethod,fp){return function(sQuery){var oArgs=g_checkVarType(arguments,{"4str":["sQuery:String+"]},"$Document#"+sMethod);return fp(sQuery,this._doc)}})(i,type[i])}})();jindo.$Document.prototype.$value=function(){return this._doc};jindo.$Document.prototype.scrollSize=function(){var oDoc=this._doc[jindo._p_._JINDO_IS_WK?"body":this._docKey];return{width:Math.max(oDoc.scrollWidth,oDoc.clientWidth),height:Math.max(oDoc.scrollHeight,oDoc.clientHeight)}};jindo.$Document.prototype.scrollPosition=function(){var oDoc=this._doc[jindo._p_._JINDO_IS_WK?"body":this._docKey];return{left:oDoc.scrollLeft||window.pageXOffset||window.scrollX||0,top:oDoc.scrollTop||window.pageYOffset||window.scrollY||0}};jindo.$Document.prototype.clientSize=function(){var oDoc=this._doc[this._docKey];var isSafari=jindo._p_._JINDO_IS_SP&&!jindo._p_._JINDO_IS_CH;return(isSafari)?{width:window.innerWidth,height:window.innerHeight}:{width:oDoc.clientWidth,height:oDoc.clientHeight}};jindo.$Document.prototype.renderingMode=function(){var agent=jindo._p_._j_ag;var isIe=jindo._p_._JINDO_IS_IE;var isSafari=(jindo._p_._JINDO_IS_WK&&!jindo._p_._JINDO_IS_CH&&navigator.vendor.indexOf("Apple")>-1);var sRet;if("compatMode" in this._doc){sRet=this._doc.compatMode=="CSS1Compat"?"Standards":(isIe?"Quirks":"Almost")}else{sRet=isSafari?"Standards":"Quirks"}return sRet};jindo.$Window=function(el){var cl=arguments.callee;if(el instanceof cl){return el}if(!(this instanceof cl)){try{jindo.$Jindo._maxWarn(arguments.length,1,"$Window");return new cl(el||window)}catch(e){if(e instanceof TypeError){return null}throw e}}var oArgs=g_checkVarType(arguments,{"4win":["el:Window+"]},"$Window");this._win=el};jindo.$Window.prototype.$value=function(){return this._win};jindo.$Window.prototype.resizeTo=function(nWidth,nHeight){var oArgs=g_checkVarType(arguments,{"4num":["nWidth:Numeric","nHeight:Numeric"]},"$Window#resizeTo");this._win.resizeTo(nWidth,nHeight);return this};jindo.$Window.prototype.resizeBy=function(nWidth,nHeight){var oArgs=g_checkVarType(arguments,{"4num":["nWidth:Numeric","nHeight:Numeric"]},"$Window#resizeBy");this._win.resizeBy(nWidth,nHeight);return this};jindo.$Window.prototype.moveTo=function(nLeft,nTop){var oArgs=g_checkVarType(arguments,{"4num":["nLeft:Numeric","nTop:Numeric"]},"$Window#moveTo");this._win.moveTo(nLeft,nTop);return this};jindo.$Window.prototype.moveBy=function(nLeft,nTop){var oArgs=g_checkVarType(arguments,{"4num":["nLeft:Numeric","nTop:Numeric"]},"$Window#moveBy");this._win.moveBy(nLeft,nTop);return this};jindo.$Window.prototype.sizeToContent=function(nWidth,nHeight){var oArgs=g_checkVarType(arguments,{"4num":["nWidth:Numeric","nHeight:Numeric"],"4voi":[]},"$Window#sizeToContent");if(this._win.sizeToContent){this._win.sizeToContent()}else{if(arguments.length!=2){var innerX,innerY;var self=this._win;var doc=this._win.document;if(self.innerHeight){innerX=self.innerWidth;innerY=self.innerHeight}else{if(doc.documentElement&&doc.documentElement.clientHeight){innerX=doc.documentElement.clientWidth;innerY=doc.documentElement.clientHeight}else{if(doc.body){innerX=doc.body.clientWidth;innerY=doc.body.clientHeight}}}var pageX,pageY;var test1=doc.body.scrollHeight;var test2=doc.body.offsetHeight;if(test1>test2){pageX=doc.body.scrollWidth;pageY=doc.body.scrollHeight}else{pageX=doc.body.offsetWidth;pageY=doc.body.offsetHeight}nWidth=pageX-innerX;nHeight=pageY-innerY}this._win.resizeBy(nWidth,nHeight)}return this};jindo.$S=function(str){var cl=arguments.callee;if(str instanceof cl){return str}if(!(this instanceof cl)){try{jindo.$Jindo._maxWarn(arguments.length,1,"$Json");return new cl(str||"")}catch(e){if(e instanceof TypeError){return null}throw e}}var oArgs=g_checkVarType(arguments,{nul:["nul:Null"],unde:["unde:Undefined"],"4var":["str:Variant"]},"$S");switch(oArgs+""){case"nul":case"unde":this._str="";break;case"4var":this._str=(oArgs.str).toString();break}};jindo.$S.prototype.$value=function(){return this._str};jindo.$S.prototype.toString=jindo.$S.prototype.$value;jindo.$S.prototype.trim=function(){if("a".trim){jindo.$S.prototype.trim=function(){return jindo.$S(this._str.trim())}}else{jindo.$S.prototype.trim=function(){return jindo.$S(jindo._p_.trim(this._str))}}return this.trim()};jindo.$S.prototype.escapeHTML=function(){var entities={'"':"quot","&":"amp","<":"lt",">":"gt","'":"#39"};var s=this._str.replace(/[<>&"']/g,function(m0){return entities[m0]?"&"+entities[m0]+";":m0});return jindo.$S(s)};jindo.$S.prototype.stripTags=function(){return jindo.$S(this._str.replace(/<\/?(?:h[1-5]|[a-z]+(?:\:[a-z]+)?)[^>]*>/ig,""))};jindo.$S.prototype.times=function(nTimes){var oArgs=g_checkVarType(arguments,{"4str":["nTimes:Numeric"]},"$S#times");if(!oArgs){return this}return jindo.$S(Array(oArgs.nTimes+1).join(this._str))};jindo.$S.prototype.unescapeHTML=function(){var entities={quot:'"',amp:"&",lt:"<",gt:">","#39":"'"};var s=this._str.replace(/&([a-z]+|#[0-9]+);/g,function(m0,m1){return entities[m1]?entities[m1]:m0});return jindo.$S(s)};jindo.$S.prototype.escape=function(){var s=this._str.replace(/([\u0080-\uFFFF]+)|[\n\r\t"'\\]/g,function(m0,m1,_){if(m1){return escape(m1).replace(/%/g,"\\")}return(_={"\n":"\\n","\r":"\\r","\t":"\\t"})[m0]?_[m0]:"\\"+m0});return jindo.$S(s)};jindo.$S.prototype.bytes=function(vConfig){var oArgs=g_checkVarType(arguments,{"4voi":[],"4num":["nConfig:Numeric"],"4obj":["nConfig:Hash+"]},"$S#bytes");var code=0,bytes=0,i=0,len=this._str.length;var charset=((document.charset||document.characterSet||document.defaultCharset)+"");var cut,nBytes;switch(oArgs+""){case"4voi":cut=false;break;case"4num":cut=true;nBytes=vConfig;break;case"4obj":charset=vConfig.charset||charset;nBytes=vConfig.size||false;cut=!!nBytes;break}if(charset.toLowerCase()=="utf-8"){for(i=0;i<len;i++){code=this._str.charCodeAt(i);if(code<128){bytes+=1}else{if(code<2048){bytes+=2}else{if(code<65536){bytes+=3}else{bytes+=4}}}if(cut&&bytes>nBytes){this._str=this._str.substr(0,i);break}}}else{for(i=0;i<len;i++){bytes+=(this._str.charCodeAt(i)>128)?2:1;if(cut&&bytes>nBytes){this._str=this._str.substr(0,i);break}}}return cut?this:bytes};jindo.$S.prototype.parseString=function(){if(this._str==""){return{}}var str=this._str.split(/&/g),pos,key,val,buf={},isescape=false;for(var i=0;i<str.length;i++){key=str[i].substring(0,pos=str[i].indexOf("=")),isescape=false;try{val=decodeURIComponent(str[i].substring(pos+1))}catch(e){isescape=true;val=decodeURIComponent(unescape(str[i].substring(pos+1)))}if(key.substr(key.length-2,2)=="[]"){key=key.substring(0,key.length-2);if(jindo.$Jindo.isUndefined(buf[key])){buf[key]=[]}buf[key][buf[key].length]=isescape?escape(val):val}else{buf[key]=isescape?escape(val):val}}return buf};jindo.$S.prototype.escapeRegex=function(){var s=this._str;var r=/([\?\.\*\+\-\/\(\)\{\}\[\]\:\!\^\$\\\|])/g;return jindo.$S(s.replace(r,"\\$1"))};jindo.$S.prototype.format=function(){var args=arguments;var idx=0;var s=this._str.replace(/%([ 0])?(-)?([1-9][0-9]*)?([bcdsoxX])/g,function(m0,m1,m2,m3,m4){var a=args[idx++];var ret="",pad="";m3=m3?+m3:0;if(m4=="s"){ret=a+""}else{if(" bcdoxX".indexOf(m4)>0){if(!jindo.$Jindo.isNumeric(a)){return""}ret=(m4=="c")?String.fromCharCode(a):a.toString(({b:2,d:10,o:8,x:16,X:16})[m4]);if(" X".indexOf(m4)>0){ret=ret.toUpperCase()}}}if(ret.length<m3){pad=jindo.$S(m1||" ").times(m3-ret.length)._str}(m2=="-")?(ret+=pad):(ret=pad+ret);return ret});return jindo.$S(s)};jindo.$Json=function(sObject){var cl=arguments.callee;if(sObject instanceof cl){return sObject}if(!(this instanceof cl)){try{jindo.$Jindo._maxWarn(arguments.length,1,"$Json");return new cl(arguments.length?sObject:{})}catch(e){if(e instanceof TypeError){return null}throw e}}g_checkVarType(arguments,{"4var":["oObject:Variant"]},"$Json");this._object=sObject};jindo.$Json._oldMakeJSON=function(sObject,sType){try{if(jindo.$Jindo.isString(sObject)&&/^(?:\s*)[\{\[]/.test(sObject)){sObject=eval("("+sObject+")")}else{return sObject}}catch(e){throw new jindo.$Error(jindo.$Except.PARSE_ERROR,sType)}return sObject};jindo.$Json.fromXML=function(sXML){var cache=jindo.$Jindo;var oArgs=cache.checkVarType(arguments,{"4str":["sXML:String+"]},"<static> $Json#fromXML");var o={};var re=/\s*<(\/?[\w:\-]+)((?:\s+[\w:\-]+\s*=\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'))*)\s*((?:\/>)|(?:><\/\1>|\s*))|\s*<!\[CDATA\[([\w\W]*?)\]\]>\s*|\s*>?([^<]*)/ig;var re2=/^[0-9]+(?:\.[0-9]+)?$/;var ec={"&amp;":"&","&nbsp;":" ","&quot;":'"',"&lt;":"<","&gt;":">"};var fg={tags:["/"],stack:[o]};var es=function(s){if(cache.isUndefined(s)){return""}return s.replace(/&[a-z]+;/g,function(m){return(cache.isString(ec[m]))?ec[m]:m})};var at=function(s,c){s.replace(/([\w\:\-]+)\s*=\s*(?:"((?:\\"|[^"])*)"|'((?:\\'|[^'])*)')/g,function($0,$1,$2,$3){c[$1]=es(($2?$2.replace(/\\"/g,'"'):undefined)||($3?$3.replace(/\\'/g,"'"):undefined))})};var em=function(o){for(var x in o){if(o.hasOwnProperty(x)){if(Object.prototype[x]){continue}return false}}return true};var cb=function($0,$1,$2,$3,$4,$5){var cur,cdata="";var idx=fg.stack.length-1;if(cache.isString($1)&&$1){if($1.substr(0,1)!="/"){var has_attr=(typeof $2=="string"&&$2);var closed=(typeof $3=="string"&&$3);var newobj=(!has_attr&&closed)?"":{};cur=fg.stack[idx];if(cache.isUndefined(cur[$1])){cur[$1]=newobj;cur=fg.stack[idx+1]=cur[$1]}else{if(cur[$1] instanceof Array){var len=cur[$1].length;cur[$1][len]=newobj;cur=fg.stack[idx+1]=cur[$1][len]}else{cur[$1]=[cur[$1],newobj];cur=fg.stack[idx+1]=cur[$1][1]}}if(has_attr){at($2,cur)}fg.tags[idx+1]=$1;if(closed){fg.tags.length--;fg.stack.length--}}else{fg.tags.length--;fg.stack.length--}}else{if(cache.isString($4)&&$4){cdata=$4}else{if(cache.isString($5)&&$5){cdata=es($5)}}}if(cdata.replace(/^\s+/g,"").length>0){var par=fg.stack[idx-1];var tag=fg.tags[idx];if(re2.test(cdata)){cdata=parseFloat(cdata)}else{if(cdata=="true"){cdata=true}else{if(cdata=="false"){cdata=false}}}if(cache.isUndefined(par)){return}if(par[tag] instanceof Array){var o=par[tag];if(cache.isHash(o[o.length-1])&&!em(o[o.length-1])){o[o.length-1].$cdata=cdata;o[o.length-1].toString=function(){return cdata}}else{o[o.length-1]=cdata}}else{if(cache.isHash(par[tag])&&!em(par[tag])){par[tag].$cdata=cdata;par[tag].toString=function(){return cdata}}else{par[tag]=cdata}}}};sXML=sXML.replace(/<(\?|\!-)[^>]*>/g,"");sXML.replace(re,cb);return jindo.$Json(o)};jindo.$Json.prototype.get=function(sPath){var cache=jindo.$Jindo;var oArgs=cache.checkVarType(arguments,{"4str":["sPath:String+"]},"$Json#get");var o=jindo.$Json._oldMakeJSON(this._object,"$Json#get");if(!(cache.isHash(o)||cache.isArray(o))){throw new jindo.$Error(jindo.$Except.JSON_MUST_HAVE_ARRAY_HASH,"$Json#get")}var p=sPath.split("/");var re=/^([\w:\-]+)\[([0-9]+)\]$/;var stack=[[o]],cur=stack[0];var len=p.length,c_len,idx,buf,j,e;for(var i=0;i<len;i++){if(p[i]=="."||p[i]==""){continue}if(p[i]==".."){stack.length--}else{buf=[];idx=-1;c_len=cur.length;if(c_len==0){return[]}if(re.test(p[i])){idx=+RegExp.$2}for(j=0;j<c_len;j++){e=cur[j][p[i]];if(cache.isUndefined(e)){continue}if(cache.isArray(e)){if(idx>-1){if(idx<e.length){buf[buf.length]=e[idx]}}else{buf=buf.concat(e)}}else{if(idx==-1){buf[buf.length]=e}}}stack[stack.length]=buf}cur=stack[stack.length-1]}return cur};jindo.$Json.prototype.toString=function(){return jindo.$Json._oldToString(this._object)};jindo.$Json._oldToString=function(oObj){var cache=jindo.$Jindo;var func={$:function($){if(cache.isNull($)||!cache.isString($)&&$==Infinity){return"null"}if(cache.isFunction($)){return undefined}if(cache.isUndefined($)){return undefined}if(cache.isBoolean($)){return $?"true":"false"}if(cache.isString($)){return this.s($)}if(cache.isNumeric($)){return $}if(cache.isArray($)){return this.a($)}if(cache.isHash($)){return this.o($)}if(cache.isDate($)){return $+""}if(typeof $=="object"||cache.isRegExp($)){return"{}"}if(isNaN($)){return"null"}},s:function(s){var e={'"':'\\"',"\\":"\\\\","\n":"\\n","\r":"\\r","\t":"\\t"};var c=function(m){return(e[m]!==undefined)?e[m]:m};return'"'+s.replace(/[\\"'\n\r\t]/g,c)+'"'},a:function(a){var s="[",c="",n=a.length;for(var i=0;i<n;i++){if(cache.isFunction(a[i])){continue}s+=c+this.$(a[i]);if(!c){c=","}}return s+"]"},o:function(o){o=jindo.$H(o).ksort().$value();var s="{",c="";for(var x in o){if(o.hasOwnProperty(x)){if(cache.isUndefined(o[x])||cache.isFunction(o[x])){continue}s+=c+this.s(x)+":"+this.$(o[x]);if(!c){c=","}}}return s+"}"}};return func.$(oObj)};jindo.$Json.prototype.toXML=function(){var f=function($,tag){var t=function(s,at){return"<"+tag+(at||"")+">"+s+"</"+tag+">"};switch(typeof $){case"undefined":case"null":return t("");case"number":return t($);case"string":if($.indexOf("<")<0){return t($.replace(/&/g,"&amp;"))}else{return t("<![CDATA["+$+"]]>")}case"boolean":return t(String($));case"object":var ret="";if($ instanceof Array){var len=$.length;for(var i=0;i<len;i++){ret+=f($[i],tag)}}else{var at="";for(var x in $){if($.hasOwnProperty(x)){if(x=="$cdata"||typeof $[x]=="function"){continue}ret+=f($[x],x)}}if(tag){ret=t(ret,at)}}return ret}};return f(jindo.$Json._oldMakeJSON(this._object,"$Json#toXML"),"")};jindo.$Json.prototype.toObject=function(){return jindo.$Json._oldMakeJSON(this._object,"$Json#toObject")};jindo.$Json.prototype.compare=function(oObj){var cache=jindo.$Jindo;var oArgs=cache.checkVarType(arguments,{"4obj":["oData:Hash+"],"4arr":["oData:Array+"]},"$Json#compare");function compare(vSrc,vTar){if(cache.isArray(vSrc)){if(vSrc.length!==vTar.length){return false}for(var i=0,nLen=vSrc.length;i<nLen;i++){if(!arguments.callee(vSrc[i],vTar[i])){return false}}return true}else{if(cache.isRegExp(vSrc)||cache.isFunction(vSrc)||cache.isDate(vSrc)){return String(vSrc)===String(vTar)}else{if(typeof vSrc==="number"&&isNaN(vSrc)){return isNaN(vTar)}else{if(cache.isHash(vSrc)){var nLen=0;for(var k in vSrc){nLen++}for(var k in vTar){nLen--}if(nLen!==0){return false}for(var k in vSrc){if(k in vTar===false||!arguments.callee(vSrc[k],vTar[k])){return false}}return true}}}}return vSrc===vTar}try{return compare(jindo.$Json._oldMakeJSON(this._object,"$Json#compare"),oObj)}catch(e){return false}};jindo.$Json.prototype.$value=jindo.$Json.prototype.toObject;jindo.$Ajax=function(url,option){var cl=arguments.callee;if(!(this instanceof cl)){try{jindo.$Jindo._maxWarn(arguments.length,2,"$Ajax");return new cl(url,option||{})}catch(e){if(e instanceof TypeError){return null}throw e}}var ___ajax=jindo.$Ajax;var ___error=jindo.$Error;var ___except=jindo.$Except;var oArgs=g_checkVarType(arguments,{"4str":["sURL:String+"],"4obj":["sURL:String+","oOption:Hash+"]},"$Ajax");if(oArgs+""=="for_string"){oArgs.oOption={}}function _getXHR(sUrl){var xhr=window.XMLHttpRequest&&new XMLHttpRequest();if(this._checkCORSUrl(this._url)){if(xhr&&"withCredentials" in xhr){return xhr}else{if(window.XDomainRequest){this._bXDomainRequest=true;return new XDomainRequest()}}}else{if(xhr){return xhr}else{if(window.ActiveXObject){try{return new ActiveXObject("MSXML2.XMLHTTP")}catch(e){return new ActiveXObject("Microsoft.XMLHTTP")}}}}return null}var loc=location.toString();var domain="";try{domain=loc.match(/^https?:\/\/([a-z0-9_\-\.]+)/i)[1]}catch(e){}this._status=0;this._url=oArgs.sURL;this._headers={};this._options={type:"xhr",method:"post",proxy:"",timeout:0,onload:function(req){},onerror:null,ontimeout:function(req){},jsonp_charset:"utf-8",callbackid:"",callbackname:"",sendheader:true,async:true,decode:true,postBody:false,withCredentials:false};this._options=___ajax._setProperties(oArgs.oOption,this);___ajax._validationOption(this._options,"$Ajax");if(___ajax.CONFIG){this.option(___ajax.CONFIG)}var _opt=this._options;_opt.type=_opt.type.toLowerCase();_opt.method=_opt.method.toLowerCase();if(window["__"+jindo._p_.jindoName+"_callback"]===undefined){window["__"+jindo._p_.jindoName+"_callback"]=[];window["__"+jindo._p_.jindoName+"2_callback"]=[]}var t=this;switch(_opt.type){case"put":case"delete":case"get":case"post":_opt.method=_opt.type;case"xhr":this._request=_getXHR.call(this);this._checkCORS(this._url,_opt.type,"");break;case"flash":if(!___ajax.SWFRequest){throw new ___error(jindo._p_.jindoName+".$Ajax.SWFRequest"+___except.REQUIRE_AJAX,"$Ajax")}this._request=new ___ajax.SWFRequest(function(name,value){return t.option.apply(t,arguments)});break;case"jsonp":if(!___ajax.JSONPRequest){throw new ___error(jindo._p_.jindoName+".$Ajax.JSONPRequest"+___except.REQUIRE_AJAX,"$Ajax")}this._request=new ___ajax.JSONPRequest(function(name,value){return t.option.apply(t,arguments)});break;case"iframe":if(!___ajax.FrameRequest){throw new ___error(jindo._p_.jindoName+".$Ajax.FrameRequest"+___except.REQUIRE_AJAX,"$Ajax")}this._request=new ___ajax.FrameRequest(function(name,value){return t.option.apply(t,arguments)})}};jindo.$Ajax.prototype._checkCORSUrl=function(sUrl){return/^http/.test(sUrl)&&!new RegExp("^http://"+window.location.host,"i").test(sUrl)};jindo.$Ajax.prototype._checkCORS=function(sUrl,sType,sMethod){this._bCORS=false;if(this._checkCORSUrl(sUrl)&&sType==="xhr"){if(this._request&&(this._bXDomainRequest||"withCredentials" in this._request)){this._bCORS=true}else{throw new jindo.$Error(jindo.$Except.NOT_SUPPORT_CORS,"$Ajax"+sMethod)}}};jindo.$Ajax._setProperties=function(option,context){option=option||{};var type;if((option.type=="put"||option.type=="delete"||option.type=="get"||option.type=="post")&&!option.method){option.method=option.type;type=option.type="xhr"}type=option.type=(option.type||"xhr");option.onload=jindo.$Fn(option.onload||function(){},context).bind();option.method=option.method||"post";if(type!="iframe"){option.timeout=option.timeout||0;option.ontimeout=jindo.$Fn(option.ontimeout||function(){},context).bind();option.onerror=jindo.$Fn(option.onerror||function(){},context).bind()}if(type=="xhr"){option.async=option.async===undefined?true:option.async;option.postBody=option.postBody===undefined?false:option.postBody;option.withCredentials=option.withCredentials===undefined?false:option.withCredentials}else{if(type=="jsonp"){option.method="get";option.jsonp_charset=option.jsonp_charset||"utf-8";option.callbackid=option.callbackid||"";option.callbackname=option.callbackname||""}else{if(type=="flash"){option.sendheader=option.sendheader===undefined?true:option.sendheader;option.decode=option.decode===undefined?true:option.decode}else{if(type=="iframe"){option.proxy=option.proxy||""}}}}return option};jindo.$Ajax._validationOption=function(oOption,sMethod){var ___except=jindo.$Except;var sType=oOption.type;if(sType==="jsonp"){if(oOption.method!=="get"){jindo.$Jindo._warn(___except.CANNOT_USE_OPTION+"\n\t"+sMethod+"-method="+oOption.method)}}else{if(sType==="flash"){if(!(oOption.method==="get"||oOption.method==="post")){jindo.$Jindo._warn(___except.CANNOT_USE_OPTION+"\n\t"+sMethod+"-method="+oOption.method)}}}if(oOption.postBody){if(!(sType==="xhr"&&(oOption.method!=="get"))){jindo.$Jindo._warn(___except.CANNOT_USE_OPTION+"\n\t"+oOption.method+"-postBody="+oOption.postBody)}}var oTypeProperty={xhr:"onload|timeout|ontimeout|onerror|async|method|postBody|type|withCredentials",jsonp:"onload|timeout|ontimeout|onerror|jsonp_charset|callbackid|callbackname|method|type",flash:"onload|timeout|ontimeout|onerror|sendheader|decode|method|type",iframe:"onload|proxy|method|type"},aName=[],i=0;for(aName[i++] in oOption){}var sProperty=oTypeProperty[sType]||"";for(var i=0,l=aName.length;i<l;i++){if(sProperty.indexOf(aName[i])==-1){jindo.$Jindo._warn(___except.CANNOT_USE_OPTION+"\n\t"+sType+"-"+aName[i])}}};jindo.$Ajax.prototype._onload=(function(isIE){var ___ajax=jindo.$Ajax;var cache=jindo.$Jindo;if(isIE){return function(){var status=this._request.status;var bSuccess=this._request.readyState==4&&(status==200||status==0)||(this._bXDomainRequest&&!!this._request.responseText);var oResult;if(this._request.readyState==4||this._bXDomainRequest){try{if((!bSuccess)&&cache.isFunction(this._options.onerror)){this._options.onerror(new ___ajax.Response(this._request))}else{if(!this._is_abort){oResult=this._options.onload(new ___ajax.Response(this._request))}}}catch(e){throw e}finally{if(cache.isFunction(this._oncompleted)){this._oncompleted(bSuccess,oResult)}if(this._options.type=="xhr"){this.abort();try{delete this._request.onload}catch(e){this._request.onload=undefined}}this._request.onreadystatechange&&delete this._request.onreadystatechange}}}}else{return function(){var status=this._request.status;var bSuccess=this._request.readyState==4&&(status==200||status==0);var oResult;if(this._request.readyState==4){try{if((!bSuccess)&&cache.isFunction(this._options.onerror)){this._options.onerror(new ___ajax.Response(this._request))}else{oResult=this._options.onload(new ___ajax.Response(this._request))}}catch(e){throw e}finally{this._status--;if(cache.isFunction(this._oncompleted)){this._oncompleted(bSuccess,oResult)}}}}}})(jindo._p_._JINDO_IS_IE);jindo.$Ajax.prototype.request=function(oData){var cache=jindo.$Jindo;var oArgs=cache.checkVarType(arguments,{"4voi":[],"4obj":[cache._F("oData:Hash+")],"4str":["sData:String+"]},"$Ajax#request");this._status++;var t=this;var req=this._request;var opt=this._options;var data,v,a=[],data="";var _timer=null;var url=this._url;this._is_abort=false;var sUpType=opt.type.toUpperCase();var sUpMethod=opt.method.toUpperCase();if(opt.postBody&&sUpType=="XHR"&&sUpMethod!="GET"){if(oArgs+""=="4str"){data=oArgs.sData}else{if(oArgs+""=="4obj"){data=jindo.$Json(oArgs.oData).toString()}else{data=null}}}else{switch(oArgs+""){case"4voi":data=null;break;case"4obj":var oData=oArgs.oData;for(var k in oData){if(oData.hasOwnProperty(k)){v=oData[k];if(cache.isFunction(v)){v=v()}if(cache.isArray(v)||(jindo.$A&&v instanceof jindo.$A)){if(v instanceof jindo.$A){v=v._array}for(var i=0;i<v.length;i++){a[a.length]=k+"="+encodeURIComponent(v[i])}}else{a[a.length]=k+"="+encodeURIComponent(v)}}}data=a.join("&")}}if(data&&sUpType=="XHR"&&sUpMethod=="GET"){if(url.indexOf("?")==-1){url+="?"}else{url+="&"}url+=data;data=null}if(sUpType=="XHR"){req.open(sUpMethod,url,!!opt.async)}else{req.open(sUpMethod,url)}if(opt.withCredentials){req.withCredentials=true}if(sUpType=="XHR"&&sUpMethod=="POST"&&req.setRequestHeader){req.setRequestHeader("If-Modified-Since","Thu, 1 Jan 1970 00:00:00 GMT")}if((sUpType=="XHR"||sUpType=="IFRAME"||(sUpType=="FLASH"&&opt.sendheader))&&req.setRequestHeader){if(!this._headers["Content-Type"]){req.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8")}req.setRequestHeader("charset","utf-8");if(!this._bCORS&&!this._headers["X-Requested-With"]){req.setRequestHeader("X-Requested-With","XMLHttpRequest")}for(var x in this._headers){if(this._headers.hasOwnProperty(x)){if(typeof this._headers[x]=="function"){continue}req.setRequestHeader(x,String(this._headers[x]))}}}if(req.addEventListener&&!jindo._p_._JINDO_IS_OP&&!jindo._p_._JINDO_IS_IE){if(this._loadFunc){req.removeEventListener("load",this._loadFunc,false)}this._loadFunc=function(rq){clearTimeout(_timer);_timer=undefined;t._onload(rq)};req.addEventListener("load",this._loadFunc,false)}else{if(req.onload!==undefined){req.onload=function(rq){if((req.readyState==4||t._bXDomainRequest)&&!t._is_abort){clearTimeout(_timer);_timer=undefined;t._onload(rq)}}}else{var iePattern=jindo._p_._j_ag.match(/(?:MSIE) ([0-9.]+)/);if(iePattern&&iePattern[1]==6&&opt.async){var onreadystatechange=function(rq){if(req.readyState==4&&!t._is_abort){if(_timer){clearTimeout(_timer);_timer=undefined}t._onload(rq);clearInterval(t._interval);t._interval=undefined}};this._interval=setInterval(onreadystatechange,300)}else{req.onreadystatechange=function(rq){if(req.readyState==4){clearTimeout(_timer);_timer=undefined;t._onload(rq)}}}}}if(opt.timeout>0){if(this._timer){clearTimeout(this._timer)}_timer=setTimeout(function(){t._is_abort=true;if(t._interval){clearInterval(t._interval);t._interval=undefined}try{req.abort()}catch(e){}opt.ontimeout(req);if(cache.isFunction(t._oncompleted)){t._oncompleted(false)}},opt.timeout*1000);this._timer=_timer}this._test_url=url;req.send(data);return this};jindo.$Ajax.prototype.isIdle=function(){return this._status==0};jindo.$Ajax.prototype.abort=function(){try{if(this._interval){clearInterval(this._interval)}if(this._timer){clearTimeout(this._timer)}this._interval=undefined;this._timer=undefined;this._is_abort=true;this._request.abort()}finally{this._status--}return this};jindo.$Ajax.prototype.url=function(sURL){var oArgs=g_checkVarType(arguments,{g:[],s:["sURL:String+"]},"$Ajax#url");switch(oArgs+""){case"g":return this._url;case"s":this._checkCORS(oArgs.sURL,this._options.type,"#url");this._url=oArgs.sURL;return this}};jindo.$Ajax.prototype.option=function(name,value){var oArgs=g_checkVarType(arguments,{s4var:["sKey:String+","vValue:Variant"],s4obj:["oOption:Hash+"],g:["sKey:String+"]},"$Ajax#option");switch(oArgs+""){case"s4var":oArgs.oOption={};oArgs.oOption[oArgs.sKey]=oArgs.vValue;case"s4obj":var oOption=oArgs.oOption;try{for(var x in oOption){if(oOption.hasOwnProperty(x)){if(x==="onload"||x==="ontimeout"||x==="onerror"){this._options[x]=jindo.$Fn(oOption[x],this).bind()}else{this._options[x]=oOption[x]}}}}catch(e){}break;case"g":return this._options[oArgs.sKey]}this._checkCORS(this._url,this._options.type,"#option");jindo.$Ajax._validationOption(this._options,"$Ajax#option");return this};jindo.$Ajax.prototype.header=function(name,value){if(this._options.type==="jsonp"||this._bXDomainRequest){jindo.$Jindo._warn(jindo.$Except.CANNOT_USE_HEADER)}var oArgs=g_checkVarType(arguments,{s4str:["sKey:String+","sValue:String+"],s4obj:["oOption:Hash+"],g:["sKey:String+"]},"$Ajax#option");switch(oArgs+""){case"s4str":this._headers[oArgs.sKey]=oArgs.sValue;break;case"s4obj":var oOption=oArgs.oOption;try{for(var x in oOption){if(oOption.hasOwnProperty(x)){this._headers[x]=oOption[x]}}}catch(e){}break;case"g":return this._headers[oArgs.sKey]}return this};jindo.$Ajax.Response=function(req){this._response=req;this._regSheild=/^for\(;;\);/};jindo.$Ajax.Response.prototype.xml=function(){return this._response.responseXML};jindo.$Ajax.Response.prototype.text=function(){return this._response.responseText.replace(this._regSheild,"")};jindo.$Ajax.Response.prototype.status=function(){var status=this._response.status;return status==0?200:status};jindo.$Ajax.Response.prototype.readyState=function(){return this._response.readyState};jindo.$Ajax.Response.prototype.json=function(){if(this._response.responseJSON){return this._response.responseJSON}else{if(this._response.responseText){try{return eval("("+this.text()+")")}catch(e){throw new jindo.$Error(jindo.$Except.PARSE_ERROR,"$Ajax#json")}}}return{}};jindo.$Ajax.Response.prototype.header=function(name){var oArgs=g_checkVarType(arguments,{"4str":["name:String+"],"4voi":[]},"$Ajax.Response#header");switch(oArgs+""){case"4str":return this._response.getResponseHeader(name);case"4voi":return this._response.getAllResponseHeaders()}};var klass=jindo.$Class;jindo.$Ajax.RequestBase=klass({_respHeaderString:"",callbackid:"",callbackname:"",responseXML:null,responseJSON:null,responseText:"",status:404,readyState:0,$init:function(fpOption){},onload:function(){},abort:function(){},open:function(){},send:function(){},setRequestHeader:function(sName,sValue){g_checkVarType(arguments,{"4str":["sName:String+","sValue:String+"]},"$Ajax.RequestBase#setRequestHeader");this._headers[sName]=sValue},getResponseHeader:function(sName){g_checkVarType(arguments,{"4str":["sName:String+"]},"$Ajax.RequestBase#getResponseHeader");return this._respHeaders[sName]||""},getAllResponseHeaders:function(){return this._respHeaderString},_getCallbackInfo:function(){var id="";if(this.option("callbackid")!=""){var idx=0;do{id="_"+this.option("callbackid")+"_"+idx;idx++}while(window["__"+jindo._p_.jindoName+"_callback"][id])}else{do{id="_"+Math.floor(Math.random()*10000)}while(window["__"+jindo._p_.jindoName+"_callback"][id])}if(this.option("callbackname")==""){this.option("callbackname","_callback")}return{callbackname:this.option("callbackname"),id:id,name:"window.__"+jindo._p_.jindoName+"_callback."+id}}});jindo.$Ajax.JSONPRequest=klass({_headers:{},_respHeaders:{},_script:null,_onerror:null,$init:function(fpOption){this.option=fpOption},_callback:function(data){if(this._onerror){clearTimeout(this._onerror);this._onerror=null}var self=this;this.responseJSON=data;this.onload(this);setTimeout(function(){self.abort()},10)},abort:function(){if(this._script){try{this._script.parentNode.removeChild(this._script)}catch(e){}}},open:function(method,url){g_checkVarType(arguments,{"4str":["method:String+","url:String+"]},"$Ajax.JSONPRequest#open");this.responseJSON=null;this._url=url},send:function(data){var oArgs=g_checkVarType(arguments,{"4voi":[],"4nul":["data:Null"],"4str":["data:String+"]},"$Ajax.JSONPRequest#send");var t=this;var info=this._getCallbackInfo();var head=document.getElementsByTagName("head")[0];this._script=document.createElement("script");this._script.type="text/javascript";this._script.charset=this.option("jsonp_charset");if(head){head.appendChild(this._script)}else{if(document.body){document.body.appendChild(this._script)}}window["__"+jindo._p_.jindoName+"_callback"][info.id]=function(data){try{t.readyState=4;t.status=200;t._callback(data)}finally{delete window["__"+jindo._p_.jindoName+"_callback"][info.id];delete window["__"+jindo._p_.jindoName+"2_callback"][info.id]}};window["__"+jindo._p_.jindoName+"2_callback"][info.id]=function(data){window["__"+jindo._p_.jindoName+"_callback"][info.id](data)};var agent=jindo.$Agent(navigator);var _loadCallback=function(){if(!t.responseJSON){t.readyState=4;t.status=500;t._onerror=setTimeout(function(){t._callback(null)},200)}};if(agent.navigator().ie&&this._script.readyState){this._script.onreadystatechange=function(){if(this.readyState=="loaded"){_loadCallback();this.onreadystatechange=null}}}else{this._script.onload=this._script.onerror=function(){_loadCallback();this.onerror=null;this.onload=null}}var delimiter="&";if(this._url.indexOf("?")==-1){delimiter="?"}switch(oArgs+""){case"4voi":case"4nul":data="";break;case"4str":data="&"+data}this._test_url=this._script.src=this._url+delimiter+info.callbackname+"="+info.name+data}}).extend(jindo.$Ajax.RequestBase);jindo.$Ajax.SWFRequest=klass({$init:function(fpOption){this.option=fpOption},_headers:{},_respHeaders:{},_getFlashObj:function(){var _tmpId=jindo.$Ajax.SWFRequest._tmpId;var navi=jindo.$Agent(window.navigator).navigator();var obj;if(navi.ie&&navi.version==9){obj=_getElementById(document,_tmpId)}else{obj=window.document[_tmpId]}return(this._getFlashObj=function(){return obj})()},_callback:function(status,data,headers){this.readyState=4;if(jindo.$Jindo.isNumeric(status)){this.status=status}else{if(status==true){this.status=200}}if(this.status==200){if(jindo.$Jindo.isString(data)){try{this.responseText=this.option("decode")?decodeURIComponent(data):data;if(!this.responseText||this.responseText==""){this.responseText=data}}catch(e){if(e.name=="URIError"){this.responseText=data;if(!this.responseText||this.responseText==""){this.responseText=data}}}}if(jindo.$Jindo.isHash(headers)){this._respHeaders=headers}}this.onload(this)},open:function(method,url){g_checkVarType(arguments,{"4str":["method:String+","url:String+"]},"$Ajax.SWFRequest#open");var re=/https?:\/\/([a-z0-9_\-\.]+)/i;this._url=url;this._method=method},send:function(data){var cache=jindo.$Jindo;var oArgs=cache.checkVarType(arguments,{"4voi":[],"4nul":["data:Null"],"4str":["data:String+"]},"$Ajax.SWFRequest#send");this.responseXML=false;this.responseText="";var t=this;var dat={};var info=this._getCallbackInfo();var swf=this._getFlashObj();function f(arg){switch(typeof arg){case"string":return'"'+arg.replace(/\"/g,'\\"')+'"';case"number":return arg;case"object":var ret="",arr=[];if(cache.isArray(arg)){for(var i=0;i<arg.length;i++){arr[i]=f(arg[i])}ret="["+arr.join(",")+"]"}else{for(var x in arg){if(arg.hasOwnProperty(x)){arr[arr.length]=f(x)+":"+f(arg[x])}}ret="{"+arr.join(",")+"}"}return ret;default:return'""'}}data=data?data.split("&"):[];var oEach;for(var i=0;i<data.length;i++){oEach=data[i];pos=oEach.indexOf("=");key=oEach.substring(0,pos);val=oEach.substring(pos+1);dat[key]=decodeURIComponent(val)}this._current_callback_id=info.id;window["__"+jindo._p_.jindoName+"_callback"][info.id]=function(success,data){try{t._callback(success,data)}finally{delete window["__"+jindo._p_.jindoName+"_callback"][info.id]}};window["__"+jindo._p_.jindoName+"2_callback"][info.id]=function(data){window["__"+jindo._p_.jindoName+"_callback"][info.id](data)};var oData={url:this._url,type:this._method,data:dat,charset:"UTF-8",callback:info.name,header_json:this._headers};swf.requestViaFlash(f(oData))},abort:function(){if(this._current_callback_id){window["__"+jindo._p_.jindoName+"_callback"][this._current_callback_id]=function(){delete window["__"+jindo._p_.jindoName+"_callback"][info.id];delete window["__"+jindo._p_.jindoName+"2_callback"][info.id]};window["__"+jindo._p_.jindoName+"2_callback"][this._current_callback_id]=function(data){window["__"+jindo._p_.jindoName+"_callback"][this._current_callback_id](data)}}}}).extend(jindo.$Ajax.RequestBase);jindo.$Ajax.SWFRequest.write=function(swf_path){var oArgs=jindo.$Jindo.checkVarType(arguments,{"4voi":[],"4str":["data:String+"]},"<static> $Ajax.SWFRequest#write");switch(oArgs+""){case"4voi":swf_path="./ajax.swf"}var ajax=jindo.$Ajax;ajax.SWFRequest._tmpId="tmpSwf"+(new Date()).getMilliseconds()+Math.floor(Math.random()*100000);var activeCallback="jindo.$Ajax.SWFRequest.loaded";var protocol=(location.protocol=="https:")?"https:":"http:";var classid=(jindo._p_._JINDO_IS_IE?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':"");ajax._checkFlashLoad();var body=document.body;var nodes=body.childNodes;var swf=jindo.$("<div style='position:absolute;top:-1000px;left:-1000px' tabindex='-1'>/<div>");swf.innerHTML='<object tabindex="-1" id="'+ajax.SWFRequest._tmpId+'" width="1" height="1" '+classid+' codebase="'+protocol+'//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0"><param name="movie" value="'+swf_path+'"><param name = "FlashVars" value = "activeCallback='+activeCallback+'" /><param name = "allowScriptAccess" value = "always" /><embed tabindex="-1" name="'+ajax.SWFRequest._tmpId+'" src="'+swf_path+'" type="application/x-shockwave-flash" pluginspage="'+protocol+'://www.macromedia.com/go/getflashplayer" width="1" height="1" allowScriptAccess="always" swLiveConnect="true" FlashVars="activeCallback='+activeCallback+'"></embed></object>';if(nodes.length>0){body.insertBefore(swf,nodes[0])}else{body.appendChild(swf)}};jindo.$Ajax._checkFlashLoad=function(){jindo.$Ajax._checkFlashKey=setTimeout(function(){jindo.$Ajax.SWFRequest.onerror()},5000);jindo.$Ajax._checkFlashLoad=function(){}};jindo.$Ajax.SWFRequest.activeFlash=false;jindo.$Ajax.SWFRequest.onload=function(){};jindo.$Ajax.SWFRequest.onerror=function(){};jindo.$Ajax.SWFRequest.loaded=function(){clearTimeout(jindo.$Ajax._checkFlashKey);jindo.$Ajax.SWFRequest.activeFlash=true;jindo.$Ajax.SWFRequest.onload()};jindo.$Ajax.FrameRequest=klass({_headers:{},_respHeaders:{},_frame:null,_domain:"",$init:function(fpOption){this.option=fpOption},_callback:function(id,data,header){var self=this;this.readyState=4;this.status=200;this.responseText=data;this._respHeaderString=header;header.replace(/^([\w\-]+)\s*:\s*(.+)$/m,function($0,$1,$2){self._respHeaders[$1]=$2});this.onload(this);setTimeout(function(){self.abort()},10)},abort:function(){if(this._frame){try{this._frame.parentNode.removeChild(this._frame)}catch(e){}}},open:function(method,url){g_checkVarType(arguments,{"4str":["method:String+","url:String+"]},"$Ajax.FrameRequest#open");var re=/https?:\/\/([a-z0-9_\-\.]+)/i;var dom=document.location.toString().match(re);this._method=method;this._url=url;this._remote=String(url).match(/(https?:\/\/[a-z0-9_\-\.]+)(:[0-9]+)?/i)[0];this._frame=null;this._domain=(dom!=null&&dom[1]!=document.domain)?document.domain:""},send:function(data){var oArgs=g_checkVarType(arguments,{"4voi":[],"4nul":["data:Null"],"4str":["data:String+"]},"$Ajax.FrameRequest#send");this.responseXML="";this.responseText="";var t=this;var re=/https?:\/\/([a-z0-9_\-\.]+)/i;var info=this._getCallbackInfo();var url;var _aStr=[];_aStr.push(this._remote+"/ajax_remote_callback.html?method="+this._method);var header=[];window["__"+jindo._p_.jindoName+"_callback"][info.id]=function(id,data,header){try{t._callback(id,data,header)}finally{delete window["__"+jindo._p_.jindoName+"_callback"][info.id];delete window["__"+jindo._p_.jindoName+"2_callback"][info.id]}};window["__"+jindo._p_.jindoName+"2_callback"][info.id]=function(id,data,header){window["__"+jindo._p_.jindoName+"_callback"][info.id](id,data,header)};for(var x in this._headers){if(this._headers.hasOwnProperty(x)){header[header.length]="'"+x+"':'"+this._headers[x]+"'"}}header="{"+header.join(",")+"}";_aStr.push("&id="+info.id);_aStr.push("&header="+encodeURIComponent(header));_aStr.push("&proxy="+encodeURIComponent(this.option("proxy")));_aStr.push("&domain="+this._domain);_aStr.push("&url="+encodeURIComponent(this._url.replace(re,"")));_aStr.push("#"+encodeURIComponent(data));var fr=this._frame=document.createElement("iframe");var style=fr.style;style.position="absolute";style.visibility="hidden";style.width="1px";style.height="1px";var body=document.body||document.documentElement;if(body.firstChild){body.insertBefore(fr,body.firstChild)}else{body.appendChild(fr)}if(typeof MSApp!="undefined"){MSApp.addPublicLocalApplicationUri(this.option("proxy"))}fr.src=_aStr.join("")}}).extend(jindo.$Ajax.RequestBase);jindo.$Ajax.Queue=function(option){var cl=arguments.callee;if(!(this instanceof cl)){return new cl(option||{})}var oArgs=g_checkVarType(arguments,{"4voi":[],"4obj":["option:Hash+"]},"$Ajax.Queue");option=oArgs.option;this._options={async:false,useResultAsParam:false,stopOnFailure:false};this.option(option);this._queue=[]};jindo.$Ajax.Queue.prototype.option=function(name,value){var oArgs=g_checkVarType(arguments,{s4str:["sKey:String+","sValue:Variant"],s4obj:["oOption:Hash+"],g:["sKey:String+"]},"$Ajax.Queue#option");switch(oArgs+""){case"s4str":this._options[oArgs.sKey]=oArgs.sValue;break;case"s4obj":var oOption=oArgs.oOption;try{for(var x in oOption){if(oOption.hasOwnProperty(x)){this._options[x]=oOption[x]}}}catch(e){}break;case"g":return this._options[oArgs.sKey]}return this};jindo.$Ajax.Queue.prototype.add=function(oAjax,oParam){var oArgs=g_checkVarType(arguments,{"4obj":["oAjax:Hash+"],"4obj2":["oAjax:Hash+","oPram:Hash+"]},"$Ajax.Queue");switch(oArgs+""){case"4obj2":oParam=oArgs.oPram}this._queue.push({obj:oAjax,param:oParam});return this};jindo.$Ajax.Queue.prototype.request=function(){this._requestAsync.apply(this,this.option("async")?[]:[0]);return this};jindo.$Ajax.Queue.prototype._requestSync=function(nIdx,oParam){var t=this;var queue=this._queue;if(queue.length>nIdx+1){queue[nIdx].obj._oncompleted=function(bSuccess,oResult){if(!t.option("stopOnFailure")||bSuccess){t._requestSync(nIdx+1,oResult)}}}var _oParam=queue[nIdx].param||{};if(this.option("useResultAsParam")&&oParam){try{for(var x in oParam){if(_oParam[x]===undefined&&oParam.hasOwnProperty(x)){_oParam[x]=oParam[x]}}}catch(e){}}queue[nIdx].obj.request(_oParam)};jindo.$Ajax.Queue.prototype._requestAsync=function(){for(var i=0;i<this._queue.length;i++){this._queue[i].obj.request(this._queue[i].param||{})}};jindo.$Date=function(src){var a=arguments,t="";var cl=arguments.callee;if(src&&src instanceof cl){return src}if(!(this instanceof cl)){var str="";for(var i=0,l=a.length;i<l;i++){str+="a["+i+"],"}var init=new Function("cl","a","return new cl("+str.replace(/,$/,"")+");");try{jindo.$Jindo._maxWarn(arguments.length,7,"$Date");return init(cl,a)}catch(e){if(e instanceof TypeError){return null}throw e}}var oArgs=g_checkVarType(arguments,{"4voi":[],"4str":["src:String+"],"4num":["src:Numeric"],"4dat":["src:Date+"],"4num2":["src:Numeric","src:Numeric"],"4num3":["src:Numeric","src:Numeric","src:Numeric"],"4num4":["src:Numeric","src:Numeric","src:Numeric","src:Numeric"],"4num5":["src:Numeric","src:Numeric","src:Numeric","src:Numeric","src:Numeric"],"4num6":["src:Numeric","src:Numeric","src:Numeric","src:Numeric","src:Numeric","src:Numeric"],"4num7":["src:Numeric","src:Numeric","src:Numeric","src:Numeric","src:Numeric","src:Numeric","src:Numeric"]},"$Date");switch(oArgs+""){case"4voi":this._date=new Date;break;case"4num":this._date=new Date(src*1);break;case"4str":if(/(\d\d\d\d)(?:-?(\d\d)(?:-?(\d\d)))/.test(src)){this._date=jindo.$Date._makeISO(src)}else{this._date=cl.parse(src)}break;case"4dat":(this._date=new Date).setTime(src.getTime());this._date.setMilliseconds(src.getMilliseconds());break;case"4num2":case"4num3":case"4num4":case"4num5":case"4num6":case"4num7":for(var i=0;i<7;i++){if(!jindo.$Jindo.isNumeric(a[i])){a[i]=1}}this._date=new Date(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}this._names={};for(var i in jindo.$Date.names){if(jindo.$Date.names.hasOwnProperty(i)){this._names[i]=jindo.$Date.names[i]}}};jindo.$Date._makeISO=function(src){var match=src.match(/(\d{4})(?:-?(\d\d)(?:-?(\d\d)(?:[T ](\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|(?:([-+])(\d\d)(?::?(\d\d))?)?)?)?)?)?/);var hour=parseInt(match[4]||0,10);var min=parseInt(match[5]||0,10);if(match[8]=="Z"){hour+=jindo.$Date.utc}else{if(match[9]=="+"||match[9]=="-"){hour+=(jindo.$Date.utc-parseInt(match[9]+match[10],10));min+=parseInt(match[9]+match[11],10)}}return new Date(match[1]||0,parseInt(match[2]||0,10)-1,match[3]||0,hour,min,match[6]||0,match[7]||0)};jindo.$Date._paramCheck=function(aPram,sType){return g_checkVarType(aPram,{s:["nParm:Numeric"],g:[]},"$Date#"+sType)};jindo.$Date.names={month:["January","Febrary","March","April","May","June","July","August","September","October","Novermber","December"],s_month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s_day:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ampm:["AM","PM"]};jindo.$Date.utc=9;jindo.$Date.now=function(){if(Date.now){this.now=function(){return Date.now()}}else{this.now=function(){return +new Date()}}return this.now()};jindo.$Date.prototype.name=function(vName,aValue){var oArgs=g_checkVarType(arguments,{s4str:["sKey:String+","aValue:Array+"],s4obj:["oObject:Hash+"],g:["sKey:String+"]},"$Date#name");switch(oArgs+""){case"s4str":this._names[vName]=aValue;break;case"s4obj":vName=oArgs.oObject;for(var i in vName){if(vName.hasOwnProperty(i)){this._names[i]=vName[i]}}break;case"g":return this._names[vName]}return this};jindo.$Date.parse=function(strDate){var oArgs=g_checkVarType(arguments,{"4str":["sKey:String+"]},"$Date#parse");var date=new Date(Date.parse(strDate));if(isNaN(date)||date=="Invalid Date"){throw new jindo.$Error(jindo.$Except.INVALID_DATE,"$Date#parse")}return date};jindo.$Date.prototype.$value=function(){return this._date};jindo.$Date.prototype.format=function(strFormat){var oArgs=g_checkVarType(arguments,{"4str":["sFormat:String+"]},"$Date#format");strFormat=oArgs.sFormat;var o={};var d=this._date;var name=this._names;var self=this;return(strFormat||"").replace(/[a-z]/ig,function callback(m){if(o[m]!==undefined){return o[m]}switch(m){case"d":case"j":o.j=d.getDate();o.d=(o.j>9?"":"0")+o.j;return o[m];case"l":case"D":case"w":case"N":o.w=d.getDay();o.N=o.w?o.w:7;o.D=name.s_day[o.w];o.l=name.day[o.w];return o[m];case"S":return(!!(o.S=["st","nd","rd"][d.getDate()]))?o.S:(o.S="th");case"z":o.z=Math.floor((d.getTime()-(new Date(d.getFullYear(),0,1)).getTime())/(3600*24*1000));return o.z;case"m":case"n":o.n=d.getMonth()+1;o.m=(o.n>9?"":"0")+o.n;return o[m];case"L":o.L=self.isLeapYear();return o.L;case"o":case"Y":case"y":o.o=o.Y=d.getFullYear();o.y=(o.o+"").substr(2);return o[m];case"a":case"A":case"g":case"G":case"h":case"H":o.G=d.getHours();o.g=(o.g=o.G%12)?o.g:12;o.A=o.G<12?name.ampm[0]:name.ampm[1];o.a=o.A.toLowerCase();o.H=(o.G>9?"":"0")+o.G;o.h=(o.g>9?"":"0")+o.g;return o[m];case"i":o.i=(((o.i=d.getMinutes())>9)?"":"0")+o.i;return o.i;case"s":o.s=(((o.s=d.getSeconds())>9)?"":"0")+o.s;return o.s;case"u":o.u=d.getMilliseconds();return o.u;case"U":o.U=self.time();return o.U;default:return m}})};jindo.$Date.prototype.time=function(nTime){var oArgs=jindo.$Date._paramCheck(arguments,"time");nTime=oArgs.nParm;switch(oArgs+""){case"s":this._date.setTime(nTime);return this;case"g":return this._date.getTime()}};jindo.$Date.prototype.year=function(nYear){var oArgs=jindo.$Date._paramCheck(arguments,"year");nYear=oArgs.nParm;switch(oArgs+""){case"s":this._date.setFullYear(nYear);return this;case"g":return this._date.getFullYear()}};jindo.$Date.prototype.month=function(nMon){var oArgs=jindo.$Date._paramCheck(arguments,"month");nMon=oArgs.nParm;switch(oArgs+""){case"s":this._date.setMonth(nMon);return this;case"g":return this._date.getMonth()}};jindo.$Date.prototype.date=function(nDate){var oArgs=jindo.$Date._paramCheck(arguments,"date");nDate=oArgs.nParm;switch(oArgs+""){case"s":this._date.setDate(nDate);return this;case"g":return this._date.getDate()}};jindo.$Date.prototype.day=function(){return this._date.getDay()};jindo.$Date.prototype.hours=function(nHour){var oArgs=jindo.$Date._paramCheck(arguments,"hours");nHour=oArgs.nParm;switch(oArgs+""){case"s":this._date.setHours(nHour);return this;case"g":return this._date.getHours()}};jindo.$Date.prototype.minutes=function(nMin){var oArgs=jindo.$Date._paramCheck(arguments,"minutes");nMin=oArgs.nParm;switch(oArgs+""){case"s":this._date.setMinutes(nMin);return this;case"g":return this._date.getMinutes()}};jindo.$Date.prototype.seconds=function(nSec){var oArgs=jindo.$Date._paramCheck(arguments,"seconds");nSec=oArgs.nParm;switch(oArgs+""){case"s":this._date.setSeconds(nSec);return this;case"g":return this._date.getSeconds()}};jindo.$Date.prototype.isLeapYear=function(){var y=this._date.getFullYear();return !(y%4)&&!!(y%100)||!(y%400)};jindo.$Date.prototype.compare=function(oDate,sType){var oArgs=g_checkVarType(arguments,{"4dat":["oDate:Date+"],"4str":["oDate:Date+","sType:String+"]},"$Date#compare");oDate=oArgs.oDate;sType=oArgs.sType;if(!sType){return oDate-this._date}else{if(sType==="s"){return Math.floor(oDate/1000)-Math.floor(this._date/1000)}else{if(sType==="i"){return Math.floor(Math.floor(oDate/1000)/60)-Math.floor(Math.floor(this._date/1000)/60)}else{if(sType==="h"){return Math.floor(Math.floor(Math.floor(oDate/1000)/60)/60)-Math.floor(Math.floor(Math.floor(this._date/1000)/60)/60)}else{if(sType==="d"){return Math.floor(Math.floor(Math.floor(Math.floor(oDate/1000)/60)/60)/24)-Math.floor(Math.floor(Math.floor(Math.floor(this._date/1000)/60)/60)/24)}else{if(sType==="m"){return oDate.getMonth()-this._date.getMonth()}else{if(sType==="y"){return oDate.getFullYear()-this._date.getFullYear()}}}}}}}};jindo.$Cookie=function(){var cl=arguments.callee;var cached=cl._cached;if(cl._cached){return cl._cached}if(!(this instanceof cl)){try{jindo.$Jindo._maxWarn(arguments.length,1,"$Cookie");return(arguments.length>0)?new cl(arguments[0]):new cl}catch(e){if(e instanceof TypeError){return null}throw e}}if(typeof jindo.$Jindo.isUndefined(cl._cached)){cl._cached=this}var oArgs=g_checkVarType(arguments,{"4voi":[],"4bln":["bURIComponent:Boolean"]},"$Cookie");switch(oArgs+""){case"4voi":this._bURIComponent=false;break;case"4bln":this._bURIComponent=oArgs.bURIComponent;break}};jindo.$Cookie.prototype.keys=function(){var ca=document.cookie.split(";");var re=/^\s+|\s+$/g;var a=new Array;for(var i=0;i<ca.length;i++){a[a.length]=ca[i].substr(0,ca[i].indexOf("=")).replace(re,"")}return a};jindo.$Cookie.prototype.get=function(sName){var oArgs=g_checkVarType(arguments,{"4str":["sName:String+"]},"$Cookie#get");var ca=document.cookie.split(/\s*;\s*/);var re=new RegExp("^(\\s*"+sName+"\\s*=)");var sEncoded;var sDecoded;for(var i=0;i<ca.length;i++){if(re.test(ca[i])){sEncoded=ca[i].substr(RegExp.$1.length);if(this._bURIComponent&&jindo.$Jindo.isNull(sEncoded.match(/%u\w{4}/))){sDecoded=decodeURIComponent(sEncoded)}else{sDecoded=unescape(sEncoded)}return sDecoded}}return null};jindo.$Cookie.prototype.set=function(sName,sValue,nDays,sDomain,sPath){var cache=jindo.$Jindo;var oArgs=cache.checkVarType(arguments,{"4str":["sName:String+","sValue:String+"],day_for_string:["sName:String+","sValue:String+","nDays:Numeric"],domain_for_string:["sName:String+","sValue:String+","nDays:Numeric","sDomain:String+"],path_for_string:["sName:String+","sValue:String+","nDays:Numeric","sDomain:String+","sPath:String+"],"4num":["sName:String+","sValue:Numeric"],day_for_num:["sName:String+","sValue:Numeric","nDays:Numeric"],domain_for_num:["sName:String+","sValue:Numeric","nDays:Numeric","sDomain:String+"],path_for_num:["sName:String+","sValue:Numeric","nDays:Numeric","sDomain:String+","sPath:String+"]},"$Cookie#set");var sExpire="";var sEncoded;if(oArgs+""!=="4str"&&nDays!==0){sExpire=";expires="+(new Date((new Date()).getTime()+nDays*1000*60*60*24)).toGMTString()}if(cache.isUndefined(sDomain)){sDomain=""}if(cache.isUndefined(sPath)){sPath="/"}if(this._bURIComponent){sEncoded=encodeURIComponent(sValue)}else{sEncoded=escape(sValue)}document.cookie=sName+"="+sEncoded+sExpire+"; path="+sPath+(sDomain?"; domain="+sDomain:"");return this};jindo.$Cookie.prototype.remove=function(sName,sDomain,sPath){var cache=jindo.$Jindo;var oArgs=cache.checkVarType(arguments,{"4str":["sName:String+"],domain_for_string:["sName:String+","sDomain:String+"],path_for_string:["sName:String+","sDomain:String+","sPath:String+"]},"$Cookie#remove");var aArg=jindo._p_._toArray(arguments);var aPram=[];for(var i=0,l=aArg.length;i<l;i++){aPram.push(aArg[i]);if(i==0){aPram.push("");aPram.push(-1)}}if(!cache.isNull(this.get(sName))){this.set.apply(this,aPram)}return this};jindo.$Template=function(str,sEngineName){var obj=null,tag="",cl=arguments.callee,_sEngineName;if(str instanceof cl){return str}if(!(this instanceof cl)){try{jindo.$Jindo._maxWarn(arguments.length,2,"$Template");return new cl(str||"",sEngineName||"default")}catch(e){if(e instanceof TypeError){return null}throw e}}var oArgs=g_checkVarType(arguments,{"4str":["str:String+"],"4ele":["ele:Element+"],"4str3":["str:String+","sEngineName:String+"],"4ele3":["ele:Element+","sEngineName:String+"]},"$Template");if((obj=_getElementById(document,str)||str)&&obj.tagName&&(tag=obj.tagName.toUpperCase())&&(tag=="TEXTAREA"||(tag=="SCRIPT"&&obj.getAttribute("type")=="text/template"))){str=(obj.value||obj.innerHTML).replace(/^\s+|\s+$/g,"")}this._str=str+"";_sEngineName="default";switch(oArgs+""){case"4str3":case"4ele3":_sEngineName=oArgs.sEngineName;break}this._compiler=jindo.$Template.getEngine(_sEngineName)};jindo.$Template._aEngines={};jindo.$Template._cache={};jindo.$Template.splitter=/(?!\\)[\{\}]/g;jindo.$Template.pattern=/^(?:if (.+)|elseif (.+)|for (?:(.+)\:)?(.+) in (.+)|(else)|\/(if|for)|=(.+)|js (.+)|set (.+)|gset (.+))$/;jindo.$Template.addEngine=function(sEngineName,fEngine){var oArgs=g_checkVarType(arguments,{"4fun":["sEngineName:String+","fEngine:Function+"]},"$Template#addEngine");jindo.$Template._aEngines[oArgs.sEngineName]=oArgs.fEngine};jindo.$Template.getEngine=function(sEngineName){var oArgs=g_checkVarType(arguments,{"4str":["sEngineName:String+"]},"$Template#getEngine");return jindo.$Template._aEngines[oArgs.sEngineName]};jindo.$Template.prototype.process=function(data){var oArgs=g_checkVarType(arguments,{"4obj":["data:Hash+"],"4voi":[]},"$Template#process"),fProcess;if(jindo.$Template._cache&&jindo.$Template._cache[this._str]){fProcess=jindo.$Template._cache[this._str];return fProcess(oArgs+""=="for_void"?"":oArgs.data)}jindo.$Template._cache[this._str]=fProcess=this._compiler(this._str);return fProcess(oArgs+""=="for_void"?"":oArgs.data)};jindo.$Template.addEngine("default",function(str){var code=[];var parsed=false;function stripString(s){return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n")}code.push("var $RET$ = [];");code.push('var $SCOPE$ = $ARG$ && typeof $ARG$ === "object" ? $ARG$ : {};');code.push("with ($SCOPE$) {");var key_num=0;do{parsed=false;str=str.replace(/^[^{]+/,function(_){parsed=code.push('$RET$.push("'+stripString(_)+'");');return""});str=str.replace(/^{=([^}]+)}/,function(_,varname){parsed=code.push("$RET$.push("+varname+");");return""});str=str.replace(/^{js\s+([^}]+)}/,function(_,syntax){syntax=syntax.replace(/(=(?:[a-zA-Z_][\w\.]*)+)/g,function(m){return m.replace("=","")});parsed=code.push("$RET$.push("+syntax+");");return""});str=str.replace(/^{(g)?set\s+([^=]+)=([^}]+)}/,function(_,at_g,key,val){parsed=code.push((at_g?"var ":"$SCOPE$.")+key+"="+val.replace(/\(=/g,"(")+";");return""});str=str.replace(/^{for\s+([^:}]+)(:([^\s]+))?\s+in\s+([^}]+)}/,function(_,key,_,val,obj){if(!val){val=key;key="$NULL$"+key_num}var key_str="$I$"+key_num;var callback="$CB$"+key_num;key_num++;code.push("(function("+callback+") {");code.push("if (jindo.$Jindo.isArray("+obj+")) {");code.push("for (var "+key_str+" = 0; "+key_str+" < "+obj+".length; "+key_str+"++) {");code.push(callback+"("+key_str+", "+obj+"["+key_str+"]);");code.push("}");code.push("} else {");code.push("for (var "+key_str+" in "+obj+") if ("+obj+".hasOwnProperty("+key_str+")) { ");code.push(callback+"("+key_str+", "+obj+"["+key_str+"]);");code.push("}");code.push("}");code.push("})(function("+key+", "+val+") {");parsed=true;return""});str=str.replace(/^{\/for}/,function(_){parsed=code.push("});");return""});str=str.replace(/^{(else)?if\s+([^}]+)}/,function(_,iselse,expr){parsed=code.push((iselse?"} else ":"")+"if ("+expr+") {");return""});str=str.replace(/^{else}/,function(_){parsed=code.push("} else {");return""});str=str.replace(/^{\/if}/,function(_){parsed=code.push("}");return""})}while(parsed);code.push("}");code.push('return $RET$.join("");');var r=new Function("$ARG$",code.join("\n").replace(/\r/g,""));return r});jindo.$Template.addEngine("micro",function(sTemplate){return new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+sTemplate.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');")});jindo.$Template.addEngine("handlebars",function(sTemplate){if(typeof Handlebars=="undefined"){throw new jindo.$Error(jindo.$Except.NOT_FOUND_HANDLEBARS,"$Template#process")}return Handlebars.compile(sTemplate)});jindo.$Template.addEngine("simple",function(sTemplate){return function(oData){return sTemplate.replace(/\{\{([^{}]*)\}\}/g,function(sMatchA,sMatchB){return(typeof oData[sMatchB]=="undefined")?"":oData[sMatchB]})}});var aClass=["$Agent","$Ajax","$A","$Cookie","$Date","$Document","$Element","$ElementList","$Event","$Form","$Fn","$H","$Json","$S","$Template","$Window"];var sClass,oClass;for(var i=0,l=aClass.length;i<l;i++){sClass=aClass[i];oClass=jindo[sClass];if(oClass){oClass.addExtension=(function(sClass){return function(sMethod,fpFunc){jindo._p_.addExtension(sClass,sMethod,fpFunc);return this}})(sClass)}}var hooks=["$Element","$Event"];for(var i=0,l=hooks.length;i<l;i++){var _className=hooks[i];if(jindo[_className]){jindo[_className].hook=(function(className){var __hook={};return function(sName,vRevisionKey){var oArgs=jindo.$Jindo.checkVarType(arguments,{g:["sName:String+"],s4var:["sName:String+","vRevisionKey:Variant"],s4obj:["oObj:Hash+"]},"jindo."+className+".hook");switch(oArgs+""){case"g":return __hook[oArgs.sName.toLowerCase()];case"s4var":if(vRevisionKey==null){delete __hook[oArgs.sName.toLowerCase()]}else{__hook[oArgs.sName.toLowerCase()]=vRevisionKey}return this;case"s4obj":var oObj=oArgs.oObj;for(var i in oObj){__hook[i.toLowerCase()]=oObj[i]}return this}}})(_className)}}if(!jindo.$Jindo.isUndefined(window)&&!(jindo._p_._j_ag.indexOf("IEMobile")==-1&&jindo._p_._j_ag.indexOf("Mobile")>-1&&jindo._p_._JINDO_IS_SP)){(new jindo.$Element(window)).attach("unload",function(e){jindo.$Element.eventManager.cleanUpAll()})}if(typeof define==="function"&&define.amd&&define.amd.jindo){define("jindo",[],function(){return jindo})};
jindo.Component=jindo.$Class({_htEventHandler:null,_htOption:null,$init:function(){this._htEventHandler={};this._htOption={};this._htOption._htSetter={};this.constructor.$count=(this.constructor.$count||0)+1},option:function(sName,vValue){switch(typeof sName){case"undefined":var oOption={};for(var i in this._htOption){if(!(i=="htCustomEventHandler"||i=="_htSetter")){oOption[i]=this._htOption[i]}}return oOption;case"string":if(typeof vValue!="undefined"){if(sName=="htCustomEventHandler"){if(typeof this._htOption[sName]=="undefined"){this.attach(vValue)}else{return this}}this._htOption[sName]=vValue;if(typeof this._htOption._htSetter[sName]=="function"){this._htOption._htSetter[sName](vValue)}}else{return this._htOption[sName]}break;case"object":for(var sKey in sName){if(sKey=="htCustomEventHandler"){if(typeof this._htOption[sKey]=="undefined"){this.attach(sName[sKey])}else{continue}}if(sKey!=="_htSetter"){this._htOption[sKey]=sName[sKey]}if(typeof this._htOption._htSetter[sKey]=="function"){this._htOption._htSetter[sKey](sName[sKey])}}break}return this},optionSetter:function(sName,fSetter){switch(typeof sName){case"undefined":return this._htOption._htSetter;case"string":if(typeof fSetter!="undefined"){this._htOption._htSetter[sName]=jindo.$Fn(fSetter,this).bind()}else{return this._htOption._htSetter[sName]}break;case"object":for(var sKey in sName){this._htOption._htSetter[sKey]=jindo.$Fn(sName[sKey],this).bind()}break}return this},fireEvent:function(sEvent,oEvent){oEvent=oEvent||{};var fInlineHandler=this["on"+sEvent],aHandlerList=this._htEventHandler[sEvent]||[],bHasInlineHandler=typeof fInlineHandler=="function",bHasHandlerList=aHandlerList.length>0;if(!bHasInlineHandler&&!bHasHandlerList){return true}aHandlerList=aHandlerList.concat();oEvent.sType=sEvent;if(typeof oEvent._aExtend=="undefined"){oEvent._aExtend=[];oEvent.stop=function(){if(oEvent._aExtend.length>0){oEvent._aExtend[oEvent._aExtend.length-1].bCanceled=true}}}oEvent._aExtend.push({sType:sEvent,bCanceled:false});var aArg=[oEvent],i,nLen;for(i=2,nLen=arguments.length;i<nLen;i++){aArg.push(arguments[i])}if(bHasInlineHandler){fInlineHandler.apply(this,aArg)}if(bHasHandlerList){var fHandler;for(i=0,fHandler;(fHandler=aHandlerList[i]);i++){fHandler.apply(this,aArg)}}return !oEvent._aExtend.pop().bCanceled},attach:function(sEvent,fHandlerToAttach){if(arguments.length==1){jindo.$H(arguments[0]).forEach(jindo.$Fn(function(fHandler,sEvent){this.attach(sEvent,fHandler)},this).bind());return this}var aHandler=this._htEventHandler[sEvent];if(typeof aHandler=="undefined"){aHandler=this._htEventHandler[sEvent]=[]}aHandler.push(fHandlerToAttach);return this},detach:function(sEvent,fHandlerToDetach){if(arguments.length==1){jindo.$H(arguments[0]).forEach(jindo.$Fn(function(fHandler,sEvent){this.detach(sEvent,fHandler)},this).bind());return this}var aHandler=this._htEventHandler[sEvent];if(aHandler){for(var i=0,fHandler;(fHandler=aHandler[i]);i++){if(fHandler===fHandlerToDetach){aHandler=aHandler.splice(i,1);break}}}return this},detachAll:function(sEvent){var aHandler=this._htEventHandler;if(arguments.length){if(typeof aHandler[sEvent]=="undefined"){return this}delete aHandler[sEvent];return this}for(var o in aHandler){delete aHandler[o]}return this}});jindo.Component.factory=function(aObject,htOption){var aReturn=[],oInstance;if(typeof htOption=="undefined"){htOption={}}for(var i=0,el;(el=aObject[i]);i++){oInstance=new this(el,htOption);aReturn[aReturn.length]=oInstance}return aReturn};jindo.Component.getInstance=function(){throw new Error("JC 1.11.0 or JMC 1.13.0 later, getInstance method of Component is not longer supported.")};jindo.Component.VERSION="1.13.0";jindo.Timer=jindo.$Class({$init:function(){this._nTimer=null;this._nLatest=null;this._nRemained=0;this._nDelay=null;this._fRun=null;this._bIsRunning=false},start:function(fRun,nDelay){this.abort();this._nRemained=0;this._nDelay=nDelay;this._fRun=fRun;this._bIsRunning=true;this._nLatest=this._getTime();this.fireEvent("wait");this._excute(this._nDelay,false);return true},isRunning:function(){return this._bIsRunning},_getTime:function(){return new Date().getTime()},_clearTimer:function(){var bFlag=false;if(this._nTimer){clearTimeout(this._nTimer);this._bIsRunning=false;bFlag=true}this._nTimer=null;return bFlag},abort:function(){this._clearTimer();if(this._fRun){this.fireEvent("abort");this._fRun=null;return true}return false},pause:function(){var nPassed=this._getTime()-this._nLatest;this._nRemained=Math.max(this._nDelay-nPassed,0);return this._clearTimer()},_excute:function(nDelay,bResetDelay){var self=this;this._clearTimer();this._bIsRunning=true;var launcher=function(bDontUseTimer){if(!self._fRun){return}if(self._nTimer||bDontUseTimer){self.fireEvent("run");var r=self._fRun();self._nLatest=self._getTime();if(!r){if(!bDontUseTimer){clearTimeout(self._nTimer)}self._nTimer=null;self._bIsRunning=false;self.fireEvent("end");return}self.fireEvent("wait");self._excute(self._nDelay,false)}};if(nDelay>-1){this._nTimer=setTimeout(launcher,nDelay)}else{launcher(true)}},resume:function(){if(!this._fRun||this.isRunning()){return false}this._bIsRunning=true;this.fireEvent("wait");this._excute(this._nRemained,true);this._nRemained=0;return true}}).extend(jindo.Component);jindo.Effect=function(fEffect){if(this instanceof arguments.callee){throw new Error("You can't create a instance of this")}var rxNumber=/^(\-?[0-9\.]+)(%|\w+)?$/,rxRGB=/^rgb\(([0-9]+)\s?,\s?([0-9]+)\s?,\s?([0-9]+)\)$/i,rxRGBA=/^rgba\(([0-9]+)\s?,\s?([0-9]+)\s?,\s?([0-9]+),\s?([0-9\.]+)\)$/i,rxHSL=/^hsl\(([0-9\.]+)\s?,\s?([0-9\.]+)%\s?,\s?([0-9\.]+)%\)$/i,rxHSLA=/^hsla\(([0-9\.]+)\s?,\s?([0-9\.]+)%\s?,\s?([0-9\.]+)%,\s?([0-9\.]+)\)$/i,rxHex=/^#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,rx3to6=/^#([0-9A-F])([0-9A-F])([0-9A-F])$/i;var getUnitAndValue=function(v){var nValue=v,sUnit;if(rxNumber.test(v)){nValue=parseFloat(v);sUnit=RegExp.$2||""}else{if(rxRGB.test(v)){nValue=[parseInt(RegExp.$1,10),parseInt(RegExp.$2,10),parseInt(RegExp.$3,10),1];sUnit="color"}else{if(rxRGBA.test(v)){nValue=[parseInt(RegExp.$1,10),parseInt(RegExp.$2,10),parseInt(RegExp.$3,10),parseFloat(RegExp.$4,10)];sUnit="color"}else{if(rxHSL.test(v)){nValue=hsl2rgb(parseFloat(RegExp.$1,10),parseFloat(RegExp.$2,10)/100,parseFloat(RegExp.$3,10)/100,1);nValue.push(1);sUnit="color"}else{if(rxHSLA.test(v)){nValue=hsl2rgb(parseFloat(RegExp.$1,10),parseFloat(RegExp.$2,10)/100,parseFloat(RegExp.$3,10)/100,1);nValue.push(parseFloat(RegExp.$4,10));sUnit="color"}else{if(rxHex.test(v=v.replace(rx3to6,"#$1$1$2$2$3$3"))){nValue=[parseInt(RegExp.$1,16),parseInt(RegExp.$2,16),parseInt(RegExp.$3,16),1];sUnit="color"}else{throw new Error("unit error ("+v+")")}}}}}}return{nValue:nValue,sUnit:sUnit}};var fExplode=function(sStr){var aRet=[];sStr.replace(/([^\s]+\([^\)]*\)|[^\s]+)\s?/g,function(_,a){aRet.push(a)});return aRet};var getUnitAndValueList=function(v){var aList=fExplode(v?v+"":"0");var aRet=[];for(var i=0,nLen=aList.length;i<nLen;i++){aRet.push(getUnitAndValue(aList[i]))}return aRet};var copy=function(oValue){if(typeof oValue==="object"){return{nValue:oValue.nValue,sUnit:oValue.sUnit}}return oValue};var hsl2rgb=function(H,S,L){var C=(1-Math.abs((2*L)-1))*S;var H_=H/60;var X=C*(1-Math.abs((H_%2)-1));var R1,G1,B1;if(H===undefined||isNaN(H)||H===null){R1=G1=B1=0}else{if(H_>=0&&H_<1){R1=C;G1=X;B1=0}else{if(H_>=1&&H_<2){R1=X;G1=C;B1=0}else{if(H_>=2&&H_<3){R1=0;G1=C;B1=X}else{if(H_>=3&&H_<4){R1=0;G1=X;B1=C}else{if(H_>=4&&H_<5){R1=X;G1=0;B1=C}else{if(H_>=5&&H_<6){R1=C;G1=0;B1=X}}}}}}}var m=L-(C/2);return[Math.round((R1+m)*255),Math.round((G1+m)*255),Math.round((B1+m)*255)]};return function(sStart,sEnd){var aStart,aEnd;var fParse=function(){var bChanged=false;if(fReturn.start!==sStart){aStart=getUnitAndValueList(fReturn.start);sStart=fReturn.start;bChanged=true}if(fReturn.end!==sEnd){aEnd=getUnitAndValueList(fReturn.end);sEnd=fReturn.end;bChanged=true}if(bChanged){var nLen=Math.max(aStart.length,aEnd.length);var oStart,oEnd;if(aStart.length!==aEnd.length&&nLen>1){switch(aStart.length){case 1:aStart[1]=copy(aStart[2]=copy(aStart[3]=copy(aStart[0])));break;case 2:aStart[2]=copy(aStart[0]),aStart[3]=copy(aStart[1]);break;case 3:aStart[3]=copy(aStart[1]);break}switch(aEnd.length){case 1:aEnd[1]=aEnd[2]=aEnd[3]=aEnd[0];break;case 2:aEnd[2]=aEnd[0],aEnd[3]=aEnd[1];break;case 3:aEnd[3]=aEnd[1];break}}for(var i=0;i<nLen;i++){oStart=aStart[i];oEnd=aEnd[i];if(oStart.nValue===0){oStart.sUnit=oEnd.sUnit}else{if(oEnd.nValue===0){oEnd.sUnit=oStart.sUnit}}if(oStart.sUnit!=oEnd.sUnit){throw new Error("unit error ("+sStart+" ~ "+sEnd+")")}}}};var fReturn=function(p){var aRet=[];fParse();var oStart,oEnd;var nStart,nEnd,sUnit;for(var i=0,nLen=Math.max(aStart.length,aEnd.length);i<nLen;i++){oStart=aStart[i];oEnd=aEnd[i];nStart=oStart.nValue;nEnd=oEnd.nValue;sUnit=oStart.sUnit;var nValue=fEffect(p),getResult=function(s,d,sUnit){return(d-s)*nValue+s+(sUnit||0)};if(sUnit=="color"){var alpha=getResult(nStart[3],nEnd[3],0);if(alpha===1){var r=Math.max(0,Math.min(255,Math.round(getResult(nStart[0],nEnd[0],0))))<<16;r|=Math.max(0,Math.min(255,Math.round(getResult(nStart[1],nEnd[1],0))))<<8;r|=Math.max(0,Math.min(255,Math.round(getResult(nStart[2],nEnd[2],0))));r=r.toString(16).toUpperCase();for(var j=0;6-r.length;j++){r="0"+r}aRet.push("#"+r)}else{aRet.push("rgba("+[Math.round(getResult(nStart[0],nEnd[0],0)),Math.round(getResult(nStart[1],nEnd[1],0)),Math.round(getResult(nStart[2],nEnd[2],0)),getResult(nStart[3],nEnd[3],0)].join(",")+")")}continue}aRet.push(getResult(nStart,nEnd,sUnit))}return aRet.join(" ")};switch(arguments.length){case 0:break;case 1:sEnd=sStart||"0";sStart="0";fReturn.setStart=function(sStart){this.start=sStart};break}fReturn.start=sStart;fReturn.end=sEnd;fReturn.effectConstructor=arguments.callee;sStart=sEnd=null;if(arguments.length>1){fParse()}return fReturn}};jindo.Effect.linear=jindo.Effect(function(s){return s});jindo.Effect.linear.toString=function(){return"linear"};jindo.Effect.easeInSine=jindo.Effect(function(s){return(s==1)?1:-Math.cos(s*(Math.PI/2))+1});jindo.Effect.easeOutSine=jindo.Effect(function(s){return Math.sin(s*(Math.PI/2))});jindo.Effect.easeInOutSine=jindo.Effect(function(s){return(s<0.5)?jindo.Effect.easeInSine(0,1)(2*s)*0.5:jindo.Effect.easeOutSine(0,1)((2*s)-1)*0.5+0.5});jindo.Effect.easeOutInSine=jindo.Effect(function(s){return(s<0.5)?jindo.Effect.easeOutSine(0,1)(2*s)*0.5:jindo.Effect.easeInSine(0,1)((2*s)-1)*0.5+0.5});jindo.Effect.easeInQuad=jindo.Effect(function(s){return s*s});jindo.Effect.easeOutQuad=jindo.Effect(function(s){return -(s*(s-2))});jindo.Effect.easeInOutQuad=jindo.Effect(function(s){return(s<0.5)?jindo.Effect.easeInQuad(0,1)(2*s)*0.5:jindo.Effect.easeOutQuad(0,1)((2*s)-1)*0.5+0.5});jindo.Effect.easeOutInQuad=jindo.Effect(function(s){return(s<0.5)?jindo.Effect.easeOutQuad(0,1)(2*s)*0.5:jindo.Effect.easeInQuad(0,1)((2*s)-1)*0.5+0.5});jindo.Effect.easeInCubic=jindo.Effect(function(s){return Math.pow(s,3)});jindo.Effect.easeOutCubic=jindo.Effect(function(s){return Math.pow((s-1),3)+1});jindo.Effect.easeInOutCubic=jindo.Effect(function(s){return(s<0.5)?jindo.Effect.easeIn(0,1)(2*s)*0.5:jindo.Effect.easeOut(0,1)((2*s)-1)*0.5+0.5});jindo.Effect.easeOutInCubic=jindo.Effect(function(s){return(s<0.5)?jindo.Effect.easeOut(0,1)(2*s)*0.5:jindo.Effect.easeIn(0,1)((2*s)-1)*0.5+0.5});jindo.Effect.easeInQuart=jindo.Effect(function(s){return Math.pow(s,4)});jindo.Effect.easeOutQuart=jindo.Effect(function(s){return -(Math.pow(s-1,4)-1)});jindo.Effect.easeInOutQuart=jindo.Effect(function(s){return(s<0.5)?jindo.Effect.easeInQuart(0,1)(2*s)*0.5:jindo.Effect.easeOutQuart(0,1)((2*s)-1)*0.5+0.5});jindo.Effect.easeOutInQuart=jindo.Effect(function(s){return(s<0.5)?jindo.Effect.easeOutQuart(0,1)(2*s)*0.5:jindo.Effect.easeInQuart(0,1)((2*s)-1)*0.5+0.5});jindo.Effect.easeInQuint=jindo.Effect(function(s){return Math.pow(s,5)});jindo.Effect.easeOutQuint=jindo.Effect(function(s){return Math.pow(s-1,5)+1});jindo.Effect.easeInOutQuint=jindo.Effect(function(s){return(s<0.5)?jindo.Effect.easeInQuint(0,1)(2*s)*0.5:jindo.Effect.easeOutQuint(0,1)((2*s)-1)*0.5+0.5});jindo.Effect.easeOutInQuint=jindo.Effect(function(s){return(s<0.5)?jindo.Effect.easeOutQuint(0,1)(2*s)*0.5:jindo.Effect.easeInQuint(0,1)((2*s)-1)*0.5+0.5});jindo.Effect.easeInCircle=jindo.Effect(function(s){return -(Math.sqrt(1-(s*s))-1)});jindo.Effect.easeOutCircle=jindo.Effect(function(s){return Math.sqrt(1-(s-1)*(s-1))});jindo.Effect.easeInOutCircle=jindo.Effect(function(s){return(s<0.5)?jindo.Effect.easeInCircle(0,1)(2*s)*0.5:jindo.Effect.easeOutCircle(0,1)((2*s)-1)*0.5+0.5});jindo.Effect.easeOutInCircle=jindo.Effect(function(s){return(s<0.5)?jindo.Effect.easeOutCircle(0,1)(2*s)*0.5:jindo.Effect.easeInCircle(0,1)((2*s)-1)*0.5+0.5});jindo.Effect.easeInBack=jindo.Effect(function(s){var n=1.70158;return(s==1)?1:(s/1)*(s/1)*((1+n)*s-n)});jindo.Effect.easeOutBack=jindo.Effect(function(s){var n=1.70158;return(s===0)?0:(s=s/1-1)*s*((n+1)*s+n)+1});jindo.Effect.easeInOutBack=jindo.Effect(function(s){return(s<0.5)?jindo.Effect.easeInBack(0,1)(2*s)*0.5:jindo.Effect.easeOutBack(0,1)((2*s)-1)*0.5+0.5});jindo.Effect.easeInElastic=jindo.Effect(function(s){var p=0,a=0,n;if(s===0){return 0}if((s/=1)==1){return 1}if(!p){p=0.3}if(!a||a<1){a=1;n=p/4}else{n=p/(2*Math.PI)*Math.asin(1/a)}return -(a*Math.pow(2,10*(s-=1))*Math.sin((s-1)*(2*Math.PI)/p))});jindo.Effect.easeOutElastic=jindo.Effect(function(s){var p=0,a=0,n;if(s===0){return 0}if((s/=1)==1){return 1}if(!p){p=0.3}if(!a||a<1){a=1;n=p/4}else{n=p/(2*Math.PI)*Math.asin(1/a)}return(a*Math.pow(2,-10*s)*Math.sin((s-n)*(2*Math.PI)/p)+1)});jindo.Effect.easeInOutElastic=jindo.Effect(function(s){var p=0,a=0,n;if(s===0){return 0}if((s=s/(1/2))==2){return 1}if(!p){p=(0.3*1.5)}if(!a||a<1){a=1;n=p/4}else{n=p/(2*Math.PI)*Math.asin(1/a)}if(s<1){return -0.5*(a*Math.pow(2,10*(s-=1))*Math.sin((s-n)*(2*Math.PI)/p))}return a*Math.pow(2,-10*(s-=1))*Math.sin((s-n)*(2*Math.PI)/p)*0.5+1});jindo.Effect.easeOutBounce=jindo.Effect(function(s){if(s<(1/2.75)){return(7.5625*s*s)}else{if(s<(2/2.75)){return(7.5625*(s-=(1.5/2.75))*s+0.75)}else{if(s<(2.5/2.75)){return(7.5625*(s-=(2.25/2.75))*s+0.9375)}else{return(7.5625*(s-=(2.625/2.75))*s+0.984375)}}}});jindo.Effect.easeInBounce=jindo.Effect(function(s){return 1-jindo.Effect.easeOutBounce(0,1)(1-s)});jindo.Effect.easeInOutBounce=jindo.Effect(function(s){return(s<0.5)?jindo.Effect.easeInBounce(0,1)(2*s)*0.5:jindo.Effect.easeOutBounce(0,1)((2*s)-1)*0.5+0.5});jindo.Effect.easeInExpo=jindo.Effect(function(s){return(s===0)?0:Math.pow(2,10*(s-1))});jindo.Effect.easeOutExpo=jindo.Effect(function(s){return(s==1)?1:-Math.pow(2,-10*s/1)+1});jindo.Effect.easeInOutExpo=jindo.Effect(function(s){return(s<0.5)?jindo.Effect.easeInExpo(0,1)(2*s)*0.5:jindo.Effect.easeOutExpo(0,1)((2*s)-1)*0.5+0.5});jindo.Effect.easeOutInExpo=jindo.Effect(function(s){return(s<0.5)?jindo.Effect.easeOutExpo(0,1)(2*s)*0.5:jindo.Effect.easeInExpo(0,1)((2*s)-1)*0.5+0.5});jindo.Effect._cubicBezier=function(x1,y1,x2,y2){return function(t){var cx=3*x1,bx=3*(x2-x1)-cx,ax=1-cx-bx,cy=3*y1,by=3*(y2-y1)-cy,ay=1-cy-by;function sampleCurveX(t){return((ax*t+bx)*t+cx)*t}function sampleCurveY(t){return((ay*t+by)*t+cy)*t}function sampleCurveDerivativeX(t){return(3*ax*t+2*bx)*t+cx}function solveCurveX(x,epsilon){var t0,t1,t2,x2,d2,i;for(t2=x,i=0;i<8;i++){x2=sampleCurveX(t2)-x;if(Math.abs(x2)<epsilon){return t2}d2=sampleCurveDerivativeX(t2);if(Math.abs(d2)<0.000001){break}t2=t2-x2/d2}t0=0;t1=1;t2=x;if(t2<t0){return t0}if(t2>t1){return t1}while(t0<t1){x2=sampleCurveX(t2);if(Math.abs(x2-x)<epsilon){return t2}if(x>x2){t0=t2}else{t1=t2}t2=(t1-t0)*0.5+t0}return t2}return sampleCurveY(solveCurveX(t,1/200))}};jindo.Effect.cubicBezier=function(x1,y1,x2,y2){var f=jindo.Effect(jindo.Effect._cubicBezier(x1,y1,x2,y2));var cssTimingFunction="cubic-bezier("+[x1,y1,x2,y2].join(",")+")";f.toString=function(){return cssTimingFunction};return f};jindo.Effect.cubicEase=jindo.Effect.cubicBezier(0.25,0.1,0.25,1);jindo.Effect.cubicEaseIn=jindo.Effect.cubicBezier(0.42,0,1,1);jindo.Effect.cubicEaseOut=jindo.Effect.cubicBezier(0,0,0.58,1);jindo.Effect.cubicEaseInOut=jindo.Effect.cubicBezier(0.42,0,0.58,1);jindo.Effect.cubicEaseOutIn=jindo.Effect.cubicBezier(0,0.42,1,0.58);jindo.Effect.overphase=jindo.Effect(function(s){s/=0.652785;return(Math.sqrt((2-s)*s)+(0.1*s)).toFixed(5)});jindo.Effect.sinusoidal=jindo.Effect(function(s){return(-Math.cos(s*Math.PI)/2)+0.5});jindo.Effect.mirror=jindo.Effect(function(s){return(s<0.5)?jindo.Effect.sinusoidal(0,1)(s*2):jindo.Effect.sinusoidal(0,1)(1-(s-0.5)*2)});jindo.Effect.pulse=function(nPulse){return jindo.Effect(function(s){return(-Math.cos((s*(nPulse-0.5)*2)*Math.PI)/2)+0.5})};jindo.Effect.wave=function(nPeriod,nHeight){return jindo.Effect(function(s){return(nHeight||1)*(Math.sin(nPeriod*(s*360)*Math.PI/180)).toFixed(5)})};jindo.Effect.stepStart=jindo.Effect(function(s){return s===0?0:1});jindo.Effect.stepEnd=jindo.Effect(function(s){return s===1?1:0});jindo.Effect.easeIn=jindo.Effect.easeInCubic;jindo.Effect.easeOut=jindo.Effect.easeOutCubic;jindo.Effect.easeInOut=jindo.Effect.easeInOutCubic;jindo.Effect.easeOutIn=jindo.Effect.easeOutInCubic;jindo.Effect.bounce=jindo.Effect.easeOutBounce;jindo.Effect.elastic=jindo.Effect.easeInElastic;jindo.Transition=jindo.$Class({_nFPS:30,_aTaskQueue:null,_oTimer:null,_bIsWaiting:true,_bIsPlaying:false,$init:function(htOption){this._aTaskQueue=[];this._oTimer=new jindo.Timer();this._oSleepTimer=new jindo.Timer();this.option({fEffect:jindo.Effect.linear,bCorrection:false});this.option(htOption||{})},fps:function(nFPS){if(arguments.length>0){this._nFPS=nFPS;return this}return this._nFPS},isPlaying:function(){return this._bIsPlaying},abort:function(){this._aTaskQueue=[];this._oTimer.abort();this._oSleepTimer.abort();if(this._bIsPlaying){this.fireEvent("abort")}this._bIsWaiting=true;this._bIsPlaying=false;this._htTaskToDo=null;return this},start:function(nDuration,elTarget,htInfo){if(arguments.length>0){this.queue.apply(this,arguments)}this._prepareNextTask();return this},queue:function(nDuration,aCommand){var htTask;if(typeof arguments[0]=="function"){htTask={sType:"function",fTask:arguments[0]}}else{var a=[];if(arguments[1] instanceof Array){a=arguments[1]}else{var aInner=[];jindo.$A(arguments).forEach(function(v,i){if(i>0){aInner.push(v);if(i%2===0){a.push(aInner.concat());aInner=[]}}})}htTask={sType:"task",nDuration:nDuration,aList:[]};for(var i=0,nLen=a.length;i<nLen;i++){var aValue=[],htArg=a[i][1],sEnd;for(var sKey in htArg){sEnd=htArg[sKey];if(/^(@|style\.)(\w+)/i.test(sKey)){aValue.push(["style",RegExp.$2,sEnd])}else{aValue.push(["attr",sKey,sEnd])}}htTask.aList.push({elTarget:a[i][0],aValue:aValue})}}this._queueTask(htTask);return this},pause:function(){if(this._oTimer.abort()){this.fireEvent("pause")}return this},resume:function(){if(this._htTaskToDo){if(this._bIsWaiting===false&&this._bIsPlaying===true){this.fireEvent("resume")}this._doTask();this._bIsWaiting=false;this._bIsPlaying=true;var self=this;this._oTimer.start(function(){var bEnd=!self._doTask();if(bEnd){self._bIsWaiting=true;setTimeout(function(){self._prepareNextTask()},0)}return !bEnd},this._htTaskToDo.nInterval)}return this},precede:function(nDuration,elTarget,htInfo){this.start.apply(this,arguments);return this},sleep:function(nDuration,fCallback){if(typeof fCallback=="undefined"){fCallback=function(){}}this._queueTask({sType:"sleep",nDuration:nDuration,fCallback:fCallback});this._prepareNextTask();return this},_queueTask:function(v){this._aTaskQueue.push(v)},_dequeueTask:function(){var htTask=this._aTaskQueue.shift();if(htTask){if(htTask.sType=="task"){var aList=htTask.aList;for(var i=0,nLength=aList.length;i<nLength;i++){var elTarget=aList[i].elTarget,welTarget=null;for(var j=0,aValue=aList[i].aValue,nJLen=aValue.length;j<nJLen;j++){var sType=aValue[j][0],sKey=aValue[j][1],fFunc=aValue[j][2];if(typeof fFunc!="function"){var fEffect=this.option("fEffect");if(fFunc instanceof Array){fFunc=fEffect(fFunc[0],fFunc[1])}else{fFunc=fEffect(fFunc)}aValue[j][2]=fFunc}if(fFunc.setStart){if(this._isHTMLElement(elTarget)){welTarget=welTarget||jindo.$Element(elTarget);switch(sType){case"style":fFunc.setStart(welTarget.css(sKey));break;case"attr":fFunc.setStart(welTarget.$value()[sKey]);break}}else{fFunc.setStart(elTarget.getter(sKey))}}}}}return htTask}else{return null}},_prepareNextTask:function(){if(this._bIsWaiting){var htTask=this._dequeueTask();if(htTask){switch(htTask.sType){case"task":if(!this._bIsPlaying){this.fireEvent("start")}var nInterval=1000/this._nFPS,nGap=nInterval/htTask.nDuration;this._htTaskToDo={aList:htTask.aList,nRatio:0,nInterval:nInterval,nGap:nGap,nStep:0,nTotalStep:Math.ceil(htTask.nDuration/nInterval)};this.resume();break;case"function":if(!this._bIsPlaying){this.fireEvent("start")}htTask.fTask();this._prepareNextTask();break;case"sleep":if(this._bIsPlaying){this.fireEvent("sleep",{nDuration:htTask.nDuration});htTask.fCallback()}var self=this;this._oSleepTimer.start(function(){self.fireEvent("awake");self._prepareNextTask()},htTask.nDuration);break}}else{if(this._bIsPlaying){this._bIsPlaying=false;this.abort();this.fireEvent("end")}}}},_isHTMLElement:function(el){return("tagName" in el)},_doTask:function(){var htTaskToDo=this._htTaskToDo,nRatio=parseFloat(htTaskToDo.nRatio.toFixed(5),1),nStep=htTaskToDo.nStep,nTotalStep=htTaskToDo.nTotalStep,aList=htTaskToDo.aList,htCorrection={},bCorrection=this.option("bCorrection");for(var i=0,nLength=aList.length;i<nLength;i++){var elTarget=aList[i].elTarget,welTarget=null;for(var j=0,aValue=aList[i].aValue,nJLen=aValue.length;j<nJLen;j++){var sType=aValue[j][0],sKey=aValue[j][1],sValue=aValue[j][2](nRatio);if(this._isHTMLElement(elTarget)){if(bCorrection){var sUnit=/^\-?[0-9\.]+(%|[\w]+)?$/.test(sValue)&&RegExp.$1||"";if(sUnit){var nValue=parseFloat(sValue);nValue+=htCorrection[sKey]||0;nValue=parseFloat(nValue.toFixed(5));if(i==nLength-1){sValue=Math.round(nValue)+sUnit}else{htCorrection[sKey]=nValue-Math.floor(nValue);sValue=parseInt(nValue,10)+sUnit}}}welTarget=welTarget||jindo.$Element(elTarget);switch(sType){case"style":welTarget.css(sKey,sValue);break;case"attr":welTarget.$value()[sKey]=sValue;break}}else{elTarget.setter(sKey,sValue)}if(this._bIsPlaying){this.fireEvent("playing",{element:elTarget,sKey:sKey,sValue:sValue,nStep:nStep,nTotalStep:nTotalStep})}}}htTaskToDo.nRatio=Math.min(htTaskToDo.nRatio+htTaskToDo.nGap,1);htTaskToDo.nStep+=1;return nRatio!=1}}).extend(jindo.Component);(function(){var b=jindo.$Element.prototype.css;jindo.$Element.prototype.css=function(k,v){if(k=="opacity"){return typeof v!="undefined"?this.opacity(parseFloat(v)):this.opacity()}else{return typeof v!="undefined"?b.call(this,k,v):b.call(this,k)}}})();jindo.UIComponent=jindo.$Class({$init:function(){this._bIsActivating=false},isActivating:function(){return this._bIsActivating},activate:function(){if(this.isActivating()){return this}this._bIsActivating=true;if(arguments.length>0){this._onActivate.apply(this,arguments)}else{this._onActivate()}return this},deactivate:function(){if(!this.isActivating()){return this}this._bIsActivating=false;if(arguments.length>0){this._onDeactivate.apply(this,arguments)}else{this._onDeactivate()}return this}}).extend(jindo.Component);jindo.Accordion=jindo.$Class({$init:function(el,htOption){this._el=jindo.$(el);this._wel=jindo.$Element(this._el);this.option({sClassPrefix:"accordion-",sDirection:"vertical",sExpandEvent:"click",nDefaultIndex:null,bToggle:false,nDuration:300,nFPS:30,fExpandEffect:jindo.Effect.cubicEaseOut,fContractEffect:jindo.Effect.cubicEaseIn,nExpandDelay:0,nContractDelay:0,bActivateOnload:true});this.option(htOption||{});this._nExpanded=null;this._oTimer=new jindo.Timer();this._oTransition=new jindo.Transition({bCorrection:true}).fps(this.option("nFPS"));this._wfOnMouseOver=jindo.$Fn(this._onMouseOver,this);this._wfOnMouseOut=jindo.$Fn(this._onMouseOut,this);this._wfOnExpandEvent=jindo.$Fn(this._onExpandEvent,this);if(this.option("bActivateOnload")){this.activate()}},getBaseElement:function(){return this._el},_onActivate:function(){jindo.$Element.prototype.preventTapHighlight&&this._wel.preventTapHighlight(true);this._wfOnExpandEvent.attach(this._el,this.option("sExpandEvent"));this._wfOnMouseOver.attach(this._el,"mouseover");this._wfOnMouseOut.attach(this._el,"mouseout");var n=this.option("nDefaultIndex");if(typeof n=="number"){this.expand(n)}},_onDeactivate:function(){jindo.$Element.prototype.preventTapHighlight&&this._wel.preventTapHighlight(false);this._wfOnExpandEvent.detach(this._el,this.option("sExpandEvent"));this._wfOnMouseOver.detach(this._el,"mouseover");this._wfOnMouseOut.detach(this._el,"mouseout")},_getBlock:function(el){var sClassPrefix=this.option("sClassPrefix");return(jindo.$Element(el).hasClass(sClassPrefix+"block"))?el:jindo.$$.getSingle("! ."+sClassPrefix+"block",el)},_onMouseOver:function(we){var el=we.element,elBlock=this._getBlock(el),nIndex=(elBlock)?jindo.$A(this.getAllBlocks()).indexOf(elBlock):null;if(typeof nIndex=="number"){var elHandler=this.getHandler(nIndex);if(elHandler===elBlock||el===elHandler||jindo.$Element(el).isChildOf(elHandler)){this.fireEvent(we.type,{nIndex:nIndex,elBlock:elBlock,elHandler:elHandler,weEvent:we})}}},_onExpandEvent:function(we){var el=we.element,elBlock=this._getBlock(el),nIndex=(elBlock)?jindo.$A(this.getAllBlocks()).indexOf(elBlock):null;if(typeof nIndex=="number"){var elHandler=this.getHandler(nIndex);if(elHandler===elBlock||el===elHandler||jindo.$Element(el).isChildOf(elHandler)){if(this.option("bToggle")&&this.getExpanded()===nIndex){this.contractAll()}else{this.expand(nIndex)}}}},_onMouseOut:function(we){var el=we.element,elBlock=this._getBlock(el),nIndex=(elBlock)?jindo.$Element(elBlock).parent().indexOf(elBlock):null;if(elBlock&&typeof nIndex=="number"){this.fireEvent(we.type,{nIndex:nIndex,elBlock:elBlock,elHandler:this.getHandler(nIndex),weEvent:we})}},_getHeadSize:function(n){var el=this.getHead(n);el.style.zoom=1;return{width:jindo.$Element(el).width(),height:jindo.$Element(el).height()}},_getBodySize:function(n){var el=this.getBody(n);el.style.zoom=1;return{width:jindo.$Element(el).width(),height:jindo.$Element(el).height()}},getTransition:function(){return this._oTransition},expand:function(n){var aBlock=this.getAllBlocks(),self=this;n=Math.max(0,Math.min(aBlock.length,n));if(this.getExpanded()===n){return this}var ht={nIndex:n,elBlock:aBlock[n],elHandler:this.getHandler(n)};if(this.fireEvent("beforeExpand",ht)){var fEffect=self.option("fExpandEffect"),aArgs=[this.option("nDuration")];jindo.$A(aBlock).forEach(function(o,i,a){var aHeadSize=self._getHeadSize(i),aBodySize=self._getBodySize(i);switch(self.option("sDirection")){case"vertical":if(i==n){aArgs.push(a[i],{"@height":fEffect(aBodySize.height+aHeadSize.height+"px")})}else{aArgs.push(a[i],{"@height":fEffect(aHeadSize.height+"px")})}break;case"horizontal":if(i==n){aArgs.push(a[i],{"@width":fEffect(aBodySize.width+aHeadSize.width+"px")})}else{aArgs.push(a[i],{"@width":fEffect(aHeadSize.width+"px")})}break}});this._oTimer.abort();this._oTimer.start(function(){self._setExpanded(n);self._oTransition.abort().queue.apply(self._oTransition,aArgs).start(function(){self.fireEvent("expand",ht)})},this.option("nExpandDelay"))}return this},expandAll:function(){return this},contractAll:function(){var self=this,fEffect=self.option("fContractEffect"),aArgs=[this.option("nDuration")];jindo.$A(this.getAllBlocks()).forEach(function(o,i,a){var aHeadSize=self._getHeadSize(i);switch(self.option("sDirection")){case"vertical":aArgs.push(a[i],{"@height":fEffect(aHeadSize.height+"px")});break;case"horizontal":aArgs.push(a[i],{"@width":fEffect(aHeadSize.width+"px")});break}});if(this.fireEvent("beforeContract")){this._oTimer.start(function(){self._setExpanded(null);self._oTransition.abort().queue.apply(self._oTransition,aArgs).start(function(){self.fireEvent("contract")})},this.option("nContractDelay"))}return this},_setExpanded:function(n){this._nExpanded=n},getExpanded:function(){return this._nExpanded},getBlock:function(n){return this.getAllBlocks()[n]},getAllBlocks:function(){return jindo.$$("."+this.option("sClassPrefix")+"block",this._el)},getHead:function(n){return jindo.$$.getSingle("dt",this.getBlock(n))},getBody:function(n){return jindo.$$.getSingle("dd",this.getBlock(n))},getHandler:function(n){var elHead=this.getHead(n);return jindo.$$.getSingle("."+this.option("sClassPrefix")+"handler",elHead)||elHead}}).extend(jindo.UIComponent);jindo.AjaxHistory=jindo.$Class({_htEventHandler:{},_htHistoryData:{},_oAgent:null,_welIFrame:null,_nIntervalId:0,_sCheckType:"",_sComponentId:"",$static:{checkIFrameChange:function(oLocation){var htQueryString=jindo.$S(oLocation.search.substring(1)).parseString();this._aInstances[0]._checkLocationChange(encodeURIComponent(htQueryString.hash))}},$init:function(htOption){this._oAgent=jindo.$Agent().navigator();this._sComponentId="AjaxHistory"+(new Date()).getTime();this.option({sIFrameUrl:"history.html",nCheckInterval:100});this.option(htOption||{});(this.constructor._aInstances=this.constructor._aInstances||[]).push(this)},initialize:function(){var sHash=this._getLocationHash();if((this._oAgent.ie&&(document.documentMode||this._oAgent.version)>=8&&jindo.$Document().renderingMode()=="Standards")||(this._oAgent.firefox&&this._oAgent.version>=3.6)||(this._oAgent.chrome&&this._oAgent.version>3)||(this._oAgent.safari&&this._oAgent.version>=5)||(this._oAgent.opera&&this._oAgent.version>=10.6)){this._htEventHandler.hashchange=jindo.$Fn(this._checkLocationChange,this).attach(window,"hashchange");this._sCheckType="hashchangeevent"}else{if(this._oAgent.ie){this._welIFrame=jindo.$Element("<IFRAME>");this._welIFrame.hide();this._welIFrame.appendTo(document.body);this._sCheckType="iframe"}else{this._nIntervalId=setInterval(jindo.$Fn(this._checkLocationChange,this).bind(),this.option("nCheckInterval"));this._sCheckType="setinterval"}}if(sHash&&sHash!="%7B%7D"){if(this._sCheckType=="iframe"){this._welIFrame.$value().src=this.option("sIFrameUrl")+"?hash="+sHash}else{this._htHistoryData=this._getDecodedData(sHash);this.fireEvent("change",{htHistoryData:this._htHistoryData})}}else{var that=this;if(this._oAgent.ie&&(document.documentMode||this._oAgent.version)<8){var ifr=this._welIFrame.$value();ifr.onreadystatechange=function(){if(ifr.readyState=="complete"){that.fireEvent("load");ifr.onreadystatechange=function(){}}};ifr.src=this.option("sIFrameUrl")}else{setTimeout(function(){that.fireEvent("load")},0)}}return this},getComponentId:function(){return this._sComponentId},_getLocationHash:function(){var oAgent=jindo.$Agent().navigator();return oAgent.firefox?encodeURIComponent(location.hash.substring(1)):(location.hash.substring(1)||"%7B%7D")},_setLocationHash:function(sHash){location.hash=sHash=="%7B%7D"?"":sHash},addHistory:function(htHistoryData){if(htHistoryData&&typeof(htHistoryData)=="object"&&jindo.$H(htHistoryData).length()>0){this._htHistoryData=jindo.$Json(jindo.$Json(htHistoryData).toString()).toObject();var sHash=this._getEncodedData(htHistoryData);if(this._getLocationHash()!=sHash){this._setLocationHash(sHash);if(this._sCheckType=="iframe"){this._welIFrame.$value().src=this.option("sIFrameUrl")+"?hash="+sHash}return true}else{return false}}else{return false}},_checkLocationChange:function(sHash){sHash=sHash=="undefined"?"%7B%7D":sHash;sHash=(sHash&&typeof(sHash)=="string")?sHash:this._getLocationHash();var htCurrentHistoryData=this._getDecodedData(sHash);if(!this._compareData(this._htHistoryData,htCurrentHistoryData)){this._htHistoryData=htCurrentHistoryData;if(this._sCheckType=="iframe"){this._setLocationHash(sHash)}this.fireEvent("change",{htHistoryData:this._htHistoryData})}},_getEncodedData:function(htHistoryData){if(htHistoryData){if(typeof(JSON)=="object"&&typeof(JSON.stringify)=="function"){return encodeURIComponent(JSON.stringify(htHistoryData))}else{return encodeURIComponent(jindo.$Json(htHistoryData).toString())}}else{return""}},_getDecodedData:function(sEncodedHash){try{if(sEncodedHash){var sHashString=decodeURIComponent(sEncodedHash);if(typeof(JSON)=="object"&&typeof(JSON.parse)=="function"){return JSON.parse(sHashString)}else{return jindo.$Json(sHashString).toObject()}}}catch(e){}return{}},_compareData:function(htBase,htComparison){if(!htBase||!htComparison){return false}var wBase=htBase instanceof Array?jindo.$A(htBase):jindo.$H(htBase);var wComparison=htComparison instanceof Array?jindo.$A(htComparison):jindo.$H(htComparison);if(wBase.length()!=wComparison.length()){return false}var bRet=true;var fpCallee=arguments.callee;wBase.forEach(function(v,k){if(typeof(v)=="object"){if(!fpCallee(v,htComparison[k])){bRet=false;return}}else{if(v!=htComparison[k]){bRet=false;return}}});return bRet},destroy:function(){if(this._sCheckType=="hashchangeevent"){this._htEventHandler.hashchange.detach(window,"hashchange")}else{if(this._sCheckType=="iframe"){this._welIFrame.leave()}else{clearInterval(this._nIntervalId)}}this._htEventHandler=null;this._htHistoryData=null;this._oAgent=null;this._welIFrame=null;this._nIntervalId=null;this._sCheckType=null;this._sComponentId=null;var aInstances=this.constructor._aInstances||[];var nIndex=jindo.$A(aInstances).indexOf(this);if(nIndex>-1){aInstances.splice(nIndex,1)}}}).extend(jindo.Component);jindo.BrowseButton=jindo.$Class({$init:function(el,htOption){this.option({sClassPrefix:"browse-",bActivateOnload:true});this.option(htOption||{});this._el=jindo.$(el);if(this.option("bActivateOnload")){this.activate()}},_onActivate:function(){this._assignHTMLElement();this._attachEvents()},_onDeactivate:function(){this._detachEvents();this._unassignHTMLElement()},_assignHTMLElement:function(){var sClassPrefix=this.option("sClassPrefix");this._elBox=jindo.$$.getSingle("."+sClassPrefix+"box",this._el);this._elFileSelect=jindo.$$.getSingle("."+sClassPrefix+"file-input",this._el);this._elBrowseButton=jindo.$$.getSingle("."+sClassPrefix+"button",this._el);this._sTmpFileSelectCssText=this._elFileSelect.style.cssText;this._elFileSelect.style.cssText="top:-.5em !important; height:500px !important;";jindo.$Element(this._elBrowseButton).addClass(sClassPrefix+"applied")},_unassignHTMLElement:function(){var sClassPrefix=this.option("sClassPrefix");this._elFileSelect.style.cssText=this._sTmpFileSelectCssText;jindo.$Element(this._elBrowseButton).removeClass(sClassPrefix+"applied")},_adjustFileSelectPos:function(nX){this.getFileSelect().style.right=jindo.$Element(this.getBox()).offset().left+jindo.$Element(this.getBox()).width()-nX-20+"px"},_attachEvents:function(){var elBrowseButton=this.getBrowseButton(),welBrowseButton=jindo.$Element(elBrowseButton),elBox=this.getBox(),elFileSelect=this.getFileSelect();this._wfHoverOnBrowseButton=jindo.$Fn(function(we){welBrowseButton.addClass(this.option("sClassPrefix")+"over");this.fireEvent("over");this._adjustFileSelectPos(we.pos().pageX)},this);this._wfRestore=jindo.$Fn(function(we){welBrowseButton.removeClass(this.option("sClassPrefix")+"over");elFileSelect.style.right="0px";this.fireEvent("out")},this);this._wfMouseMoveOnFloat=jindo.$Fn(function(we){this._adjustFileSelectPos(we.pos().pageX)},this);this._wfChange=jindo.$Fn(function(we){this.fireEvent("sourceChange")},this);this._wfHoverOnBrowseButton.attach(elBox,"mouseover");this._wfMouseMoveOnFloat.attach(elBox,"mousemove");this._wfRestore.attach(elBox,"mouseout");this._wfChange.attach(this.getFileSelect(),"change")},_detachEvents:function(){var elBrowseButton=this.getBrowseButton(),welBrowseButton=jindo.$Element(elBrowseButton),elBox=this.getBox(),elFileSelect=this.getFileSelect();this._wfHoverOnBrowseButton.detach(elBox,"mouseover");this._wfMouseMoveOnFloat.detach(elBox,"mousemove");this._wfRestore.detach(elBox,"mouseout");this._wfChange.detach(this.getFileSelect(),"change")},getBox:function(){return this._elBox},getFileSelect:function(){return this._elFileSelect},getBrowseButton:function(){return this._elBrowseButton}}).extend(jindo.UIComponent);jindo.Cache=jindo.$Class({$init:function(htOption){this._htCacheData={};this._htExpireTime={};this._waKeyList=jindo.$A();this.option({nCacheLimit:50,nExpireTime:0});this.option(htOption)},add:function(vKey,vValue,nExpireTime){if(vKey&&vValue){this._checkCacheExpire();this._checkCacheLimit();var sKey=this._makeKey(vKey);if(sKey){this._htCacheData[sKey]=vValue;this._htExpireTime[sKey]=this._getExpireTime(nExpireTime);this._waKeyList.push(sKey);return true}}return false},remove:function(vKey){if(vKey){var sKey=this._makeKey(vKey);if(this._htCacheData[sKey]){this._waKeyList=this._waKeyList.refuse(sKey);delete this._htExpireTime[sKey];delete this._htCacheData[sKey];return true}}return false},clear:function(){this._htCacheData={};this._htExpireTime={};this._waKeyList=jindo.$A()},get:function(vKey){if(vKey){var sKey=this._makeKey(vKey);if(this.check(vKey)){return this._htCacheData[sKey]}}return null},check:function(vKey){if(vKey){var sKey=this._makeKey(vKey);if(this._htCacheData[sKey]&&this._checkCacheExpire(sKey)){return true}}return false},_checkCacheLimit:function(){if(this._waKeyList.length()==this.option("nCacheLimit")){this.remove(this._waKeyList.get(0))}},_checkCacheExpire:function(sKey){if(sKey){var nTime=this._getTime();if(this._htExpireTime[sKey]===0||nTime<this._htExpireTime[sKey]){return true}else{this.remove(jindo.$S(sKey).parseString());return false}}else{for(var i=0,n=this._waKeyList.length();i<n;i++){return this._checkCacheExpire(this._waKeyList.get(i))}}},_getExpireTime:function(nExpireTime){if(nExpireTime){return this._getTime()+(nExpireTime*1000)}else{if(this.option("nExpireTime")){return this._getTime()+(this.option("nExpireTime")*1000)}else{return 0}}},_makeKey:function(vKey){if(vKey){if(typeof(vKey)=="string"){return vKey}else{try{return jindo.$H(vKey).toQueryString()}catch(e){return""}}}else{return""}},_getTime:function(){return +new Date()},destroy:function(){this._waKeyList=null;this._htCacheData=null;this._htExpireTime=null}}).extend(jindo.Component);jindo.Calendar=jindo.$Class({$init:function(sLayerId,htOption){var htToday=this.constructor.getToday();this.setToday(htToday.nYear,htToday.nMonth,htToday.nDate);this._elLayer=jindo.$(sLayerId);this._htDefaultOption={sClassPrefix:"calendar-",nYear:this._htToday.nYear,nMonth:this._htToday.nMonth,nDate:this._htToday.nDate,sTitleFormat:"yyyy-mm",sYearTitleFormat:"yyyy",sMonthTitleFormat:"m",aMonthTitle:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],bDrawOnload:true};this.option(this._htDefaultOption);this.option(htOption||{});this._assignHTMLElements();this.activate();this.setDate(this.option("nYear"),this.option("nMonth"),this.option("nDate"));if(this.option("bDrawOnload")){this.draw()}},getBaseElement:function(){return this._elLayer},getDate:function(){return this._htDate},getDateOfElement:function(el){var nDateIndex=jindo.$A(this._aDateContainerElement).indexOf(el);if(nDateIndex>-1){return this._aMetaData[nDateIndex]}return null},setToday:function(nYear,nMonth,nDate){if(!this._htToday){this._htToday={}}this._htToday.nYear=nYear;this._htToday.nMonth=nMonth;this._htToday.nDate=nDate;return this},getToday:function(){return{nYear:this._htToday.nYear,nMonth:this._htToday.nMonth,nDate:this._htToday.nDate}},setDate:function(nYear,nMonth,nDate){this._htDate={nYear:nYear,nMonth:(nMonth*1),nDate:(nDate*1)}},getShownDate:function(){return this._getShownDate()},_getShownDate:function(){return this.htShownDate||this.getDate()},_setShownDate:function(nYear,nMonth){this.htShownDate={nYear:nYear,nMonth:(nMonth*1),nDate:1}},_assignHTMLElements:function(){var sClassPrefix=this.option("sClassPrefix"),elLayer=this.getBaseElement();if((this.elBtnPrevYear=jindo.$$.getSingle(("."+sClassPrefix+"btn-prev-year"),elLayer))){this.wfPrevYear=jindo.$Fn(function(oEvent){oEvent.stop(jindo.$Event.CANCEL_DEFAULT);this.draw(-1,0,true)},this)}if((this.elBtnPrevMonth=jindo.$$.getSingle(("."+sClassPrefix+"btn-prev-mon"),elLayer))){this.wfPrevMonth=jindo.$Fn(function(oEvent){oEvent.stop(jindo.$Event.CANCEL_DEFAULT);this.draw(0,-1,true)},this)}if((this.elBtnNextMonth=jindo.$$.getSingle(("."+sClassPrefix+"btn-next-mon"),elLayer))){this.wfNextMonth=jindo.$Fn(function(oEvent){oEvent.stop(jindo.$Event.CANCEL_DEFAULT);this.draw(0,1,true)},this)}if((this.elBtnNextYear=jindo.$$.getSingle(("."+sClassPrefix+"btn-next-year"),elLayer))){this.wfNextYear=jindo.$Fn(function(oEvent){oEvent.stop(jindo.$Event.CANCEL_DEFAULT);this.draw(1,0,true)},this)}this.elTitle=jindo.$$.getSingle(("."+sClassPrefix+"title"),elLayer);this.elTitleYear=jindo.$$.getSingle(("."+sClassPrefix+"title-year"),elLayer);this.elTitleMonth=jindo.$$.getSingle(("."+sClassPrefix+"title-month"),elLayer);var elWeekTemplate=jindo.$$.getSingle("."+sClassPrefix+"week",elLayer);this.elWeekTemplate=elWeekTemplate.cloneNode(true);this.elWeekAppendTarget=elWeekTemplate.parentNode},_setCalendarTitle:function(nYear,nMonth,sType){if(nMonth<10){nMonth=("0"+(nMonth*1)).toString()}var elTitle=this.elTitle,sTitleFormat=this.option("sTitleFormat"),sTitle;if(typeof sType!="undefined"){switch(sType){case"year":elTitle=this.elTitleYear;sTitleFormat=this.option("sYearTitleFormat");sTitle=sTitleFormat.replace(/yyyy/g,nYear).replace(/y/g,(nYear).toString().substr(2,2));break;case"month":elTitle=this.elTitleMonth;sTitleFormat=this.option("sMonthTitleFormat");sTitle=sTitleFormat.replace(/mm/g,nMonth).replace(/m/g,(nMonth*1)).replace(/M/g,this.option("aMonthTitle")[nMonth-1]);break}}else{sTitle=sTitleFormat.replace(/yyyy/g,nYear).replace(/y/g,(nYear).toString().substr(2,2)).replace(/mm/g,nMonth).replace(/m/g,(nMonth*1)).replace(/M/g,this.option("aMonthTitle")[nMonth-1])}jindo.$Element(elTitle).text(sTitle)},draw:function(nYear,nMonth,bRelative){var sClassPrefix=this.option("sClassPrefix"),htDate=this.getDate(),oShownDate=this._getShownDate();if(oShownDate&&typeof bRelative!="undefined"&&bRelative){var htRelativeDate=this.constructor.getRelativeDate(nYear,nMonth,0,oShownDate);nYear=htRelativeDate.nYear;nMonth=htRelativeDate.nMonth}else{if(typeof nYear=="undefined"&&typeof nMonth=="undefined"&&typeof bRelative=="undefined"){nYear=htDate.nYear;nMonth=htDate.nMonth}else{nYear=nYear||oShownDate.nYear;nMonth=nMonth||oShownDate.nMonth}}if(this.fireEvent("beforeDraw",{nYear:nYear,nMonth:nMonth})){if(this.elTitle){this._setCalendarTitle(nYear,nMonth)}if(this.elTitleYear){this._setCalendarTitle(nYear,nMonth,"year")}if(this.elTitleMonth){this._setCalendarTitle(nYear,nMonth,"month")}this._clear(jindo.Calendar.getWeeks(nYear,nMonth));this._setShownDate(nYear,nMonth);var htToday=this.getToday(),nFirstDay=this.constructor.getFirstDay(nYear,nMonth),nLastDay=this.constructor.getLastDay(nYear,nMonth),nLastDate=this.constructor.getLastDate(nYear,nMonth),nDay=0,htDatePrevMonth=this.constructor.getRelativeDate(0,-1,0,{nYear:nYear,nMonth:nMonth,nDate:1}),htDateNextMonth=this.constructor.getRelativeDate(0,1,0,{nYear:nYear,nMonth:nMonth,nDate:1}),nPrevMonthLastDate=this.constructor.getLastDate(htDatePrevMonth.nYear,htDatePrevMonth.nMonth),aDate=[],bPrevMonth,bNextMonth,welDateContainer,nTempYear,nTempMonth,oParam,nIndexOfLastDate,elWeek,i;var nWeeks=this.constructor.getWeeks(nYear,nMonth);for(i=0;i<nWeeks;i++){elWeek=this.elWeekTemplate.cloneNode(true);jindo.$Element(elWeek).appendTo(this.elWeekAppendTarget);this._aWeekElement.push(elWeek)}this._aDateElement=jindo.$$("."+sClassPrefix+"date",this.elWeekAppendTarget);this._aDateContainerElement=jindo.$$("."+sClassPrefix+"week > *",this.elWeekAppendTarget);if(nFirstDay>0){for(i=nPrevMonthLastDate-nFirstDay;i<nPrevMonthLastDate;i++){aDate.push(i+1)}}for(i=1;i<nLastDate+1;i++){aDate.push(i)}nIndexOfLastDate=aDate.length-1;for(i=1;i<7-nLastDay;i++){aDate.push(i)}for(i=0;i<aDate.length;i++){bPrevMonth=false;bNextMonth=false;welDateContainer=jindo.$Element(this._aDateContainerElement[i]);nTempYear=nYear;nTempMonth=nMonth;if(i<nFirstDay){bPrevMonth=true;welDateContainer.addClass(sClassPrefix+"prev-mon");nTempYear=htDatePrevMonth.nYear;nTempMonth=htDatePrevMonth.nMonth}else{if(i>nIndexOfLastDate){bNextMonth=true;welDateContainer.addClass(sClassPrefix+"next-mon");nTempYear=htDateNextMonth.nYear;nTempMonth=htDateNextMonth.nMonth}else{nTempYear=nYear;nTempMonth=nMonth}}if(nDay===0){welDateContainer.addClass(sClassPrefix+"sun")}if(nDay==6){welDateContainer.addClass(sClassPrefix+"sat")}if(nTempYear==htToday.nYear&&(nTempMonth*1)==htToday.nMonth&&aDate[i]==htToday.nDate){welDateContainer.addClass(sClassPrefix+"today")}oParam={elDate:this._aDateElement[i],elDateContainer:welDateContainer.$value(),nYear:nTempYear,nMonth:nTempMonth,nDate:aDate[i],bPrevMonth:bPrevMonth,bNextMonth:bNextMonth,sHTML:aDate[i]};jindo.$Element(oParam.elDate).html(oParam.sHTML.toString());this._aMetaData.push({nYear:nTempYear,nMonth:nTempMonth,nDate:aDate[i]});nDay=(nDay+1)%7;this.fireEvent("draw",oParam)}this.fireEvent("afterDraw",{nYear:nYear,nMonth:nMonth})}},_clear:function(nWeek){this._aMetaData=[];this._aWeekElement=[];jindo.$Element(this.elWeekAppendTarget).empty()},attachEvent:function(){this.activate()},detachEvent:function(){this.deactivate()},_onActivate:function(){if(this.elBtnPrevYear){this.wfPrevYear.attach(this.elBtnPrevYear,"click")}if(this.elBtnPrevMonth){this.wfPrevMonth.attach(this.elBtnPrevMonth,"click")}if(this.elBtnNextMonth){this.wfNextMonth.attach(this.elBtnNextMonth,"click")}if(this.elBtnNextYear){this.wfNextYear.attach(this.elBtnNextYear,"click")}},_onDeactivate:function(){if(this.elBtnPrevYear){this.wfPrevYear.detach(this.elBtnPrevYear,"click")}if(this.elBtnPrevMonth){this.wfPrevMonth.detach(this.elBtnPrevMonth,"click")}if(this.elBtnNextMonth){this.wfNextMonth.detach(this.elBtnNextMonth,"click")}if(this.elBtnNextYear){this.wfNextYear.detach(this.elBtnNextYear,"click")}}}).extend(jindo.UIComponent);jindo.Calendar.setToday=function(nYear,nMonth,nDate){if(!this._htToday){this._htToday={}}this._htToday.nYear=nYear;this._htToday.nMonth=nMonth;this._htToday.nDate=nDate;return this};jindo.Calendar.getToday=function(){var htToday=this._htToday||this.getDateHashTable(new Date());return{nYear:htToday.nYear,nMonth:htToday.nMonth,nDate:htToday.nDate}};jindo.Calendar.getDateObject=function(htDate){if(arguments.length==3){return new Date(arguments[0],arguments[1]-1,arguments[2])}return new Date(htDate.nYear,htDate.nMonth-1,htDate.nDate)};jindo.Calendar.getDateHashTable=function(oDate){if(arguments.length==3){return{nYear:arguments[0],nMonth:arguments[1],nDate:arguments[2]}}if(arguments.length<=1){oDate=oDate||new Date()}return{nYear:oDate.getFullYear(),nMonth:oDate.getMonth()+1,nDate:oDate.getDate()}};jindo.Calendar.getTime=function(htDate){return this.getDateObject(htDate).getTime()};jindo.Calendar.getFirstDay=function(nYear,nMonth){return new Date(nYear,nMonth-1,1).getDay()};jindo.Calendar.getLastDay=function(nYear,nMonth){return new Date(nYear,nMonth,0).getDay()};jindo.Calendar.getLastDate=function(nYear,nMonth){return new Date(nYear,nMonth,0).getDate()};jindo.Calendar.getWeeks=function(nYear,nMonth){var nFirstDay=this.getFirstDay(nYear,nMonth),nLastDate=this.getLastDate(nYear,nMonth);return Math.ceil((nFirstDay+nLastDate)/7)};jindo.Calendar.getRelativeDate=function(nYear,nMonth,nDate,htDate){var beforeDate=jindo.$Date(new Date(htDate.nYear,htDate.nMonth,htDate.nDate));var day={"1":31,"2":28,"3":31,"4":30,"5":31,"6":30,"7":31,"8":31,"9":30,"10":31,"11":30,"12":31};if(beforeDate.isLeapYear()){day={"1":31,"2":29,"3":31,"4":30,"5":31,"6":30,"7":31,"8":31,"9":30,"10":31,"11":30,"12":31}}if(day[htDate.nMonth]==htDate.nDate){htDate.nDate=day[htDate.nMonth+nMonth]}var changeDate=this.getDateHashTable(new Date(htDate.nYear+nYear,htDate.nMonth+nMonth-1,htDate.nDate+nDate));return this.getDateHashTable(new Date(htDate.nYear+nYear,htDate.nMonth+nMonth-1,htDate.nDate+nDate))};jindo.Calendar.isValidDate=function(nYear,nMonth,nDate){if(nMonth<=12&&nDate<=this.getLastDate(nYear,nMonth)){return true}else{return false}};jindo.Calendar.isPast=function(htDate,htComparisonDate){if(this.getTime(htDate)<this.getTime(htComparisonDate)){return true}return false};jindo.Calendar.isFuture=function(htDate,htComparisonDate){if(this.getTime(htDate)>this.getTime(htComparisonDate)){return true}return false};jindo.Calendar.isSameDate=function(htDate,htComparisonDate){if(this.getTime(htDate)==this.getTime(htComparisonDate)){return true}return false};jindo.Calendar.isBetween=function(htDate,htFrom,htTo){if(this.isFuture(htDate,htTo)||this.isPast(htDate,htFrom)){return false}else{return true}};var G_vmlCanvasManager;if(!document.createElement("canvas").getContext){(function(){var m=Math,mr=m.round,ms=m.sin,mc=m.cos,abs=m.abs,sqrt=m.sqrt,Z=10,Z2=Z/2,slice=Array.prototype.slice,dec2hex=[];for(var i=0;i<16;i++){for(var j=0;j<16;j++){dec2hex[i*16+j]=i.toString(16)+j.toString(16)}}function getContext(){return this.context_||(this.context_=new CanvasRenderingContext2D_(this))}function bind(f,obj,var_args){var a=slice.call(arguments,2);return function(){return f.apply(obj,a.concat(slice.call(arguments)))}}var G_vmlCanvasManager_={init:function(opt_doc){if(/MSIE/.test(navigator.userAgent)&&!window.opera){var doc=opt_doc||document;doc.createElement("canvas");doc.attachEvent("onreadystatechange",bind(this.init_,this,doc))}},init_:function(doc){if(!doc.namespaces.g_vml_){doc.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML")}if(!doc.namespaces.g_o_){doc.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML")}if(!doc.styleSheets.ex_canvas_){var ss=doc.createStyleSheet();ss.owningElement.id="ex_canvas_";ss.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}g_vml_\\:*{behavior:url(#default#VML)}g_o_\\:*{behavior:url(#default#VML)}"}var els=doc.getElementsByTagName("canvas");for(var i=0;i<els.length;i++){this.initElement(els[i])}},initElement:function(el){if(!el.getContext){el.getContext=getContext;el.innerHTML="";el.attachEvent("onpropertychange",onPropertyChange);el.attachEvent("onresize",onResize);var attrs=el.attributes;if(attrs.width&&attrs.width.specified){el.style.width=attrs.width.nodeValue+"px"}else{el.width=el.clientWidth}if(attrs.height&&attrs.height.specified){el.style.height=attrs.height.nodeValue+"px"}else{el.height=el.clientHeight}}return el}};G_vmlCanvasManager_.init();function onPropertyChange(e){var el=e.srcElement;switch(e.propertyName){case"width":el.style.width=el.attributes.width.nodeValue+"px";el.getContext().clearRect();break;case"height":el.style.height=el.attributes.height.nodeValue+"px";el.getContext().clearRect();break}}function onResize(e){var el=e.srcElement;if(el.firstChild){el.firstChild.style.width=el.clientWidth+"px";el.firstChild.style.height=el.clientHeight+"px"}}function createMatrixIdentity(){return[[1,0,0],[0,1,0],[0,0,1]]}function matrixMultiply(m1,m2){var result=createMatrixIdentity();for(var x=0;x<3;x++){for(var y=0;y<3;y++){var sum=0;for(var z=0;z<3;z++){sum+=m1[x][z]*m2[z][y]}result[x][y]=sum}}return result}function copyState(o1,o2){o2.fillStyle=o1.fillStyle;o2.lineCap=o1.lineCap;o2.lineJoin=o1.lineJoin;o2.lineWidth=o1.lineWidth;o2.miterLimit=o1.miterLimit;o2.shadowBlur=o1.shadowBlur;o2.shadowColor=o1.shadowColor;o2.shadowOffsetX=o1.shadowOffsetX;o2.shadowOffsetY=o1.shadowOffsetY;o2.strokeStyle=o1.strokeStyle;o2.globalAlpha=o1.globalAlpha;o2.arcScaleX_=o1.arcScaleX_;o2.arcScaleY_=o1.arcScaleY_;o2.lineScale_=o1.lineScale_}function processStyle(styleString){var str,alpha=1;styleString=String(styleString);if(styleString.substring(0,3)=="rgb"){var start=styleString.indexOf("(",3);var end=styleString.indexOf(")",start+1);var guts=styleString.substring(start+1,end).split(",");str="#";for(var i=0;i<3;i++){str+=dec2hex[Number(guts[i])]}if(guts.length==4&&styleString.substr(3,1)=="a"){alpha=guts[3]}}else{str=styleString}return{color:str,alpha:alpha}}function processLineCap(lineCap){switch(lineCap){case"butt":return"flat";case"round":return"round";case"square":break;default:return"square"}}function CanvasRenderingContext2D_(surfaceElement){this.m_=createMatrixIdentity();this.mStack_=[];this.aStack_=[];this.currentPath_=[];this.strokeStyle="#000";this.fillStyle="#000";this.lineWidth=1;this.lineJoin="miter";this.lineCap="butt";this.miterLimit=Z*1;this.globalAlpha=1;this.canvas=surfaceElement;var el=surfaceElement.ownerDocument.createElement("div");el.style.width=surfaceElement.clientWidth+"px";el.style.height=surfaceElement.clientHeight+"px";surfaceElement.appendChild(el);this.element_=el;this.arcScaleX_=1;this.arcScaleY_=1;this.lineScale_=1}var contextPrototype=CanvasRenderingContext2D_.prototype;contextPrototype.clearRect=function(){this.element_.innerHTML=""};contextPrototype.beginPath=function(){this.currentPath_=[]};contextPrototype.moveTo=function(aX,aY){var p=this.getCoords_(aX,aY);this.currentPath_.push({type:"moveTo",x:p.x,y:p.y});this.currentX_=p.x;this.currentY_=p.y};contextPrototype.lineTo=function(aX,aY){var p=this.getCoords_(aX,aY);this.currentPath_.push({type:"lineTo",x:p.x,y:p.y});this.currentX_=p.x;this.currentY_=p.y};contextPrototype.bezierCurveTo=function(aCP1x,aCP1y,aCP2x,aCP2y,aX,aY){var p=this.getCoords_(aX,aY);var cp1=this.getCoords_(aCP1x,aCP1y);var cp2=this.getCoords_(aCP2x,aCP2y);bezierCurveTo(this,cp1,cp2,p)};function bezierCurveTo(self,cp1,cp2,p){self.currentPath_.push({type:"bezierCurveTo",cp1x:cp1.x,cp1y:cp1.y,cp2x:cp2.x,cp2y:cp2.y,x:p.x,y:p.y});self.currentX_=p.x;self.currentY_=p.y}contextPrototype.quadraticCurveTo=function(aCPx,aCPy,aX,aY){var cp=this.getCoords_(aCPx,aCPy);var p=this.getCoords_(aX,aY);var cp1={x:this.currentX_+2/3*(cp.x-this.currentX_),y:this.currentY_+2/3*(cp.y-this.currentY_)};var cp2={x:cp1.x+(p.x-this.currentX_)/3,y:cp1.y+(p.y-this.currentY_)/3};bezierCurveTo(this,cp1,cp2,p)};contextPrototype.arc=function(aX,aY,aRadius,aStartAngle,aEndAngle,aClockwise){aRadius*=Z;var arcType=aClockwise?"at":"wa";var xStart=aX+mc(aStartAngle)*aRadius-Z2;var yStart=aY+ms(aStartAngle)*aRadius-Z2;var xEnd=aX+mc(aEndAngle)*aRadius-Z2;var yEnd=aY+ms(aEndAngle)*aRadius-Z2;if(xStart==xEnd&&!aClockwise){xStart+=0.125}var p=this.getCoords_(aX,aY);var pStart=this.getCoords_(xStart,yStart);var pEnd=this.getCoords_(xEnd,yEnd);this.currentPath_.push({type:arcType,x:p.x,y:p.y,radius:aRadius,xStart:pStart.x,yStart:pStart.y,xEnd:pEnd.x,yEnd:pEnd.y})};contextPrototype.rect=function(aX,aY,aWidth,aHeight){this.moveTo(aX,aY);this.lineTo(aX+aWidth,aY);this.lineTo(aX+aWidth,aY+aHeight);this.lineTo(aX,aY+aHeight);this.closePath()};contextPrototype.strokeRect=function(aX,aY,aWidth,aHeight){var oldPath=this.currentPath_;this.beginPath();this.moveTo(aX,aY);this.lineTo(aX+aWidth,aY);this.lineTo(aX+aWidth,aY+aHeight);this.lineTo(aX,aY+aHeight);this.closePath();this.stroke();this.currentPath_=oldPath};contextPrototype.fillRect=function(aX,aY,aWidth,aHeight){var oldPath=this.currentPath_;this.beginPath();this.moveTo(aX,aY);this.lineTo(aX+aWidth,aY);this.lineTo(aX+aWidth,aY+aHeight);this.lineTo(aX,aY+aHeight);this.closePath();this.fill();this.currentPath_=oldPath};contextPrototype.createLinearGradient=function(aX0,aY0,aX1,aY1){var gradient=new CanvasGradient_("gradient");gradient.x0_=aX0;gradient.y0_=aY0;gradient.x1_=aX1;gradient.y1_=aY1;return gradient};contextPrototype.createRadialGradient=function(aX0,aY0,aR0,aX1,aY1,aR1){var gradient=new CanvasGradient_("gradientradial");gradient.x0_=aX0;gradient.y0_=aY0;gradient.r0_=aR0;gradient.x1_=aX1;gradient.y1_=aY1;gradient.r1_=aR1;return gradient};contextPrototype.drawImage=function(image,var_args){var dx,dy,dw,dh,sx,sy,sw,sh;var oldRuntimeWidth=image.runtimeStyle.width;var oldRuntimeHeight=image.runtimeStyle.height;image.runtimeStyle.width="auto";image.runtimeStyle.height="auto";var w=image.width;var h=image.height;image.runtimeStyle.width=oldRuntimeWidth;image.runtimeStyle.height=oldRuntimeHeight;if(arguments.length==3){dx=arguments[1];dy=arguments[2];sx=sy=0;sw=dw=w;sh=dh=h}else{if(arguments.length==5){dx=arguments[1];dy=arguments[2];dw=arguments[3];dh=arguments[4];sx=sy=0;sw=w;sh=h}else{if(arguments.length==9){sx=arguments[1];sy=arguments[2];sw=arguments[3];sh=arguments[4];dx=arguments[5];dy=arguments[6];dw=arguments[7];dh=arguments[8]}else{throw Error("Invalid number of arguments")}}}var d=this.getCoords_(dx,dy);var w2=sw/2;var h2=sh/2;var vmlStr=[];var W=10;var H=10;vmlStr.push(" <g_vml_:group",' coordsize="',Z*W,",",Z*H,'"',' coordorigin="0,0"',' style="width:',W,"px;height:",H,"px;position:absolute;");if(this.m_[0][0]!=1||this.m_[0][1]){var filter=[];filter.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",mr(d.x/Z),",","Dy=",mr(d.y/Z),"");var max=d;var c2=this.getCoords_(dx+dw,dy);var c3=this.getCoords_(dx,dy+dh);var c4=this.getCoords_(dx+dw,dy+dh);max.x=m.max(max.x,c2.x,c3.x,c4.x);max.y=m.max(max.y,c2.y,c3.y,c4.y);vmlStr.push("padding:0 ",mr(max.x/Z),"px ",mr(max.y/Z),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",filter.join(""),", sizingmethod='clip');")}else{vmlStr.push("top:",mr(d.y/Z),"px;left:",mr(d.x/Z),"px;")}vmlStr.push(' ">','<g_vml_:image src="',image.src,'"',' style="width:',Z*dw,"px;"," height:",Z*dh,'px;"',' cropleft="',sx/w,'"',' croptop="',sy/h,'"',' cropright="',(w-sx-sw)/w,'"',' cropbottom="',(h-sy-sh)/h,'"'," />","</g_vml_:group>");this.element_.insertAdjacentHTML("BeforeEnd",vmlStr.join(""))};contextPrototype.stroke=function(aFill){var lineStr=[];var lineOpen=false;var a=processStyle(aFill?this.fillStyle:this.strokeStyle);var color=a.color;var opacity=a.alpha*this.globalAlpha;var W=10;var H=10;lineStr.push("<g_vml_:shape",' filled="',!!aFill,'"',' style="position:absolute;width:',W,"px;height:",H,'px;"',' coordorigin="0 0" coordsize="',Z*W," ",Z*H,'"',' stroked="',!aFill,'"',' path="');var newSeq=false;var min={x:null,y:null};var max={x:null,y:null};var i;for(i=0;i<this.currentPath_.length;i++){var p=this.currentPath_[i];var c;switch(p.type){case"moveTo":c=p;lineStr.push(" m ",mr(p.x),",",mr(p.y));break;case"lineTo":lineStr.push(" l ",mr(p.x),",",mr(p.y));break;case"close":lineStr.push(" x ");p=null;break;case"bezierCurveTo":lineStr.push(" c ",mr(p.cp1x),",",mr(p.cp1y),",",mr(p.cp2x),",",mr(p.cp2y),",",mr(p.x),",",mr(p.y));break;case"at":case"wa":lineStr.push(" ",p.type," ",mr(p.x-this.arcScaleX_*p.radius),",",mr(p.y-this.arcScaleY_*p.radius)," ",mr(p.x+this.arcScaleX_*p.radius),",",mr(p.y+this.arcScaleY_*p.radius)," ",mr(p.xStart),",",mr(p.yStart)," ",mr(p.xEnd),",",mr(p.yEnd));break}if(p){if(min.x===null||p.x<min.x){min.x=p.x}if(max.x===null||p.x>max.x){max.x=p.x}if(min.y===null||p.y<min.y){min.y=p.y}if(max.y===null||p.y>max.y){max.y=p.y}}}lineStr.push(' ">');if(!aFill){var lineWidth=this.lineScale_*this.lineWidth;if(lineWidth<1){opacity*=lineWidth}lineStr.push("<g_vml_:stroke",' opacity="',opacity,'"',' joinstyle="',this.lineJoin,'"',' miterlimit="',this.miterLimit,'"',' endcap="',processLineCap(this.lineCap),'"',' weight="',lineWidth,'px"',' color="',color,'" />')}else{if(typeof this.fillStyle=="object"){var fillStyle=this.fillStyle;var angle=0;var focus={x:0,y:0};var shift=0;var expansion=1;var p0;if(fillStyle.type_=="gradient"){var x0=fillStyle.x0_/this.arcScaleX_;var y0=fillStyle.y0_/this.arcScaleY_;var x1=fillStyle.x1_/this.arcScaleX_;var y1=fillStyle.y1_/this.arcScaleY_;p0=this.getCoords_(x0,y0);var p1=this.getCoords_(x1,y1);var dx=p1.x-p0.x;var dy=p1.y-p0.y;angle=Math.atan2(dx,dy)*180/Math.PI;if(angle<0){angle+=360}if(angle<0.000001){angle=0}}else{p0=this.getCoords_(fillStyle.x0_,fillStyle.y0_);var width=max.x-min.x;var height=max.y-min.y;focus={x:(p0.x-min.x)/width,y:(p0.y-min.y)/height};width/=this.arcScaleX_*Z;height/=this.arcScaleY_*Z;var dimension=m.max(width,height);shift=2*fillStyle.r0_/dimension;expansion=2*fillStyle.r1_/dimension-shift}var stops=fillStyle.colors_;stops.sort(function(cs1,cs2){return cs1.offset-cs2.offset});var length=stops.length;var color1=stops[0].color;var color2=stops[length-1].color;var opacity1=stops[0].alpha*this.globalAlpha;var opacity2=stops[length-1].alpha*this.globalAlpha;var colors=[];for(i=0;i<length;i++){var stop=stops[i];colors.push(stop.offset*expansion+shift+" "+stop.color)}lineStr.push('<g_vml_:fill type="',fillStyle.type_,'"',' method="none" focus="100%"',' color="',color1,'"',' color2="',color2,'"',' colors="',colors.join(","),'"',' opacity="',opacity2,'"',' g_o_:opacity2="',opacity1,'"',' angle="',angle,'"',' focusposition="',focus.x,",",focus.y,'" />')}else{lineStr.push('<g_vml_:fill color="',color,'" opacity="',opacity,'" />')}}lineStr.push("</g_vml_:shape>");this.element_.insertAdjacentHTML("beforeEnd",lineStr.join(""))};contextPrototype.fill=function(){this.stroke(true)};contextPrototype.closePath=function(){this.currentPath_.push({type:"close"})};contextPrototype.getCoords_=function(aX,aY){var m=this.m_;return{x:Z*(aX*m[0][0]+aY*m[1][0]+m[2][0])-Z2,y:Z*(aX*m[0][1]+aY*m[1][1]+m[2][1])-Z2}};contextPrototype.save=function(){var o={};copyState(this,o);this.aStack_.push(o);this.mStack_.push(this.m_);this.m_=matrixMultiply(createMatrixIdentity(),this.m_)};contextPrototype.restore=function(){copyState(this.aStack_.pop(),this);this.m_=this.mStack_.pop()};function matrixIsFinite(m){for(var j=0;j<3;j++){for(var k=0;k<2;k++){if(!isFinite(m[j][k])||isNaN(m[j][k])){return false}}}return true}function setM(ctx,m,updateLineScale){if(!matrixIsFinite(m)){return}ctx.m_=m;if(updateLineScale){var det=m[0][0]*m[1][1]-m[0][1]*m[1][0];ctx.lineScale_=sqrt(abs(det))}}contextPrototype.translate=function(aX,aY){var m1=[[1,0,0],[0,1,0],[aX,aY,1]];setM(this,matrixMultiply(m1,this.m_),false)};contextPrototype.rotate=function(aRot){var c=mc(aRot);var s=ms(aRot);var m1=[[c,s,0],[-s,c,0],[0,0,1]];setM(this,matrixMultiply(m1,this.m_),false)};contextPrototype.scale=function(aX,aY){this.arcScaleX_*=aX;this.arcScaleY_*=aY;var m1=[[aX,0,0],[0,aY,0],[0,0,1]];setM(this,matrixMultiply(m1,this.m_),true)};contextPrototype.transform=function(m11,m12,m21,m22,dx,dy){var m1=[[m11,m12,0],[m21,m22,0],[dx,dy,1]];setM(this,matrixMultiply(m1,this.m_),true)};contextPrototype.setTransform=function(m11,m12,m21,m22,dx,dy){var m=[[m11,m12,0],[m21,m22,0],[dx,dy,1]];setM(this,m,true)};contextPrototype.clip=function(){};contextPrototype.arcTo=function(){};contextPrototype.createPattern=function(){return new CanvasPattern_()};function CanvasGradient_(aType){this.type_=aType;this.x0_=0;this.y0_=0;this.r0_=0;this.x1_=0;this.y1_=0;this.r1_=0;this.colors_=[]}CanvasGradient_.prototype.addColorStop=function(aOffset,aColor){aColor=processStyle(aColor);this.colors_.push({offset:aOffset,color:aColor.color,alpha:aColor.alpha})};function CanvasPattern_(){}G_vmlCanvasManager=G_vmlCanvasManager_;CanvasRenderingContext2D=CanvasRenderingContext2D_;CanvasGradient=CanvasGradient_;CanvasPattern=CanvasPattern_})()}jindo.Canvas=jindo.$Class({$init:function(el){if(typeof el=="undefined"){el=jindo.Canvas.create()}this._el=el;this._elContainer=this._el.parentNode;this._oContext=jindo.Canvas.getContext(el)},getElement:function(){return this._el},getContainer:function(){return this._elContainer},width:function(n){if(typeof n=="number"){this._el.width=n;return this}return this._el.width},height:function(n){if(typeof n=="number"){this._el.height=n;return this}return this._el.height},getContext:function(){return this._oContext},clear:function(){this._oContext.clearRect(0,0,this._el.width,this._el.height);return this},_merge:function(ctx,htOption){for(var sKey in htOption){ctx[sKey]=htOption[sKey]}},drawLine:function(a,htOption,bBlockAntiAlias){var ctx=this._oContext,nAdjust=0,nLen=a.length,i;htOption=htOption||{};if(nLen>1){if(typeof bBlockAntiAlias=="undefined"){bBlockAntiAlias=true}ctx.save();this._merge(ctx,htOption);ctx.beginPath();if(bBlockAntiAlias){if(ctx.lineWidth%2===1){nAdjust=0.5}if(nLen===2){if(a[0][0]===a[1][0]){ctx.moveTo((Math.round(a[0][0])+nAdjust),a[0][1]);ctx.lineTo((Math.round(a[1][0])+nAdjust),a[1][1])}if(a[0][1]===a[1][1]){ctx.moveTo(a[0][0],(Math.round(a[0][1])+nAdjust));ctx.lineTo(a[1][0],(Math.round(a[1][1])+nAdjust))}}else{ctx.moveTo((Math.round(a[0][0])+nAdjust),(Math.round(a[0][1])+nAdjust));for(i=1;i<nLen;i++){ctx.lineTo((Math.round(a[i][0])+nAdjust),(Math.round(a[i][1])+nAdjust))}}}else{ctx.moveTo(a[0][0],a[0][1]);for(i=1;i<nLen;i++){ctx.lineTo(a[i][0],a[i][1])}}ctx.stroke();ctx.closePath();ctx.restore()}return this},drawFace:function(a,htOption){var ctx=this._oContext,nLen=a.length;htOption=htOption||{};if(nLen>2){ctx.save();this._merge(ctx,htOption);ctx.beginPath();ctx.moveTo(a[0][0],a[0][1]);for(var i=1;i<nLen;i++){ctx.lineTo(a[i][0],a[i][1])}ctx.fill();ctx.closePath();ctx.restore()}return this},_round:function(n,nLineWidth){return(nLineWidth%2===1)?Math.round(n)+0.5:n},drawRect:function(nX,nY,nWidth,nHeight,htOption,bBlockAntiAlias){var ctx=this._oContext,bFillDefined=typeof htOption.fillStyle!="undefined",bStrokeDefined=typeof htOption.strokeStyle!="undefined"&&htOption.lineWidth>0;htOption=htOption||{};if(bFillDefined||bStrokeDefined){ctx.save();this._merge(ctx,htOption);if(bFillDefined){ctx.fillRect(nX,nY,nWidth,nHeight)}if(bStrokeDefined){if(typeof bBlockAntiAlias=="undefined"){bBlockAntiAlias=true}if(bBlockAntiAlias){nX=this._round(nX,ctx.lineWidth);nY=this._round(nY,ctx.lineWidth);nHeight=Math.round(nHeight);nWidth=Math.round(nWidth)}ctx.strokeRect(nX,nY,nWidth,nHeight)}ctx.restore()}return this}});jindo.Canvas.create=function(nWidth,nHeight,elParent){var elCanvas=document.createElement("canvas");elCanvas.setAttribute("width",nWidth||300);elCanvas.setAttribute("height",nHeight||150);if(typeof elCanvas.getContext=="undefined"){G_vmlCanvasManager.initElement(elCanvas)}if(elParent){elParent.appendChild(elCanvas)}return elCanvas};jindo.Canvas.getContext=function(el){return el.getContext("2d")};jindo.HTMLComponent=jindo.$Class({sTagName:"",$init:function(){},paint:function(){this._onPaint();return this},_onActivate:function(){(this.constructor._aInstances=this.constructor._aInstances||[]).push(this)},_onDeactivate:function(){var aInstances=this.constructor._aInstances||[];var nIndex=jindo.$A(aInstances).indexOf(this);if(nIndex>-1){aInstances.splice(nIndex,1)}}}).extend(jindo.UIComponent);jindo.HTMLComponent.paint=function(){var aInstance=this._aInstances||[];for(var i=0,oInstance;(oInstance=aInstance[i]);i++){oInstance.paint()}};jindo.HTMLComponent.getInstance=function(){return this._aInstances||[]};jindo.CheckBox=jindo.$Class({sTagName:"input[type=checkbox]",$init:function(el,htOption){this.option({sClassPrefix:"checkbox-"});this.option(htOption||{});this._elWrapper=jindo.$(el);this._welWrapper=jindo.$Element(el);this._assignHTMLElements();this.wfOnClickInput=jindo.$Fn(this._onClickInput,this);this.wfOnClickWrapper=jindo.$Fn(this._onClickWrapper,this);this.wfOnFocusInput=jindo.$Fn(this._onFocusInput,this);this.wfOnBlurInput=jindo.$Fn(this._onBlurInput,this);this.activate();this.paint()},_assignHTMLElements:function(){var elWrapper=this._elWrapper;this._elInput=jindo.$$.getSingle("input",elWrapper);if(this._elInput.type=="radio"){this.sTagName="input[type=radio]";this.option("sClassPrefix","radio-")}var sPrefix=this.option("sClassPrefix");this._elSubstitute=jindo.$$.getSingle("."+sPrefix+"mark",elWrapper);this._welSubstitute=jindo.$Element(this._elSubstitute)},getInput:function(){return this._elInput},getChecked:function(){return this.getInput().checked},setChecked:function(b,bFireEvent){if(typeof bFireEvent=="undefined"){bFireEvent=true}var elInput=this.getInput(),bValue=elInput.checked;if(bValue!=b){elInput.checked=b;switch(elInput.type){case"checkbox":this.paint();break;case"radio":var self=this;jindo.$A(this.constructor._aInstances).forEach(function(oRadioButton){if(oRadioButton.getInput().name==elInput.name){oRadioButton.paint()}});break}if(bFireEvent){this._fireChangeEvent(b)}}return this},_fireChangeEvent:function(b){this.fireEvent("change",{bChecked:b})},enable:function(){this.getInput().disabled=false;this.paint();return this},disable:function(){this.getInput().disabled=true;this.paint();return this},_onClickInput:function(we){we.stop(jindo.$Event.CANCEL_DEFAULT);var self=this;setTimeout(function(){self._welWrapper.fireEvent("click")},1)},_onClickWrapper:function(we){var elInput=this._elInput;if(elInput.disabled||we.element===elInput){return}elInput.focus();if(this.fireEvent("beforeChange",{bChecked:elInput.checked})){this.setChecked(((elInput.type=="radio")?true:!elInput.checked))}},_onFocusInput:function(we){this._welWrapper.addClass(this.option("sClassPrefix")+"focused")},_onBlurInput:function(we){this._welWrapper.removeClass(this.option("sClassPrefix")+"focused")},_onActivate:function(){this.$super._onActivate();this._welWrapper.addClass(this.option("sClassPrefix")+"applied");this.wfOnClickInput.attach(this._elInput,"click");this.wfOnClickWrapper.attach(this._elWrapper,"click");this.wfOnFocusInput.attach(this._elInput,"focus");this.wfOnBlurInput.attach(this._elInput,"blur")},_onDeactivate:function(){this._welWrapper.removeClass(this.option("sClassPrefix")+"applied");this.wfOnClickInput.detach(this._elInput,"click");this.wfOnClickWrapper.detach(this._elWrapper,"click");this.wfOnFocusInput.detach(this._elInput,"focus");this.wfOnBlurInput.detach(this._elInput,"blur");this.$super._onDeactivate()},_onPaint:function(){var sPrefix=this.option("sClassPrefix");if(this._elInput.disabled){this._welWrapper.addClass(sPrefix+"disabled")}else{this._welWrapper.removeClass(sPrefix+"disabled")}if(this._elInput.checked){this._welSubstitute.addClass(sPrefix+"checked")}else{this._welSubstitute.removeClass(sPrefix+"checked")}}}).extend(jindo.HTMLComponent);jindo.Rolling=jindo.$Class({_oTransition:null,$init:function(el,htOption){this.option({nFPS:50,nDuration:800,sDirection:"horizontal",fEffect:jindo.Effect.linear,sClassPrefix:"rolling-"});this.option(htOption||{});this._el=jindo.$(el);var sListClassQuery="."+this.option("sClassPrefix")+"list";this._bUsedClassPrefix=true;this._elList=jindo.$$.test(this._el,sListClassQuery)?this._el:jindo.$$.getSingle("> "+sListClassQuery,el);if(!this._elList){this._elList=jindo.$$.test(this._el,"ul, ol")?this._el:jindo.$$.getSingle("> ul, > ol",el);this._bUsedClassPrefix=false}this._oKeys=this.option("sDirection")=="horizontal"?{offsetWidth:"offsetWidth",marginLeft:"marginLeft",marginRight:"marginRight",clientWidth:"clientWidth",scrollLeft:"scrollLeft"}:{offsetWidth:"offsetHeight",marginLeft:"marginTop",marginRight:"marginBottom",clientWidth:"clientHeight",scrollLeft:"scrollTop"};this._initTransition()},_initTransition:function(){var self=this;this._oTransition=new jindo.Transition().fps(this.option("nFPS")).attach({end:function(oCustomEvent){if(self._nItemCount){var oKeys=self._oKeys;self._el[oKeys.scrollLeft]=self._getPosition(self.getIndex()%self._nItemCount)}self.fireEvent("afterMove",{nIndex:self.getIndex()})}})},getTransition:function(){return this._oTransition},getList:function(){return this._elList},getItems:function(){var sItemClassQuery="."+this.option("sClassPrefix")+"item";return this._bUsedClassPrefix?jindo.$$("> "+sItemClassQuery,this._elList):jindo.$$("> li",this._elList)},_offsetSize:function(el){var eEl=jindo.$Element(el),oKeys=this._oKeys,nMarginLeft=parseInt(eEl.css(oKeys.marginLeft),10)||0,nMarginRight=parseInt(eEl.css(oKeys.marginRight),10)||0;return el[oKeys.offsetWidth]+nMarginLeft+nMarginRight},getIndex:function(){if(this.isMoving()){return this._nMoveTo}var el=this._el,oKeys=this._oKeys,nScroll=el[oKeys.scrollLeft],aItems=this.getItems(),nSize=0,n=0,nMinDistance=99999999;for(var i=0;i<aItems.length;i++){var nDistance=Math.abs(nScroll-nSize);if(nDistance<nMinDistance){nMinDistance=nDistance;n=i}nSize+=this._offsetSize(aItems[i])}return n},_getPosition:function(n){var el=this._el,oKeys=this._oKeys,aItems=this.getItems(),nPos=0,nSize=this._getSize();for(var i=0;i<n;i++){nPos+=this._offsetSize(aItems[i])}if(nPos+el[oKeys.clientWidth]>nSize){nPos=nSize-el[oKeys.clientWidth]}return nPos},_getSize:function(){var aItems=this.getItems(),nSize=0;for(var i=0;i<aItems.length;i++){nSize+=this._offsetSize(aItems[i])}return(this._nSize=nSize)},_move:function(n){var el=this._el,oKeys=this._oKeys,aItems=this.getItems(),nPos=this._getPosition(n),nSize=this._getSize();var htParam={element:el,nIndex:n,nScroll:nPos};if(this.fireEvent("beforeMove",htParam)&&el[oKeys.scrollLeft]!=htParam.nScroll){var htDest={};htDest[oKeys.scrollLeft]=this.option("fEffect")(htParam.nScroll);this._nMoveTo=n;this.getTransition().abort().start(this.option("nDuration"),htParam.element,htDest);return true}return false},moveTo:function(n){n=Math.min(n,this.getItems().length-1);n=Math.max(n,0);return this._move(n)},moveLastTo:function(n){return this.moveTo(this.getItems().length-1-n)},moveBy:function(n){return this.moveTo(this.getIndex()+n)},isMoving:function(){return this._oTransition.isPlaying()},isOverflowed:function(){return this._getSize()>this._el[this._oKeys.clientWidth]},getDisplayedItemCount:function(){var nDisplayed=0,aItems=this.getItems(),nPos=0;for(var i=0;i<aItems.length;i++){nPos+=this._offsetSize(aItems[i]);if(nPos<=this._el[this._oKeys.clientWidth]){nDisplayed++}else{break}}return nDisplayed}}).extend(jindo.Component);jindo.CircularRolling=jindo.$Class({$init:function(){this.refresh()},refresh:function(){this.getTransition().abort();this._el[this._oKeys.scrollLeft]=0;this._nDuplicateCount=0;this._nItemCount=this.getItems().length;this._nDisplayedCount=this.getDisplayedItemCount();if(this.isOverflowed()){this._nDuplicateCount=(this._nDisplayedCount<=(this._nItemCount/2))?1:2;this._duplicate(this._nDuplicateCount)}return this},_duplicate:function(n){var elList=this._elList,elDuplicatedList=jindo.$("<"+elList.tagName+">"),sListInnerHTML=elList.innerHTML,aItem;var sItemClassQuery=">"+(this._bUsedClassPrefix?"."+this.option("sClassPrefix")+"item":"li");for(var i=0;i<n;i++){elDuplicatedList.innerHTML=sListInnerHTML;aItem=jindo.$$(sItemClassQuery,elDuplicatedList);for(var j=0;j<aItem.length;j++){elList.appendChild(aItem[j])}}},_setStartPosition:function(n,nTo){var oKeys=this._oKeys;var nNewPosition=n%(this._nItemCount)||0;if(n+nTo<0){var nTimes=this._nDuplicateCount;if(nNewPosition+this._nDisplayedCount>this._nItemCount){nTimes-=1}nNewPosition+=this._nItemCount*nTimes}this._el[oKeys.scrollLeft]=this._getPosition(nNewPosition)},moveBy:function(n){if(this.isMoving()){return false}var bBig=(n>=this._nItemCount);n=n%this._nItemCount;if(bBig){n+=this._nItemCount}this._setStartPosition(this.getIndex(),n);var nTarget=this.getIndex()+n;if(!this._move(nTarget)){return false}return true}}).extend(jindo.Rolling);jindo.Clipboard=jindo.$Class({_aElement:null,_aData:null,_elOvered:null,_bFailed:true,$init:function(sFlashURL){this._sFlashURL=sFlashURL;var oStatic=jindo.Clipboard;var sFlashUID=this._sUnique="S"+new Date().getTime()+parseInt(Math.random()*1000000000,10);if(typeof oStatic._callbacks=="undefined"){oStatic._callbacks={}}oStatic._callbacks[this._sUnique]={click:jindo.$Fn(this._onFlashClick,this).bind(),mouseover:jindo.$Fn(this._onFlashMouseOver,this).bind(),mouseout:jindo.$Fn(this._onFlashMouseOut,this).bind(),mousedown:jindo.$Fn(this._onFlashMouseDown,this).bind(),mouseup:jindo.$Fn(this._onFlashMouseUp,this).bind(),load:jindo.$Fn(this._onFlashLoad,this).bind()};this._aElement=[];this._aData=[];this._agent=jindo.$Agent();this._initFlash();this._wfHandler=jindo.$Fn(function(we){this._initFlash();var el=we.element;var htPosition=jindo.$Element(el).offset();this._setFlashPosSize(htPosition.left,htPosition.top,el.offsetWidth,el.offsetHeight);this._setClipboard(el,this._getData(el));this._elOvered=el},this)},_initFlash:function(){if(this._elDummy){return}var elDummy=this._elDummy=jindo.$("<div>");var sFlashUID=this._sUnique;elDummy.style.cssText="position:absolute !important; border:0 !important; padding:0 !important; margin:0 !important; overflow:visible !important; z-index:32000 !important;";document.body.insertBefore(elDummy,document.body.firstChild);if(this._agent.flash().version>=11&&this._agent.navigator().ie){this._sFlashURL+="?"+Math.floor(Math.random()*10000)}var sFlashHtml=this._getFlashHTML("CLIPBOARD"+sFlashUID,this._sFlashURL,1,1,{flashVars:{sUniq:sFlashUID},wmode:"transparent"});elDummy.innerHTML=sFlashHtml;jindo.$Fn(this._checkFailed,this).attach(elDummy,"click")},_getFlashHTML:function(sId,sSwfPath,width,height,options){var protocol=(location.protocol=="https:")?"https:":"http:";var classid='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"';options=options||{};options.allowScriptAccess=options.allowScriptAccess||"always";var params=[],attrs=[],v;for(var k in options){if(options.hasOwnProperty(k)){v=options[k];if(k==="flashVars"){v=jindo.$H(v).toQueryString()}params.push('<param name="'+k+'" value="'+v+'" />');attrs.push(" "+k+'="'+v+'"')}}return['<object tabindex="-1" id="'+sId+'" width="'+width+'" height="'+height+'" '+classid+' codebase="'+protocol+'//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0">','<param name="movie" value="'+sSwfPath+'" />',params.join(""),'<embed tabindex="-1" name="'+sId+'" src="'+sSwfPath+'"',' type="application/x-shockwave-flash" pluginspage="'+protocol+'://www.macromedia.com/go/getflashplayer"',attrs.join(""),' width="'+width+'" height="'+height+'">',"</embed>","</object>"].join("")},_getFlash:function(){return document["CLIPBOARD"+this._sUnique]||document.all["CLIPBOARD"+this._sUnique]},_setFlashPosSize:function(nLeft,nTop,nWidth,nHeight){var elDummy=this._elDummy;elDummy.style.left=nLeft+"px";elDummy.style.top=nTop+"px";var oFlash=this._getFlash();oFlash.width=nWidth;oFlash.height=nHeight;oFlash.style.width=nWidth+"px";oFlash.style.height=nHeight+"px"},setData:function(el,sData){el=jindo.$(el);var nIndex=jindo.$A(this._aElement).indexOf(el),bExist=nIndex!=-1;if(bExist&&(!sData&&sData!=="")){this._wfHandler.detach(el,"mousemove");this._aElement.splice(nIndex,1);this._aData.splice(nIndex,1);this._setFlashPosSize(0,0,1,1);return}if(!bExist){this._wfHandler.attach(el,"mousemove");this._aElement.push(el);this._aData.push(sData)}else{this._aData[nIndex]=sData}this._setClipboard(el,sData)},_getData:function(el){var nIndex=jindo.$A(this._aElement).indexOf(el);return this._aData[nIndex]},_setClipboard:function(el,sData){var oFlash=this._getFlash();var sCursor=(jindo.$Element(el).css("cursor")||"").toUpperCase();var bHandCursor=sCursor=="POINTER"||sCursor=="HAND";try{oFlash.setClipboardData(sData);oFlash.setClipboardOptions({cursor:bHandCursor?"pointer":"default"});this._sAppliedData=sData;this._bFailed=false}catch(e){this._bFailed=true}},_checkFailed:function(){if(this._bFailed){this.fireEvent("failure",{element:this._elOvered,data:this._lastestData})}},_onFlashClick:function(sData){this.fireEvent("copy",{element:this._elOvered,data:sData})},_onFlashMouseOver:function(){this.fireEvent("over",{element:this._elOvered})},_onFlashMouseOut:function(){this.fireEvent("out",{element:this._elOvered})},_onFlashMouseDown:function(){this.fireEvent("down",{element:this._elOvered})},_onFlashMouseUp:function(){this.fireEvent("up",{element:this._elOvered})},_onFlashLoad:function(){this.fireEvent("load")}}).extend(jindo.Component);jindo.DataBridge=jindo.$Class({_htEvent:{},$static:{log:function(sFlashId,sMessage){if(sFlashId&&sMessage){this.getComponentInstance(sFlashId)._onLog(sMessage)}else{alert("Parameter is wrong!!")}},onReceive:function(sFlashId,sSenderId,vData){if(sFlashId&&sSenderId&&vData){this.getComponentInstance(sFlashId)._onReceiveData(sSenderId,vData)}else{alert("Parameter is wrong!!")}},getComponentInstance:function(sFlashId){var aInstanceList=this._aInstances;for(var i=0;i<aInstanceList.length;i++){if(sFlashId==aInstanceList[i].getFlashObjectId()){return aInstanceList[i]}}}},$init:function(htOption){(this.constructor._aInstances=this.constructor._aInstances||[]).push(this);this.option({sSwfPath:"data_bridge.swf",nRetryLimit:3});this.option(htOption);this._attachEvent();this._createFlashObject()},_attachEvent:function(){this._htEvent.beforeunload=jindo.$Fn(this.destroy,this).attach(window,"beforeunload")},_createFlashObject:function(){this._sFlashId="data_bridge_"+(new Date()).getMilliseconds()+Math.floor(Math.random()*100000);var welFlashContainer=jindo.$Element('<div style="position:absolute;top:-1000px;left:0px">');var sFlashVars="serviceId="+this.option("sServiceId")+"&logHandler=jindo.DataBridge.log&onReceiveHandler=jindo.DataBridge.onReceive&flashId="+this._sFlashId+"&retryLimit="+this.option("nRetryLimit");welFlashContainer.appendTo(document.body);welFlashContainer.html('<object id="'+this._sFlashId+'" width="1" height="1" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0"><param name="flashvars" value="'+sFlashVars+'"><param name="movie" value="'+this.option("sSwfPath")+'"><param name = "allowScriptAccess" value = "always" /><embed name="'+this._sFlashId+'" src="'+this.option("sSwfPath")+'" flashvars="'+sFlashVars+'" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" width="1" height="1" allowScriptAccess="always" swLiveConnect="true"></embed></object>')},_getFlashObject:function(){return document[this._sFlashId]||jindo.$(this._sFlashId)},getFlashObjectId:function(){return this._sFlashId},getClientId:function(){return this.option("sServiceId")+"_"+this._sFlashId},send:function(vData){if(vData){try{this._getFlashObject().send(vData)}catch(e){alert("Flash object is not ready!!")}}else{alert("vData parameter is null!!")}return this},_onReceiveData:function(sSenderId,vData){this.fireEvent("receive",{sSenderId:sSenderId,vData:vData})},_onLog:function(sMessage){this.fireEvent("log",{sMessage:sMessage})},_close:function(){this._getFlashObject().close()},_detachEvent:function(){this._htEvent.beforeunload.detach(window,"beforeunload")},getLocalData:function(){},setLocalData:function(){},resetLocalData:function(){},destroy:function(){this._close();this._detachEvent();this._htEvent={};jindo.$Element(this._getFlashObject()).leave();var aInstances=this.constructor._aInstances||[];var nIndex=jindo.$A(aInstances).indexOf(this);if(nIndex>-1){aInstances.splice(nIndex,1)}}}).extend(jindo.Component);jindo.LayerManager=jindo.$Class({_bIsActivating:false,_bIsHiding:false,_bIsShowing:false,_aLink:null,$init:function(el,htOption){this.option({sCheckEvent:"click",nCheckDelay:100,nShowDelay:0,nHideDelay:100});this.option(htOption||{});this.setLayer(el);this._aLink=[];this._oShowTimer=new jindo.Timer();this._oHideTimer=new jindo.Timer();this._oEventTimer=new jindo.Timer();this._wfOnEvent=jindo.$Fn(this._onEvent,this);this.getVisible();this.activate()},_onActivate:function(){this._wfOnEvent.attach(document,this.option("sCheckEvent"))},_onDeactivate:function(){this._wfOnEvent.detach(document,this.option("sCheckEvent"))},getVisible:function(){return this._wel.visible()},_check:function(el){var wel=jindo.$Element(el);for(var i=0,elLink,welLink;(elLink=this._aLink[i]);i++){welLink=jindo.$Element(elLink);if(welLink){elLink=welLink.$value();if(elLink&&wel&&(el==elLink||wel.isChildOf(elLink))){return true}}}return false},_find:function(el){for(var i=0,elLink;(elLink=this._aLink[i]);i++){if(elLink==el){return i}}return -1},getLayer:function(){return this._el},setLayer:function(el){this._el=jindo.$(el);this._wel=jindo.$Element(el);return this},getLinks:function(){return this._aLink},setLinks:function(a){this._aLink=jindo.$A(a).unique().$value();return this},link:function(vElement){if(arguments.length>1){for(var i=0,len=arguments.length;i<len;i++){this.link(arguments[i])}return this}if(this._find(vElement)!=-1){return this}this._aLink.push(vElement);return this},unlink:function(vElement){if(arguments.length>1){for(var i=0,len=arguments.length;i<len;i++){this.unlink(arguments[i])}return this}var nIndex=this._find(vElement);if(nIndex>-1){this._aLink.splice(nIndex,1)}return this},_fireEventBeforeShow:function(){return this.fireEvent("beforeShow",{elLayer:this.getLayer(),aLinkedElement:this.getLinks()})},_fireEventShow:function(){this._bIsShowing=false;this.fireEvent("show",{elLayer:this.getLayer(),aLinkedElement:this.getLinks()})},_fireEventBeforeHide:function(){var bRet=this.fireEvent("beforeHide",{elLayer:this.getLayer(),aLinkedElement:this.getLinks()});if(!bRet){this._bIsHiding=false}return bRet},_fireEventHide:function(){this._bIsHiding=false;this.fireEvent("hide",{elLayer:this.getLayer(),aLinkedElement:this.getLinks()})},_show:function(fShow,nDelay){var self=this;this._oEventTimer.abort();this._bIsShowing=true;this._bIsHiding=false;if(nDelay<=0){self._oHideTimer.abort()}this._oShowTimer.start(function(){fShow()},nDelay)},_hide:function(fHide,nDelay){var self=this;this._bIsShowing=false;this._bIsHiding=true;if(nDelay<=0){self._oShowTimer.abort()}this._oHideTimer.start(function(){fHide()},nDelay)},show:function(nDelay){if(typeof nDelay=="undefined"){nDelay=this.option("nShowDelay")}var self=this;this._show(function(){if(!self.getVisible()){if(self._fireEventBeforeShow()){self._wel.show();self._fireEventShow()}}},nDelay);return this},hide:function(nDelay){if(typeof nDelay=="undefined"){nDelay=this.option("nHideDelay")}var self=this;this._hide(function(){if(self.getVisible()){if(self._fireEventBeforeHide()){self._wel.hide();self._fireEventHide()}}},nDelay);return this},toggle:function(nDelay){if(!this.getVisible()||this._bIsHiding){this.show(nDelay||this.option("nShowDelay"))}else{this.hide(nDelay||this.option("nHideDelay"))}return this},_onEvent:function(we){var el=we.element,self=this;this._oEventTimer.start(function(){if(!self._bIsHiding&&self.getVisible()){if(self._check(el)){if(!self._bIsShowing){self.fireEvent("ignore",{sCheckEvent:self.option("sCheckEvent")});self._oHideTimer.abort();self._bIsHiding=false}}else{if(typeof el.tagName!=="undefined"&&el.tagName!=="OPTION"){self.hide()}}}},this.option("nCheckDelay"))}}).extend(jindo.UIComponent);jindo.LayerPosition=jindo.$Class({$init:function(el,elLayer,htOption){this.option({sPosition:"outside-bottom",sAlign:"left",sValign:"",nTop:0,nLeft:0,bAuto:false,bPositionOnload:true,bActivateOnload:true});this.option(htOption||{});this.setElement(el);if(elLayer){this.setLayer(elLayer)}this._wfSetPosition=jindo.$Fn(function(){var el=this._elLayer;if(el&&this._welLayer.visible()){if(this.fireEvent("beforeAdjust",{elLayer:el,htCurrentPosition:this.getCurrentPosition(),htAdjustedPosition:this._adjustPosition(this.getCurrentPosition())})){this.setPosition();this.fireEvent("adjust",{elLayer:el,htCurrentPosition:this.getCurrentPosition()})}}},this);if(this.option("bPositionOnload")){this._wfSetPosition.bind().call()}if(this.option("bActivateOnload")){this.activate()}},_onActivate:function(){if(this.option("bAuto")){this._wfSetPosition.attach(window,"scroll").attach(window,"resize");this._attached=true}},_onDeactivate:function(){if(this._attached){this._wfSetPosition.detach(window,"scroll").detach(window,"resize");this._attached=false}},getElement:function(){return this._el},setElement:function(el){this._wel=this._el=jindo.$(el);if(this._el){this._wel=jindo.$Element(el)}return this},getLayer:function(){return this._elLayer},setLayer:function(elLayer){this._elLayer=jindo.$(elLayer);this._welLayer=jindo.$Element(elLayer);if(this._elLayer.parentNode!=document.body){document.body.insertBefore(this._elLayer,document.body.firstChild)}return this},_isPosition:function(htOption,sWord){if(htOption.sPosition.indexOf(sWord)>-1){return true}return false},_setLeftRight:function(htOption,htPosition){var el=this.getElement(),elLayer=this.getLayer(),nWidth=el.offsetWidth,nLayerWidth=elLayer.offsetWidth;if(el==document.body){nWidth=jindo.$Document().clientSize().width}var bLeft=this._isPosition(htOption,"left"),bRight=this._isPosition(htOption,"right"),bInside=this._isPosition(htOption,"inside");if(bLeft){if(bInside){htPosition.nLeft+=htOption.nLeft}else{htPosition.nLeft-=nLayerWidth;htPosition.nLeft-=htOption.nLeft}}else{if(bRight){htPosition.nLeft+=nWidth;if(bInside){htPosition.nLeft-=nLayerWidth;htPosition.nLeft-=htOption.nLeft}else{htPosition.nLeft+=htOption.nLeft}}else{if(htOption.sAlign=="left"){htPosition.nLeft+=htOption.nLeft}if(htOption.sAlign=="center"){htPosition.nLeft+=(nWidth-nLayerWidth)/2}if(htOption.sAlign=="right"){htPosition.nLeft+=nWidth-nLayerWidth;htPosition.nLeft-=htOption.nLeft}}}return htPosition},_setVerticalAlign:function(htOption,htPosition){var el=this.getElement(),elLayer=this.getLayer(),nHeight=el.offsetHeight,nLayerHeight=elLayer.offsetHeight;if(el==document.body){nHeight=jindo.$Document().clientSize().height}switch(htOption.sValign){case"top":htPosition.nTop+=htOption.nTop;break;case"middle":htPosition.nTop+=(nHeight-nLayerHeight)/2;break;case"bottom":htPosition.nTop+=nHeight-nLayerHeight-htOption.nTop;break}return htPosition},_adjustScrollPosition:function(htPosition){if(this.getElement()==document.body){var htScrollPosition=jindo.$Document().scrollPosition();htPosition.nTop+=htScrollPosition.top;htPosition.nLeft+=htScrollPosition.left}return htPosition},getPosition:function(htOption){if(typeof htOption!="object"){htOption=this.option()}if(typeof htOption.nTop=="undefined"){htOption.nTop=0}if(typeof htOption.nLeft=="undefined"){htOption.nLeft=0}var sArea,bCenter=this._isPosition(htOption,"center"),bInside=this._isPosition(htOption,"inside"),bTop=this._isPosition(htOption,"top"),bBottom=this._isPosition(htOption,"bottom"),bLeft=this._isPosition(htOption,"left"),bRight=this._isPosition(htOption,"right");if(bLeft){sArea="left"}if(bRight){sArea="right"}if(bTop){sArea="top"}if(bBottom){sArea="bottom"}if(bCenter){sArea="center"}var el=this.getElement(),wel=jindo.$Element(el),elLayer=this.getLayer(),welLayer=jindo.$Element(elLayer),htElementPosition=wel.offset(),nWidth=el.offsetWidth,nHeight=el.offsetHeight,oClientSize,nLayerWidth=elLayer.offsetWidth,nLayerHeight=elLayer.offsetHeight,htPosition={nTop:htElementPosition.top,nLeft:htElementPosition.left};if(el==document.body){oClientSize=jindo.$Document().clientSize();nWidth=oClientSize.width;nHeight=oClientSize.height}nLayerWidth+=parseInt(welLayer.css("marginLeft"),10)+parseInt(welLayer.css("marginRight"),10)||0;nLayerHeight+=parseInt(welLayer.css("marginTop"),10)+parseInt(welLayer.css("marginBottom"),10)||0;switch(sArea){case"center":htPosition.nTop+=(nHeight-nLayerHeight)/2;htPosition.nTop+=htOption.nTop;htPosition.nLeft+=(nWidth-nLayerWidth)/2;htPosition.nLeft+=htOption.nLeft;break;case"top":if(bInside){htPosition.nTop+=htOption.nTop}else{htPosition.nTop-=htOption.nTop+nLayerHeight}htPosition=this._setLeftRight(htOption,htPosition);break;case"bottom":htPosition.nTop+=nHeight;if(bInside){htPosition.nTop-=htOption.nTop+nLayerHeight}else{htPosition.nTop+=htOption.nTop}htPosition=this._setLeftRight(htOption,htPosition);break;case"left":if(bInside){htPosition.nLeft+=htOption.nLeft}else{htPosition.nLeft-=htOption.nLeft+nLayerWidth}htPosition=this._setVerticalAlign(htOption,htPosition);break;case"right":htPosition.nLeft+=nWidth;if(bInside){htPosition.nLeft-=htOption.nLeft+nLayerWidth}else{htPosition.nLeft+=htOption.nLeft}htPosition=this._setVerticalAlign(htOption,htPosition);break}htPosition=this._adjustScrollPosition(htPosition);if(jindo.$Agent().navigator().ie&&jindo.$Agent().navigator().version<8&&window.external){try{var bHasFrameBorder=(window!=top)&&(window.frameElement)&&!window.frameElement.frameBorder;if(bHasFrameBorder){htPosition.nLeft-=2;htPosition.nTop-=2}}catch(e){}}return htPosition},setPosition:function(htPosition){var welLayer=jindo.$Element(this.getLayer()),bVisible=welLayer.visible();if(!bVisible){welLayer.show()}welLayer.css("left","-9999px").css("top","0px");if(typeof htPosition=="undefined"){htPosition=this.getPosition()}if(this.option("bAuto")){htPosition=this._adjustPosition(htPosition)}welLayer.css("left",htPosition.nLeft+"px").css("top",htPosition.nTop+"px");if(!bVisible){welLayer.hide()}return this},getCurrentPosition:function(){var welLayer=jindo.$Element(this.getLayer());return{nTop:parseInt(welLayer.css("top"),10),nLeft:parseInt(welLayer.css("left"),10)}},_getScoreFullyVisible:function(htPosition){var nScore=0;var elLayer=this.getLayer(),welLayer=jindo.$Element(elLayer),oScrollPosition=jindo.$Document().scrollPosition(),nScrollTop=oScrollPosition.top,nScrollLeft=oScrollPosition.left,oClientSize=jindo.$Document().clientSize(),nLayerWidth=elLayer.offsetWidth+(parseInt(welLayer.css("marginLeft"),10)+parseInt(welLayer.css("marginRight"),10)||0),nLayerHeight=elLayer.offsetHeight+(parseInt(welLayer.css("marginTop"),10)+parseInt(welLayer.css("marginBottom"),10)||0);if(htPosition.nLeft>=0&&oClientSize.width>=htPosition.nLeft-nScrollLeft+nLayerWidth){nScore++}if(htPosition.nTop>=0&&oClientSize.height>=htPosition.nTop-nScrollTop+nLayerHeight){nScore++}return nScore},_mirrorHorizontal:function(htOption){if(htOption.sAlign=="center"||htOption.sPosition=="inside-center"){return htOption}var htConvertedOption={};for(var i in htOption){htConvertedOption[i]=htOption[i]}if(this._isPosition(htConvertedOption,"right")){htConvertedOption.sPosition=htConvertedOption.sPosition.replace(/right/,"left")}else{if(this._isPosition(htConvertedOption,"left")){htConvertedOption.sPosition=htConvertedOption.sPosition.replace(/left/,"right")}else{if(htConvertedOption.sAlign=="right"){htConvertedOption.sAlign="left"}else{if(htConvertedOption.sAlign=="left"){htConvertedOption.sAlign="right"}}}}return htConvertedOption},_mirrorVertical:function(htOption){if(htOption.sValign=="middle"||htOption.sPosition=="inside-center"){return htOption}var htConvertedOption={};for(var i in htOption){htConvertedOption[i]=htOption[i]}if(this._isPosition(htConvertedOption,"top")){htConvertedOption.sPosition=htConvertedOption.sPosition.replace(/top/,"bottom")}else{if(this._isPosition(htConvertedOption,"bottom")){htConvertedOption.sPosition=htConvertedOption.sPosition.replace(/bottom/,"top")}else{if(htConvertedOption.sValign=="top"){htConvertedOption.sValign="bottom"}else{if(htConvertedOption.sValign=="bottom"){htConvertedOption.sValign="top"}}}}return htConvertedOption},_adjustPosition:function(htPosition){var htOption=this.option(),aCandidatePosition=[];var htRetPosition=htPosition;aCandidatePosition.push(htPosition);aCandidatePosition.push(this.getPosition(this._mirrorHorizontal(htOption)));aCandidatePosition.push(this.getPosition(this._mirrorVertical(htOption)));aCandidatePosition.push(this.getPosition(this._mirrorVertical(this._mirrorHorizontal(htOption))));var nMaxScore=0,nScore;for(var i=0,htCandidatePosition;(htCandidatePosition=aCandidatePosition[i]);i++){nScore=this._getScoreFullyVisible(htCandidatePosition);if(nScore>nMaxScore){htRetPosition=htCandidatePosition;nMaxScore=nScore}}return htRetPosition}}).extend(jindo.UIComponent);jindo.DatePicker=jindo.$Class({_aDatePickerSet:null,_htSelectedDatePickerSet:null,$init:function(elCalendarLayer,htOption){var oDate=new Date();this.option({bUseLayerPosition:true,Calendar:{sClassPrefix:"calendar-",nYear:oDate.getFullYear(),nMonth:oDate.getMonth()+1,nDate:oDate.getDate(),sTitleFormat:"yyyy-mm",aMonthTitle:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"]},LayerManager:{sCheckEvent:"click",nShowDelay:0,nHideDelay:0},LayerPosition:{sPosition:"outside-bottom",sAlign:"left",nTop:0,nLeft:0,bAuto:false}});this.option(htOption);this._aDatePickerSet=[];this._elCalendarLayer=jindo.$(elCalendarLayer);this._initCalendar();this._initLayerManager();this._initLayerPosition();this._wfFocusInput=jindo.$Fn(this._onFocusInput,this);this._wfClickLinkedElement=jindo.$Fn(this._onClickLinkedElement,this);this._wfMouseOverDate=jindo.$Fn(this._onMouseOverDate,this);this._wfMouseOutDate=jindo.$Fn(this._onMouseOutDate,this);this._wfClickDate=jindo.$Fn(this._onClickDate,this);var welCalendarLayer=jindo.$Element(this._elCalendarLayer);if(isNaN(welCalendarLayer.css("zIndex")*1)){welCalendarLayer.css("zIndex",1)}this.activate()},addDatePickerSet:function(ht){var htOption=this.option(),htCalendarOption=this.getCalendar().option(),htDefaultOption={nYear:htCalendarOption.nYear,nMonth:htCalendarOption.nMonth,nDate:htCalendarOption.nDate,bDefaultSet:true,bReadOnly:true,sDateFormat:"yyyy-mm-dd",htSelectableDateFrom:{nYear:1900,nMonth:1,nDate:1},htSelectableDateTo:{nYear:2100,nMonth:12,nDate:31}};if(typeof ht.htOption!="undefined"){for(var value in ht.htOption){if(typeof htDefaultOption[value]!="undefined"){htDefaultOption[value]=ht.htOption[value]}}}ht.htOption=htDefaultOption;this._aDatePickerSet.push(ht);var oLayerManager=this.getLayerManager();if(typeof ht.elInput!="undefined"){oLayerManager.link(ht.elInput);if(ht.htOption.bReadOnly){ht.elInput.readOnly=true}this._wfFocusInput.attach(ht.elInput,"focus");this._wfClickLinkedElement.attach(ht.elInput,"click")}if(typeof ht.elButton!="undefined"){oLayerManager.link(ht.elButton);this._wfClickLinkedElement.attach(ht.elButton,"click")}if(ht.htOption.bDefaultSet){this._setDate(ht,ht.htOption)}return this},removeDatePickerSet:function(ht){var nIndex=-1;for(var i=0,len=this._aDatePickerSet.length;i<len;i++){if(this._aDatePickerSet[i].elInput==ht.elInput||this._aDatePickerSet[i].elButton==ht.elButton){nIndex=i;break}}var htDatePickerSet=this._aDatePickerSet[nIndex];var oLayerManager=this.getLayerManager();if(typeof htDatePickerSet.elButton!="undefined"){oLayerManager.unlink(htDatePickerSet.elButton);this._wfClickLinkedElement.detach(htDatePickerSet.elButton,"click")}if(typeof htDatePickerSet.elInput!="undefined"){this._wfFocusInput.detach(htDatePickerSet.elInput,"focus");this._wfClickLinkedElement.detach(htDatePickerSet.elInput,"click");htDatePickerSet.elInput.readOnly=false}if(htDatePickerSet==this._htSelectedDatePickerSet){this._htSelectedDatePickerSet=null}this._aDatePickerSet.splice(i,1);return this},getDatePickerSet:function(el){if(typeof el=="undefined"){return this._aDatePickerSet}for(var i=0,len=this._aDatePickerSet.length;i<len;i++){if(this._aDatePickerSet[i].elInput==el||this._aDatePickerSet[i].elButton==el){return this._aDatePickerSet[i]}}return false},getCalendarLayer:function(){return this._elCalendarLayer},_initCalendar:function(){var self=this;this._oCalendar=new jindo.Calendar(this.getCalendarLayer(),this.option("Calendar")).attach({beforeDraw:function(oCustomEvent){if(!self.fireEvent("beforeDraw",oCustomEvent)){oCustomEvent.stop()}},draw:function(oCustomEvent){var sClassPrefix=this.option("sClassPrefix");var oShowDatePickerSet=self._htSelectedDatePickerSet;if(self.isSelectable(oShowDatePickerSet,oCustomEvent)){oCustomEvent.bSelectable=true;if(jindo.Calendar.isSameDate(oCustomEvent,oShowDatePickerSet)){jindo.$Element(oCustomEvent.elDateContainer).addClass(sClassPrefix+"selected")}}else{oCustomEvent.bSelectable=false;jindo.$Element(oCustomEvent.elDateContainer).addClass(this.option("sClassPrefix")+"unselectable")}if(!self.fireEvent("draw",oCustomEvent)){oCustomEvent.stop()}},afterDraw:function(oCustomEvent){self.fireEvent("afterDraw",oCustomEvent)}})},getCalendar:function(){return this._oCalendar},_initLayerManager:function(){var self=this;var elCalendarLayer=this.getCalendarLayer();this._oLayerManager=new jindo.LayerManager(elCalendarLayer,this.option("LayerManager")).attach({show:function(){if(self._oTimerDatePickerSet){clearTimeout(self._oTimerDatePickerSet);self._oTimerDatePickerSet=null}self.fireEvent("showCalendar")},hide:function(oCustomEvent){self._oTimerDatePickerSet=setTimeout(function(){self._htSelectedDatePickerSet=null;self._oTimerDatePickerSet=null},0);self.fireEvent("hideCalendar")}}).link(elCalendarLayer)},getLayerManager:function(){return this._oLayerManager},_initLayerPosition:function(){if(this.option("bUseLayerPosition")){this._oLayerPosition=new jindo.LayerPosition(null,this.getCalendarLayer(),this.option("LayerPosition"))}},getLayerPosition:function(){return this._oLayerPosition},getInput:function(htDatePickerSet){if(typeof htDatePickerSet!="undefined"){return htDatePickerSet.elInput||null}if(this._htSelectedDatePickerSet){return this._htSelectedDatePickerSet.elInput||null}return null},getDate:function(htDatePickerSet){return{nYear:htDatePickerSet.nYear,nMonth:htDatePickerSet.nMonth,nDate:htDatePickerSet.nDate}},_setDate:function(htDatePickerSet,htDate){htDatePickerSet.nYear=htDate.nYear*1;htDatePickerSet.nMonth=htDate.nMonth*1;htDatePickerSet.nDate=htDate.nDate*1;if(typeof htDatePickerSet.elInput!="undefined"){htDatePickerSet.elInput.value=this._getDateFormat(htDatePickerSet,htDate)}},isSelectable:function(htDatePickerSet,htDate){return jindo.Calendar.isBetween(htDate,htDatePickerSet.htOption.htSelectableDateFrom,htDatePickerSet.htOption.htSelectableDateTo)},setDate:function(htDatePickerSet,htDate){if(this.isSelectable(htDatePickerSet,htDate)){var sDateFormat=this._getDateFormat(htDatePickerSet,htDate);var htParam={sText:sDateFormat,nYear:htDate.nYear,nMonth:htDate.nMonth,nDate:htDate.nDate};if(this.fireEvent("beforeSelect",htParam)){this._setDate(htDatePickerSet,htDate);this.getLayerManager().hide();this.fireEvent("select",htParam)}return true}return false},_getDateFormat:function(htDatePickerSet,htDate){var nYear=htDate.nYear;var nMonth=htDate.nMonth;var nDate=htDate.nDate;if(nMonth<10){nMonth=("0"+(nMonth*1)).toString()}if(nDate<10){nDate=("0"+(nDate*1)).toString()}var sDateFormat=htDatePickerSet.htOption.sDateFormat;sDateFormat=sDateFormat.replace(/yyyy/g,nYear).replace(/y/g,(nYear).toString().substr(2,2)).replace(/mm/g,nMonth).replace(/m/g,(nMonth*1)).replace(/M/g,this.getCalendar().option("aMonthTitle")[nMonth-1]).replace(/dd/g,nDate).replace(/d/g,(nDate*1));return sDateFormat},_linkOnly:function(htDatePickerSet){var oLayerManager=this.getLayerManager();oLayerManager.setLinks([this.getCalendarLayer()]);if(typeof htDatePickerSet.elInput!="undefined"){oLayerManager.link(htDatePickerSet.elInput)}if(typeof htDatePickerSet.elButton!="undefined"){oLayerManager.link(htDatePickerSet.elButton)}},_onActivate:function(){var elCalendarLayer=this.getCalendarLayer();jindo.$Element.prototype.preventTapHighlight&&jindo.$Element(elCalendarLayer).preventTapHighlight(true);this._wfMouseOverDate.attach(elCalendarLayer,"mouseover");this._wfMouseOutDate.attach(elCalendarLayer,"mouseout");this._wfClickDate.attach(elCalendarLayer,"click");this.getLayerManager().activate();this.getCalendar().activate()},_onDeactivate:function(){var elCalendarLayer=this.getCalendarLayer();jindo.$Element.prototype.preventTapHighlight&&jindo.$Element(elCalendarLayer).preventTapHighlight(false);this._wfMouseOverDate.detach(elCalendarLayer,"mouseover");this._wfMouseOutDate.detach(elCalendarLayer,"mouseout");this._wfClickDate.detach(elCalendarLayer,"click").detach(elCalendarLayer,"mouseover").detach(elCalendarLayer,"mouseout");this.getLayerManager().deactivate();this.getCalendar().deactivate()},_onFocusInput:function(we){this.fireEvent("focus",{element:we.element})},_onClickLinkedElement:function(we){we.stop(jindo.$Event.CANCEL_DEFAULT);if(this.fireEvent("click",{element:we.element})){var htDatePickerSet=this.getDatePickerSet(we.currentElement);if(htDatePickerSet){this._htSelectedDatePickerSet=htDatePickerSet;this._linkOnly(htDatePickerSet);if(!htDatePickerSet.nYear){htDatePickerSet.nYear=htDatePickerSet.htOption.nYear}if(!htDatePickerSet.nMonth){htDatePickerSet.nMonth=htDatePickerSet.htOption.nMonth}if(!htDatePickerSet.nDate){htDatePickerSet.nDate=htDatePickerSet.htOption.nDate}var nYear=htDatePickerSet.nYear;var nMonth=htDatePickerSet.nMonth;this.getLayerManager().show();this.getCalendar().draw(nYear,nMonth);if(this.option("bUseLayerPosition")){if(typeof htDatePickerSet.elLayerPosition!="undefined"){this.getLayerPosition().setElement(htDatePickerSet.elLayerPosition).setPosition()}else{this.getLayerPosition().setElement(htDatePickerSet.elInput).setPosition()}}}}},_getTargetDateElement:function(el){var sClassPrefix=this.getCalendar().option("sClassPrefix");var elDate=(jindo.$Element(el).hasClass(sClassPrefix+"date"))?el:jindo.$$.getSingle("."+sClassPrefix+"date",el);if(elDate&&(elDate==el||elDate.length==1)){return elDate}return null},_getTargetDateContainerElement:function(el){var sClassPrefix=this.getCalendar().option("sClassPrefix");var elWeek=jindo.$$.getSingle("! ."+sClassPrefix+"week",el);if(elWeek){var elReturn=el;while(!jindo.$Element(elReturn.parentNode).hasClass(sClassPrefix+"week")){elReturn=elReturn.parentNode}if(jindo.$Element(elReturn).hasClass(sClassPrefix+"unselectable")){return null}return elReturn}else{return null}},_setSelectedAgain:function(){if(this._elSelected){var sClassPrefix=this.getCalendar().option("sClassPrefix");jindo.$Element(this._elSelected).addClass(sClassPrefix+"selected");this._elSelected=null}},_setAsideSelected:function(){if(!this._elSelected){var sClassPrefix=this.getCalendar().option("sClassPrefix");this._elSelected=jindo.$$.getSingle("."+sClassPrefix+"selected",this.elWeekAppendTarget);if(this._elSelected){jindo.$Element(this._elSelected).removeClass(sClassPrefix+"selected")}}},_onMouseOverDate:function(we){var sClassPrefix=this.getCalendar().option("sClassPrefix");var elDateContainer=this._getTargetDateContainerElement(we.element);if(elDateContainer){var htDate=this.getCalendar().getDateOfElement(elDateContainer);var htParam={element:we.element,nYear:htDate.nYear,nMonth:htDate.nMonth,nDate:htDate.nDate,bSelectable:false};if(this._htSelectedDatePickerSet&&this.isSelectable(this._htSelectedDatePickerSet,htDate)){this._setAsideSelected();jindo.$Element(elDateContainer).addClass(sClassPrefix+"over");htParam.bSelectable=true}this.fireEvent("mouseover",htParam)}},_onMouseOutDate:function(we){var sClassPrefix=this.getCalendar().option("sClassPrefix");var elDateContainer=this._getTargetDateContainerElement(we.element);if(elDateContainer){var htDate=this.getCalendar().getDateOfElement(elDateContainer);var htParam={element:we.element,nYear:htDate.nYear,nMonth:htDate.nMonth,nDate:htDate.nDate,bSelectable:false};if(this._htSelectedDatePickerSet&&this.isSelectable(this._htSelectedDatePickerSet,htDate)){jindo.$Element(elDateContainer).removeClass(sClassPrefix+"over");htParam.bSelectable=true;this._setSelectedAgain()}this.fireEvent("mouseout",htParam)}else{this._setSelectedAgain()}},_onClickDate:function(we){we.stop(jindo.$Event.CANCEL_DEFAULT);var el=we.element;var elDate=this._getTargetDateElement(el);if(elDate){var elDateContainer=this._getTargetDateContainerElement(elDate);if(elDateContainer){var htDate=this.getCalendar().getDateOfElement(elDateContainer);if(this.isSelectable(this._htSelectedDatePickerSet,htDate)){this.setDate(this._htSelectedDatePickerSet,htDate)}}}}}).extend(jindo.UIComponent);jindo.DefaultTextValue=jindo.$Class({$init:function(el,htOption){this.option({sValue:"",bActivateOnload:true});this.option(htOption||{});this._elBaseTarget=jindo.$(el);this._wfOnFocusAndBlur=jindo.$Fn(this._onFocusAndBlur,this);if(this.option("bActivateOnload")){this.activate()}},getBaseElement:function(){return this._elBaseTarget},setDefault:function(){this.getBaseElement().value=this.option("sValue");return this},setDefaultValue:function(sValue){var sOldValue=this.option("sValue");this.option("sValue",sValue);if(this.getBaseElement().value==sOldValue){this.setDefault()}return this},getDefaultValue:function(){return this.option("sValue")},paint:function(){return this},_onActivate:function(){var elInput=this.getBaseElement();if(elInput.value==""){this.setDefault()}this._wfOnFocusAndBlur.attach(elInput,"focus").attach(elInput,"blur")},_onDeactivate:function(){var elInput=this.getBaseElement();this._wfOnFocusAndBlur.detach(elInput,"focus").detach(elInput,"blur")},_onFocusAndBlur:function(we){var el=this._elBaseTarget;var sValue=el.value;switch(we.type){case"focus":if(sValue.replace(/\r\n/g,"\n")==this.getDefaultValue()){el.value="";el.select()}break;case"blur":if(jindo.$S(sValue).trim().$value()==""){this.setDefault()}break}}}).extend(jindo.UIComponent);jindo.Dialog=jindo.$Class({$init:function(htOption){var htDefaultOption={sClassPrefix:"dialog-",LayerPosition:{sPosition:"inside-center",bAuto:true}};this.option(htDefaultOption);this.option(htOption||{});this._bIsEventAttached=false;this._bIsShown=false;this._assignHTMLElements();this._initLayerPosition()},_assignHTMLElements:function(){this._elLayer=jindo.$('<div class="'+this.option("sClassPrefix")+'layer"></div>');this._welLayer=jindo.$Element(this._elLayer);this._wfClick=jindo.$Fn(this._onClick,this);jindo.$Element.prototype.preventTapHighlight&&this._welLayer.preventTapHighlight(true)},_initLayerPosition:function(){this._oLayerPosition=new jindo.LayerPosition(document.body,this._elLayer,this.option("LayerPosition"))},getLayer:function(){return this._elLayer},getLayerPosition:function(){return this._oLayerPosition},setLayerTemplate:function(sTemplate){this._sTemplate=sTemplate;this._template=jindo.$Template(this._sTemplate)},getLayerTemplate:function(){return this._sTemplate},show:function(htTemplateProcess,htEventHandler){if(!this.isShown()){this.attach(htEventHandler);document.body.appendChild(this._elLayer);this._welLayer.html(this._template.process(htTemplateProcess));var htCustomEvent={elLayer:this._elLayer};if(this.fireEvent("beforeShow",htCustomEvent)){this._welLayer.show();this._attachEvents();this.getLayerPosition().setPosition();this._bIsShown=true;this.fireEvent("show",htCustomEvent)}}},hide:function(){if(this.isShown()){var htCustomEvent={elLayer:this._elLayer};if(this.fireEvent("beforeHide",htCustomEvent)){this.detachAll("close").detachAll("confirm").detachAll("cancel");this._detachEvents();this._welLayer.hide();this._welLayer.leave();this._bIsShown=false;this.fireEvent("hide",htCustomEvent)}}},isShown:function(){return this._bIsShown},_isEventAttached:function(){return this._bIsEventAttached},_attachEvents:function(){if(!this._isEventAttached()){this._wfClick.attach(this._elLayer,"click");this._bIsEventAttached=true}return this},_detachEvents:function(){if(this._isEventAttached()){this._wfClick.detach(this._elLayer,"click");this._bIsEventAttached=false}return this},_onClick:function(we){var sClassPrefix=this.option("sClassPrefix");var elClosestClose,elClosestConfirm,elClosestCancel;if((elClosestClose=this._getClosest(("."+sClassPrefix+"close"),we.element))){if(this.fireEvent("close")){this.hide()}}else{if((elClosestConfirm=this._getClosest(("."+sClassPrefix+"confirm"),we.element))){if(this.fireEvent("confirm")){this.hide()}}else{if((elClosestCancel=this._getClosest(("."+sClassPrefix+"cancel"),we.element))){if(this.fireEvent("cancel")){this.hide()}}}}},_getClosest:function(sSelector,elBaseElement){if(jindo.$$.test(elBaseElement,sSelector)){return elBaseElement}return jindo.$$.getSingle("! "+sSelector,elBaseElement)}}).extend(jindo.Component);jindo.DragArea=jindo.$Class({$init:function(el,htOption){this.option({sClassName:"draggable",bFlowOut:true,bSetCapture:true,nThreshold:0});this.option(htOption||{});this._el=el;this._bIE=jindo.$Agent().navigator().ie;this._htDragInfo={bIsDragging:false,bPrepared:false,bHandleDown:false,bForceDrag:false};this._wfOnMouseDown=jindo.$Fn(this._onMouseDown,this);this._wfOnMouseMove=jindo.$Fn(this._onMouseMove,this);this._wfOnMouseUp=jindo.$Fn(this._onMouseUp,this);this._wfOnDragStart=jindo.$Fn(this._onDragStart,this);this._wfOnSelectStart=jindo.$Fn(this._onSelectStart,this);this.activate()},_findDraggableElement:function(el){if(el.nodeType===1&&jindo.$$.test(el,"input[type=text], textarea, select")){return null}var self=this;var sClass="."+this.option("sClassName");var isChildOfDragArea=function(el){if(el===null){return false}if(self._el===document||self._el===el){return true}return jindo.$Element(self._el).isParentOf(el)};var elReturn=jindo.$$.test(el,sClass)?el:jindo.$$.getSingle("! "+sClass,el);if(!isChildOfDragArea(elReturn)){elReturn=null}return elReturn},isDragging:function(){var htDragInfo=this._htDragInfo;return htDragInfo.bIsDragging&&!htDragInfo.bPrepared},stopDragging:function(){this._stopDragging(true);return this},_stopDragging:function(bInterupted,we){this._wfOnMouseMove.detach(document,"mousemove");this._wfOnMouseUp.detach(document,"mouseup");if(this.isDragging()){var htDragInfo=this._htDragInfo,welDrag=jindo.$Element(htDragInfo.elDrag);htDragInfo.bIsDragging=false;htDragInfo.bForceDrag=false;htDragInfo.bPrepared=false;if(this._bIE&&this._elSetCapture){this._elSetCapture.releaseCapture();this._elSetCapture=null}this.fireEvent("dragEnd",{elArea:this._el,elHandle:htDragInfo.elHandle,elDrag:htDragInfo.elDrag,nX:parseInt(welDrag.css("left"),10)||0,nY:parseInt(welDrag.css("top"),10)||0,bInterupted:bInterupted,weEvent:we})}},_onActivate:function(){this._wfOnMouseDown.attach(this._el,"mousedown");this._wfOnDragStart.attach(this._el,"dragstart");this._wfOnSelectStart.attach(this._el,"selectstart")},_onDeactivate:function(){this._wfOnMouseDown.detach(this._el,"mousedown");this._wfOnDragStart.detach(this._el,"dragstart");this._wfOnSelectStart.detach(this._el,"selectstart")},attachEvent:function(){this.activate()},detachEvent:function(){this.deactivate()},isEventAttached:function(){return this.isActivating()},startDragging:function(el){var elDrag=this._findDraggableElement(el);if(elDrag){this._htDragInfo.bForceDrag=true;this._htDragInfo.bPrepared=true;this._htDragInfo.elHandle=elDrag;this._htDragInfo.elDrag=elDrag;this._wfOnMouseMove.attach(document,"mousemove");this._wfOnMouseUp.attach(document,"mouseup");return true}return false},_onMouseDown:function(we){var mouse=we.mouse(true);if(/^mouse/.test(we.type)&&(!mouse.left||mouse.right||mouse.scrollbar)){this._stopDragging(true);return}var el=this._findDraggableElement(we.element);if(el){var oPos=we.pos(),htDragInfo=this._htDragInfo;htDragInfo.bHandleDown=true;htDragInfo.bPrepared=true;htDragInfo.nButton=we._event.button;htDragInfo.elHandle=el;htDragInfo.elDrag=el;htDragInfo.nPageX=oPos.pageX;htDragInfo.nPageY=oPos.pageY;if(this.fireEvent("handleDown",{elHandle:el,elDrag:el,weEvent:we})){this._wfOnMouseMove.attach(document,"mousemove")}this._wfOnMouseUp.attach(document,"mouseup");we.stop(jindo.$Event.CANCEL_DEFAULT)}},_onMouseMove:function(we){var htDragInfo=this._htDragInfo,htParam,htRect,oPos=we.pos(),htGap={nX:oPos.pageX-htDragInfo.nPageX,nY:oPos.pageY-htDragInfo.nPageY};if(htDragInfo.bPrepared){var nThreshold=this.option("nThreshold"),htDiff={};if(!htDragInfo.bForceDrag&&nThreshold){htDiff.nPageX=oPos.pageX-htDragInfo.nPageX;htDiff.nPageY=oPos.pageY-htDragInfo.nPageY;var nDistance=Math.sqrt(htDiff.nPageX*htDiff.nPageX+htDiff.nPageY*htDiff.nPageY);if(nThreshold>nDistance){return}}if(this._bIE&&this.option("bSetCapture")){this._elSetCapture=(this._el===document)?document.body:this._findDraggableElement(we.element);if(this._elSetCapture){this._elSetCapture.setCapture(false)}}htParam={elArea:this._el,elHandle:htDragInfo.elHandle,elDrag:htDragInfo.elDrag,htDiff:htDiff,weEvent:we};htDragInfo.bIsDragging=true;htDragInfo.bPrepared=false;if(this.fireEvent("dragStart",htParam)){var welDrag=jindo.$Element(htParam.elDrag),htOffset=welDrag.offset();htDragInfo.elHandle=htParam.elHandle;htDragInfo.elDrag=htParam.elDrag;htDragInfo.nX=parseInt(welDrag.css("left"),10)||0;htDragInfo.nY=parseInt(welDrag.css("top"),10)||0;htDragInfo.nClientX=htOffset.left+welDrag.width()/2;htDragInfo.nClientY=htOffset.top+welDrag.height()/2}else{htDragInfo.bPrepared=true;return}}if(htDragInfo.bForceDrag){htGap.nX=oPos.clientX-htDragInfo.nClientX;htGap.nY=oPos.clientY-htDragInfo.nClientY}htParam={elArea:this._el,elFlowOut:htDragInfo.elDrag.parentNode,elHandle:htDragInfo.elHandle,elDrag:htDragInfo.elDrag,weEvent:we,nX:htDragInfo.nX+htGap.nX,nY:htDragInfo.nY+htGap.nY,nGapX:htGap.nX,nGapY:htGap.nY};if(this.fireEvent("beforeDrag",htParam)){var elDrag=htDragInfo.elDrag;if(this.option("bFlowOut")===false){var elParent=htParam.elFlowOut,aSize=[elDrag.offsetWidth,elDrag.offsetHeight],nScrollLeft=0,nScrollTop=0;if(elParent==document.body){nScrollLeft=document.body.scrollLeft||document.documentElement.scrollLeft;nScrollTop=document.body.scrollTop||document.documentElement.scrollTop;elParent=null}var elParentSize=elParent&&{w:Math.max(elParent.offsetWidth,elParent.scrollWidth),h:Math.max(elParent.offsetHeight,elParent.scrollHeight)};if(elParent&&aSize[0]<=elParentSize.w&&aSize[1]<=elParentSize.h){htRect={nWidth:elParent.clientWidth,nHeight:elParent.clientHeight};nScrollLeft=elParent.scrollLeft;nScrollTop=elParent.scrollTop}else{var htClientSize=jindo.$Document().clientSize();htRect={nWidth:htClientSize.width,nHeight:htClientSize.height}}if(htParam.nX!==null){htParam.nX=Math.max(htParam.nX,nScrollLeft);htParam.nX=Math.min(htParam.nX,htRect.nWidth-aSize[0]+nScrollLeft)}if(htParam.nY!==null){htParam.nY=Math.max(htParam.nY,nScrollTop);htParam.nY=Math.min(htParam.nY,htRect.nHeight-aSize[1]+nScrollTop)}}if(htParam.nX!==null){elDrag.style.left=htParam.nX+"px"}if(htParam.nY!==null){elDrag.style.top=htParam.nY+"px"}this.fireEvent("drag",htParam)}else{htDragInfo.bIsDragging=false}},_onMouseUp:function(we){this._stopDragging(false,we);var htDragInfo=this._htDragInfo;htDragInfo.bHandleDown=false;this.fireEvent("handleUp",{weEvent:we,elHandle:htDragInfo.elHandle,elDrag:htDragInfo.elDrag})},_onDragStart:function(we){if(this._findDraggableElement(we.element)){we.stop(jindo.$Event.CANCEL_DEFAULT)}},_onSelectStart:function(we){if(this.isDragging()||this._findDraggableElement(we.element)){we.stop(jindo.$Event.CANCEL_DEFAULT)}}}).extend(jindo.UIComponent);jindo.DropArea=jindo.$Class({$init:function(el,htOption){this._el=jindo.$(el);this._wel=jindo.$Element(this._el);this.option({sClassName:"droppable",oDragInstance:null});this.option(htOption||{});this._waOveredDroppableElement=jindo.$A([]);this._elHandle=null;this._elDragging=null;this._wfMouseMove=jindo.$Fn(this._onMouseMove,this);this._wfMouseOver=jindo.$Fn(this._onMouseOver,this);this._wfMouseOut=jindo.$Fn(this._onMouseOut,this);var oDrag=this.option("oDragInstance");if(oDrag){var self=this;oDrag.attach({handleDown:function(oCustomEvent){self._elHandle=oCustomEvent.elHandle;self._waOveredDroppableElement.empty()},dragStart:function(oCustomEvent){self._reCalculate();self.fireEvent(oCustomEvent.sType,oCustomEvent);self._wfMouseMove.attach(document,"mousemove")},drag:function(oCustomEvent){self._elDragging=oCustomEvent.elDrag},dragEnd:function(oCustomEvent){var o={};for(var sKey in oCustomEvent){o[sKey]=oCustomEvent[sKey]}o.aDrop=self.getOveredLists().concat();self._clearOveredDroppableElement(oCustomEvent.weEvent,oCustomEvent.bInterupted);self.fireEvent(oCustomEvent.sType,o);self._wfMouseMove.detach(document,"mousemove")},handleUp:function(oCustomEvent){self._elDragging=null;self._elHandle=null}})}},_addOveredDroppableElement:function(elDroppable){if(this._waOveredDroppableElement.indexOf(elDroppable)==-1){this._waOveredDroppableElement.push(elDroppable);this.fireEvent("over",{elHandle:this._elHandle,elDrag:this._elDragging,elDrop:elDroppable})}},_fireMoveEvent:function(elDroppable,oRect,oPos,we){var nRatioX=(oPos.pageX-oRect.nLeft)/(oRect.nRight-oRect.nLeft);var nRatioY=(oPos.pageY-oRect.nTop)/(oRect.nBottom-oRect.nTop);this.fireEvent("move",{weEvent:we,elHandle:this._elHandle,elDrag:this._elDragging,elDrop:elDroppable,nRatioX:nRatioX,nRatioY:nRatioY})},_removeOveredDroppableElement:function(elDroppable){var nIndex=this._waOveredDroppableElement.indexOf(elDroppable);if(nIndex!=-1){this._waOveredDroppableElement.splice(nIndex,1);this.fireEvent("out",{elHandle:this._elHandle,elDrag:this._elDragging,elDrop:elDroppable})}},_clearOveredDroppableElement:function(weEvent,bInterupted){if(bInterupted){this._waOveredDroppableElement.empty();return}for(var elDroppable;(elDroppable=this._waOveredDroppableElement.$value()[0]);){this._waOveredDroppableElement.splice(0,1);this.fireEvent("drop",{weEvent:weEvent,elHandle:this._elHandle,elDrag:this._elDragging,elDrop:elDroppable})}},getOveredLists:function(){return this._waOveredDroppableElement?this._waOveredDroppableElement.$value():[]},_isChildOfDropArea:function(el){if(this._el===document||this._el===el){return true}return this._wel.isParentOf(el)},_findDroppableElement:function(el){if(!el){return null}var sClass="."+this.option("sClassName");var elDroppable=jindo.$$.test(el,sClass)?el:jindo.$$.getSingle("! "+sClass,el);if(!this._isChildOfDropArea(el)){elDroppable=null}return elDroppable},_isDragging:function(){var oDrag=this.option("oDragInstance");return(oDrag&&oDrag.isDragging())},_onMouseMove:function(we){if(this._isDragging()){var oPos=we.pos();if(we.element==this._elDragging||jindo.$Element(this._elDragging).isParentOf(we.element)){var aItem=this._aItem;var aItemRect=this._aItemRect;for(var i=0,htRect,el;((htRect=aItemRect[i])&&(el=aItem[i]));i++){if(htRect.nLeft<=oPos.pageX&&oPos.pageX<=htRect.nRight&&htRect.nTop<=oPos.pageY&&oPos.pageY<=htRect.nBottom){this._addOveredDroppableElement(el);this._fireMoveEvent(el,htRect,oPos,we)}else{this._removeOveredDroppableElement(el)}}}else{var elDroppable=this._findDroppableElement(we.element);if(this.elPrevMove&&this.elPrevMove!=elDroppable){this._removeOveredDroppableElement(this.elPrevMove);this.elPrevMove=null}if(elDroppable==we.element||(!elDroppable&&document.elementFromPoint)){var aScr=[document.documentElement.scrollLeft||document.body.scrollLeft,document.documentElement.scrollTop||document.body.scrollTop];elDroppable=this._findDroppableElement(document.elementFromPoint(oPos.pageX-aScr[0],oPos.pageY-aScr[1]))}if(!elDroppable){return}this.elPrevMove=elDroppable;this._addOveredDroppableElement(elDroppable);var htOffset=jindo.$Element(elDroppable).offset();var htArea={nLeft:htOffset.left,nTop:htOffset.top,nRight:htOffset.left+elDroppable.offsetWidth,nBottom:htOffset.top+elDroppable.offsetHeight};if(htArea.nLeft<=oPos.pageX&&oPos.pageX<=htArea.nRight&&htArea.nTop<=oPos.pageY&&oPos.pageY<=htArea.nBottom){this._fireMoveEvent(elDroppable,htArea,oPos,we)}}}},_onMouseOver:function(we){if(this._isDragging()){var elDroppable=this._findDroppableElement(we.element);if(elDroppable){this._addOveredDroppableElement(elDroppable)}}},_onMouseOut:function(we){if(this._isDragging()){var elDroppable=this._findDroppableElement(we.element);if(elDroppable&&we.relatedElement&&!jindo.$Element(we.relatedElement).isChildOf(we.element)){this._removeOveredDroppableElement(elDroppable)}}},_getRectInfo:function(el){var htOffset=jindo.$Element(el).offset();return{nLeft:htOffset.left,nTop:htOffset.top,nRight:htOffset.left+el.offsetWidth,nBottom:htOffset.top+el.offsetHeight}},_reCalculate:function(){var aItem=jindo.$$("."+this.option("sClassName"),this._el);if(this._el.tagName&&jindo.$$.test(this._el,"."+this.option("sClassName"))){aItem.push(this._el)}this._aItem=aItem;this._aItemRect=[];for(var i=0,el;(el=aItem[i]);i++){this._aItemRect.push(this._getRectInfo(el))}},refresh:function(){this._reCalculate();return this}}).extend(jindo.Component);jindo.Tree=jindo.$Class({_bIsActivating:false,_sTemplate:null,_htNodeData:null,_el:null,_elSelectedNode:null,$init:function(el,htOption){this.option({sClassPrefix:"tree-",sEventSelect:"click",sEventExpand:"dblclick",bExpandOnSelect:true,bActivateOnload:true});this.option(htOption||{});var sPrefix=this.option("sClassPrefix");this.htClassName={sNode:sPrefix+"node",sLastNode:sPrefix+"last-node",sHasChild:sPrefix+"has-child",sButton:sPrefix+"button",sLabel:sPrefix+"label",sSelected:sPrefix+"selected",sCollapsed:sPrefix+"collapsed"};this.setNodeTemplate('<li class="{=sNodeClass}{if bLastNode} {=sLastNodeClass}{/if}"><div{if bHasChild} class="{=sHasChildClass}"{/if}><button class="{=sButtonClass}">+</button><span class="{=sLabelClass}" unselectable="on">{=sText}</span></div></li>');this._htNodeData={};el=jindo.$(el);this._setRootList(el);this._wfSelectHandler=jindo.$Fn(this._onSelectEvent,this);this._wfExpandHandler=jindo.$Fn(this._onExpandEvent,this);this._makeNodeDataKeyFromHTML();this.paintAllNodes();var elDefaultSelectedNode=jindo.$$.getSingle("."+this.htClassName.sNode+" > ."+this.htClassName.sSelected,this.getRootList());if(elDefaultSelectedNode){this._setSelectedNode(this.getNode(elDefaultSelectedNode))}if(this.option("bActivateOnload")){this.activate()}},_onActivate:function(){var el=this.getRootList();jindo.$Element.prototype.preventTapHighlight&&jindo.$Element(el).preventTapHighlight(true);this._wfSelectHandler.attach(el,this.option("sEventSelect"));this._wfExpandHandler.attach(el,this.option("sEventExpand"))},_onDeactivate:function(){var el=this.getRootList();jindo.$Element.prototype.preventTapHighlight&&jindo.$Element(el).preventTapHighlight(false);this._wfSelectHandler.detach(el,this.option("sEventSelect"));this._wfExpandHandler.detach(el,this.option("sEventExpand"))},_onSelectEvent:function(we){var el=we.element;var elNode=this.getNode(el);if(!elNode){return}var elButton=jindo.$$.test(el,"."+this.htClassName.sButton)?el:jindo.$$.getSingle("! ."+this.htClassName.sButton,el);if(elButton){if(this.isCollapsed(elNode)){this.expandNode(elNode)}else{this.collapseNode(elNode)}return}var elLabel=jindo.$$.test(el,"."+this.htClassName.sLabel)?el:jindo.$$.getSingle("! ."+this.htClassName.sLabel,el);if(elLabel){var htPart=this.getPartsOfNode(elNode);if(htPart.elItem){if(this.fireEvent(we.type,{element:elNode,weEvent:we})){this.selectNode(elNode)}}}},_onExpandEvent:function(we){var el=we.element;var elNode=this.getNode(el);if(!elNode||!this.hasChild(elNode)){return}var elLabel=jindo.$$.test(el,"."+this.htClassName.sLabel)?el:jindo.$$.getSingle("! ."+this.htClassName.sLabel,el);if(elLabel){var htParam={element:elNode,weEvent:we};var htPart=this.getPartsOfNode(elNode);if(htPart.elItem&&jindo.$Element(htPart.elItem).visible()){if(this.isCollapsed(elNode)){if(this.fireEvent(we.type,htParam)){this.expandNode(elNode)}}else{if(!this._bExpandOnSelect){if(this.fireEvent(we.type,htParam)){this.collapseNode(elNode)}}}}}},paintNode:function(elNode,bPaintChild){if(typeof bPaintChild=="undefined"){bPaintChild=true}this._paintNode(elNode);if(bPaintChild){var aNodes=this.getChildNodes(elNode);for(var i=0;i<aNodes.length;i++){this.paintNode(aNodes[i])}}return this},paintAllNodes:function(elNode){this.paintNode(elNode||this.getRootNode());return this},_paintNode:function(elNode){if(!elNode){return}var htPart=this.getPartsOfNode(elNode);var aChildNodes=this.getChildNodes(elNode);var htNodeData=this.getNodeData(elNode);var welNode=jindo.$Element(elNode);var welItem=jindo.$Element(htPart.elItem);delete htNodeData._aChildren;if(this.hasChild(elNode)){welItem.addClass(this.htClassName.sHasChild);htNodeData.bHasChild=true;htNodeData._aChildren=[];var self=this;jindo.$A(aChildNodes).forEach(function(elNode,i){htNodeData._aChildren.push(self.getNodeData(elNode))})}else{htNodeData.bHasChild=false;welItem.removeClass(this.htClassName.sHasChild);if(htPart.elChild){htPart.elChild.parentNode.removeChild(htPart.elChild)}}htNodeData.bLastNode=jindo.$$.getSingle("~ ."+this.htClassName.sNode,elNode)?false:true;if(htNodeData.bLastNode){welNode.addClass(this.htClassName.sLastNode)}else{welNode.removeClass(this.htClassName.sLastNode)}elNode.parentNode.style.zoom=1},getNodeTemplate:function(){return this._sTemplate},setNodeTemplate:function(s){this._sTemplate=s;return this},getChildListOfNode:function(elNode){return jindo.$$.getSingle("ul",elNode)},getRootList:function(){return this._el},_setRootList:function(el){this._el=el},getNode:function(el){var elNode=jindo.$$.test(el,"."+this.htClassName.sNode)?el:jindo.$$.getSingle("! ."+this.htClassName.sNode,el);return elNode&&jindo.$Element(elNode).isChildOf(this.getRootList())?elNode:null},getPartsOfNode:function(elNode){var aParts=jindo.$$("> *",elNode);return{elItem:aParts[0],elChild:aParts[1]}},getNodeType:function(elNode){if(elNode===this.getRootNode()){return"root"}else{if(this.getChildNodes(elNode).length>0){return"internal"}else{return"leaf"}}},getRootNode:function(){if(this._elRootNode){return this._elRootNode}this._elRootNode=jindo.$$.getSingle("."+this.htClassName.sNode,this.getRootList());return this._elRootNode},getAllNodes:function(){return jindo.$$("."+this.htClassName.sNode,this.getRootList())},getChildNodes:function(elNode){var elChildList=this.getChildListOfNode(elNode);return elChildList?jindo.$$("> ."+this.htClassName.sNode,elChildList):[]},hasChild:function(elNode){var htPart=this.getPartsOfNode(elNode);return htPart.elChild&&htPart.elChild.getElementsByTagName("li")[0]?true:false},getParentNode:function(elNode){var elRootNode=this.getRootNode();if(elNode===elRootNode){return null}return this.getNode(elNode.parentNode)},getPreviousNode:function(elNode){var elReturn=jindo.$$.getSingle("!~ ."+this.htClassName.sNode,elNode);return elReturn?this.getNode(elReturn):null},getNextNode:function(elNode){var elReturn=jindo.$$.getSingle("~ ."+this.htClassName.sNode,elNode);return elReturn?this.getNode(elReturn):null},getSelectedNode:function(){return this._elSelectedNode},_setSelectedNode:function(el){this._elSelectedNode=el},isCollapsed:function(elNode){return jindo.$Element(elNode).hasClass(this.htClassName.sCollapsed)},getNodeDepth:function(elNode){var nDepth=-1;for(;elNode;elNode=elNode.parentNode){if(elNode==this.getRootList()){break}if(jindo.$$.test(elNode,"."+this.htClassName.sNode)){nDepth++}}return nDepth},setNodeData:function(elNode,htNodeData){var sKey=this._getNodeDataKey(elNode);delete htNodeData._aChildren;delete htNodeData.sLabel;for(var vProp in htNodeData){this._htNodeData[sKey][vProp]=htNodeData[vProp]}return this},getNodeLabelElement:function(elNode){return jindo.$$.getSingle("."+this.htClassName.sLabel,elNode)},getNodeLabel:function(elNode){return jindo.$Element(this.getNodeLabelElement(elNode)).html()},setNodeLabel:function(elNode,sLabel){var sKey=this._getNodeDataKey(elNode);this._htNodeData[sKey]["sLabel"]=sLabel;jindo.$Element(this.getNodeLabelElement(elNode)).html(sLabel);return this},_makeNodeDataKeyFromHTML:function(){var aNodes=this.getAllNodes();for(var i=0;i<aNodes.length;i++){var elNode=aNodes[i];this._makeNodeDataKey(elNode);this._makeNodeData(elNode)}},_makeNodeDataKey:function(elNode){var welNode=jindo.$Element(elNode);var sNodeDataKey=this._getNodeDataKey(elNode);if(sNodeDataKey){return false}var sPrefix=this.option("sClassPrefix");var sUnique=("data-"+new Date().getTime()+parseInt(Math.random()*10000000,10)).toString();var sUniqueClass=sPrefix+sUnique;welNode.addClass(sUniqueClass);var sKey=this._getNodeDataKey(elNode);this._htNodeData[sKey]={};return sKey},_makeNodeData:function(elNode){var htNodeData=this.getNodeData(elNode);htNodeData.element=elNode;htNodeData.sLabel=jindo.$Element(this.getNodeLabelElement(elNode)).text();htNodeData.bLastNode=jindo.$$.getSingle("~ ."+this.htClassName.sNode,elNode)?false:true},_getNodeDataKey:function(elNode){var sClassName=elNode.className;var sPrefix=this.option("sClassPrefix");var rKey=new RegExp("("+sPrefix+"data-[0-9]+)");if(rKey.test(sClassName)){return RegExp.$1}return null},getNodeData:function(elNode){return(elNode)?this._htNodeData[this._getNodeDataKey(elNode)]:this._htNodeData},_clearNodeData:function(elNode){var elParentNode=this.getParentNode(elNode);var htNodeData=this.getNodeData(elNode);var sKey=this._getNodeDataKey(elNode);if(elParentNode){var htParentNodeData=this.getNodeData(elParentNode);if(htParentNodeData){var nIndex=jindo.$A(htParentNodeData._aChildren).indexOf(htNodeData);if(nIndex>-1){htParentNodeData._aChildren.splice(nIndex,1)}}}var self=this;if(this.hasChild(elNode)){jindo.$A(this.getChildNodes(elNode)).forEach(function(elNode){self._clearNodeData(elNode)})}delete this._htNodeData[sKey]},expandNode:function(elNode,bChildAll){if(!this.fireEvent("beforeExpand",{element:elNode})){return}var htPart=this.getPartsOfNode(elNode);var aChildren=[];if(jindo.$$.test(htPart.elItem,"."+this.htClassName.sHasChild)){aChildren.push(elNode)}if(bChildAll){aChildren=aChildren.concat(jindo.$$("."+this.htClassName.sHasChild,elNode))}for(var i=0,elChild;(elChild=aChildren[i]);i++){var elChildNode=this.getNode(elChild);jindo.$Element(elChildNode).removeClass(this.htClassName.sCollapsed);this.fireEvent("expand",{element:elChildNode})}return this},collapseNode:function(elNode,bChildAll){if(!this.fireEvent("beforeCollapse",{element:elNode})){return}var htPart=this.getPartsOfNode(elNode);var aChildren=[];if(jindo.$$.test(htPart.elItem,"."+this.htClassName.sHasChild)){aChildren.push(elNode)}if(bChildAll){aChildren=aChildren.concat(jindo.$$("."+this.htClassName.sHasChild,elNode))}for(var i=0,elChild;(elChild=aChildren[i]);i++){var elChildNode=this.getNode(elChild);jindo.$Element(elChildNode).addClass(this.htClassName.sCollapsed);this.fireEvent("collapse",{element:elChildNode})}return this},selectNode:function(elNode){var htPart=this.getPartsOfNode(elNode);var elSelectedNode=this.getSelectedNode();var elItem=htPart.elItem;if(!this.fireEvent("beforeSelect",{element:elNode})){return false}if(elSelectedNode!=elNode){this.deselectNode();jindo.$Element(elItem).addClass(this.htClassName.sSelected);this._setSelectedNode(elNode)}this.fireEvent("select",{element:elNode});if(this.option("bExpandOnSelect")&&elSelectedNode!=elNode&&this.isCollapsed(elNode)){var self=this;this._bExpandOnSelect=true;setTimeout(function(){self._bExpandOnSelect=false},500);this.expandNode(elNode)}return true},deselectNode:function(){var elSelectedNode=this.getSelectedNode();if(elSelectedNode){jindo.$Element(this.getPartsOfNode(elSelectedNode).elItem).removeClass(this.htClassName.sSelected)}this._setSelectedNode(null);return this},_createChild:function(elNode){var elChild=this.getChildListOfNode(elNode);if(!elChild){elChild=jindo.$("<ul>");elNode.appendChild(elChild)}try{return elChild}finally{elChild=null}},removeNode:function(elNode){if(!elNode||elNode===this.getRootNode()){this.clearNode(elNode);return this}var htNodeData=this.getNodeData(elNode);var elPreviousNode=htNodeData.bLastNode?this.getPreviousNode(elNode):null;var bLastNode=elNode.parentNode.childNodes.length==1;var elParentNode=this.getParentNode(elNode);this._clearNodeData(elNode);elNode.parentNode.removeChild(elNode);this.selectNode(elParentNode);this._paintNode(elPreviousNode);if(bLastNode){var htParentNodeData=this.getNodeData(elParentNode);htParentNodeData.bHasChild=false}this._paintNode(elParentNode);return this},clearNode:function(elNode){var elChild=this.getChildListOfNode(elNode);if(elChild){var aChildLi=elChild.getElementsByTagName("li");for(var i=0,elChildLi;(elChildLi=aChildLi[i]);i++){this._clearNodeData(elChildLi)}elChild.parentNode.removeChild(elChild);var htNodeData=this.getNodeData(elNode);htNodeData.bHasChild=false;this._paintNode(elNode);return true}return false},clearTree:function(){this.clearNode(this.getRootNode());return this},_moveNodes:function(elTargetNode,aNodes,fCallback){for(var i=0,elNode;(elNode=aNodes[i]);i++){fCallback(elNode)}},appendNode:function(elTargetNode,aNodes){if(!(aNodes instanceof Array)){return arguments.callee.call(this,elTargetNode,[aNodes])}var self=this;var elChild=this._createChild(elTargetNode);this._moveNodes(elTargetNode,aNodes,function(elNode){var elParentNode=null;elParentNode=self.getParentNode(elNode);elChild.appendChild(elNode);if(elParentNode){self.paintNode(elParentNode,false);jindo.$A(self.getChildNodes(elParentNode)).forEach(function(elChildNode){self.paintNode(elChildNode,false)})}});this.paintNode(elTargetNode,false);jindo.$A(this.getChildNodes(elTargetNode)).forEach(function(elChildNode){self.paintNode(elChildNode,false)});return this},insertNodeBefore:function(elTargetNode,aNodes){if(elTargetNode==this.getRootNode()){return}if(!(aNodes instanceof Array)){return arguments.callee.call(this,elTargetNode,[aNodes])}var self=this;var elChildList=elTargetNode.parentNode;this._moveNodes(elTargetNode,aNodes,function(elNode){var elParentNode=null;elParentNode=self.getNode(elChildList);elChildList.insertBefore(elNode,elTargetNode);if(elParentNode){jindo.$A(self.getChildNodes(elParentNode)).forEach(function(elChildNode){self.paintNode(elChildNode,false)})}});return this},insertNodeAfter:function(elTargetNode,aNodes){if(elTargetNode==this.getRootNode()){return}if(!(aNodes instanceof Array)){return arguments.callee.call(this,elTargetNode,[aNodes])}var self=this;var elChildList=elTargetNode.parentNode;var elNextNode=elTargetNode;this._moveNodes(elTargetNode,aNodes,function(elNode){var elParentNode=null;elParentNode=self.getNode(elChildList);elChildList.insertBefore(elNode,elNextNode.nextSibling);elNextNode=elNode;if(elParentNode){jindo.$A(self.getChildNodes(elParentNode)).forEach(function(elChildNode){self.paintNode(elChildNode,false)})}});return this},_getCode:function(aData){if(aData instanceof Array){var aCodes=[];var sTemplate=this.getNodeTemplate();for(var i=0;i<aData.length;i++){var htData=aData[i];var htParam={sTemplate:sTemplate,htData:htData};this.fireEvent("beforeProcessData",htParam);var htProcess={sNodeClass:this.htClassName.sNode,bLastNode:(i==aData.length-1)?true:false,sLastNodeClass:this.htClassName.sLastNode,bHasChild:(typeof htData._aChildren!="undefined"&&htData._aChildren.length>0)?true:false,sHasChildClass:this.htClassName.sHasChild,sCollapsedClass:this.htClassName.sCollapsed,sButtonClass:this.htClassName.sButton,sLabelClass:this.htClassName.sLabel,sText:htData.sLabel,htData:htData};var sCode=jindo.$Template(htParam.sTemplate).process(htProcess);sCode=this._getChildCode(htData._aChildren,sCode);aCodes.push(sCode)}return aCodes.join("\n")}},_getChildCode:function(elChild,sCode){var sChild=elChild?this._getCode(elChild):"";if(sChild){var bChanged=false;sCode=sCode.replace(/(<ul(\s[^>]*)*>)(<\/ul>)/i,function(_,sBegin,__,sClose){bChanged=true;return sBegin+sChild+sClose});if(!bChanged){sCode=sCode.replace(/<\/li>/i,function(_){return"\n<ul>"+sChild+"</ul>\n"+_})}}return sCode},_setData:function(elChildListOfParentNode,aDatas){var aNodes=jindo.$$("> ."+this.htClassName.sNode,elChildListOfParentNode);for(var i=0,nLen=aNodes.length;i<nLen;i++){var elNode=aNodes[i];var htNodeData=aDatas[i];var sKey=this._makeNodeDataKey(elNode);htNodeData.bLastNode=(i===nLen-1);this._htNodeData[sKey]=htNodeData;var bHasChild=htNodeData.bHasChild=(typeof htNodeData._aChildren!="undefined"&&htNodeData._aChildren.length)||htNodeData.bHasChild?true:false;if(bHasChild){this._setData(this.getChildListOfNode(elNode),htNodeData._aChildren)}}},createNode:function(aDatas){var elDummy=jindo.$("<ul>");elDummy.innerHTML=this._getCode(aDatas);var aNodes=jindo.$$("> ."+this.htClassName.sNode,elDummy);this._setData(elDummy,aDatas);return aNodes},getNodeRawData:function(elNode){return this.getNodeData(elNode)},getSelectCount:function(){return this}}).extend(jindo.UIComponent);jindo.DynamicTree=jindo.$Class({$init:function(el,htOption){var htDefaultOption={sUrl:"",sRequestType:"jsonp",sRequestMethod:"get",htRequestParameter:{}};this.option(htDefaultOption);this.option(htOption||{});this._attachEvents();this._initAjax()},_attachEvents:function(){var self=this;this.attach("beforeExpand",function(oCustomEvent){var el=oCustomEvent.element;var self=this;if(self.getNodeData(el).hasOwnProperty("_aChildren")&&self.getNodeData(el)._aChildren.length){return}var htRequestParameter=self.option("htRequestParameter");htRequestParameter.key=self._getNodeDataKey(el);var htParam={element:el,htRequestParameter:htRequestParameter};if(self.fireEvent("request",htParam)){self._request(htParam.htRequestParameter)}else{oCustomEvent.stop()}})},_initAjax:function(){var htOption=this.option();var sPrefix=this.option("sClassPrefix");var sUrl=htOption.sUrl;var self=this;this._oAjax=jindo.$Ajax(sUrl,{type:htOption.sRequestType,method:htOption.sRequestMethod,onload:function(oResponse){try{var htParam={htResponseJSON:oResponse.json()};if(!self.fireEvent("response",htParam)){return}var elNode=self.createNode(htParam.htResponseJSON.aChildren);var elTargetNode=jindo.$$.getSingle("."+htParam.htResponseJSON.sKey,self.getRootList());if(self.getChildListOfNode(elTargetNode)){return}self.appendNode(elTargetNode,elNode);jindo.$A(elNode).forEach(function(el){if(jindo.$$.getSingle("."+sPrefix+"has-child",el)){jindo.$Element(el).addClass(sPrefix+"collapsed")}})}catch(e){}}})},_request:function(htRequestParameter){this._oAjax.abort();this._oAjax.request(htRequestParameter)},hasChild:function(elNode){return this._htNodeData[this._getNodeDataKey(elNode)]["bHasChild"]||(this.getChildNodes(elNode).length>0)},_makeNodeData:function(elNode){var oNodeData=this.getNodeData(elNode);oNodeData.bHasChild=false;if(jindo.$Element(this.getPartsOfNode(elNode).elItem).hasClass(this.option("sClassPrefix")+"has-child")){oNodeData.bHasChild=true}this.$super._makeNodeData(elNode)}}).extend(jindo.Tree);jindo.FileUploader=jindo.$Class({_bIsActivating:false,_aHiddenInput:[],$init:function(elFileSelect,htOption){var htDefaultOption={sUrl:"",sCallback:"",htData:{},sFiletype:"*",sMsgNotAllowedExt:"업로드가 허용되지 않는 파일형식입니다",bAutoUpload:false,bAutoReset:true,bActivateOnload:true};this.option(htDefaultOption);this.option(htOption||{});this._el=jindo.$(elFileSelect);this._wel=jindo.$Element(this._el);this._elForm=this._el.form;this._aHiddenInput=[];this.constructor._oCallback={};this._wfChange=jindo.$Fn(this._onFileSelectChange,this);this._sFunctionName=null;if(this.option("bActivateOnload")){this.activate()}},_appendIframe:function(){var sIframeName="tmpFrame_"+this._makeUniqueId();this._welIframe=jindo.$Element(jindo.$('<iframe name="'+sIframeName+'" src="">')).css({position:"absolute",width:"1px",height:"1px",left:"-100px",top:"-100px"});document.body.appendChild(this._welIframe.$value())},_removeIframe:function(){if(this._welIframe){this._welIframe.leave()}},getBaseElement:function(){return this.getFileSelect()},getFileSelect:function(){return this._el},getFormElement:function(){return this._elForm},upload:function(){this._appendIframe();var elForm=this.getFormElement(),welForm=jindo.$Element(elForm),sIframeName=this._welIframe.attr("name"),sFunctionName=this._sFunctionName=sIframeName+"_func",sAction=this.option("sUrl");welForm.attr({target:sIframeName,action:sAction});this._aHiddenInput.push(this._createElement("input",{type:"hidden",name:"callback",value:this.option("sCallback")}));this._aHiddenInput.push(this._createElement("input",{type:"hidden",name:"callback_func",value:sFunctionName}));for(var k in this.option("htData")){this._aHiddenInput.push(this._createElement("input",{type:"hidden",name:k,value:this.option("htData")[k]}))}for(var i=0;i<this._aHiddenInput.length;i++){elForm.appendChild(this._aHiddenInput[i])}this.constructor._oCallback[sFunctionName+"_success"]=jindo.$Fn(function(oParameter){if(this.option("bAutoReset")){this.reset()}this._revertFormAttr();this.fireEvent("success",{htResult:oParameter});this._clear()},this).bind();this.constructor._oCallback[sFunctionName+"_error"]=jindo.$Fn(function(oParameter){if(this.option("bAutoReset")){this.reset()}this._revertFormAttr();this.fireEvent("error",{htResult:oParameter});this._clear()},this).bind();elForm.submit()},reset:function(){var elWrapForm=jindo.$("<form>");this._wel.wrap(elWrapForm);elWrapForm.reset();jindo.$Element(elWrapForm).replace(this._el);var oNav=jindo.$Agent().navigator();if(oNav.ie&&oNav.version<=10){var elForm=this.getFormElement();elForm.type="radio";elForm.type="file"}this._clear();return this},_revertFormAttr:function(){var elForm=this.getFormElement(),welForm=jindo.$Element(elForm);welForm.attr({target:this._sPrevTarget,action:this._sAction})},_onActivate:function(){var elForm=this.getFormElement(),welForm=jindo.$Element(elForm);this._sPrevTarget=welForm.attr("target");this._sAction=welForm.attr("action");this._el.value="";this._wfChange.attach(this._el,"change")},_onDeactivate:function(){this._wfChange.detach(this._el,"change")},_makeUniqueId:function(){return new Date().getMilliseconds()+Math.floor(Math.random()*100000)},_createElement:function(name,attributes){var el=jindo.$("<"+name+">");var wel=jindo.$Element(el);for(var k in attributes){wel.attr(k,attributes[k])}return el},_checkExtension:function(sFile){var aType=this.option("sFiletype").split(";");for(var i=0,sType;i<aType.length;i++){sType=(aType[i]=="*.*")?"*":aType[i];sType=sType.replace(/^\s+|\s+$/,"");sType=sType.replace(/\./g,"\\.");sType=sType.replace(/\*/g,"[^\\/]+");if((new RegExp(sType+"$","gi")).test(sFile)){return true}}return false},_onFileSelectChange:function(we){var sValue=we.element.value,bAllowed=this._checkExtension(sValue),htParam={sValue:sValue,bAllowed:bAllowed,sMsgNotAllowedExt:this.option("sMsgNotAllowedExt")};if(sValue.length&&this.fireEvent("select",htParam)){if(bAllowed){if(this.option("bAutoUpload")){this.upload()}}else{alert(htParam.sMsgNotAllowedExt)}}},_clear:function(){if(this._sFunctionName!=null){delete this.constructor._oCallback[this._sFunctionName+"_success"];delete this.constructor._oCallback[this._sFunctionName+"_error"];this._sFunctionName=null}for(var i=0,length=this._aHiddenInput.length;i<length;i++){jindo.$Element(this._aHiddenInput[i]).leave()}this._aHiddenInput.length=0;this._removeIframe()}}).extend(jindo.UIComponent);jindo.FloatingLayer=jindo.$Class({$init:function(el,htOption){this._el=jindo.$(el);this._wel=jindo.$Element(el);this.option({nDelay:0,nDuration:500,fEffect:jindo.Effect.easeOut,bActivateOnload:true});this.option(htOption||{});this._htPos=this._getPosition();this._oTransition=new jindo.Transition().fps(60);this._oTimer=new jindo.Timer();this._wfScroll=jindo.$Fn(this._onScroll,this);if(this.option("bActivateOnload")){this.activate()}},getTransition:function(){return this._oTransition},getTimer:function(){return this._oTimer},_onActivate:function(){var self=this;setTimeout(function(){self._onScroll()},0);this._wfScroll.attach(window,"scroll").attach(window,"resize")},_onDeactivate:function(){this._wfScroll.detach(window,"scroll").detach(window,"resize")},_getPosition:function(){var el=this._el,wel=this._wel,sLeft=el.style.left,sRight=el.style.right,sTop=el.style.top,sBottom=el.style.bottom,htPos={sAlignX:sLeft?"left":(sRight?"right":null),sAlignY:sTop?"top":(sBottom?"bottom":null)},htOffset=wel.offset(),htClientSize=jindo.$Document().clientSize();switch(htPos.sAlignX){case"left":htPos.nX=htOffset.left;break;case"right":htPos.nX=Math.max(htClientSize.width-htOffset.left-wel.width(),parseFloat(sRight));break}switch(htPos.sAlignY){case"top":htPos.nY=htOffset.top;break;case"bottom":htPos.nY=Math.max(htClientSize.height-htOffset.top-wel.height(),parseFloat(sBottom));break}return htPos},_onScroll:function(){var self=this;this._oTimer.start(function(){self._paint()},this.option("nDelay"))},_paint:function(){var oDoc=document.documentElement||document,elBody=document.body,el=this._el,wel=this._wel,htPos=this._htPos,htScrollPos={},htOffset=jindo.$Element(el).offset(),nPosX,nPosY,htParam={nX:null,nY:null};if(htPos.sAlignX){switch(htPos.sAlignX){case"left":htScrollPos.x=oDoc.scrollLeft||elBody.scrollLeft;nPosX=htOffset.left-htScrollPos.x;break;case"right":htScrollPos.x=(oDoc.scrollLeft||elBody.scrollLeft)+jindo.$Document().clientSize().width;nPosX=htScrollPos.x-(htOffset.left+wel.width());break}htParam.nX=parseFloat(wel.css(htPos.sAlignX))+(htPos.nX-nPosX)}if(htPos.sAlignY){switch(htPos.sAlignY){case"top":htScrollPos.y=oDoc.scrollTop||elBody.scrollTop;nPosY=htOffset.top-htScrollPos.y;break;case"bottom":htScrollPos.y=(oDoc.scrollTop||elBody.scrollTop)+jindo.$Document().clientSize().height;nPosY=htScrollPos.y-(htOffset.top+wel.height());break}htParam.nY=parseFloat(wel.css(htPos.sAlignY))+(htPos.nY-nPosY)}if(this.fireEvent("beforeMove",htParam)){var htTransition={},fEffect=this.option("fEffect");if(htParam.nX!==null){htTransition["@"+htPos.sAlignX]=fEffect(htParam.nX+"px")}if(htParam.nY!==null){htTransition["@"+htPos.sAlignY]=fEffect(htParam.nY+"px")}var self=this;this._oTransition.abort().start(this.option("nDuration"),el,htTransition).start(function(){self.fireEvent("move")})}}}).extend(jindo.UIComponent);jindo.Foggy=jindo.$Class({_elFog:null,_bFogAppended:false,_oExcept:null,_bFogVisible:false,_bFogShowing:false,_oTransition:null,$init:function(htOption){this.option({sClassName:"fog",nShowDuration:200,nShowOpacity:0.5,nHideDuration:200,nHideOpacity:0,fShowEffect:jindo.Effect.linear,fHideEffect:jindo.Effect.linear,nFPS:15,nZIndex:32000});this.option(htOption||{});this._elFog=jindo.$('<div class="'+this.option("sClassName")+'">');this._welFog=jindo.$Element(this._elFog);document.body.insertBefore(this._elFog,document.body.firstChild);this._welFog.opacity(this.option("nHideOpacity"));this._welFog.hide();this._oExcept={};this._oTransition=new jindo.Transition().fps(this.option("nFPS"));this._fOnResize=jindo.$Fn(this._fitFogToDocument,this);this._fOnScroll=jindo.$Fn(this._fitFogToDocumentScrollSize,this)},_getScroll:function(wDocument){return{top:window.pageYOffset||document[wDocument._docKey].scrollTop,left:window.pageXOffset||document[wDocument._docKey].scrollLeft}},_fitFogToDocument:function(){var wDocument=jindo.$Document();this._elFog.style.left=this._getScroll(wDocument).left+"px";this._elFog.style.width="100%";var self=this;clearTimeout(this._nTimer);this._nTimer=null;this._nTimer=setTimeout(function(){var oSize=wDocument.clientSize();self._elFog.style.top=self._getScroll(wDocument).top+"px";self._elFog.style.height=oSize.height+"px";self._elFog.style.left=self._getScroll(wDocument).left+"px"},100)},_fitFogToDocumentScrollSize:function(){var oSize=jindo.$Document().scrollSize();this._elFog.style.left="0";this._elFog.style.top="0";this._elFog.style.width=oSize.width+"px";this._elFog.style.height=oSize.height+"px"},getFog:function(){return this._elFog},isShown:function(){return this._bFogVisible},isShowing:function(){return this._bFogShowing},show:function(elExcept){if(!this._bFogVisible){if(this.fireEvent("beforeShow")){if(elExcept){this._oExcept.element=elExcept;var sPosition=jindo.$Element(elExcept).css("position");if(sPosition=="static"){elExcept.style.position="relative"}this._oExcept.position=elExcept.style.position;this._oExcept.zIndex=elExcept.style.zIndex;elExcept.style.zIndex=this.option("nZIndex")+1}this._elFog.style.zIndex=this.option("nZIndex");this._elFog.style.display="none";this._fitFogToDocument();this._fOnResize.attach(window,"resize");this._fOnScroll.attach(window,"scroll");this._elFog.style.display="block";if(elExcept){elExcept.style.zoom=1;elExcept.style.zoom=""}var self=this;this._bFogShowing=true;this._oTransition.abort().start(this.option("nShowDuration"),this._elFog,{"@opacity":this.option("fShowEffect")(this.option("nShowOpacity"))}).start(function(){self._bFogVisible=true;self._bFogShowing=false;self.fireEvent("show")})}}},hide:function(){if(this._bFogVisible||this._bFogShowing){if(this.fireEvent("beforeHide")){var self=this;this._oTransition.abort().start(this.option("nHideDuration"),this._elFog,{"@opacity":this.option("fHideEffect")(this.option("nHideOpacity"))}).start(function(){self._elFog.style.display="none";var elExcept=self._oExcept.element;if(elExcept){elExcept.style.position=self._oExcept.position;elExcept.style.zIndex=self._oExcept.zIndex}self._oExcept={};self._fOnResize.detach(window,"resize");self._fOnScroll.detach(window,"scroll");self._bFogVisible=false;self.fireEvent("hide")})}}}}).extend(jindo.Component);jindo.TextRange=jindo.$Class({$init:function(el,htOption){this.option({bActivateOnload:true});this.option(htOption||{});this._el=jindo.$(el);this._bFocused=false;this._wfFocus=jindo.$Fn(function(){this._bFocused=true},this);this._wfBlur=jindo.$Fn(function(){this._bFocused=false},this);if(this.option("bActivateOnload")){this.activate()}},_onActivate:function(){this._wfFocus.attach(this._el,"focus").attach(this._el,"keydown");this._wfBlur.attach(this._el,"blur")},_onDeactivate:function(){this._wfFocus.detach(this._el,"focus").detach(this._el,"keydown");this._wfBlur.detach(this._el,"blur")},hasFocus:function(){return this._bFocused},getSelection:function(){var el=this._el;var aSelection=[-1,-1];var sNormalizedValue,oTextInputRange,oEndRange,nStart,nEnd,nLen;if(isNaN(this._el.selectionStart)){var oRange=document.selection.createRange();if(oRange&&oRange.parentElement()==el){nLen=el.value.length;sNormalizedValue=el.value.replace(/\r\n/g,"\n");oTextInputRange=el.createTextRange();oTextInputRange.moveToBookmark(oRange.getBookmark());oEndRange=el.createTextRange();oEndRange.collapse(false);if(oTextInputRange.compareEndPoints("StartToEnd",oEndRange)>-1){nStart=nEnd=nLen}else{nStart=-oTextInputRange.moveStart("character",-nLen);nStart+=sNormalizedValue.slice(0,nStart).split("\n").length-1;if(oTextInputRange.compareEndPoints("EndToEnd",oEndRange)>-1){nEnd=nLen}else{nEnd=-oTextInputRange.moveEnd("character",-nLen);nEnd+=sNormalizedValue.slice(0,nEnd).split("\n").length-1}}}}else{nStart=el.selectionStart;nEnd=el.selectionEnd}return[nStart,nEnd]},setSelection:function(nStart,nEnd){var el=this._el;if(typeof nEnd=="undefined"){nEnd=nStart}if(el.setSelectionRange){el.setSelectionRange(nStart,nEnd)}else{if(el.createTextRange){var oRange=el.createTextRange();oRange.collapse(true);oRange.moveStart("character",nStart);oRange.moveEnd("character",nEnd-nStart);oRange.select()}}},copy:function(){if(!this._bFocused){this._el.focus()}var aSelection=this.getSelection();return this._el.value.substring(aSelection[0],aSelection[1])},paste:function(sStr){if(!this._bFocused){this._el.focus()}var el=this._el,aSelection=this.getSelection(),sValue=el.value,sPre=sValue.substr(0,aSelection[0]),sPost=sValue.substr(aSelection[1]);sValue=sPre+sStr+sPost;el.value=sValue;this.setSelection(aSelection[0]+sStr.length)},cut:function(){var s=this.copy();this.paste("");return s}}).extend(jindo.UIComponent);jindo.WatchInput=jindo.$Class({_bTimerRunning:false,_bFocused:false,_sPrevValue:"",$init:function(sInputId,htOption){var htDefaultOption={nInterval:100,bUseTimerOnIE:false,sKeyEvent:"keyup",bPermanent:false,bActivateOnload:true};this.option(htDefaultOption);this.option(htOption||{});this._elInput=jindo.$(sInputId);this._oTimer=new jindo.Timer();this._bIE=jindo.$Agent().navigator().ie;this._wfFocus=jindo.$Fn(this._onFocus,this);this._wfBlur=jindo.$Fn(this._onBlur,this);this._wfKeyEvent=jindo.$Fn(this._onKeyEvent,this);this._wfStartTimer=jindo.$Fn(this._startTimer,this);this._wfStopTimer=jindo.$Fn(this._stopTimer,this);if(this.option("bActivateOnload")){this.activate(true)}},getInput:function(){return this._elInput},setInputValue:function(s){this.getInput().value=s;this.setCompareValue(s);return this},getCompareValue:function(){return this._sPrevValue},setCompareValue:function(s){this._sPrevValue=s;return this},fireChangeEvent:function(){var elInput=this.getInput(),sValue=elInput.value;this.setCompareValue(sValue);this.fireEvent("change",{elInput:elInput,sText:sValue});return this},start:function(bCompareOnce){return this.activate(bCompareOnce||false)},stop:function(){return this.deactivate()},_onActivate:function(bCompareOnce){this.setCompareValue("");var elInput=this.getInput();this._wfFocus.attach(elInput,"focus");if(this._bIE&&!this.option("bUseTimerOnIE")){this.fireEvent("start");this._wfKeyEvent.attach(elInput,this.option("sKeyEvent"))}else{if(this._isTimerRunning()){return}this.fireEvent("start");if(this.option("bPermanent")){this._startTimer()}else{this._wfStartTimer.attach(elInput,"focus");this._wfStopTimer.attach(elInput,"blur")}}this._wfBlur.attach(elInput,"blur");if(bCompareOnce||false){this.compare()}},_onDeactivate:function(){var elInput=this.getInput();this._wfFocus.detach(elInput,"focus");this._wfKeyEvent.detach(elInput,this.option("sKeyEvent"));this._stopTimer();this._wfStartTimer.detach(elInput,"focus");this._wfStopTimer.detach(elInput,"blur");this._wfBlur.detach(elInput,"blur");this.fireEvent("stop")},getInterval:function(){return this.option("nInterval")},setInterval:function(n){this.option("nInterval",n);return this},_isTimerRunning:function(){return this._bTimerRunning},_startTimer:function(){if(this._isTimerRunning()){return}this._bTimerRunning=true;this.fireEvent("timerStart");this.compare();var self=this;this._oTimer.start(function(){self.compare();return true},this.getInterval())},_stopTimer:function(){if(this._isTimerRunning()){this._oTimer.abort();this._bTimerRunning=false;this.compare();this.fireEvent("timerStop")}},_onKeyEvent:function(){this.compare()},_onFocus:function(){this._bFocused=true;this.fireEvent("focus")},_onBlur:function(){this._bFocused=false;this.fireEvent("blur")},compare:function(){if(this.getInput().value!=this.getCompareValue()){this.fireChangeEvent()}return this}}).extend(jindo.UIComponent);jindo.Formatter=jindo.$Class({_aMarks:["\u0000","\uFFFF"],_sPrevValue:null,_oTextRange:null,_bFakeFocus:false,$init:function(el,htOption){this._el=jindo.$(el);this.option({bPaintOnload:true,bActivateOnload:true,WatchInput:{nInterval:100,bPermanent:true,bActivateOnload:false}});this.option(htOption||{});this.isOpera=jindo.$Agent().navigator.opera;var self=this;this._wfRealBlur=jindo.$Fn(this._realBlur,this);this._wfRealFocus=jindo.$Fn(this._realFocus,this);this._oTextRange=new jindo.TextRange(el);this._oWatchInput=new jindo.WatchInput(el,this.option("WatchInput")).attach({change:function(oCustomEvent){setTimeout(function(){self.paint()},1)}});if(this.option("bPaintOnload")){setTimeout(function(){self.paint()},1)}if(this.option("bActivateOnload")){this.activate()}},getWatchInput:function(){return this._oWatchInput},_splice:function(sStr,nIndex,nHowMany,sInsert){return sStr.slice(0,nIndex)+sInsert+sStr.slice(nIndex+nHowMany)},setValue:function(s){this._el.value=s;this.paint();return this},paint:function(){var el=this._el,oTextRange=this._oTextRange,aMark=this._aMarks,sText=el.value.toString(),bFocus=oTextRange.hasFocus(),aSel,htParam;if(bFocus){aSel=[-1,-1];try{aSel=oTextRange.getSelection()}catch(e){}sText=this._splice(this._splice(sText,aSel[1],0,aMark[1]),aSel[0],0,aMark[0])}htParam={elInput:el,sText:sText,sStartMark:aMark[0],sEndMark:aMark[1]};if(this.fireEvent("beforeChange",htParam)){var sOutput=htParam.sText;if(bFocus){var nPos=sOutput.indexOf(aMark[0]);if(nPos>-1){sOutput=this._splice(sOutput,nPos,1,"")}aSel=[nPos];aSel[1]=sOutput.indexOf(aMark[1]);if(aSel[1]>-1){sOutput=this._splice(sOutput,aSel[1],1,"")}var self=this;setTimeout(function(){self._bFakeFocus=true;(!this.isOpera)||el.blur()},1);setTimeout(function(){self._oWatchInput.setInputValue(sOutput);el.focus();try{oTextRange.setSelection(aSel[0],aSel[1])}catch(e){}self.fireEvent("change",{elInput:el})},2);setTimeout(function(){self._bFakeFocus=false},20)}else{this._oWatchInput.setInputValue(sOutput);this.fireEvent("change",{elInput:el})}}return this},_realBlur:function(){if(!this._bFakeFocus){this.getWatchInput().stop();this.fireEvent("blur",{elInput:this._el})}},_realFocus:function(){if(!this._bFakeFocus){this.getWatchInput().start(true);this.fireEvent("focus",{elInput:this._el})}},_onActivate:function(){this._wfRealBlur.attach(this._el,"blur");this._wfRealFocus.attach(this._el,"focus")},_onDeactivate:function(){this._wfRealBlur.detach(this._el,"blur");this._wfRealFocus.detach(this._el,"focus")}}).extend(jindo.UIComponent);jindo.InlineTextEdit=jindo.$Class({_bIsEditing:false,$init:function(htOption){var htDefaultOption={elInput:jindo.$('<input type="text">'),bHandleBlur:true,bHandleKeyDown:true};this.option(htDefaultOption);this.option(htOption||{});this._wfBlur=jindo.$Fn(this._onBlur,this);this._wfKeyDown=jindo.$Fn(this._onKeyDown,this)},getTextInput:function(){return this._getTextInput().$value()},_getTextInput:function(){if(this._welInput&&this._welInput.$value()){return this._welInput}else{return(this._welInput=jindo.$Element(this.option("elInput")))}},_resize:function(elFrom,elTo){var wel=jindo.$Element(elFrom);var welTo=jindo.$Element(elTo);welTo.width(wel.width()).height(wel.height())},isEditing:function(){return this._bIsEditing},edit:function(el,elGetSizeFrom){var wel=jindo.$Element(el),welInput=this._getTextInput(),elInput=welInput.$value();this._welHidden=wel;wel.after(elInput);this._resize(elGetSizeFrom||el,elInput);wel.hide();elInput.value=wel.text();elInput.focus();this._bIsEditing=true;if(this.option("bHandleBlur")){this._wfBlur.attach(elInput,"blur")}if(this.option("bHandleKeyDown")){this._wfKeyDown.attach(elInput,"keydown")}return this},apply:function(){if(this.isEditing()){var welInput=this._getTextInput(),elInput=welInput.$value(),sText=elInput.value,htCustomEvent={sText:sText,elInput:elInput,elText:this._welHidden.$value()};if(this._welHidden.text()!=sText&&this.fireEvent("beforeChange",htCustomEvent)){this._welHidden.text(htCustomEvent.sText).show();this._bIsEditing=false;this.fireEvent("change",htCustomEvent)}else{this._welHidden.show()}this._wfBlur.detach(elInput,"blur").detach(elInput,"keydown");welInput.leave()}return this},cancel:function(){if(this.isEditing()){var welInput=this._getTextInput(),elInput=welInput.$value();this._welHidden.show();this._bIsEditing=false;this._wfBlur.detach(elInput,"blur").detach(elInput,"keydown");welInput.leave()}return this},_onBlur:function(we){this.apply()},_onKeyDown:function(we){switch(we.key().keyCode){case 27:this.cancel();break;case 13:if(this.getTextInput().tagName.toLowerCase()=="input"){this.apply()}break}}}).extend(jindo.Component);jindo.Keyframe=jindo.$Class({$init:function(oOptions){this._nCurRate=null;this._nCurIdx=null;this._aKeyframeLists=[];this._oPreprocessed=null;this._bPreprocessed=false;var oAgent=jindo.$Agent();var oOS=oAgent.os();var oNavigator=oAgent.navigator();this._bHasTransformRenderBug=oOS.ios&&parseInt(oOS.version,10)===5&&oNavigator.msafari;this.option({fEffect:jindo.Effect.linear});this.option(oOptions||{});this._fDefaultEffect=this.option("fEffect")()},_loop:function(bAsync,nLen,fBody,fDone){(function loop(i){fBody(i);if(++i<nLen){if(bAsync){(window.requestAnimationFrame||window.setTimeout)(function(){loop(i)},1000/60)}else{loop(i)}return}fDone()})(0)},_preprocessKeyframes:function(bPreprocessAsync){if(this._bPreprocessed){this.fireEvent("preprocessEnd");return}if(this._oPreprocessed){return}this._oPreprocessed={objs:{},frames:null};var aBefore=this._aKeyframeLists.sort(function(a,b){return a.rate-b.rate});var oAfter={},aAfter=[];var oIngFrame={};var oFirstFrame={};var self=this;var step1=function(){self._loop(bPreprocessAsync,aBefore.length,function(i){var oFrame=aBefore[i];var nRate=oFrame.rate;var sObjKey;var oVals=self._toPropObj(oFrame.propLists);var oPreprocessedFrame=oAfter[nRate]={rate:nRate,dynamic:{},"static":{}};aAfter.push(oPreprocessedFrame);for(sObjKey in oVals){if(oVals.hasOwnProperty(sObjKey)){var nEndRate=nRate;var vEndVal=oVals[sObjKey];var fEffect=self._fDefaultEffect;if(typeof vEndVal==="function"){fEffect=vEndVal;vEndVal=vEndVal.end}var oIng=oIngFrame[sObjKey];if(oIng){oIng.effect=fEffect;oIng.rates[1]=nEndRate;oIng.vals[1]=vEndVal;if(fEffect.effectConstructor===jindo.Effect.stepEnd){oIng.vals[1]=oIng.vals[0]}else{if(fEffect.effectConstructor===jindo.Effect.stepStart){oIng.vals[0]=oIng.vals[1]}}}if(!(sObjKey in oFirstFrame)){oFirstFrame[sObjKey]=vEndVal}oIng=oIngFrame[sObjKey]={effect:null,rates:[nEndRate],vals:[vEndVal]}}}for(sObjKey in oIngFrame){if(oIngFrame.hasOwnProperty(sObjKey)){oAfter[nRate]["dynamic"][sObjKey]=oIngFrame[sObjKey]}}},step2)};var step2=function(){self._loop(bPreprocessAsync,aAfter.length,function(i){var oFrame=aAfter[i];for(var sObjKey in oFirstFrame){if(oFirstFrame.hasOwnProperty(sObjKey)){if(sObjKey in oFrame.dynamic){continue}oFrame["static"][sObjKey]=oFirstFrame[sObjKey]}}},step3)};var step3=function(){if(!oAfter[0]){oAfter[0]={rate:0,dynamic:{},"static":oFirstFrame};aAfter.unshift(oAfter[0])}self._oPreprocessed.frames=aAfter;var oCache=self._oPreprocessed.objs;for(var sObjKey in oCache){if(oCache.hasOwnProperty(sObjKey)){try{delete oCache[sObjKey].__KEYFRAME_UNIQ}catch(e){oCache[sObjKey].__KEYFRAME_UNIQ=undefined}}}oAfter=null;self._bPreprocessed=true;self.fireEvent("preprocessEnd")};step1()},preprocess:function(bPreprocessAsync){this._preprocessKeyframes(!!bPreprocessAsync);return this},_getPropLists:function(nRate,bIncludeStatic){var aPreprocessedLists=this._oPreprocessed.frames;var nDstIdx=aPreprocessedLists.length-1;for(var i=0,oFrame;oFrame=aPreprocessedLists[i];i++){if(oFrame.rate>nRate){nDstIdx=Math.max(0,i-1);break}}var oDstLists=aPreprocessedLists[nDstIdx];var oPropLists={};this._getDynamicProps(oPropLists,nRate,oDstLists);if(bIncludeStatic||this._nCurIdx!==nDstIdx){this._getStaticProps(oPropLists,nRate,oDstLists)}this._nCurIdx=nDstIdx;return oPropLists},_get:function(nRate,bIncludeStatic){if(!this._bPreprocessed){throw new Error("First, you need to call preprocess().")}var oPropLists=this._getPropLists(nRate,bIncludeStatic);var oCache=this._oPreprocessed.objs;var oObj,oProps;var aRet=[];for(var sObj in oPropLists){if(oPropLists.hasOwnProperty(sObj)){oObj=oCache[sObj];oProps=oPropLists[sObj];aRet.push(oObj,oProps)}}return aRet},get:function(nRate){return this._get(nRate,true)},frame:function(nRate,bAll){if(!bAll&&nRate===this._nCurRate){return}var bHasTransformRenderBug=this._bHasTransformRenderBug;var aLists=this._get(nRate,bAll);var oObj,oProps,welObj,vProp;var fp=null;var self=this;for(var i=0,nLen=aLists.length;i<nLen;i+=2){oObj=aLists[i];oObj=typeof oObj==="function"?oObj():oObj;oProps=aLists[i+1];fp=fp||function(oObj,oProps){welObj=jindo.$Element(oObj);for(var sKey in oProps){if(oProps.hasOwnProperty(sKey)){vProp=oProps[sKey];if(/^@(.*)$/.test(sKey)){sKey=RegExp.$1;if(/transition/.test(sKey)){vProp=self._getCSSVal(vProp)}if(bHasTransformRenderBug&&"@transform"===sKey&&("@left" in oProps||"@top" in oProps)){oObj.clientHeight}try{welObj.css(self._getCSSKey(sKey),vProp)}catch(e){if(!welObj||!welObj.$value()||!sKey){throw e}}}else{oObj[sKey]=vProp}}}};if(oObj instanceof Array){for(var j=0,nJen=oObj.length;j<nJen;j++){fp(oObj[j],oProps)}}else{fp(oObj,oProps)}}this._nCurRate=nRate},_getStaticProps:function(oOutProps,nRate,oDstLists){var oStaticPropLists=oDstLists["static"];for(var sObjKey in oStaticPropLists){if(/^(.+):(.+)$/.test(sObjKey)){var sObj=RegExp.$1;var sKey=RegExp.$2;var vProp=oStaticPropLists[sObjKey];oOutProps[sObj]=oOutProps[sObj]||{};oOutProps[sObj][sKey]=vProp}}},_getDynamicProps:function(oOutProps,nRate,oDstLists){var oDynamicPropLists=oDstLists.dynamic;var oStaticPropLists=oDstLists["static"];var aDeleteObjKey=[];for(var sObjKey in oDynamicPropLists){if(/^(.+):(.+)$/.test(sObjKey)){var sObj=RegExp.$1;var sKey=RegExp.$2;var vProp=oDynamicPropLists[sObjKey];var fEffect=vProp.effect;var vStart=vProp.vals[0];var vEnd=vProp.vals[1];if(!fEffect||vStart===vEnd){oStaticPropLists[sObjKey]=vStart;aDeleteObjKey.push(sObjKey);continue}fEffect.start=vStart;fEffect.end=vEnd;if(/^@transform/.test(sKey)){fEffect=this._getTransformFunction(fEffect)}var nEffectRate=Math.max(0,Math.min(1,(nRate-vProp.rates[0])/(vProp.rates[1]-vProp.rates[0])));try{vProp=fEffect(nEffectRate)}catch(e){if(!/^unit error/.test(e.message)){throw e}oStaticPropLists[sObjKey]=vStart;aDeleteObjKey.push(sObjKey);continue}oOutProps[sObj]=oOutProps[sObj]||{};oOutProps[sObj][sKey]=vProp}}for(var i=0,nLen=aDeleteObjKey.length;i<nLen;i++){delete oDynamicPropLists[aDeleteObjKey[i]]}aDeleteObjKey.length=null},_toPropObj:function(aPropLists){var oRet={};var oCache=this._oPreprocessed.objs;function fpGetString(oObj){var sRand;if(typeof oObj==="object"){sRand=oObj.__KEYFRAME_UNIQ=oObj.__KEYFRAME_UNIQ||Math.floor(Math.random()*new Date().getTime())+""}else{for(var k in oCache){if(oCache.hasOwnProperty(k)){if(oCache[k]===oObj){return k}}}sRand=Math.floor(Math.random()*new Date().getTime())+""}oCache[sRand]=oObj;return sRand}for(var i=0,nLen=aPropLists.length;i<nLen;i+=2){var oObj=aPropLists[i];if(!oObj){continue}var oProps=aPropLists[i+1];var sObj=fpGetString(oObj);for(var k in oProps){if(oProps.hasOwnProperty(k)){oRet[sObj+":"+k]=oProps[k]}}}return oRet},_oProperPrefix:{},_getProperPrefix:function(sType){var oProperPrefix=this._oProperPrefix;if(sType in oProperPrefix){return oProperPrefix[sType]}var oBodyStyle=document.body.style;var aPrefix=["webkit","","Moz","O","ms"];var sPrefix,sFullType;var fReplacer=function(s){return s.toUpperCase()};for(var i=0,nLen=aPrefix.length;i<nLen;i++){sPrefix=aPrefix[i];sFullType=sPrefix+(sPrefix?sType.replace(/^[a-z]/,fReplacer):sType);if(sFullType in oBodyStyle){return(oProperPrefix[sType]=sPrefix)}}return(oProperPrefix[sType]="")},_getCSSKey:function(sName){var self=this;var sPrefix="";var sFullname=sName.replace(/^(\-(webkit|o|moz|ms)\-)?([a-z]+)/,function(_,__,_sPrefix,sType){sPrefix=_sPrefix||self._getProperPrefix(sType);if(sPrefix){sType=sType.replace(/^[a-z]/,function(s){return s.toUpperCase()})}return sType}).replace(/\-(\w)/g,function(_,sChar){return sChar.toUpperCase()});return(({o:"O",moz:"Moz",webkit:"Webkit"})[sPrefix]||sPrefix)+sFullname},_getCSSVal:function(sName){var self=this;var sFullname=sName.replace(/(^|\s)(\-(webkit|moz|o|ms)\-)?([a-z]+)/g,function(_,sHead,__,sPrefix,sType){sPrefix=sPrefix||self._getProperPrefix(sType);return sHead+(sPrefix&&"-"+sPrefix+"-")+sType});return sFullname},set:function(nRate,aPropLists){this._aKeyframeLists.push({rate:nRate,propLists:aPropLists});this._oPreprocessed=null;this._bPreprocessed=false;this._nCurIdx=null;return this},_parseTransformText:function(sText){sText=sText||"";var oRet={};sText.replace(/([\w\-]+)\(([^\)]*)\)/g,function(_,sKey,sVal){var aVal=sVal.split(/\s*,\s*/);switch(sKey){case"translate3d":case"scale3d":case"skew3d":sKey=sKey.replace(/3d$/,"");oRet[sKey+"Z"]=aVal[2];case"translate":case"scale":case"skew":oRet[sKey+"X"]=aVal[0];if(typeof aVal[1]==="undefined"){if(sKey==="scale"){oRet[sKey+"Y"]=aVal[0]}}else{oRet[sKey+"Y"]=aVal[1]}break;default:oRet[sKey]=aVal.join(",");break}});return oRet},_getTransformFunction:function(fEffect){var sKey;var vDepa=fEffect.start;var vDest=fEffect.end;var oDepa=this._parseTransformText(vDepa);var oDest=this._parseTransformText(vDest);var oProp={};for(sKey in oDepa){if(oDepa.hasOwnProperty(sKey)){oProp[sKey]=[oDepa[sKey],oDest[sKey]||(/^scale/.test(sKey)?1:0)]}}for(sKey in oDest){if(oDest.hasOwnProperty(sKey)&&!(sKey in oDepa)){oProp[sKey]=[oDepa[sKey]||(/^scale/.test(sKey)?1:0),oDest[sKey]]}}var fpFunc=function(nRate){var aRet=[];var aBackup=[fEffect.start,fEffect.end];for(var sKey in oProp){if(oProp.hasOwnProperty(sKey)){fEffect.start=oProp[sKey][0];fEffect.end=oProp[sKey][1];aRet.push(sKey+"("+fEffect(nRate)+")")}}fEffect.start=aBackup[0];fEffect.end=aBackup[1];return aRet.join(" ")};fpFunc.start=vDepa;fpFunc.end=vDest;return fpFunc}}).extend(jindo.Component);jindo.LayerEffect=jindo.$Class({$init:function(el){this.setLayer(el);var self=this;this._htTransitionGetterSetter={getter:function(sKey){return jindo.$Element(self._el)[sKey]()},setter:function(sKey,nValue){jindo.$Element(self._el)[sKey](parseFloat(nValue))}}},getLayer:function(){return this._el},setLayer:function(el){this._el=jindo.$(el);this._wel=jindo.$Element(el);var elToMeasure=this._el.cloneNode(true);var welToMeasure=jindo.$Element(elToMeasure);welToMeasure.opacity(0);this._wel.after(welToMeasure);welToMeasure.show();this._sLayerCSSPosition=welToMeasure.css("position");var htOffset=welToMeasure.offset();welToMeasure.css({position:"absolute",top:"0px",left:"0px"});var htNewOffset=welToMeasure.offset();this._sLayerCSSLeft=htOffset.left-htNewOffset.left+"px";this._sLayerCSSTop=htOffset.top-htNewOffset.top+"px";this._sLayerBGColor=welToMeasure.css("backgroundColor");this._nLayerWidth=welToMeasure.width();this._nLayerHeight=welToMeasure.height();welToMeasure.width(this._nLayerWidth);welToMeasure.height(this._nLayerHeight);this._sLayerCSSWidth=welToMeasure.css("width");this._sLayerCSSHeight=welToMeasure.css("height");this._sLayerCSSOverflowX=this._wel.css("overflowX");this._sLayerCSSOverflowY=this._wel.css("overflowY");this._sLayerCSSFontSize=this._wel.css("fontSize");this._sLayerCSSFontSizeUnit=this._sLayerCSSFontSize.match(/^\-?[0-9\.]+(%|px|pt|em)?$/i)[1];welToMeasure.css({overflow:"hidden",width:0,height:0});this._nSlideMinWidth=welToMeasure.width()+1;this._nSlideMinHeight=welToMeasure.height()+1;welToMeasure.leave();return this},_transform:function(){this._wel.css({overflowX:"hidden",overflowY:"hidden"})},_restore:function(){this._wel.css({position:this._sLayerCSSPosition,overflowX:this._sLayerCSSOverflowX,overflowY:this._sLayerCSSOverflowY})},_fireEventBefore:function(bTransform){if(bTransform){this._transform()}return this.fireEvent("before",{elLayer:this.getLayer()})},_fireEventAppear:function(){this.fireEvent("appear",{elLayer:this.getLayer()})},_fireEventEnd:function(){this._restore();this.fireEvent("end",{elLayer:this.getLayer()})},_getTransition:function(){return(this._oTransition)?this._oTransition:this._oTransition=new jindo.Transition({bCorrection:true})},_afterHide:function(){this._wel.hide().opacity(1);this._wel.css({top:this._sLayerCSSTop,left:this._sLayerCSSLeft,width:this._sLayerCSSWidth,height:this._sLayerCSSHeight,fontSize:this._sLayerCSSFontSize})},_onShowTransitionEnd:function(oCustomEvent){this._getTransition().detach("end",arguments.callee);this._fireEventEnd()},_onHideTransitionEnd:function(oCustomEvent){this._getTransition().detach("end",arguments.callee);this._afterHide();this._fireEventEnd()},_getOption:function(htDefault,ht){for(var s in ht){htDefault[s]=ht[s]}return htDefault},fadeIn:function(htOption){htOption=this._getOption({nFPS:30,nDuration:500},htOption||{});var bVisible=this._wel.visible()&&this._wel.opacity()>0;if(bVisible){htOption.nDuration*=((1-this._wel.opacity())/1)}else{this._wel.opacity(0);this._wel.show()}if(htOption.nDuration>0){this._fireEventBefore(true);var self=this,oTransition=this._getTransition().fps(htOption.nFPS).abort().detachAll();oTransition.attach({playing:function(oCustomEvent){if(oCustomEvent.nStep===1){this.detach("playing",arguments.callee);if(!bVisible){self._fireEventAppear()}}},end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this)}).queue(htOption.nDuration,this._wel.$value(),{"@opacity":jindo.Effect.linear(1)});if(htOption.fCallback){oTransition.queue(jindo.$Fn(htOption.fCallback,this).bind(this))}oTransition.start()}return this},fadeOut:function(htOption){htOption=this._getOption({nFPS:30,nDuration:500},htOption||{});var bVisible=this._wel.visible()&&this._wel.opacity()>0;if(bVisible){this._fireEventBefore();htOption.nDuration*=(this._wel.opacity()/1);var oTransition=this._getTransition().fps(htOption.nFPS).abort().detachAll();oTransition.attach({end:jindo.$Fn(this._onHideTransitionEnd,this).bind(this)}).queue(htOption.nDuration,this._wel.$value(),{"@opacity":jindo.Effect.linear(0)});if(htOption.fCallback){oTransition.queue(jindo.$Fn(htOption.fCallback,this).bind(this))}oTransition.start()}return this},slideDown:function(htOption){htOption=this._getOption({nFPS:30,nDuration:500},htOption||{});var bVisible=this._wel.visible();if(Math.ceil(this._wel.height())<this._nLayerHeight){if(this._fireEventBefore(true)){if(!bVisible){this._wel.css("height",0).show().height(this._nSlideMinHeight)}else{htOption.nDuration=Math.ceil(htOption.nDuration*((this._nLayerHeight-this._wel.height())/(this._nLayerHeight-this._nSlideMinHeight)))}var self=this,oTransition=this._getTransition().fps(htOption.nFPS).abort().detachAll();oTransition.attach({playing:function(oCustomEvent){if(oCustomEvent.nStep===1){this.detach("playing",arguments.callee);if(!bVisible){self._fireEventAppear()}}},end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this)}).queue(htOption.nDuration,this._htTransitionGetterSetter,{height:jindo.Effect.cubicEaseOut(this._nLayerHeight)});if(htOption.fCallback){oTransition.queue(jindo.$Fn(htOption.fCallback,this).bind(this))}oTransition.start()}}return this},slideUp:function(htOption){htOption=this._getOption({nFPS:30,nDuration:500},htOption||{});var bVisible=this._wel.visible();if(bVisible){if(this._fireEventBefore(true)){htOption.nDuration=Math.ceil(htOption.nDuration*(this._wel.height()/this._nLayerHeight));var oTransition=this._getTransition().fps(htOption.nFPS).abort().detachAll();oTransition.attach({end:jindo.$Fn(this._onHideTransitionEnd,this).bind(this)}).queue(htOption.nDuration,this._htTransitionGetterSetter,{height:jindo.Effect.cubicEaseOut(this._nSlideMinHeight)});if(htOption.fCallback){oTransition.queue(jindo.$Fn(htOption.fCallback,this).bind(this))}oTransition.start()}}return this},grow:function(htOption){htOption=this._getOption({nFPS:30,nDuration:500},htOption||{});var bVisible=this._wel.visible();if(Math.ceil(this._wel.height())<this._nLayerHeight){if(this._fireEventBefore(true)){if(!bVisible){this._wel.css({width:0,height:0}).show().width(this._nSlideMinWidth).height(this._nSlideMinHeight)}else{htOption.nDuration=Math.ceil(htOption.nDuration*((this._nLayerHeight-this._wel.height())/(this._nLayerHeight-this._nSlideMinHeight)))}var self=this,oTransition=this._getTransition().fps(htOption.nFPS).abort().detachAll();oTransition.attach({playing:function(oCustomEvent){if(oCustomEvent.nStep===1){this.detach("playing",arguments.callee);if(!bVisible){self._fireEventAppear()}}},end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this)}).queue(htOption.nDuration,this._htTransitionGetterSetter,{width:jindo.Effect.cubicEaseOut(this._nLayerWidth),height:jindo.Effect.cubicEaseOut(this._nLayerHeight)});if(htOption.fCallback){oTransition.queue(jindo.$Fn(htOption.fCallback,this).bind(this))}oTransition.start()}}return this},shrink:function(htOption){htOption=this._getOption({nFPS:30,nDuration:500},htOption||{});var bVisible=this._wel.visible();if(bVisible){if(this._fireEventBefore(true)){htOption.nDuration=Math.ceil(htOption.nDuration*(this._wel.height()/this._nLayerHeight));var oTransition=this._getTransition().fps(htOption.nFPS).abort().detachAll();oTransition.attach({end:jindo.$Fn(this._onHideTransitionEnd,this).bind(this)}).queue(htOption.nDuration,this._htTransitionGetterSetter,{width:jindo.Effect.cubicEaseOut(this._nSlideMinWidth),height:jindo.Effect.cubicEaseOut(this._nSlideMinHeight)});if(htOption.fCallback){oTransition.queue(jindo.$Fn(htOption.fCallback,this).bind(this))}oTransition.start()}}return this},unfold:function(htOption){htOption=this._getOption({nFPS:30,nDuration:500,nWidth:this._nSlideMinWidth,nHeight:this._nSlideMinHeight},htOption||{});var bVisible=this._wel.visible(),nWidthDuration,nHeightDuration;if(!bVisible){this._wel.css({width:0,height:0}).show().width(Math.max(htOption.nWidth,this._nSlideMinWidth)).height(Math.max(htOption.nHeight,this._nSlideMinHeight));nWidthDuration=htOption.nDuration/2;nHeightDuration=nWidthDuration}else{nWidthDuration=(htOption.nDuration/2)*(this._nLayerWidth-this._wel.width())/this._nLayerWidth;nHeightDuration=(htOption.nDuration/2)*(this._nLayerHeight-this._wel.height())/this._nLayerHeight}if(nHeightDuration>0){var self=this;if(this._fireEventBefore(true)){var oTransition=this._getTransition().fps(htOption.nFPS).abort().detachAll();oTransition.attach({playing:function(oCustomEvent){if(oCustomEvent.nStep===1){this.detach("playing",arguments.callee);if(!bVisible){self._fireEventAppear()}}},end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this)}).queue(nWidthDuration,this._htTransitionGetterSetter,{width:jindo.Effect.cubicEaseOut(this._nLayerWidth)}).queue(nHeightDuration,this._htTransitionGetterSetter,{height:jindo.Effect.cubicEaseOut(this._nLayerHeight)});if(htOption.fCallback){oTransition.queue(jindo.$Fn(htOption.fCallback,this).bind(this))}oTransition.start()}}return this},fold:function(htOption){htOption=this._getOption({nFPS:30,nDuration:500,nWidth:this._nSlideMinWidth,nHeight:this._nSlideMinHeight},htOption||{});var bVisible=this._wel.visible(),nWidthDuration,nHeightDuration;if(bVisible){nHeightDuration=(htOption.nDuration/2)*this._wel.height()/this._nLayerHeight;nWidthDuration=(htOption.nDuration/2)*this._wel.width()/this._nLayerWidth;if(nWidthDuration>0){if(this._fireEventBefore(true)){var oTransition=this._getTransition().fps(htOption.nFPS).abort().detachAll();oTransition.attach({end:jindo.$Fn(this._onHideTransitionEnd,this).bind(this)}).queue(nHeightDuration,this._htTransitionGetterSetter,{height:jindo.Effect.cubicEaseOut(Math.max(htOption.nHeight,this._nSlideMinHeight))}).queue(nWidthDuration,this._htTransitionGetterSetter,{width:jindo.Effect.cubicEaseOut(Math.max(htOption.nWidth,this._nSlideMinWidth))});if(htOption.fCallback){oTransition.queue(jindo.$Fn(htOption.fCallback,this).bind(this))}oTransition.start()}}}return this},pullUp:function(htOption){htOption=this._getOption({nFPS:30,nDuration:500},htOption||{});var bVisible=this._wel.visible();if(Math.ceil(this._wel.height())<this._nLayerHeight){if(this._fireEventBefore(true)){this._wel.css("position","absolute");if(!bVisible){this._wel.css({height:0,top:parseInt(this._sLayerCSSTop,10)+this._nLayerHeight-this._nSlideMinHeight+"px"}).show().height(this._nSlideMinHeight)}else{htOption.nDuration=Math.ceil(htOption.nDuration*((this._nLayerHeight-this._wel.height())/(this._nLayerHeight-this._nSlideMinHeight)))}var self=this,oTransition=this._getTransition().fps(htOption.nFPS).abort().detachAll();oTransition.attach({playing:function(oCustomEvent){if(oCustomEvent.nStep===1){this.detach("playing",arguments.callee);if(!bVisible){self._fireEventAppear()}}},end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this)}).attach({playing:function(oCustomEvent){self._wel.css("top",parseInt(self._sLayerCSSTop,10)+self._nLayerHeight-self._wel.height()+"px")}}).queue(htOption.nDuration,this._htTransitionGetterSetter,{height:jindo.Effect.cubicEaseOut(this._nLayerHeight)});if(htOption.fCallback){oTransition.queue(jindo.$Fn(htOption.fCallback,this).bind(this))}oTransition.start()}}return this},pushDown:function(htOption){htOption=this._getOption({nFPS:30,nDuration:500},htOption||{});var bVisible=this._wel.visible();if(bVisible){if(this._fireEventBefore(true)){this._wel.css("position","absolute");htOption.nDuration=Math.ceil(htOption.nDuration*(this._wel.height()/this._nLayerHeight));var self=this,oTransition=this._getTransition().fps(htOption.nFPS).abort().detachAll();oTransition.attach({playing:function(oCustomEvent){self._wel.css("top",parseInt(self._sLayerCSSTop,10)+self._nLayerHeight-self._wel.height()+"px")},end:jindo.$Fn(this._onHideTransitionEnd,this).bind(this)}).queue(htOption.nDuration,this._htTransitionGetterSetter,{height:jindo.Effect.cubicEaseOut(this._nSlideMinHeight)});if(htOption.fCallback){oTransition.queue(jindo.$Fn(htOption.fCallback,this).bind(this))}oTransition.start()}}return this},condense:function(htOption){htOption=this._getOption({nFPS:30,nDuration:500,nScale:2},htOption||{});var bVisible=this._wel.visible()&&this._wel.opacity()>0;if(bVisible){htOption.nDuration*=((1-this._wel.opacity())/1)}else{this._wel.opacity(0);this._wel.show();this._wel.css({left:(parseInt(this._sLayerCSSLeft,10)-(this._nLayerWidth/2))+"px",top:(parseInt(this._sLayerCSSTop,10)-(this._nLayerHeight/2))+"px",width:(parseInt(this._sLayerCSSWidth,10)*htOption.nScale)+"px",height:(parseInt(this._sLayerCSSHeight,10)*htOption.nScale)+"px",fontSize:(parseInt(this._sLayerCSSFontSize,10)*htOption.nScale)+this._sLayerCSSFontSizeUnit})}if(htOption.nDuration>0){if(this._fireEventBefore(true)){this._wel.css("position","absolute");var self=this,elLayer=self.getLayer();var oTransition=this._getTransition().fps(htOption.nFPS).abort().detachAll();oTransition.attach({playing:function(oCustomEvent){if(oCustomEvent.nStep===1){this.detach("playing",arguments.callee);if(!bVisible){self._fireEventAppear()}}},end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this)}).queue(htOption.nDuration,this._htTransitionGetterSetter,{width:jindo.Effect.cubicEaseOut(this._nLayerWidth),height:jindo.Effect.cubicEaseOut(this._nLayerHeight)},elLayer,{"@left":jindo.Effect.cubicEaseOut(this._sLayerCSSLeft),"@top":jindo.Effect.cubicEaseOut(this._sLayerCSSTop),"@fontSize":jindo.Effect.cubicEaseOut(this._sLayerCSSFontSize),"@opacity":jindo.Effect.linear(1)});if(htOption.fCallback){oTransition.queue(jindo.$Fn(htOption.fCallback,this).bind(this))}oTransition.start()}}return this},expand:function(htOption){htOption=this._getOption({nFPS:30,nDuration:500,nScale:2},htOption||{});if(this._wel.visible()&&this._wel.opacity()>0){if(this._fireEventBefore(true)){htOption.nDuration*=((this._wel.opacity())/1);this._wel.css("position","absolute");if(this._wel.css("left")=="auto"){this._wel.css("left",this._sLayerCSSLeft)}if(this._wel.css("top")=="auto"){this._wel.css("top",this._sLayerCSSTop)}var oTransition=this._getTransition().fps(htOption.nFPS).abort().detachAll();oTransition.attach({end:jindo.$Fn(this._onHideTransitionEnd,this).bind(this)}).queue(htOption.nDuration,this._htTransitionGetterSetter,{width:jindo.Effect.cubicEaseOut(this._nLayerWidth*htOption.nScale),height:jindo.Effect.cubicEaseOut(this._nLayerHeight*htOption.nScale)},this.getLayer(),{"@left":jindo.Effect.cubicEaseOut((parseInt(this._sLayerCSSLeft,10)-(parseInt(this._sLayerCSSWidth,10))/2+"px")),"@top":jindo.Effect.cubicEaseOut((parseInt(this._sLayerCSSTop,10)-(parseInt(this._sLayerCSSHeight,10))/2+"px")),"@fontSize":jindo.Effect.cubicEaseOut(parseInt(this._sLayerCSSFontSize,10)+this._sLayerCSSFontSizeUnit,parseInt(this._sLayerCSSFontSize,10)*2+this._sLayerCSSFontSizeUnit),"@opacity":jindo.Effect.linear(0)});if(htOption.fCallback){oTransition.queue(jindo.$Fn(htOption.fCallback,this).bind(this))}oTransition.start()}}return this},shake:function(htOption){htOption=this._getOption({nFPS:30,nDuration:500,nWidth:20,nCount:3},htOption||{});if(this._wel.visible()){if(this._fireEventBefore()){this._wel.css("position","absolute");var self=this,oTransition=this._getTransition().fps(htOption.nFPS).abort().detachAll();oTransition.attach({end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this),abort:function(){self._wel.css("left",this._sLayerCSSLeft)}}).queue(htOption.nDuration,this.getLayer(),{"@left":jindo.Effect.wave(htOption.nCount)(this._sLayerCSSLeft,htOption.nWidth+"px")});if(htOption.fCallback){oTransition.queue(jindo.$Fn(htOption.fCallback,this).bind(this))}oTransition.start()}}return this},blink:function(htOption){htOption=this._getOption({nFPS:30,nDuration:500,nOpacity:0,nCount:1},htOption||{});if(this._wel.visible()){if(this._fireEventBefore()){var self=this,oTransition=this._getTransition().fps(htOption.nFPS).abort().detachAll();oTransition.attach({end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this),abort:function(){self._wel.opacity(1)}}).queue(htOption.nDuration,this.getLayer(),{"@opacity":jindo.Effect.wave(htOption.nCount)(1,htOption.nOpacity)});if(htOption.fCallback){oTransition.queue(jindo.$Fn(htOption.fCallback,this).bind(this))}oTransition.start()}}return this},flicker:function(htOption){htOption=this._getOption({nFPS:30,nDuration:500,sBackgroundColor:"#ffff00"},htOption||{});var sBackgroundFrom=(this._sLayerBGColor=="transparent"||this._sLayerBGColor=="rgba(0, 0, 0, 0)")?"#ffffff":this._sLayerBGColor;if(this._wel.visible()){if(this._fireEventBefore()){var self=this,oTransition=this._getTransition().fps(htOption.nFPS).abort().detachAll();oTransition.attach({end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this),abort:function(){self._wel.css("backgroundColor",self._sLayerBGColor)}}).queue(htOption.nDuration,this.getLayer(),{"@backgroundColor":jindo.Effect.cubicEaseIn(htOption.sBackgroundColor,sBackgroundFrom)}).queue(function(){self._wel.css("backgroundColor",self._sLayerBGColor)});if(htOption.fCallback){oTransition.queue(jindo.$Fn(htOption.fCallback,this).bind(this))}oTransition.start()}}return this},bounce:function(htOption){htOption=this._getOption({nFPS:30,nDuration:500,nHeight:50},htOption||{});if(this._wel.visible()){if(this._fireEventBefore()){this._wel.css("position","absolute");var self=this,oTransition=this._getTransition().fps(htOption.nFPS).abort().detachAll();oTransition.attach({end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this),abort:function(){self._wel.css("top",self._sLayerCSSTop)}}).queue(htOption.nDuration/5,this.getLayer(),{"@top":jindo.Effect.easeOut(this._sLayerCSSTop,(parseInt(this._sLayerCSSTop,10)-htOption.nHeight)+"px")}).queue(htOption.nDuration/5*4,this.getLayer(),{"@top":jindo.Effect.bounce(this._sLayerCSSTop)});if(htOption.fCallback){oTransition.queue(jindo.$Fn(htOption.fCallback,this).bind(this))}oTransition.start()}}return this}}).extend(jindo.Component);jindo.LazyLoading={_waLoading:jindo.$A([]),_waLoaded:jindo.$A([]),_whtScript:jindo.$H({}),_whtCallback:jindo.$H({})};jindo.LazyLoading.load=function(sUrl,fCallback,sCharset){if(typeof fCallback!="function"){fCallback=function(){}}if(sUrl instanceof Array){var fLoad=arguments.callee;var bRet=true;var nLen=sUrl.length;var nRemained=nLen;for(var i=0;i<nLen;i++){bRet&=this.load(sUrl[i],function(){nRemained--;if(nRemained===0){fCallback()}},sCharset)}return bRet}this._queueCallback(sUrl,fCallback);if(this._checkIsLoading(sUrl)){return false}if(this._checkAlreadyLoaded(sUrl)){this._doCallback(sUrl);return true}this._waLoading.push(sUrl);var self=this;var elHead=document.getElementsByTagName("head")[0];var elScript=document.createElement("script");elScript.type="text/javascript";elScript.charset=sCharset||"utf-8";elScript.src=sUrl;this._whtScript.add(sUrl,elScript);if("onload" in elScript){elScript.onload=function(){self._waLoaded.push(sUrl);self._waLoading=self._waLoading.refuse(sUrl);self._doCallback(sUrl)}}else{elScript.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){self._waLoaded.push(sUrl);self._waLoading=self._waLoading.refuse(sUrl);self._doCallback(sUrl);this.onreadystatechange=null}}}elHead.appendChild(elScript);return true};jindo.LazyLoading._queueCallback=function(sUrl,fCallback){var aCallback=this._whtCallback.$(sUrl);if(aCallback){aCallback.push(fCallback)}else{this._whtCallback.$(sUrl,[fCallback])}};jindo.LazyLoading._doCallback=function(sUrl){var aCallback=this._whtCallback.$(sUrl).concat();for(var i=0;i<aCallback.length;i++){this._whtCallback.$(sUrl).splice(i,1);aCallback[i]()}};jindo.LazyLoading.abort=function(sUrl){if(this._checkIsLoading(sUrl)){var elScript=this.getScriptElement(sUrl);this._waLoading=this._waLoading.refuse(sUrl);if("onload" in elScript){elScript.onload=null}else{elScript.onreadystatechange=null}jindo.$Element(elScript).leave();this._whtScript.remove(sUrl);this._whtCallback.remove(sUrl);return true}else{return false}};jindo.LazyLoading._checkAlreadyLoaded=function(sUrl){return this._waLoaded.has(sUrl)};jindo.LazyLoading._checkIsLoading=function(sUrl){return this._waLoading.has(sUrl)};jindo.LazyLoading.getLoaded=function(){return this._waLoaded.$value()};jindo.LazyLoading.getLoading=function(){return this._waLoading.$value()};jindo.LazyLoading.getScriptElement=function(sUrl){return this._whtScript.$(sUrl)||null};jindo.ModalDialog=jindo.$Class({$init:function(htOption){var htDefaultOption={Foggy:{nShowDuration:150,nShowOpacity:0.8,nHideDuration:150,nHideOpacity:0,sEffect:"linear",nFPS:30}};this.option(htDefaultOption);this.option(htOption||{});this._initFoggy()},_initFoggy:function(){var self=this;this._oFoggy=new jindo.Foggy(this.option("Foggy")).attach({show:function(e){self.fireEvent("show",{elLayer:self._elLayer})},hide:function(){self.detachAll("close").detachAll("confirm").detachAll("cancel");self._detachEvents();self._welLayer.hide();self._welLayer.leave();self._bIsShown=false;self.fireEvent("hide",{elLayer:self._elLayer})}});this._oFoggy.getFog().className=this.option("sClassPrefix")+"fog"},getFoggy:function(){return this._oFoggy},show:function(htTemplateProcess,htEventHandler){if(!this.isShown()){this.attach(htEventHandler);document.body.appendChild(this._elLayer);this._welLayer.html(this._template.process(htTemplateProcess||{}));var htCustomEvent={elLayer:this._elLayer};if(this.fireEvent("beforeShow",htCustomEvent)){this._welLayer.show();this._attachEvents();this.getLayerPosition().setPosition();this._bIsShown=true;this._oFoggy.show(this._elLayer)}}},hide:function(){if(this.fireEvent("beforeHide",{elLayer:this._elLayer})){this._oFoggy.hide()}}}).extend(jindo.Dialog);jindo.Morph=jindo.$Class({$init:function(oOptions){this.option({fEffect:jindo.Effect.linear,bUseTransition:true}).option(oOptions);var oStyle=document.body.style;this._bTransitionSupport=("transition" in oStyle||"webkitTransition" in oStyle||"MozTransition" in oStyle||"OTransition" in oStyle||"msTransition" in oStyle);var oAgent=jindo.$Agent();var oOS=oAgent.os();var oNavigator=oAgent.navigator();this._bHasTransformRenderBug=oOS.ios&&parseInt(oOS.version,10)===5&&oNavigator.msafari;this._aQueue=[];this._aIngItem=null;this._oTimer=null;this._bPlaying=null;this._nPtr=0;this._nPausePassed=0;this._aRepeat=[];this._sTransitionEnd=(("webkitTransition" in oStyle&&"webkitTransitionEnd")||("transition" in oStyle&&"transitionend")||("MozTransition" in oStyle&&"transitionend")||("OTransition" in oStyle&&"oTransitionEnd")||("msTransition" in oStyle&&"MSTransitionEnd"))},pushAnimate:function(nDuration,aLists){if(aLists&&!(aLists instanceof Array)){throw Error("aLists should be a instance of Array")}aLists=[].concat(aLists);aLists.duration=nDuration;this._aQueue.push(aLists);return this},pushKeyframe:function(nDuration,oKeyframe){this._aQueue.push({action:"keyframe",args:{duration:nDuration,keyframe:oKeyframe}});return this},pushWait:function(nDuration){var oMorph;for(var i=0,nLen=arguments.length;i<nLen;i++){var vItem=arguments[i];if(vItem instanceof this.constructor){this._aQueue.push(vItem)}else{this.pushAnimate(vItem,[])}}return this},pushCall:function(fpCallback){this._aQueue.push(fpCallback);return this},pushRepeatStart:function(nTimes){if(typeof nTimes==="undefined"){nTimes=1}var sLabel="L"+Math.round(new Date().getTime()*Math.random());this._aRepeat.push(sLabel);this._pushLabel(sLabel,nTimes);return this},_pushLabel:function(sLabel,nTimes){if(typeof nTimes==="undefined"){nTimes=Infinity}this._aQueue.push({action:"label",args:{label:sLabel,times:nTimes}});return this},pushRepeatEnd:function(){var self=this;var sLabel=this._aRepeat.pop();var fpLoop=function(){var nIndex=self._getLabelIndex(sLabel);if(nIndex===-1){throw"Repeat calls don't matched."}var aLabelItem=this._aQueue[nIndex];aLabelItem.args.count=aLabelItem.args.count||0;if(++aLabelItem.args.count<aLabelItem.args.times){self._goto(nIndex+1)}};fpLoop.__repeat_end=sLabel;this.pushCall(fpLoop);return this},_waitMorph:function(oMorph){var self=this;if(!oMorph.isPlaying()){return true}var fHandler=function(){oMorph.detach("end",fHandler).detach("pause",fHandler);self._flushQueue()};oMorph.attach("end",fHandler).attach("pause",fHandler);return false},_getLabelIndex:function(sLabel){var aItem=null;for(var i=0,nLen=this._aQueue.length;i<nLen;i++){aItem=this._aQueue[i];if(aItem.action==="label"&&aItem.args.label===sLabel){return i}}return -1},_getRepeatEndIndex:function(sLabel,nFrom){var aItem=null;for(var i=nFrom||0,nLen=this._aQueue.length;i<nLen;i++){aItem=this._aQueue[i];if(aItem instanceof Function&&aItem.__repeat_end===sLabel){return i}}return -1},_flushQueue:function(){var bSync,aItem;var self=this;var oKeyframe,nPausePassed,aCompiledItem;do{bSync=false;aItem=this._aIngItem=this._aQueue[this._nPtr];if(!aItem){this._bPlaying=false;if(!aItem){this.fireEvent("end")}return}this._nPtr++;if(aItem instanceof Function){aItem.call(this);bSync=true;continue}else{if(aItem instanceof this.constructor){bSync=this._waitMorph(aItem);continue}else{if(typeof aItem==="number"){setTimeout(function(){self._flushQueue()},aItem);continue}else{if(aItem.action==="label"){delete aItem.args.count;if(aItem.args.times<1){var nIndex=this._getRepeatEndIndex(aItem.args.label,this._nPtr);if(nIndex>-1){this._goto(nIndex+1)}}bSync=true;continue}else{if(aItem.action==="goto"){this._goto(aItem.args.label);bSync=true;continue}else{if(aItem.action==="keyframe"){oKeyframe=aItem.args.keyframe;nPausePassed=this._nPausePassed;aCompiledItem=this._aCompiledItem=aItem.args;bSync=aCompiledItem.duration<0;if(bSync){this._processKeyframe(1,oKeyframe);continue}this._playKeyframe(nPausePassed,oKeyframe);this._nPausePassed=0;continue}}}}}}aCompiledItem=this._aCompiledItem;nPausePassed=this._nPausePassed;if(!nPausePassed){aCompiledItem=this._aCompiledItem=this._compileItem(aItem)}else{for(var i=0,nLen=aCompiledItem.length;i<nLen;i++){aCompiledItem[i].sTimingFunc=""}aCompiledItem.allCSS=false}if(aCompiledItem.length===0){setTimeout(function(){self._flushQueue()},aCompiledItem.duration);continue}bSync=aCompiledItem.duration<0;if(bSync){this._processItem(1,true);continue}this._playItem(nPausePassed);this._nPausePassed=0}while(bSync)},_playKeyframe:function(nPausePassed,oKeyframe){var self=this;this._nStart=new Date().getTime()-nPausePassed;var aCompiledItem=this._aCompiledItem;var nDuration=aCompiledItem.duration;(function _animationLoop(){self._oTimer=self._requestAnimationFrame(function(){var nStart=self._nStart;if(self._oTimer===null){return}self._oTimer=null;var nPer=Math.min(1,Math.max(0,(new Date().getTime()-nStart)/nDuration));oKeyframe.frame(nPer);if(nPer<1){_animationLoop()}else{self.fireEvent("timerEnd");self._flushQueue()}})})()},_playItem:function(nPausePassed){var self=this;this._nStart=new Date().getTime()-nPausePassed;this._nIng=2;if(!nPausePassed){this._processItem(0,true,3,true)}var aCompiledItem=this._aCompiledItem;if(!aCompiledItem.allCSS){this._animationLoop(true)}else{this._nIng--}(function(){var aTransitionCache=self._processItem(1,true,1).transitionCache;if(!aTransitionCache||aCompiledItem.duration===0){if(--self._nIng===0){self._flushQueue()}return}var welObj=null;var nLen=aTransitionCache.length;for(var i=0;i<nLen;i++){welObj=aTransitionCache[i];break}var fpNext=function(bPause){var oItem;var aShouldReset=[];while(oItem=aTransitionCache.pop()){oItem.css(self._getCSSKey("transitionDuration"),"0.0001ms");aShouldReset.push(oItem)}aTransitionCache=null;(window.requestAnimationFrame||window.setTimeout)(function(){while(oItem=aShouldReset.pop()){oItem.css(self._getCSSKey("transitionDuration"),"0");oItem.css(self._getCSSKey("transitionProperty"),"none")}aShouldReset=null},0);self.fireEvent("transitionEnd");if(--self._nIng===0&&!bPause){self._requestAnimationFrame(function(){self._flushQueue()})}};if(!welObj){fpNext();return}var elObj=welObj.$value();var fpOnTransitionEnd=function(bPause){elObj.removeEventListener(self._sTransitionEnd,self._fpOnTransitionEnd,true);self._fpOnTransitionEnd=null;fpNext(bPause===true)};self._fpOnTransitionEnd=function(evt){fpOnTransitionEnd(evt)};elObj.addEventListener(self._sTransitionEnd,self._fpOnTransitionEnd,true)})()},_animationLoop:function(bSetStatic){var self=this;this._oTimer=this._requestAnimationFrame(function(){var nStart=self._nStart;var nDuration=self._aCompiledItem.duration;if(self._oTimer===null){return}self._oTimer=null;var nPer=Math.min(1,Math.max(0,(new Date().getTime()-nStart)/nDuration));self._processItem(nPer,bSetStatic,2);if(nPer<1){self._animationLoop()}else{self.fireEvent("timerEnd");if(--self._nIng===0){self._flushQueue()}}})},_processKeyframe:function(nRate,oKeyframe){oKeyframe.preprocess().frame(nRate)},_processItem:function(nRate,bSetStatic,nTargetType,bPause){var oRet={normalPropsToPause:[],transitionCache:[]};var aNormalPropsToPause=oRet.normalPropsToPause;var aTransitionCache=oRet.transitionCache;var self=this;var aCompiledItem=this._aCompiledItem;var nDuration=aCompiledItem.duration;if(nDuration===0){nDuration=1}else{if(nDuration<0){nDuration=0}}var oObj,welObj,oProps;var vProp,nType;var bFirstCSS=true;var sStyleKey;var bHasTransformRenderBug=this._bHasTransformRenderBug;nTargetType=nTargetType||(1|2);if(!this.fireEvent("beforeProgress",{nRate:nRate})){return}var aLists=[],oListProp;for(var i=0,oItem;oItem=aCompiledItem[i];i++){oObj=oItem.oObj;welObj=oItem.welObj;oProps=oItem.oProps;var sObjTimingFunc=oItem.sTimingFunc;if(sObjTimingFunc&&(nTargetType&1)){welObj&&welObj.$value().clientHeight;if(!("@transition" in oProps)&&!bPause){if(!("@transitionProperty" in oProps)){welObj.css(this._getCSSKey("transitionProperty"),"all")}if(!("@transitionDuration" in oProps)){welObj.css(this._getCSSKey("transitionDuration"),(nDuration/1000).toFixed(3)+"s")}if(!("@transitionTimingFunction" in oProps)){welObj.css(this._getCSSKey("transitionTimingFunction"),sObjTimingFunc)}}aTransitionCache.push(welObj)}oListProp={};aLists.push(oObj,oListProp);if(bPause&&nRate===1&&"@transform" in oProps&&/AppleWebKit\/534\.30/.test(navigator.userAgent)){welObj.css(this._getCSSKey("transform"),"");oObj.clientHeight}for(var sKey in oProps){if(oProps.hasOwnProperty(sKey)){vProp=oProps[sKey];sStyleKey=/^@(.*)$/.test(sKey)&&RegExp.$1;nType=sObjTimingFunc&&sStyleKey?1:2;if(!(nTargetType&nType)){continue}if(typeof vProp==="function"){vProp=vProp(nRate)}else{if(!bSetStatic){continue}}if(sStyleKey){if(/transition/.test(sKey)){vProp=this._getCSSVal(vProp)}if(bHasTransformRenderBug&&"@transform"===sKey&&("@left" in oProps||"@top" in oProps)){oObj.clientHeight}welObj.css(this._getCSSKey(sStyleKey),vProp)}else{if(bPause){aNormalPropsToPause.push([oObj,sKey,vProp])}else{oObj[sKey]=vProp}}oListProp[sKey]=vProp}}}this.fireEvent("progress",{aLists:aLists,nRate:nRate});return oRet},_compileItem:function(aItem){var bFoundShouldTimer=aItem.length==0;var aRet=[];aRet.duration=aItem.duration;var oObj,welObj,oProps;var vDepa,vDest;var oCompiledProps;var bIsStyleKey,sStyleKey;var fDefaultEffect=this.option("fEffect");for(var i=0,nLen=aItem.length;i<nLen;i+=2){var fObjEffect,sObjTimingFunc=null;oObj=aItem[i];welObj=jindo.$Element(oObj);oProps=aItem[i+1];oCompiledProps={};var bHasProps=false;for(var sKey in oProps){if(oProps.hasOwnProperty(sKey)){var fPropEffect,sPropTimingFunc;vDest=oProps[sKey];bIsStyleKey=/^@(.*)$/.test(sKey);sStyleKey=RegExp.$1;if(vDest instanceof Array){vDepa=vDest[0];vDest=vDest[1]}else{if(bIsStyleKey){vDepa=welObj.css(this._getCSSKey(sStyleKey))}else{vDepa=oObj[sKey]}}vDepa=(vDepa===0?vDepa:vDepa||"");fPropEffect=typeof vDest==="function"?vDest.effectConstructor:fDefaultEffect;sPropTimingFunc=this._getEffectCSS(fPropEffect)||"";if(/^@transform$/.test(sKey)){if(typeof vDest==="function"){vDest=vDest.end}oCompiledProps[sKey]=this._getTransformFunction(vDepa,vDest,fPropEffect,oObj);if(jindo.m){var osInfo=jindo.m.getOsInfo();if(/matrix/.test(vDepa)||/matrix/.test(vDest)){if(osInfo.android&&parseFloat(osInfo.version)<3){sPropTimingFunc=""}}}}else{try{if(typeof vDest==="function"){if("setStart" in vDest){vDest.setStart(vDepa)}oCompiledProps[sKey]=vDest}else{oCompiledProps[sKey]=fPropEffect(vDepa,vDest)}}catch(e){if(!/^unit error/.test(e.message)){throw e}oCompiledProps[sKey]=vDest}}var fProp=oCompiledProps[sKey];if(typeof fProp==="function"&&fProp(0)===fProp(1)){delete oCompiledProps[sKey];continue}if(bIsStyleKey){if(sObjTimingFunc===null){sObjTimingFunc=sPropTimingFunc}else{if(sObjTimingFunc!==sPropTimingFunc){sObjTimingFunc=""}}}else{sPropTimingFunc=""}bFoundShouldTimer=bFoundShouldTimer||!sObjTimingFunc;bHasProps=true}}if(!welObj.visible()){sObjTimingFunc=null,bFoundShouldTimer=true}bHasProps&&aRet.push({oObj:oObj,welObj:welObj,oProps:oCompiledProps,sTimingFunc:sObjTimingFunc})}aRet.allCSS=!bFoundShouldTimer;return aRet},play:function(){if(!this._bPlaying){this._bPlaying=true;this.fireEvent("play");this._flushQueue()}return this},reset:function(){return this._goto(0)},pause:function(nRate){if(!this._bPlaying){return this}this._cancelAnimationFrame(this._oTimer);this._oTimer=null;var aCompiledItem=this._aCompiledItem;var nDuration=aCompiledItem.duration;if(typeof nRate==="undefined"){var nPassed=new Date().getTime()-this._nStart;nRate=nPassed/nDuration}nRate=Math.max(0,Math.min(1,nRate));var aNormalPropsToPause=null;if(aCompiledItem.keyframe){this._processKeyframe(nRate,aCompiledItem.keyframe)}else{aNormalPropsToPause=this._processItem(nRate,true,3,true).normalPropsToPause}this._nPtr--;this._nPausePassed=Math.round(nDuration*nRate);if(this._fpOnTransitionEnd){this._fpOnTransitionEnd(true)}if(aNormalPropsToPause){for(var i=0,nLen=aNormalPropsToPause.length;i<nLen;i++){var aNormalProp=aNormalPropsToPause[i];aNormalProp[0][aNormalProp[1]]=aNormalProp[2]}}this._bPlaying=false;this.fireEvent("pause");return this},_goto:function(nIndex){var sLabel=nIndex;if(typeof nIndex==="number"){nIndex=nIndex||0}else{nIndex=this._getLabelIndex(sLabel);if(nIndex===-1){throw"Label not found"}nIndex++}this._nPtr=nIndex;this._nPausePassed=0;return this},isPlaying:function(){return this._bPlaying||false},clear:function(){this._aQueue.length=0;this._aRepeat.length=0;this._nPtr=0;this._nPausePassed=0;return this},_getPointer:function(){return this._nPtr},_oProperPrefix:{},_getProperPrefix:function(sType){var oProperPrefix=this._oProperPrefix;if(sType in oProperPrefix){return oProperPrefix[sType]}var oBodyStyle=document.body.style;var aPrefix=["webkit","","Moz","O","ms"];var sPrefix,sFullType;for(var i=0,nLen=aPrefix.length;i<nLen;i++){sPrefix=aPrefix[i];sFullType=sPrefix+(sPrefix?sType.replace(/^[a-z]/,function(s){return s.toUpperCase()}):sType);if(sFullType in oBodyStyle){return(oProperPrefix[sType]=sPrefix)}}return(oProperPrefix[sType]="")},_getCSSKey:function(sName){var self=this;var sPrefix="";var sFullname=sName.replace(/^(\-(webkit|o|moz|ms)\-)?([a-z]+)/,function(_0,_1,_sPrefix,sType){sPrefix=_sPrefix||self._getProperPrefix(sType);if(sPrefix){sType=sType.replace(/^[a-z]/,function(s){return s.toUpperCase()})}return sType}).replace(/\-(\w)/g,function(_,sChar){return sChar.toUpperCase()});return(({o:"O",moz:"Moz",webkit:"Webkit"})[sPrefix]||sPrefix)+sFullname},_getCSSVal:function(sName){var self=this;var sFullname=sName.replace(/(^|\s)(\-(webkit|moz|o|ms)\-)?([a-z]+)/g,function(_0,sHead,_2,sPrefix,sType){sPrefix=sPrefix||self._getProperPrefix(sType);return sHead+(sPrefix&&"-"+sPrefix+"-")+sType});return sFullname},_parseTransformText:function(sText){sText=sText||"";var oRet={};sText.replace(/([\w\-]+)\(([^\)]*)\)/g,function(_,sKey,sVal){var aVal=sVal.split(/\s*,\s*/);switch(sKey){case"translate3d":case"scale3d":case"skew3d":sKey=sKey.replace(/3d$/,"");oRet[sKey+"Z"]=aVal[2];case"translate":case"scale":case"skew":oRet[sKey+"X"]=aVal[0];if(typeof aVal[1]==="undefined"){if(sKey==="scale"){oRet[sKey+"Y"]=aVal[0]}}else{oRet[sKey+"Y"]=aVal[1]}break;default:oRet[sKey]=aVal.join(",");break}});return oRet},_getMatrixObj:function(sTransform,elBox){sTransform=sTransform.replace(/\b(translate(3d)?)\(\s*([^,]+)\s*,\s*([^,\)]+)/g,function(_1,key,_2,x,y){if(/%$/.test(x)){x=parseFloat(x)/100*elBox.offsetWidth+"px"}if(/%$/.test(y)){y=parseFloat(y)/100*elBox.offsetHeight+"px"}return key+"("+x+","+y}).replace(/\b(translate([XY]))\(\s*([^\)]+)/g,function(_,key,type,val){if(type==="X"&&/%$/.test(val)){val=parseFloat(val)/100*elBox.offsetWidth+"px"}else{if(type==="Y"&&/%$/.test(val)){val=parseFloat(val)/100*elBox.offsetHeight+"px"}}return key+"("+val});var getMatrixValue;var CSSMatrix=window.WebKitCSSMatrix||window.MSCSSMatrix||window.OCSSMatrix||window.MozCSSMatrix||window.CSSMatrix;if(CSSMatrix){getMatrixValue=function(sTransform){return new CSSMatrix(sTransform).toString()}}else{var sID="M"+Math.round(new Date().getTime()*Math.random());var oAgent=jindo.$Agent().navigator();var sPrefix=oAgent.firefox?"moz":(oAgent.ie?"ms":"o");var sTransformKey="-"+sPrefix+"-transform";var elStyleTag=document.createElement("style");elStyleTag.type="text/css";var elHTML=document.getElementsByTagName("html")[0];elHTML.insertBefore(elStyleTag,elHTML.firstChild);var oSheet=elStyleTag.sheet||elStyleTag.styleSheet;var elDummy=document.createElement("div");elDummy.id=sID;var oComputedStyle=window.getComputedStyle(elDummy,null);getMatrixValue=function(sTransform){var sRet=null;oSheet.insertRule("#"+sID+" { "+sTransformKey+": "+sTransform+" !important; }",0);document.body.insertBefore(elDummy,document.body.firstChild);sRet=oComputedStyle.getPropertyValue(sTransformKey);document.body.removeChild(elDummy);oSheet.deleteRule(0);return sRet}}var sVal=getMatrixValue(sTransform);if(/^([^\(]+)\(([^\)]*)\)$/.test(sVal)){return{key:RegExp.$1,val:RegExp.$2.replace(/\s*,\s*/g," ")}}return{key:"matrix",val:"1 0 0 1 0 0"}},_convertMatrix3d:function(oTransformObj){if(oTransformObj.key==="matrix3d"){return oTransformObj}var aVal=oTransformObj.val.split(" ");oTransformObj.key="matrix3d";aVal.splice(2,0,"0");aVal.splice(3,0,"0");aVal.splice(6,0,"0");aVal.splice(7,0,"0");aVal.splice(8,0,"0");aVal.splice(9,0,"0");aVal.splice(10,0,"1");aVal.splice(11,0,"0");aVal.splice(14,0,"0");aVal.splice(15,0,"1");oTransformObj.val=aVal.join(" ");return oTransformObj},_getTransformFunction:function(sDepa,sDest,fEffect,elBox){var self=this;var sKey;var oDepa,oDest;if(/matrix/.test(sDepa+sDest)){oDepa=this._getMatrixObj(sDepa,elBox);oDest=this._getMatrixObj(sDest,elBox);if(oDepa.key!==oDest.key){oDepa=this._convertMatrix3d(oDepa);oDest=this._convertMatrix3d(oDest)}fEffect=fEffect(oDepa.val,oDest.val);return function(nRate){return nRate===1?sDest:oDepa.key+"("+fEffect(nRate).replace(/ /g,",")+")"}}oDepa=this._parseTransformText(sDepa);oDest=this._parseTransformText(sDest);var oProp={};for(sKey in oDepa){if(oDepa.hasOwnProperty(sKey)){oProp[sKey]=fEffect(oDepa[sKey],oDest[sKey]||(/^scale/.test(sKey)?1:0))}}for(sKey in oDest){if(oDest.hasOwnProperty(sKey)&&!(sKey in oDepa)){oProp[sKey]=fEffect(oDepa[sKey]||(/^scale/.test(sKey)?1:0),oDest[sKey])}}var fpFunc=function(nRate){var aRet=[];for(var sKey in oProp){if(oProp.hasOwnProperty(sKey)){aRet.push(sKey+"("+oProp[sKey](nRate)+")")}}return aRet.join(" ")};return fpFunc},_getEffectCSS:function(fEffect){var bUseTransition=this.option("bUseTransition")&&this._bTransitionSupport;if(!bUseTransition){return null}if((this._htEventHandler.progress&&this._htEventHandler.progress.length)||(this._htEventHandler.beforeProgress&&this._htEventHandler.beforeProgress.length)){return null}switch(fEffect){case jindo.Effect.linear:return"linear";break;case jindo.Effect.cubicEase:return"ease";break;case jindo.Effect.cubicEaseIn:return"ease-in";break;case jindo.Effect.cubicEaseOut:return"ease-out";break;case jindo.Effect.cubicEaseInOut:return"ease-in-out";break;default:if(fEffect.cubicBezier&&Math.max.apply(Math,fEffect.cubicBezier)<=1&&Math.min.apply(Math,fEffect.cubicBezier)>=0){return"cubic-bezier("+fEffect.cubicBezier.join(",")+")"}break}return null},_requestAnimationFrame:function(fFunc){var ret;var self=this;var fWrap=function(){if(ret===self._oLastRAF){self._oLastRAF=null;fFunc()}};if(window.requestAnimationFrame){ret=requestAnimationFrame(fWrap)}else{ret=setTimeout(fWrap,1000/60)}return(this._oLastRAF=ret)},_cancelAnimationFrame:function(nTimer){var ret;if(window.cancelAnimationFrame){ret=cancelAnimationFrame(nTimer)}else{ret=clearTimeout(nTimer)}this._oLastRAF=null;return ret}}).extend(jindo.Component);jindo.MouseGesture=jindo.$Class({_elCanvas:null,_oDC:null,_htEventHandler:{},_aPointList:[],_nPointCount:0,_sDrawingType:"",_bMobileSafari:false,$init:function(htOption){var self=this;this.option({sLineColor:"#FF0000",nLineThickness:5,nFilteringDistance:10,elTargetWindow:window});this.option(htOption);var sUserAgent=window.navigator.userAgent.toLowerCase();this._bMobileSafari=(/mobile/.test(sUserAgent)&&/safari/.test(sUserAgent))||/iphone/.test(sUserAgent);var oDoc=this.option("elTargetWindow").document;oDoc.addEventListener&&oDoc.addEventListener("mousedown",function(){self._htEventHandler.setted_context_menu=oDoc.oncontextmenu;oDoc.oncontextmenu=function(){return false}},true);this._htEventHandler.mouse_down=jindo.$Fn(this._onMouseDown,this).attach(oDoc,this._bMobileSafari?"touchstart":"mousedown",true);this._createCanvas()},_createCanvas:function(){var elCanvas=jindo.$("<canvas>");if(elCanvas.getContext){this._elCanvas=elCanvas;this._oDC=this._elCanvas.getContext("2d");this._sDrawingType="canvas";this._oDC.globalCompositeOperation="destination-over"}else{if(!this.option("elTargetWindow").document.namespaces.vml_nhn){this.option("elTargetWindow").document.namespaces.add("vml_nhn","urn:schemas-microsoft-com:vml")}var elStyle=this.option("elTargetWindow").document.createStyleSheet();elStyle.cssText="vml_nhn\\:shape, vml_nhn\\:stroke {behavior:url(#default#VML); display:inline-block; position:absolute;width:1px;height:1px;};";this._elCanvas=jindo.$("<div>");this._sDrawingType="vml"}jindo.$Element(this._elCanvas).css({position:"absolute",top:"0px",left:"0px"}).hide().prependTo(this.option("elTargetWindow").document.body)},_showCanvas:function(){var htDocumentSize=jindo.$Document(this.option("elTargetWindow").document).clientSize();var htScrollPosition=jindo.$Document(this.option("elTargetWindow").document).scrollPosition();if(this._sDrawingType=="canvas"){this._elCanvas.width=htDocumentSize.width;this._elCanvas.height=htDocumentSize.height}jindo.$Element(this._elCanvas).css({top:htScrollPosition.top+"px",width:htDocumentSize.width+"px",height:htDocumentSize.height+"px",zIndex:999999}).show()},_hideCanvas:function(){if(this._elCanvas){if(this._sDrawingType=="vml"){this._elCanvas.innerHTML=""}else{if(this._sDrawingType=="canvas"){this._oDC.beginPath();this._oDC.clearRect(0,0,this._elCanvas.offsetWidth,this._elCanvas.offsetHeight);this._oDC.closePath()}}jindo.$Element(this._elCanvas).hide()}},_drawLine:function(htStartPosition,htEndPosition){if(this._sDrawingType=="vml"){var sPath=" m "+(htStartPosition.nX*1-5)+","+(htStartPosition.nY*1-5)+" l "+(htEndPosition.nX*1-5)+","+(htEndPosition.nY*1-5);var sHTML='<vml_nhn:shape coordsize="1 1" strokeweight="'+this.option("nLineThickness")+'pt" strokecolor="'+this.option("sLineColor")+'" path="'+sPath+'"><vml_nhn:stroke endcap="round" /></vml_nhn:shape>';this._elCanvas.insertAdjacentHTML("BeforeEnd",sHTML)}else{if(this._sDrawingType=="canvas"){this._oDC.save();this._oDC.beginPath();this._oDC.lineCap="round";this._oDC.lineWidth=this.option("nLineThickness")+2;this._oDC.strokeStyle=this.option("sLineColor");this._oDC.moveTo(htStartPosition.nX,htStartPosition.nY);this._oDC.lineTo(htEndPosition.nX,htEndPosition.nY);this._oDC.stroke();this._oDC.closePath();this._oDC.restore()}}},_addPointList:function(weTarget){var htPosition;if(this._bMobileSafari){htPosition={pageX:weTarget._event.targetTouches[0].clientX,pageY:weTarget._event.targetTouches[0].clientY}}else{htPosition=weTarget.pos()}var htResult={nX:htPosition.clientX,nY:htPosition.clientY};this._aPointList.push(htResult);this._nPointCount++;return htResult},_onMouseDown:function(weMouseDown){if(weMouseDown.mouse().right||this._bMobileSafari){weMouseDown.stop();this._addPointList(weMouseDown);this._htEventHandler.mouse_move=jindo.$Fn(this._onMouseMove,this).attach(this.option("elTargetWindow").document,this._bMobileSafari?"touchmove":"mousemove");this._htEventHandler.mouse_up=jindo.$Fn(this._onMouseUp,this).attach(this.option("elTargetWindow").document,this._bMobileSafari?"touchend":"mouseup");if(this._sDrawingType=="vml"){this.option("elTargetWindow").document.body.setCapture()}}},_onMouseMove:function(weMouseMove){var htPosition=this._addPointList(weMouseMove);if(this._nPointCount===2){this._showCanvas()}if(this._nPointCount%2){this._drawLine({nX:this._aPointList[this._nPointCount-3]["nX"],nY:this._aPointList[this._nPointCount-3]["nY"]},htPosition)}},_recognitionGesture:function(){var nX,nY,nBeforeX,nBeforeY,nGradient,nAbsGradient,nResult,nDistance;var aFilteredList=[],aResult=[];var nBaseGradient1=Math.tan(22.5*Math.PI/180);var nBaseGradient2=Math.tan(67.5*Math.PI/180);for(var i=1;i<this._aPointList.length;i++){nX=this._aPointList[i]["nX"];nY=this._aPointList[i]["nY"];nBeforeX=this._aPointList[i-1]["nX"];nBeforeY=this._aPointList[i-1]["nY"];nDistance=Math.sqrt(Math.pow(nY-nBeforeY,2)+Math.pow(nX-nBeforeX,2));if(nDistance>this.option("nFilteringDistance")){nGradient=-(nY-nBeforeY)/(nX-nBeforeX);nAbsGradient=Math.abs(nGradient);if(nAbsGradient>=nBaseGradient2){if(nY<nBeforeY){nResult=8}else{nResult=4}}else{if(nAbsGradient<nBaseGradient1){if(nX<nBeforeX){nResult=6}else{nResult=2}}else{if(nAbsGradient>=nBaseGradient1&&nAbsGradient<nBaseGradient2){if(nGradient>0){nResult=1}else{nResult=3}if(nX<nBeforeX){nResult+=4}}}}aFilteredList.push(nResult)}}for(i=1;i<aFilteredList.length;i++){if(aResult.length===0){aResult.push(aFilteredList[i])}else{if(aResult[aResult.length-1]!=aFilteredList[i]){aResult.push(aFilteredList[i])}}}return{aCodeList:aResult,sCode:aResult.join("")}},_onMouseUp:function(weEvent){if(weEvent.mouse().right||this._bMobileSafari){weEvent.stop();if(this._htEventHandler.mouse_move){this._htEventHandler.mouse_move.detach(this.option("elTargetWindow").document,this._bMobileSafari?"touchmove":"mousemove")}if(this._htEventHandler.mouse_up){this._htEventHandler.mouse_up.detach(this.option("elTargetWindow").document,this._bMobileSafari?"touchend":"mouseup")}if((this._aPointList.length&&!this._bMobileSafari)||"setted_context_menu" in this._htEventHandler){if(!("setted_context_menu" in this._htEventHandler)){this._htEventHandler.setted_context_menu=this.option("elTargetWindow").document.oncontextmenu;this.option("elTargetWindow").document.oncontextmenu=function(){return false}}setTimeout(jindo.$Fn(function(){this.option("elTargetWindow").document.oncontextmenu=this._htEventHandler.setted_context_menu;delete this._htEventHandler.setted_context_menu},this).bind(),1)}if(this._sDrawingType=="vml"){this.option("elTargetWindow").document.body.releaseCapture()}var htResult=this._recognitionGesture();if(htResult.sCode){this.fireEvent("gesture",htResult)}this._nPointCount=0;this._aPointList=[];this._hideCanvas()}},destroy:function(){jindo.$Element(this._elCanvas).leave();this._elCanvas=null;this._oDC=null;this._htEventHandler=null;this._nPointcount=null;this._aPointList=null;this._sDrawingType=null;this._bMobileSafari=null}}).extend(jindo.Component);jindo.MultipleAjaxRequest=jindo.$Class({_bIsRequesting:false,$init:function(htOption){var htDefaultOption={sMode:"parallel"};this.option(htDefaultOption);this.option(htOption)},isRequesting:function(){return this._bIsRequesting},request:function(aAjax,htMetaData){if(this.isRequesting()){return false}if(!(aAjax instanceof Array)){aAjax=[aAjax]}if(typeof htMetaData=="undefined"){htMetaData={}}this._htMetaData=htMetaData;switch(this.option("sMode")){case"parallel":this._parallelRequest(aAjax);break;case"serial":this._serialRequest(aAjax);break;default:return false}return true},_fireEventStart:function(){this._bIsRequesting=true;if(this.fireEvent("start",{aAjax:this._aAjax,htMetaData:this._htMetaData})){return true}else{this.abort();return false}},_fireEventBeforeEachRequest:function(nIndex){if(this.fireEvent("beforeEachRequest",{oAjax:this._aAjax[nIndex],nIndex:nIndex})){return true}else{this.abort();return false}},_fireEventAfterEachResponse:function(nIndex){if(this.fireEvent("afterEachResponse",{oAjax:this._aAjax[nIndex],nIndex:nIndex})){return true}else{this.abort();return false}},_parallelRequest:function(aAjax){this._aAjaxData=aAjax;this._aAjax=[];this._aStatus=[];this._aStatus.length=aAjax.length;this._aResponse=[];if(this._fireEventStart()){var self=this;jindo.$A(this._aAjaxData).forEach(function(htAjax,i){var fParallelResponseHandler=function(oResponse){oResponse._constructor=self._aAjax[i];var nIndex=self._findAjaxObjectIndexOfResponse(oResponse._constructor);self._aResponse[nIndex]=oResponse;self._aStatus[nIndex]=true;if(self._fireEventAfterEachResponse(nIndex)){if(self._hasCompletedGotResponsesOfParallelResponses()){self._complete()}}};self._aAjax.push(jindo.$Ajax(htAjax.sUrl,htAjax.htOption));htAjax.htOption.onload=fParallelResponseHandler;htAjax.htOption.onerror=fParallelResponseHandler;htAjax.htOption.ontimeout=fParallelResponseHandler;self._aAjax[i].option(htAjax.htOption);if(self._fireEventBeforeEachRequest(i)){self._aAjax[i].request(htAjax.htParameter||{})}else{jindo.$A.Break()}})}},_findAjaxObjectIndexOfResponse:function(oAjax){return jindo.$A(this._aAjax).indexOf(oAjax)},_hasCompletedGotResponsesOfParallelResponses:function(){var bResult=true;jindo.$A(this._aStatus).forEach(function(bStatus){if(!bStatus){bResult=false;jindo.$A.Break()}});return bResult},_serialRequest:function(aAjax){this._aAjaxData=aAjax;this._aAjax=[];this._aStatus=[];this._aStatus.length=aAjax.length;this._aResponse=[];var self=this;jindo.$A(this._aAjaxData).forEach(function(htAjax,i){var fSerialRequestHandler=function(e){e._constructor=self._aAjax[i];self._aResponse.push(e);self._serialRequestNext()};self._aAjax.push(jindo.$Ajax(htAjax.sUrl,htAjax.htOption));htAjax.htOption.onload=fSerialRequestHandler;htAjax.htOption.onerror=fSerialRequestHandler;htAjax.htOption.ontimeout=fSerialRequestHandler;self._aAjax[i].option(htAjax.htOption)});if(this._fireEventStart()){if(this._fireEventBeforeEachRequest(0)){this._aAjax[0].request(this._aAjaxData[0].htParameter||{});this._aStatus[0]=true}}},_serialRequestNext:function(){var nIndex=-1;for(var i=0;i<this._aStatus.length;i++){if(!this._aStatus[i]){this._aStatus[i]=true;nIndex=i;break}}if(nIndex>0){if(this._fireEventAfterEachResponse(nIndex-1)){if(this._fireEventBeforeEachRequest(nIndex)){this._aAjax[nIndex].request(this._aAjaxData[nIndex].htParameter||{})}}}else{if(nIndex==-1){if(this._fireEventAfterEachResponse(this._aStatus.length-1)){this._complete()}}}},_reset:function(){this._aAjaxData.length=0;this._aAjax.length=0;this._aStatus.length=0;this._aResponse.length=0;this._htMetaData=null;delete this._aAjaxData;delete this._aAjax;delete this._aStatus;delete this._aResponse;delete this._htMetaData;this._bIsRequesting=false},abort:function(){jindo.$A(this._aAjax).forEach(function(oAjax){oAjax.abort()});this._reset()},_complete:function(){var aResponse=this._aResponse.concat(),htMetaData={},sProp;for(sProp in this._htMetaData){htMetaData[sProp]=this._htMetaData[sProp]}this._reset();this.fireEvent("complete",{aResponse:aResponse,htMetaData:htMetaData})}}).extend(jindo.Component);jindo.NumberFormatter=jindo.$Class({$init:function(el,htOption){this.option({nDecimalPoint:0});this.option(htOption||{});this.attach("beforeChange",function(oCustomEvent){var sText=oCustomEvent.sText;var sOutput="";var nDecimalPoint=this.option("nDecimalPoint");var sStartMark=oCustomEvent.sStartMark;var sEndMark=oCustomEvent.sEndMark;if(nDecimalPoint===0){sText=sText.replace(new RegExp("[^0-9"+sStartMark+sEndMark+"]","g"),"");sText=sText.replace(/^0+/,"");sText=sText.replace(new RegExp("^0*"+sStartMark+"0*"+sEndMark+"0*"),sStartMark+sEndMark)}else{var count=0;var aMatch=[];sText.replace(new RegExp("((?:[0-9]|"+sStartMark+sEndMark+")\\.|[0-9]|"+sStartMark+"|"+sEndMark+")","g"),function(m){if(/\.$/.test(m)){if(count==0){count++;aMatch.push(m)}else{aMatch.push(m.replace(".",""))}}else{aMatch.push(m)}});sText=aMatch?aMatch.join(""):"";if(!(new RegExp("^(?:0|[0-9]\\.(?:[0-9]*?))"+sStartMark+sEndMark+"$").test(sText))){sText=sText.replace(/^0+/,"")}}sOutput=this._convertCurrency(sText);if(nDecimalPoint>0){sOutput=this._limitDecimalPoint(sOutput,nDecimalPoint)}oCustomEvent.sText=sOutput})},getValue:function(){return this._el.value.replace(new RegExp("[,"+this._aMarks[0]+this._aMarks[1]+"]+?","g"),"")},_convertCurrency:function(sText){var nDot=0,sReturn="",nDotPosition=sText.indexOf("."),nLastPosition=sText.length;if(nDotPosition>-1){nLastPosition=nDotPosition-1}for(var i=sText.length;i>=0;i--){var sChar=sText.charAt(i);if(i>nLastPosition){sReturn=sChar+sReturn;continue}if(/[0-9]/.test(sChar)){if(nDot>=3){sReturn=","+sReturn;nDot=0}nDot++;sReturn=sChar+sReturn}else{if(sChar==this._aMarks[0]||sChar==this._aMarks[1]){sReturn=sChar+sReturn}}}return sReturn},_limitDecimalPoint:function(sText,nDecimalPoint){var sReturn="",nDotPosition=sText.indexOf("."),nLastPosition=sText.length;if(nDotPosition>-1){nLastPosition=nDotPosition-1}nDotPosition=sText.indexOf(".");if(nDotPosition>-1&&nDecimalPoint>0){var nDecimalCount=0;for(var i=0;i<sText.length;i++){var sChar=sText.charAt(i),bIsNumber=/[0-9]/.test(sChar);if(bIsNumber){if(nDecimalCount==nDecimalPoint){continue}if(i>nDotPosition){nDecimalCount++}}sReturn+=sChar}}else{sReturn=sText}return sReturn}}).extend(jindo.Formatter);jindo.NumericStepper=jindo.$Class({_bIsOnFocus:false,$init:function(el,htOption){this._el=jindo.$(el);this.option({sClassPrefix:"ns-",bActivateOnload:true,bUseMouseWheel:false,nStep:1,nDecimalPoint:0,nMin:-Infinity,nMax:Infinity,nDefaultValue:0,bInputReadOnly:true});this.option(htOption||{});this._assignHTMLElements();this._wfPlusClick=jindo.$Fn(this._onPlusClick,this);this._wfMinusClick=jindo.$Fn(this._onMinusClick,this);this._wfWheel=jindo.$Fn(this._onWheel,this);this._wfFocus=jindo.$Fn(this._onFocus,this);this._wfBlur=jindo.$Fn(this._onBlur,this);if(this.option("bActivateOnload")){this.activate()}},_assignHTMLElements:function(){var sPrefix=this.option("sClassPrefix");this._elInput=jindo.$$.getSingle("."+sPrefix+"input",this._el);this._elPlusButton=jindo.$$.getSingle("."+sPrefix+"plus",this._el);this._elMinusButton=jindo.$$.getSingle("."+sPrefix+"minus",this._el)},reset:function(){this._elInput.value=this.option("nDefaultValue").toFixed(this.option("nDecimalPoint"))},getValue:function(){return parseFloat(this._elInput.value)},setValue:function(n){if(typeof n!=="number"){n=this.option("nDefaultValue")}var nMin=this.option("nMin"),nMax=this.option("nMax"),htParam={nValue:n,nMin:nMin,nMax:nMax};if(!this.fireEvent("beforeChange",htParam)){return}if(htParam.nValue>nMax||htParam.nValue<nMin){this.fireEvent("overLimit",htParam);htParam.nValue=Math.max(nMin,Math.min(nMax,htParam.nValue))}this._elInput.value=htParam.nValue.toFixed(this.option("nDecimalPoint"));this.fireEvent("change",htParam)},getBaseElement:function(){return this._el},getInputElement:function(){return this._elInput},getPlusElement:function(){return this._elPlusButton},getMinusElement:function(){return this._elMinusButton},isFocused:function(){return this._bIsOnFocus},_onActivate:function(){var elInput=this.getInputElement();this._wfPlusClick.attach(this.getPlusElement(),"click");this._wfMinusClick.attach(this.getMinusElement(),"click");this._wfFocus.attach(elInput,"focus");this._wfBlur.attach(elInput,"blur");if(this.option("bUseMouseWheel")){this._wfWheel.attach(elInput,"mousewheel")}this._elInput.readOnly=this.option("bInputReadOnly");this.reset()},_onDeactivate:function(){var elInput=this.getInputElement();this._wfPlusClick.detach(this.getPlusElement(),"click");this._wfMinusClick.detach(this.getMinusElement(),"click");this._wfFocus.detach(elInput,"focus");this._wfBlur.detach(elInput,"blur");this._wfWheel.detach(elInput,"mousewheel")},_onMinusClick:function(we){this.setValue(this.getValue()-this.option("nStep"))},_onPlusClick:function(we){this.setValue(this.getValue()+this.option("nStep"))},_onWheel:function(we){if(this.isFocused()){we.stop(jindo.$Event.CANCEL_DEFAULT);if(we.mouse().delta>0){this._onPlusClick()}else{this._onMinusClick()}}},_onFocus:function(we){this._bIsOnFocus=true},_onBlur:function(we){this._bIsOnFocus=false;this.setValue(this.getValue());this._elInput.readOnly=this.option("bInputReadOnly")}}).extend(jindo.UIComponent);jindo.Pagination=jindo.$Class({$init:function(sId,htOption){this._elPageList=jindo.$(sId);this._welPageList=jindo.$Element(this._elPageList);this._waPage=jindo.$A([]);this._fClickPage=jindo.$Fn(this._onClickPageList,this);this.option({bActivateOnload:true,nItem:10,nItemPerPage:10,nPagePerPageList:10,nPage:1,sMoveUnit:"pagelist",bAlignCenter:false,sInsertTextNode:"",sClassPrefix:"",sClassFirst:"first-child",sClassLast:"last-child",sPageTemplate:"<a href='#'>{=page}</a>",sCurrentPageTemplate:"<strong>{=page}</strong>",elFirstPageLinkOn:jindo.$$.getSingle("a."+this._wrapPrefix("pre_end"),this._elPageList),elPrevPageLinkOn:jindo.$$.getSingle("a."+this._wrapPrefix("pre"),this._elPageList),elNextPageLinkOn:jindo.$$.getSingle("a."+this._wrapPrefix("next"),this._elPageList),elLastPageLinkOn:jindo.$$.getSingle("a."+this._wrapPrefix("next_end"),this._elPageList),elFirstPageLinkOff:jindo.$$.getSingle("span."+this._wrapPrefix("pre_end"),this._elPageList),elPrevPageLinkOff:jindo.$$.getSingle("span."+this._wrapPrefix("pre"),this._elPageList),elNextPageLinkOff:jindo.$$.getSingle("span."+this._wrapPrefix("next"),this._elPageList),elLastPageLinkOff:jindo.$$.getSingle("span."+this._wrapPrefix("next_end"),this._elPageList)});this.option(htOption||{});if(this.option("bActivateOnload")){this.activate()}},option:function(sName,vValue){var oThis=jindo.Component.prototype.option.apply(this,arguments);if(typeof sName==="object"||typeof vValue!="undefined"){var sMoveUnit=this.option("sMoveUnit");var bAlignCenter=this.option("bAlignCenter");if(bAlignCenter&&sMoveUnit==="pageunit"){throw new Error('Invalid Option : sMoveUnit can\'t be set to "pageunit" when bAlignCenter is true.')}}return oThis},_wrapPrefix:function(sClassName){var sClassPrefix=this.option("sClassPrefix");return sClassPrefix?sClassPrefix+sClassName.replace(/_/g,"-"):sClassName},getBaseElement:function(){return this._elPageList},getItemCount:function(){return this.option("nItem")},setItemCount:function(n){this.option({nItem:n})},getItemPerPage:function(){return this.option("nItemPerPage")},setItemPerPage:function(n){this.option("nItemPerPage",n)},getCurrentPage:function(){return this._nCurrentPage},getFirstItemOfPage:function(n){return this.getItemPerPage()*(n-1)+1},getPageOfItem:function(n){return Math.ceil(n/this.getItemPerPage())},_getLastPage:function(){return Math.ceil(this.getItemCount()/this.getItemPerPage())},_getRelativePage:function(sRelative){var nPage=null;var bMovePage=this.option("sMoveUnit")=="page";var nThisPageList=this._getPageList(this.getCurrentPage());switch(sRelative){case"pre_end":nPage=1;break;case"next_end":nPage=this._getLastPage();break;case"pre":nPage=bMovePage?this.getCurrentPage()-1:(nThisPageList-1)*this.option("nPagePerPageList");break;case"next":nPage=bMovePage?this.getCurrentPage()+1:(nThisPageList)*this.option("nPagePerPageList")+1;break}return nPage},_getPageList:function(nThisPage){if(this.option("bAlignCenter")){var nLeft=Math.floor(this.option("nPagePerPageList")/2);var nPageList=nThisPage-nLeft;nPageList=Math.max(nPageList,1);nPageList=Math.min(nPageList,this._getLastPage());return nPageList}return Math.ceil(nThisPage/this.option("nPagePerPageList"))},_isIn:function(el,elParent){if(!elParent){return false}return(el===elParent)?true:jindo.$Element(el).isChildOf(elParent)},_getPageElement:function(el){for(var i=0,nLength=this._waPage.$value().length;i<nLength;i++){var elPage=this._waPage.get(i);if(this._isIn(el,elPage)){return elPage}}return null},_onClickPageList:function(we){we.stop(jindo.$Event.CANCEL_DEFAULT);var nPage=null,htOption=this.option(),el=we.element;if(this._isIn(el,htOption.elFirstPageLinkOn)){nPage=this._getRelativePage("pre_end")}else{if(this._isIn(el,htOption.elPrevPageLinkOn)){nPage=this._getRelativePage("pre")}else{if(this._isIn(el,htOption.elNextPageLinkOn)){nPage=this._getRelativePage("next")}else{if(this._isIn(el,htOption.elLastPageLinkOn)){nPage=this._getRelativePage("next_end")}else{var elPage=this._getPageElement(el);if(elPage){nPage=parseInt(jindo.$Element(elPage).text(),10)}else{return}}}}}if(!this.fireEvent("click",{nPage:nPage,weEvent:we})){return}this.movePageTo(nPage)},_convertToAvailPage:function(nPage){var nLastPage=this._getLastPage();nPage=Math.max(nPage,1);nPage=Math.min(nPage,nLastPage);return nPage},movePageTo:function(nPage,bFireEvent){if(typeof bFireEvent=="undefined"){bFireEvent=true}nPage=this._convertToAvailPage(nPage);this._nCurrentPage=nPage;if(bFireEvent){if(!this.fireEvent("beforeMove",{nPage:nPage})){return}}this._paginate(nPage);if(bFireEvent){this.fireEvent("move",{nPage:nPage})}},reset:function(nItemCount){if(typeof nItemCount=="undefined"){nItemCount=this.option("nItem")}this.setItemCount(nItemCount);this.movePageTo(1,false)},_onActivate:function(){jindo.$Element.prototype.preventTapHighlight&&this._welPageList.preventTapHighlight(true);this._fClickPage.attach(this._elPageList,"click");this.setItemCount(this.option("nItem"));this.movePageTo(this.option("nPage"),false);this._welPageList.addClass(this._wrapPrefix("loaded"))},_onDeactivate:function(){jindo.$Element.prototype.preventTapHighlight&&this._welPageList.preventTapHighlight(false);this._fClickPage.detach(this._elPageList,"click");this._welPageList.removeClass(this._wrapPrefix("loaded"))},_addTextNode:function(){var sTextNode=this.option("sInsertTextNode");this._elPageList.appendChild(document.createTextNode(sTextNode))},_paginate:function(nPage){this._empty();this._addTextNode();var htOption=this.option(),elFirstPageLinkOn=htOption.elFirstPageLinkOn,elPrevPageLinkOn=htOption.elPrevPageLinkOn,elNextPageLinkOn=htOption.elNextPageLinkOn,elLastPageLinkOn=htOption.elLastPageLinkOn,elFirstPageLinkOff=htOption.elFirstPageLinkOff,elPrevPageLinkOff=htOption.elPrevPageLinkOff,elNextPageLinkOff=htOption.elNextPageLinkOff,elLastPageLinkOff=htOption.elLastPageLinkOff,nLastPage=this._getLastPage(),nThisPageList=this._getPageList(nPage),nLastPageList=this._getPageList(nLastPage);if(nLastPage===0){this._welPageList.addClass(this._wrapPrefix("no-result"))}else{if(nLastPage==1){this._welPageList.addClass(this._wrapPrefix("only-one")).removeClass(this._wrapPrefix("no-result"))}else{this._welPageList.removeClass(this._wrapPrefix("only-one")).removeClass(this._wrapPrefix("no-result"))}}var nFirstPageOfThisPageList,nLastPageOfThisPageList;if(htOption.bAlignCenter){var nLeft=Math.floor(htOption.nPagePerPageList/2);nFirstPageOfThisPageList=nPage-nLeft;nFirstPageOfThisPageList=Math.max(nFirstPageOfThisPageList,1);nLastPageOfThisPageList=nFirstPageOfThisPageList+htOption.nPagePerPageList-1;if(nLastPageOfThisPageList>nLastPage){nFirstPageOfThisPageList=nLastPage-htOption.nPagePerPageList+1;nFirstPageOfThisPageList=Math.max(nFirstPageOfThisPageList,1);nLastPageOfThisPageList=nLastPage}}else{nFirstPageOfThisPageList=(nThisPageList-1)*htOption.nPagePerPageList+1;nLastPageOfThisPageList=(nThisPageList)*htOption.nPagePerPageList;nLastPageOfThisPageList=Math.min(nLastPageOfThisPageList,nLastPage)}if(htOption.sMoveUnit=="page"){nThisPageList=nPage;nLastPageList=nLastPage}if(nPage>1){if(elFirstPageLinkOn){this._welPageList.append(elFirstPageLinkOn);this._addTextNode()}}else{if(elFirstPageLinkOff){this._welPageList.append(elFirstPageLinkOff);this._addTextNode()}}if(nThisPageList>1){if(elPrevPageLinkOn){this._welPageList.append(elPrevPageLinkOn);this._addTextNode()}}else{if(elPrevPageLinkOff){this._welPageList.append(elPrevPageLinkOff);this._addTextNode()}}var el,wel;for(var i=nFirstPageOfThisPageList;i<=nLastPageOfThisPageList;i++){if(i==nPage){el=jindo.$(jindo.$Template(htOption.sCurrentPageTemplate).process({page:i.toString()}))}else{el=jindo.$(jindo.$Template(htOption.sPageTemplate).process({page:i.toString()}));this._waPage.push(el)}wel=jindo.$Element(el);if(i==nFirstPageOfThisPageList){wel.addClass(this._wrapPrefix(this.option("sClassFirst")))}if(i==nLastPageOfThisPageList){wel.addClass(this._wrapPrefix(this.option("sClassLast")))}this._welPageList.append(el);this._addTextNode()}if(nThisPageList<nLastPageList){if(elNextPageLinkOn){this._welPageList.append(elNextPageLinkOn);this._addTextNode()}}else{if(elNextPageLinkOff){this._welPageList.append(elNextPageLinkOff);this._addTextNode()}}if(nPage<nLastPage){if(elLastPageLinkOn){this._welPageList.append(elLastPageLinkOn);this._addTextNode()}}else{if(elLastPageLinkOff){this._welPageList.append(elLastPageLinkOff);this._addTextNode()}}},_empty:function(){var htOption=this.option();this.option({elFirstPageLinkOn:this._clone(htOption.elFirstPageLinkOn),elPrevPageLinkOn:this._clone(htOption.elPrevPageLinkOn),elNextPageLinkOn:this._clone(htOption.elNextPageLinkOn),elLastPageLinkOn:this._clone(htOption.elLastPageLinkOn),elFirstPageLinkOff:this._clone(htOption.elFirstPageLinkOff),elPrevPageLinkOff:this._clone(htOption.elPrevPageLinkOff),elNextPageLinkOff:this._clone(htOption.elNextPageLinkOff),elLastPageLinkOff:this._clone(htOption.elLastPageLinkOff)});this._waPage.empty();this._welPageList.empty()},_clone:function(el){if(el&&el.cloneNode){return el.cloneNode(true)}return el}}).extend(jindo.UIComponent);jindo.RollingChart=jindo.$Class({_nIndexOfRolling:0,_bIsRolling:false,$init:function(el,htOption){var htDefaultOption={sClassPrefix:"rollingchart-",sDirection:"down",nFPS:50,nDuration:300,nRollingInterval:100,sUrl:"",sRequestType:"jsonp",sRequestMethod:"get",htRequestParameter:null,nRequestInterval:10000,bActivateOnload:true};this.option(htDefaultOption);this.option(htOption||{});this._el=jindo.$(el);this._assignHTMLElements();this._initTimer();this._initRolling();if(this.option("bActivateOnload")){this.activate()}},_assignHTMLElements:function(){this._elList=jindo.$$.getSingle("ol",this._el);this._aItems=jindo.$$("> li",this._elList)},getList:function(){return this._elList},getItems:function(){return this._aItems},getListOfItem:function(elItem){return jindo.$$.getSingle("ul",elItem)},isRolling:function(){return this._bIsRolling},_initTimer:function(){this._oRequestTimer=new jindo.Timer()},getTimer:function(){return this._oRequestTimer},_initRolling:function(){var self=this;this._oRollingEventHandler={end:function(){setTimeout(function(){self.fireEvent("afterRolling",{nIndex:self._nIndexOfRolling});self._roll(self._nIndexOfRolling+1)},self.option("nRollingInterval"))}};this._oRolling=new jindo.Rolling(this._el,{nFPS:this.option("nFPS"),nDuration:this.option("nDuration"),sDirection:"vertical",fEffect:jindo.Effect.linear})},getRolling:function(){return this._oRolling},_setItemIndexToRolling:function(n){var elList=this.getListOfItem(this.getItems()[n]);var oRolling=this.getRolling();oRolling._el=elList;oRolling._elList=elList},_onActivate:function(){var self=this;this.getTimer().start(function(){self._stopRequest();self._request();return true},this.option("nRequestInterval"))},_onDeactivate:function(){this.getTimer().abort()},_request:function(sQuery){if(this.isRolling()){return}var htOption=this.option();var sUrl=htOption.sUrl;var htParameter=htOption.htRequestParameter;var self=this;this._oAjax=jindo.$Ajax(sUrl,{type:htOption.sRequestType,method:htOption.sRequestMethod,onload:function(oResponse){try{var htParam={htResponseJSON:oResponse.json()};if(!self.fireEvent("response",htParam)){return}if(!self.fireEvent("beforeUpdate")){return}var oChart=htParam.htResponseJSON;self._addItemToRolling(oChart);self.getRolling().getTransition().attach(self._oRollingEventHandler);self._roll(0)}catch(e){}}});if(!self.fireEvent("request")){return}this._oAjax.request(htParameter)},_stopRequest:function(){try{this._oAjax.abort();this._oAjax=null}catch(e){}},_addItemToRolling:function(oChart){var self=this;var sDirection=this.option("sDirection");jindo.$A(this.getItems()).forEach(function(el,i){var wel=jindo.$Element(jindo.$("<li>"));wel.html(oChart.items[i]);var elList=self.getListOfItem(el);if(sDirection=="down"){elList.insertBefore(wel.$value(),elList.firstChild);elList.scrollTop=9999}else{jindo.$Element(elList).append(wel.$value());elList.scrollTop=0}})},_removeItemRolled:function(){var self=this;var sDirection=this.option("sDirection");jindo.$A(this.getItems()).forEach(function(el,i){if(sDirection=="down"){jindo.$Element(jindo.$$("li",self.getListOfItem(el))[1]).leave()}else{var elList=self.getListOfItem(el);jindo.$Element(jindo.$$.getSingle("li",elList)).leave();elList.scrollTop=0}});this._nIndexOfRolling=0},_roll:function(n){this._bIsRolling=true;this._nIndexOfRolling=n;this.fireEvent("beforeRolling",{nIndex:n});var nIndex=n;if(nIndex==this.getItems().length){this._removeItemRolled();this._nIndexOfRolling=0;this.getRolling().getTransition().detach(this._oRollingEventHandler);this._bIsRolling=false;this.fireEvent("afterUpdate");return}this._setItemIndexToRolling(nIndex);var nDistance=1;if(this.option("sDirection")=="down"){nDistance=-1}this.getRolling().moveBy(nDistance)}}).extend(jindo.UIComponent);jindo.RolloverArea=jindo.$Class({$init:function(el,htOption){this.option({sClassName:"rollover",sClassPrefix:"rollover-",bCheckMouseDown:true,bActivateOnload:true,htStatus:{sOver:"over",sDown:"down"}});this.option(htOption||{});this._elArea=jindo.$(el);this._aOveredElements=[];this._aDownedElements=[];this._wfMouseOver=jindo.$Fn(this._onMouseOver,this);this._wfMouseOut=jindo.$Fn(this._onMouseOut,this);this._wfMouseDown=jindo.$Fn(this._onMouseDown,this);this._wfMouseUp=jindo.$Fn(this._onMouseUp,this);if(this.option("bActivateOnload")){this.activate()}},_addOvered:function(el){this._aOveredElements.push(el)},_removeOvered:function(el){this._aOveredElements.splice(jindo.$A(this._aOveredElements).indexOf(el),1)},_addStatus:function(el,sStatus){jindo.$Element(el).addClass(this.option("sClassPrefix")+sStatus)},_removeStatus:function(el,sStatus){jindo.$Element(el).removeClass(this.option("sClassPrefix")+sStatus)},_isInnerElement:function(elParent,elChild){return elParent===elChild?true:jindo.$Element(elParent).isParentOf(elChild)},_onActivate:function(){jindo.$Element.prototype.preventTapHighlight&&jindo.$Element(this._elArea).preventTapHighlight(true);this._wfMouseOver.attach(this._elArea,"mouseover");this._wfMouseOut.attach(this._elArea,"mouseout");if(this.option("bCheckMouseDown")){this._wfMouseDown.attach(this._elArea,"mousedown");this._wfMouseUp.attach(document,"mouseup")}},_onDeactivate:function(){jindo.$Element.prototype.preventTapHighlight&&jindo.$Element(this._elArea).preventTapHighlight(false);this._wfMouseOver.detach(this._elArea,"mouseover");this._wfMouseOut.detach(this._elArea,"mouseout");this._wfMouseDown.detach(this._elArea,"mousedown");this._wfMouseUp.detach(document,"mouseup");this._aOveredElements.length=0;this._aDownedElements.length=0},_findRollover:function(el){var sClassName=this.option("sClassName");return jindo.$$.test(el,"."+sClassName)?el:jindo.$$.getSingle("! ."+sClassName,el)},_onMouseOver:function(we){var el=we.element,elRelated=we.relatedElement,htParam;for(;(el=this._findRollover(el));el=el.parentNode){if(elRelated&&this._isInnerElement(el,elRelated)){continue}this._addOvered(el);htParam={element:el,htStatus:this.option("htStatus"),weEvent:we};if(this.fireEvent("over",htParam)){this._addStatus(htParam.element,htParam.htStatus.sOver)}}},_onMouseOut:function(we){var el=we.element,elRelated=we.relatedElement,htParam;for(;(el=this._findRollover(el));el=el.parentNode){if(elRelated&&this._isInnerElement(el,elRelated)){continue}this._removeOvered(el);htParam={element:el,htStatus:this.option("htStatus"),weEvent:we};if(this.fireEvent("out",htParam)){this._removeStatus(htParam.element,htParam.htStatus.sOver)}}},_onMouseDown:function(we){var el=we.element,htParam;while((el=this._findRollover(el))){htParam={element:el,htStatus:this.option("htStatus"),weEvent:we};this._aDownedElements.push(el);if(this.fireEvent("down",htParam)){this._addStatus(htParam.element,htParam.htStatus.sDown)}el=el.parentNode}},_onMouseUp:function(we){var el=we.element,aTargetElementDatas=[],aDownedElements=this._aDownedElements,htParam,elMouseDown,i;for(i=0;(elMouseDown=aDownedElements[i]);i++){aTargetElementDatas.push({element:elMouseDown,htStatus:this.option("htStatus"),weEvent:we})}for(;(el=this._findRollover(el));el=el.parentNode){if(jindo.$A(aDownedElements).indexOf(el)>-1){continue}aTargetElementDatas.push({element:el,htStatus:this.option("htStatus"),weEvent:we})}for(i=0;(htParam=aTargetElementDatas[i]);i++){if(this.fireEvent("up",htParam)){this._removeStatus(htParam.element,htParam.htStatus.sDown)}}this._aDownedElements=[]}}).extend(jindo.UIComponent);jindo.RolloverClick=jindo.$Class({$init:function(el,htOption){this.option({bActivateOnload:true,sCheckEvent:"click",bCheckDblClick:false,RolloverArea:{sClassName:"rollover",sClassPrefix:"rollover-",bCheckMouseDown:false,bActivateOnload:false,htStatus:{sOver:"over",sDown:"down"}}});this.option(htOption||{});var self=this;this._oRolloverArea=new jindo.RolloverArea(el,this.option("RolloverArea")).attach({over:function(oCustomEvent){if(!self.fireEvent("over",oCustomEvent)){oCustomEvent.stop()}},out:function(oCustomEvent){if(!self.fireEvent("out",oCustomEvent)){oCustomEvent.stop()}}});this._wfClick=jindo.$Fn(this._onClick,this);this._wfDblClick=jindo.$Fn(this._onClick,this);if(this.option("bActivateOnload")){this.activate()}},_onClick:function(we){var elRollover=we.element,sType="click";if(we.type=="dblclick"){sType=we.type}while((elRollover=this._oRolloverArea._findRollover(elRollover))){this.fireEvent(sType,{element:elRollover,htStatus:this._oRolloverArea.option("htStatus"),weEvent:we});elRollover=elRollover.parentNode}},_onActivate:function(){this._wfClick.attach(this._oRolloverArea._elArea,this.option("sCheckEvent"));if(this.option("bCheckDblClick")){this._wfDblClick.attach(this._oRolloverArea._elArea,"dblclick")}this._oRolloverArea.activate()},_onDeactivate:function(){this._wfClick.detach(this._oRolloverArea._elArea,this.option("sCheckEvent"));this._wfDblClick.detach(this._oRolloverArea._elArea,"dblclick");this._oRolloverArea.deactivate()}}).extend(jindo.UIComponent);jindo.Slider=jindo.$Class({_elTrack:null,_aThumbs:null,_aPoses:null,_htSwap:null,$init:function(el,oOptions){this.option({sClassPrefix:"slider-",bVertical:false,bJump:true,bDragOnTrack:true,fAdjustValue:null,nMinValue:0,nMaxValue:1,bActivateOnload:true});this.option(oOptions||{});if(!this.option("bVertical")){this._htSwap={y:"nY",x:"nX",clientX:"clientX",pageX:"pageX",offsetWidth:"offsetWidth",left:"left"}}else{this._htSwap={y:"nX",x:"nY",clientX:"clientY",pageX:"pageY",offsetWidth:"offsetHeight",left:"top"}}this._elTrack=jindo.$(el);this._aThumbs=jindo.$$("."+this.option("sClassPrefix")+"thumb",this._elTrack);this._sRand="S"+parseInt(Math.random()*100000000,10);jindo.$ElementList(this._aThumbs).addClass(this._sRand);this._aPoses=this.positions();this._onTrackMouseDownFn=jindo.$Fn(this._onTrackMouseDown,this);this._initDragArea();if(this.option("bActivateOnload")){this.activate()}},getTrack:function(){return this._elTrack},getThumb:function(nIndex){return this._aThumbs[nIndex]},_initDragArea:function(){var self=this;var htSwap=this._htSwap;this._oDragArea=new jindo.DragArea(this._elTrack,{sClassName:this._sRand,bFlowOut:false}).attach({beforeDrag:function(oCustomEvent){var nIndex=self._getThumbIndex(oCustomEvent.elHandle);var htParam={nIndex:nIndex,nPos:oCustomEvent[htSwap.x],bJump:false};if(!self.fireEvent("beforeChange",htParam)){oCustomEvent.stop();return false}oCustomEvent[htSwap.x]=self._getAdjustedPos(nIndex,htParam.nPos);oCustomEvent[htSwap.y]=null},drag:function(oCustomEvent){var nIndex=self._getThumbIndex(oCustomEvent.elHandle);var nPos=oCustomEvent[htSwap.x];if(nPos!=self._aPoses[nIndex]){self._aPoses[nIndex]=nPos;self._fireChangeEvent(nIndex)}}})},getDragArea:function(){return this._oDragArea},_fireChangeEvent:function(nIndex){var nPos=this._getPosition(nIndex);this.fireEvent("change",{nIndex:nIndex,nPos:nPos,nValue:this._getValue(nIndex,nPos)})},_onActivate:function(){this.getDragArea().activate();jindo.$Element.prototype.preventTapHighlight&&jindo.$Element(this._elTrack).preventTapHighlight(true);this._onTrackMouseDownFn.attach(this._elTrack,"mousedown")},_onDeactivate:function(){this.getDragArea().deactivate();jindo.$Element.prototype.preventTapHighlight&&jindo.$Element(this._elTrack).preventTapHighlight(false);this._onTrackMouseDownFn.detach(this._elTrack,"mousedown")},_onTrackMouseDown:function(we){if(!this.option("bJump")){return}we.stop(jindo.$Event.CANCEL_DEFAULT);var nIndex=0;var htSwap=this._htSwap;var el=we.element;var sClass="."+this.option("sClassPrefix")+"thumb";var bThumb=jindo.$$.test(el,sClass)||jindo.$$.getSingle("! "+sClass,el);if(bThumb){return}var nPos=we.pos()[htSwap.pageX];nPos-=jindo.$Element(this._elTrack).offset()[htSwap.left];var nMaxDistance=9999999;for(var i=0,oThumb;(oThumb=this._aThumbs[i]);i++){var nThumbPos=parseInt(jindo.$Element(oThumb).css(htSwap.left),10)||0;nThumbPos+=parseInt(oThumb[htSwap.offsetWidth]/2,10);var nDistance=Math.abs(nPos-nThumbPos);if(nDistance<nMaxDistance){nMaxDistance=nDistance;nIndex=i}}nPos-=parseInt(this._aThumbs[nIndex][htSwap.offsetWidth]/2,10);this.positions(nIndex,nPos);if(this.option("bDragOnTrack")){this.getDragArea().startDragging(this._aThumbs[nIndex])}},_getTrackInfo:function(nIndex){var htSwap=this._htSwap;var oThumb=this._aThumbs[nIndex];var nThumbSize=oThumb[htSwap.offsetWidth];var nTrackSize=this._elTrack[htSwap.offsetWidth];var nMaxPos=nTrackSize-nThumbSize;var nMax=this.option("nMaxValue");var nMin=this.option("nMinValue");return{maxPos:nMaxPos,max:nMax,min:nMin}},_getValue:function(nIndex,nPos){if(typeof nPos=="undefined"){nPos=this._getPosition(nIndex)}var oInfo=this._getTrackInfo(nIndex);var maxPos=0;if(oInfo.maxPos!==0){maxPos=nPos*(oInfo.max-oInfo.min)/oInfo.maxPos}var nValue=maxPos+oInfo.min;nValue=Math.min(Math.max(nValue,Math.min(oInfo.min,oInfo.max)),Math.max(oInfo.min,oInfo.max));var fAdjust=this.option("fAdjustValue");if(fAdjust){nValue=fAdjust.call(this,nValue)}return nValue},_getAdjustedPos:function(nIndex,nPos){var nAdjustedPos=nPos;var oInfo=this._getTrackInfo(nIndex);var fAdjust=this.option("fAdjustValue");if(fAdjust){var nValue=Math.min(Math.max(nAdjustedPos*(oInfo.max-oInfo.min)/oInfo.maxPos+oInfo.min,oInfo.min),oInfo.max);var nAfterValue=fAdjust.call(this,nValue);if(nValue!=nAfterValue){nAdjustedPos=oInfo.maxPos*(nAfterValue-oInfo.min)/(oInfo.max-oInfo.min)}}nAdjustedPos=Math.max(nAdjustedPos,0);nAdjustedPos=Math.min(nAdjustedPos,oInfo.maxPos);return nAdjustedPos},_getThumbIndex:function(oThumb){for(var i=0,len=this._aThumbs.length;i<len;i++){if(this._aThumbs[i]==oThumb){return i}}return -1},_getPosition:function(nIndex){var sPos=jindo.$Element(this._aThumbs[nIndex]).css(this._htSwap.left);return(sPos=="auto")?0:parseInt(sPos,10)},_setPosition:function(nIndex,nPos){this._aPoses[nIndex]=nPos;jindo.$Element(this._aThumbs[nIndex]).css(this._htSwap.left,nPos+"px")},positions:function(nIndex,nPos,bFireEvent){if(typeof bFireEvent=="undefined"){bFireEvent=true}switch(arguments.length){case 0:var aPoses=[];jindo.$A(this._aThumbs).forEach(function(el,i){aPoses[i]=this._getPosition(i)},this);return aPoses;case 1:return this._getPosition(nIndex);default:if(bFireEvent){var htParam={nIndex:nIndex,nPos:nPos,bJump:true};if(this.fireEvent("beforeChange",htParam)){var nAfterPos=this._getAdjustedPos(nIndex,htParam.nPos);var bChanged=(nAfterPos!=this._aPoses[nIndex]);this._setPosition(nIndex,nAfterPos);if(bChanged){this._fireChangeEvent(nIndex)}}return this}this._setPosition(nIndex,this._getAdjustedPos(nIndex,nPos));return this}},values:function(nIndex,nValue,bFireEvent){if(typeof bFireEvent=="undefined"){bFireEvent=true}switch(arguments.length){case 0:var aValues=[];for(var i=0,len=this._aThumbs.length;i<len;i++){aValues[i]=this._getValue(i)}return aValues;case 1:return this._getValue(nIndex,this.positions(nIndex));default:var oInfo=this._getTrackInfo(nIndex);this.positions(nIndex,((nValue-oInfo.min)*oInfo.maxPos/(oInfo.max-oInfo.min))||0,bFireEvent);return this}}}).extend(jindo.UIComponent);jindo.ScrollBar=new jindo.$Class({_bMouseEnter:false,_bIsEventAttachedForCommon:false,_bIsEventAttachedForVertical:false,_bIsEventAttachedForHorizontal:false,$init:function(el,oOption){this.option({sClassPrefix:"scrollbar-",nDelta:16,sClassNameForRollover:"rollover",bActivateOnload:true});this.option(oOption||{});this._el=jindo.$(el);this._oTimer=new jindo.Timer();this._oTransition=new jindo.Transition().fps(30);this._wfOnMouseEnter=jindo.$Fn(this._onMouseEnter,this);this._wfOnMouseLeave=jindo.$Fn(this._onMouseLeave,this);this._wfOnWheel=jindo.$Fn(this._onWheel,this);this._wfOnMouseUp=jindo.$Fn(this._onMouseUp,this);this._assignHTMLElements();this._initialize4Tablet();if(this.option("bActivateOnload")){this.activate()}},_assignHTMLElements:function(){var el=this._el,sClassPrefix=this.option("sClassPrefix");this._elBox=jindo.$$.getSingle("."+sClassPrefix+"box",el);this._elContent=jindo.$$.getSingle("."+sClassPrefix+"content",el);var welBox=jindo.$Element(this._elBox),welContent=jindo.$Element(this._elContent);this._oBoxSize={nWidth:welBox.width(),nHeight:welBox.height()};this._oContentSize={nWidth:welContent.width(),nHeight:welContent.height()};this._oHorizontal={elScrollBar:jindo.$$.getSingle("."+sClassPrefix+"h",el)};var oH=this._oHorizontal;if(oH.elScrollBar){oH.elTrack=jindo.$$.getSingle("."+sClassPrefix+"track",oH.elScrollBar);oH.elThumb=jindo.$$.getSingle("."+sClassPrefix+"thumb",oH.elTrack);oH.elThumbHead=jindo.$$.getSingle("."+sClassPrefix+"thumb-head",oH.elThumb);oH.elThumbBody=jindo.$$.getSingle("."+sClassPrefix+"thumb-body",oH.elThumb);oH.elThumbFoot=jindo.$$.getSingle("."+sClassPrefix+"thumb-foot",oH.elThumb);oH.elButtonLeft=jindo.$$.getSingle("."+sClassPrefix+"button-left",oH.elScrollBar);oH.elButtonRight=jindo.$$.getSingle("."+sClassPrefix+"button-right",oH.elScrollBar)}this._oVertical={elScrollBar:jindo.$$.getSingle("."+sClassPrefix+"v",el)};var oV=this._oVertical;if(oV.elScrollBar){oV.elTrack=jindo.$$.getSingle("."+sClassPrefix+"track",oV.elScrollBar);oV.elThumb=jindo.$$.getSingle("."+sClassPrefix+"thumb",oV.elTrack);oV.elThumbHead=jindo.$$.getSingle("."+sClassPrefix+"thumb-head",oV.elThumb);oV.elThumbBody=jindo.$$.getSingle("."+sClassPrefix+"thumb-body",oV.elThumb);oV.elThumbFoot=jindo.$$.getSingle("."+sClassPrefix+"thumb-foot",oV.elThumb);oV.elButtonUp=jindo.$$.getSingle("."+sClassPrefix+"button-up",oV.elScrollBar);oV.elButtonDown=jindo.$$.getSingle("."+sClassPrefix+"button-down",oV.elScrollBar)}},getBox:function(){return this._elBox},getContent:function(){return this._elContent},getDefaultBoxSize:function(){return this._oBoxSize},getDefaultContentSize:function(){return this._oContentSize},getScrollBarHorizontal:function(){return this._oHorizontal},getScrollBarVertical:function(){return this._oVertical},getSliderHorizontal:function(){return this._oSliderHorizontal||null},getSliderVertical:function(){return this._oSliderVertical||null},getRolloverArea:function(){return this._oRolloverArea},_attachEvent:function(sDirection){var sClassPrefix=this.option("sClassPrefix"),self=this,oH=this.getScrollBarHorizontal(),oV=this.getScrollBarVertical();function attach(o){if(o.elScrollBar){var sClassNameForRollover=self.option("sClassNameForRollover");jindo.$Element(o.elTrack).addClass(sClassNameForRollover);jindo.$Element(o.elThumb).addClass(sClassNameForRollover);if(o.elButtonLeft){jindo.$Element(o.elButtonLeft).addClass(sClassNameForRollover)}if(o.elButtonRight){jindo.$Element(o.elButtonRight).addClass(sClassNameForRollover)}if(o.elButtonUp){jindo.$Element(o.elButtonUp).addClass(sClassNameForRollover)}if(o.elButtonDown){jindo.$Element(o.elButtonDown).addClass(sClassNameForRollover)}}}function attachH(){if(!self._bIsEventAttachedForHorizontal){attach(oH)}self._bIsEventAttachedForHorizontal=true}function attachV(){if(!self._bIsEventAttachedForVertical){attach(oV)}self._bIsEventAttachedForVertical=true}if(!this._bIsEventAttachedForCommon){this._initSliders();this._initRolloverArea();this._wfOnMouseEnter.attach(this._el,"mouseenter");this._wfOnMouseLeave.attach(this._el,"mouseleave");this._wfOnWheel.attach(document,"mousewheel");this._wfOnMouseUp.attach(document,"mouseup");this._bIsEventAttachedForCommon=true;jindo.$Element(this._el).removeClass(sClassPrefix+"noscript")}if(!sDirection){attachH();attachV()}if(sDirection=="horizontal"){attachH()}if(sDirection=="vertical"){attachV()}},_detachEvent:function(sDirection){var sClassPrefix=this.option("sClassPrefix"),self=this,oH=this.getScrollBarHorizontal(),oV=this.getScrollBarVertical();function detach(o){if(o.elScrollBar){var sClassNameForRollover=self.option("sClassNameForRollover");jindo.$Element(o.elTrack).removeClass(sClassNameForRollover);jindo.$Element(o.elThumb).removeClass(sClassNameForRollover);if(o.elButtonLeft){jindo.$Element(o.elButtonLeft).removeClass(sClassNameForRollover)}if(o.elButtonRight){jindo.$Element(o.elButtonRight).removeClass(sClassNameForRollover)}if(o.elButtonUp){jindo.$Element(o.elButtonUp).removeClass(sClassNameForRollover)}if(o.elButtonDown){jindo.$Element(o.elButtonDown).removeClass(sClassNameForRollover)}}}function detachH(){if(self._bIsEventAttachedForHorizontal){detach(oH)}self._bIsEventAttachedForHorizontal=false}function detachV(){if(self._bIsEventAttachedForVertical){detach(oV)}self._bIsEventAttachedForVertical=false}if(!sDirection){detachH();detachV()}else{if(sDirection=="horizontal"){detachH()}else{if(sDirection=="vertical"){detachV()}}}if(this._bIsEventAttachedForCommon&&!this._bIsEventAttachedForHorizontal&&!this._bIsEventAttachedForVertical){this._wfOnMouseEnter.detach(this._el,"mouseenter");this._wfOnMouseLeave.detach(this._el,"mouseleave");this._wfOnWheel.detach(document,"mousewheel");this._wfOnMouseUp.detach(document,"mouseup");this._bMouseEnter=false;this._bIsEventAttachedForCommon=false;this.getRolloverArea().deactivate();jindo.$Element(this._el).addClass(sClassPrefix+"noscript")}},_activateH:function(){var oSliderH=this.getSliderHorizontal();if(oSliderH){oSliderH.activate();this.getBox().scrollLeft=0;this.setScrollLeft(0)}},_activateV:function(){var oSliderV=this.getSliderVertical();if(oSliderV){oSliderV.activate();this.getBox().scrollTop=0;this.setScrollTop(0)}},_onActivate:function(sDirection){this._attachEvent(sDirection||null);this._activate4Tablet();if(!sDirection){this._activateH();this._activateV();jindo.$Element(this._el).removeClass(this.option("sClassPrefix")+"noscript");return}if(sDirection=="horizontal"){this._activateH();return}if(sDirection=="vertical"){this._activateV();return}},_deactivateH:function(){var oSliderH=this.getSliderHorizontal();if(oSliderH){oSliderH.deactivate();this.getContent().style.left="0px";this.getBox().scrollLeft=0}},_deactivateV:function(){var oSliderV=this.getSliderVertical();if(oSliderV){oSliderV.deactivate();this.getContent().style.top="0px";this.getBox().scrollTop=0}},_onDeactivate:function(sDirection){this._detachEvent(sDirection||null);this._deactivate4Tablet();if(!sDirection){this._deactivateH();this._deactivateV();jindo.$Element(this._el).addClass(this.option("sClassPrefix")+"noscript");return}if(sDirection=="horizontal"){this._deactivateH();return}if(sDirection=="vertical"){this._deactivateV();return}},_initSliders:function(){var self=this,sClassPrefix=this.option("sClassPrefix"),oH=this.getScrollBarHorizontal(),oV=this.getScrollBarVertical();if(oH.elScrollBar){this._nScrollWidth=jindo.$Element(this._elContent).width()-jindo.$Element(this._elBox).width();this._oSliderHorizontal=new jindo.Slider(oH.elTrack,{sClassPrefix:sClassPrefix,bVertical:false,nMinValue:0,nMaxValue:this._nScrollWidth});this._oSliderHorizontal._oTransition=new jindo.Transition().fps(30);this._oSliderHorizontal.attach({beforeChange:function(oCustomEvent){var nTrackWidth=jindo.$Element(this.getTrack()).width(),nThumbWidth=jindo.$Element(this.getThumb(oCustomEvent.nIndex)).width(),nAvailWidth=nTrackWidth-nThumbWidth;oCustomEvent.nPos=Math.min(oCustomEvent.nPos,nAvailWidth);oCustomEvent.nPos=Math.max(oCustomEvent.nPos,0);if(oCustomEvent.bJump){oCustomEvent.stop();this._oTransition.abort().start(200,this.getThumb(oCustomEvent.nIndex),{"@left":jindo.Effect.easeOut(oCustomEvent.nPos+"px")}).attach({playing:function(oCustomEvent2){self.setScrollLeft(self._oSliderHorizontal._getValue(0,parseInt(oCustomEvent2.sValue,10)))}})}else{self.setScrollLeft(this._getValue(0,oCustomEvent.nPos))}}})}if(oV.elScrollBar){this._nScrollHeight=jindo.$Element(this._elContent).height()-jindo.$Element(this._elBox).height();this._oSliderVertical=new jindo.Slider(oV.elTrack,{sClassPrefix:sClassPrefix,bVertical:true,nMinValue:0,nMaxValue:this._nScrollHeight});this._oSliderVertical._oTransition=new jindo.Transition().fps(30);this._oSliderVertical.attach({beforeChange:function(oCustomEvent){var nTrackHeight=jindo.$Element(this.getTrack()).height(),nThumbHeight=jindo.$Element(this.getThumb(oCustomEvent.nIndex)).height(),nAvailHeight=nTrackHeight-nThumbHeight;oCustomEvent.nPos=Math.min(oCustomEvent.nPos,nAvailHeight);oCustomEvent.nPos=Math.max(oCustomEvent.nPos,0);if(oCustomEvent.bJump){oCustomEvent.stop();this._oTransition.abort().start(200,this.getThumb(oCustomEvent.nIndex),{"@top":jindo.Effect.easeOut(oCustomEvent.nPos+"px")}).attach({playing:function(oCustomEvent2){self.setScrollTop(self._oSliderVertical.values(0))}})}else{self.setScrollTop(this._getValue(0,oCustomEvent.nPos))}}})}},_initRolloverArea:function(){var self=this,sClassPrefix=this.option("sClassPrefix"),sClassNameForRollover=this.option("sClassNameForRollover");this._oRolloverArea=new jindo.RolloverArea(this._el,{sClassName:sClassNameForRollover,sClassPrefix:sClassPrefix}).attach({over:function(oCustomEvent){oCustomEvent.stop();self._onRollover("over",oCustomEvent.element)},down:function(oCustomEvent){oCustomEvent.stop();self._onMouseDown(oCustomEvent.element);self._onRollover("down",oCustomEvent.element)},up:function(oCustomEvent){oCustomEvent.stop();self._onMouseUp(oCustomEvent.element);self._onRollover("up",oCustomEvent.element)},out:function(oCustomEvent){oCustomEvent.stop();self._onRollover("out",oCustomEvent.element)}})},reset:function(){var oSliderH=this.getSliderHorizontal(),oSliderV=this.getSliderVertical();if(oSliderH){this._nScrollWidth=jindo.$Element(this._elContent).width()-jindo.$Element(this._elBox).width();oSliderH.option("nMaxValue",this._nScrollWidth);this.setScrollLeft(0)}if(oSliderV){this._nScrollHeight=jindo.$Element(this._elContent).height()-jindo.$Element(this._elBox).height();oSliderV.option("nMaxValue",this._nScrollHeight);this.setScrollTop(0)}this._elBox.scrollLeft=0;this._elBox.scrollTop=0},hasScrollBarHorizontal:function(){var sClassPrefix=this.option("sClassPrefix"),o=this.getScrollBarHorizontal();if(o.elScrollBar){var welScrollBar=jindo.$Element(o.elScrollBar);return welScrollBar.visible()||welScrollBar.hasClass(sClassPrefix+"show")}return false},hasScrollBarVertical:function(){var sClassPrefix=this.option("sClassPrefix"),o=this.getScrollBarVertical();if(o.elScrollBar){var welScrollBar=jindo.$Element(o.elScrollBar);return welScrollBar.visible()||welScrollBar.hasClass(sClassPrefix+"show")}return false},setScrollTop:function(n){n=Math.min(n,this._nScrollHeight||0);n=Math.max(n,0);n=Math.round(n);var htParam={sDirection:"top",nPosition:n};jindo.$Element(this._elContent).css("top",(htParam.nPosition*-1)+"px");var oSliderV=this.getSliderVertical();if(oSliderV){oSliderV.values(0,htParam.nPosition,false)}this._fireScrollEvent(htParam)},setScrollLeft:function(n){n=Math.min(n,this._nScrollWidth||0);n=Math.max(n,0);n=Math.round(n);var htParam={sDirection:"left",nPosition:n};jindo.$Element(this._elContent).css("left",(htParam.nPosition*-1)+"px");var oSliderH=this.getSliderHorizontal();if(oSliderH){oSliderH.values(0,htParam.nPosition,false)}this._fireScrollEvent(htParam)},setScrollTopBy:function(n){this.setScrollTop(this.getScrollTop()+n)},setScrollLeftBy:function(n){this.setScrollLeft(this.getScrollLeft()+n)},getScrollTop:function(){return parseInt(jindo.$Element(this._elContent).css("top"),10)*-1},getScrollLeft:function(){return parseInt(jindo.$Element(this._elContent).css("left"),10)*-1},_getElementType:function(wel){var sClassPrefix=this.option("sClassPrefix");if(wel.hasClass(sClassPrefix+"track")){return"track"}else{if(wel.hasClass(sClassPrefix+"thumb")){return"thumb"}else{if(wel.hasClass(sClassPrefix+"button-up")){return"button-up"}else{if(wel.hasClass(sClassPrefix+"button-up")){return"button-up"}else{if(wel.hasClass(sClassPrefix+"button-down")){return"button-down"}else{if(wel.hasClass(sClassPrefix+"button-left")){return"button-left"}else{if(wel.hasClass(sClassPrefix+"button-right")){return"button-right"}else{return false}}}}}}}},_fireScrollEvent:function(htParam){this.fireEvent("scroll",htParam)},_onWheel:function(we){if(!this._bMouseEnter){return}we.stop(jindo.$Event.CANCEL_DEFAULT);var nDelta=we.mouse().delta,nDirection=nDelta===0?0:nDelta/Math.abs(nDelta)*-1,n=Math.ceil(Math.abs(nDelta))*nDirection*this.option("nDelta"),bH=this.hasScrollBarHorizontal(),bV=this.hasScrollBarVertical();if(!bH&&!bV){return}if(this.hasScrollBarVertical()&&this._bIsEventAttachedForVertical){this.setScrollTop(this.getScrollTop()+n);return}this.setScrollLeft(this.getScrollLeft()+n)},_onMouseDown:function(el){var wel=jindo.$Element(el),self=this,setScrollBy,sElementType=this._getElementType(wel);switch(sElementType){case"button-up":setScrollBy=function(n){self.setScrollTopBy(~~(n*-1))};break;case"button-down":setScrollBy=function(n){self.setScrollTopBy(n)};break;case"button-left":setScrollBy=function(n){self.setScrollLeftBy(~~(n*-1))};break;case"button-right":setScrollBy=function(n){self.setScrollLeftBy(n)};break;default:return}setScrollBy(16);this._oTimer.start(function(){setScrollBy(16);return true},100)},_onMouseUp:function(el){this._oTimer.abort()},_onMouseEnter:function(we){this._bMouseEnter=true},_onMouseLeave:function(we){this._bMouseEnter=false},_onRollover:function(sType,el){var wel=jindo.$Element(el),sClassPrefix=this.option("sClassPrefix"),sElementType=this._getElementType(wel);switch(sType){case"over":wel.addClass(sClassPrefix+sElementType+"-over");break;case"down":wel.addClass(sClassPrefix+sElementType+"-hold");break;case"up":wel.removeClass(sClassPrefix+sElementType+"-hold");break;case"out":wel.removeClass(sClassPrefix+sElementType+"-over");break}},_initialize4Tablet:function(){this._fpOnTouchDragStart=jindo.$Fn(function(oEvent){this._oPos4Tablet=oEvent.pos()},this);this._fpOnTouchDragMove=jindo.$Fn(function(oEvent){if(!this._oPos4Tablet){return}var oOldPos=this._oPos4Tablet;var oNewPos=oEvent.pos();this.setScrollLeftBy(oOldPos.pageX-oNewPos.pageX);this.setScrollTopBy(oOldPos.pageY-oNewPos.pageY);this._oPos4Tablet=oNewPos;oEvent.stopDefault()},this);this._fpOnTouchDragEnd=jindo.$Fn(function(oEvent){this._oPos4Tablet=null},this)},_activate4Tablet:function(){var elEl=this._elContent;jindo.$Element.prototype.preventTapHighlight&&jindo.$Element(this._el).preventTapHighlight(true);this._fpOnTouchDragStart.attach(elEl,"touchstart");this._fpOnTouchDragMove.attach(elEl,"touchmove");this._fpOnTouchDragEnd.attach(elEl,"touchend")},_deactivate4Tablet:function(){var elEl=this._elContent;jindo.$Element.prototype.preventTapHighlight&&jindo.$Element(this._el).preventTapHighlight(false);this._fpOnTouchDragStart.detach(elEl,"touchstart");this._fpOnTouchDragMove.detach(elEl,"touchmove");this._fpOnTouchDragEnd.detach(elEl,"touchend")}}).extend(jindo.UIComponent);jindo.ScrollBox=new jindo.$Class({$init:function(el,htOption){this.option({sClassPrefix:"scrollbar-",bActivateOnload:true,sOverflowX:"auto",sOverflowY:"auto",bAdjustThumbSize:true,nMinThumbSize:50,nDelta:16});this.option(htOption||{});this._el=jindo.$(el);if(this.option("bActivateOnload")){this.activate();this.reset()}},reset:function(){this._autoToggleScrollBar();var oStatusH=this.hasScrollBarHorizontal();var oStatusV=this.hasScrollBarVertical();this._adjustBoxSize();this._adjustContentSize();this._autoToggleScrollBar();if(oStatusH!=this.hasScrollBarHorizontal()||oStatusV!=this.hasScrollBarVertical()){this._adjustBoxSize();this._adjustContentSize()}this._autoToggleAvailability();this._adjustTrackSize();this._adjustThumbSize();this.$super.reset()},_onActivate:function(){this.$super._onActivate();this.reset()},_onDeactivate:function(){this.$super._onDeactivate();this._adjustBoxSize()},setSize:function(nWidth,nHeight){if(nWidth){jindo.$Element(this._el).css("width",nWidth+"px")}if(nHeight){jindo.$Element(this._el).css("height",nHeight+"px")}this.setBoxSize(nWidth,nHeight);this._oBoxSize={nWidth:jindo.$Element(this._elBox).width(),nHeight:jindo.$Element(this._elBox).height()};this.reset()},getContentSize:function(){var welContent=jindo.$Element(this._elContent);return{nWidth:parseInt(welContent.width(),10),nHeight:parseInt(welContent.height(),10)}},setContentSize:function(nWidth,nHeight){var welContent=jindo.$Element(this._elContent);if(nWidth){if(nWidth==Infinity){welContent.css("width","")}else{welContent.css("width",nWidth+"px")}}if(nHeight){if(nHeight==Infinity){welContent.css("height","auto")}else{welContent.css("height",nHeight+"px")}}this.$super.reset()},getBoxSize:function(){var welBox=jindo.$Element(this._elBox);return{nWidth:parseInt(welBox.width(),10),nHeight:parseInt(welBox.height(),10)}},setBoxSize:function(nWidth,nHeight){var welBox=jindo.$Element(this._elBox);if(nWidth){welBox.css("width",nWidth+"px")}if(nHeight){welBox.css("height",nHeight+"px")}this.$super.reset()},getTrackSize:function(ht){if(!ht.elScrollBar){return{nWidth:0,nHeight:0}}var welTrack=jindo.$Element(ht.elTrack);return{nWidth:parseInt(welTrack.width(),10),nHeight:parseInt(welTrack.height(),10)}},setTrackSize:function(o,nWidth,nHeight){var welTrack=jindo.$Element(o.elTrack);if(nWidth){welTrack.css("width",nWidth+"px")}if(nHeight){welTrack.css("height",nHeight+"px")}},isNeededScrollBarHorizontal:function(){if(this.option("sOverflowX")=="scroll"){return true}var oContentSize=this.getContentSize();var oBoxSize=this.getDefaultBoxSize();if(this.getScrollBarHorizontal().elScrollBar&&this.option("sOverflowX")!="hidden"){if(this.hasScrollBarVertical()){if(oContentSize.nWidth>oBoxSize.nWidth-jindo.$Element(this.getScrollBarVertical().elScrollBar).width()){return true}}if(oContentSize.nWidth>oBoxSize.nWidth){return true}}return false},isNeededScrollBarVertical:function(){if(this.option("sOverflowY")=="scroll"){return true}var oContentSize=this.getContentSize();var oBoxSize=this.getDefaultBoxSize();if(this.getScrollBarVertical().elScrollBar&&this.option("sOverflowY")!="hidden"){if(this.hasScrollBarHorizontal()){if(oContentSize.nHeight>oBoxSize.nHeight-jindo.$Element(this.getScrollBarHorizontal().elScrollBar).height()){return true}}if(oContentSize.nHeight>oBoxSize.nHeight){return true}}return false},_autoToggleScrollBar:function(){if(!this.isActivating()){return}var sClassPrefix=this.option("sClassPrefix");var oH=this.getScrollBarHorizontal();var oV=this.getScrollBarVertical();var welScrollBar;var bAjustThumbSize=this.option("bAdjustThumbSize");var bV=this.isNeededScrollBarVertical();if(oV.elScrollBar){welScrollBar=jindo.$Element(oV.elScrollBar);if(bV){welScrollBar.addClass(sClassPrefix+"show")}else{welScrollBar.removeClass(sClassPrefix+"show")}if(oV.elThumb&&bAjustThumbSize){jindo.$Element(oV.elThumb).css("height","0px")}}var bH=this.isNeededScrollBarHorizontal();if(oH.elScrollBar){welScrollBar=jindo.$Element(oH.elScrollBar);if(bH){welScrollBar.addClass(sClassPrefix+"show")}else{welScrollBar.removeClass(sClassPrefix+"show")}if(oH.elThumb&&bAjustThumbSize){jindo.$Element(oH.elThumb).css("width","0px")}}if(oV.elScrollBar){welScrollBar=jindo.$Element(oV.elScrollBar);if(this.isNeededScrollBarVertical()){welScrollBar.addClass(sClassPrefix+"show")}else{welScrollBar.removeClass(sClassPrefix+"show")}if(oV.elThumb&&bAjustThumbSize){jindo.$Element(oV.elThumb).css("height","0px")}}},_adjustTrackSize:function(){if(!this.isActivating()){return}var oBoxSize=this.getDefaultBoxSize();var oH=this.getScrollBarHorizontal();var oV=this.getScrollBarVertical();var bH=this.isNeededScrollBarHorizontal();if(bH&&oH.elScrollBar){var nTrackWidth=oBoxSize.nWidth;var wel=jindo.$Element(oH.elScrollBar);wel.css("top",oBoxSize.nHeight-wel.height()+"px");var nVerticalWidth=0;if(this.hasScrollBarVertical()&&oV.elScrollBar){nVerticalWidth=parseInt(jindo.$Element(oV.elScrollBar).width(),10);nTrackWidth-=nVerticalWidth}wel.width(nTrackWidth);var nButtonLeftWidth=0;if(oH.elButtonLeft){nButtonLeftWidth=parseInt(jindo.$Element(oH.elButtonLeft).width(),10);nTrackWidth-=nButtonLeftWidth}if(oH.elButtonRight){nTrackWidth-=parseInt(jindo.$Element(oH.elButtonRight).width(),10)}jindo.$Element(oH.elTrack).css("left",nButtonLeftWidth+"px");this.setTrackSize(oH,nTrackWidth,null)}var bV=this.isNeededScrollBarVertical();if(bV&&oV.elScrollBar){var nTrackHeight=oBoxSize.nHeight;var nHorizontalHeight=0;if(this.hasScrollBarHorizontal()&&oH.elScrollBar){nHorizontalHeight=parseInt(jindo.$Element(oH.elScrollBar).height(),10);nTrackHeight-=nHorizontalHeight}if(oV.elButtonUp){nTrackHeight-=parseInt(jindo.$Element(oV.elButtonUp).height(),10)}if(oV.elButtonDown){nTrackHeight-=parseInt(jindo.$Element(oV.elButtonDown).height(),10)}this.setTrackSize(oV,null,nTrackHeight)}},_adjustBoxSize:function(){var oBoxSize=this.getDefaultBoxSize();var oH=this.getScrollBarHorizontal();var oV=this.getScrollBarVertical();var bV=this.hasScrollBarVertical();var bH=this.hasScrollBarHorizontal();this.setBoxSize(oBoxSize.nWidth,oBoxSize.nHeight);if(this.isActivating()){if(bH&&oH.elScrollBar){var nHeight=oBoxSize.nHeight;nHeight-=parseInt(jindo.$Element(oH.elScrollBar).height(),10);this.setBoxSize(null,nHeight)}if(bV&&oV.elScrollBar){var nWidth=oBoxSize.nWidth;nWidth-=parseInt(jindo.$Element(oV.elScrollBar).width(),10);this.setBoxSize(nWidth,null)}}},_adjustContentSize:function(){if(!this.isActivating()){return}var oBoxSize=this.getBoxSize();var bV=this.option("sOverflowY")!="hidden";var bH=this.option("sOverflowX")!="hidden";var nWidth,nHeight;if(bV&&!bH){nWidth=oBoxSize.nWidth}if(bH&&!bV){nHeight=oBoxSize.nHeight}this.setContentSize(nWidth||Infinity,nHeight||Infinity)},_adjustThumbSize:function(){if(!this.isActivating()){return}if(!this.option("bAdjustThumbSize")){return}var nMinThumbSize=this.option("nMinThumbSize");if(typeof nMinThumbSize=="undefined"){nMinThumbSize=50}var oContentSize=this.getContentSize();var oBoxSize=this.getBoxSize();var nGap;var oH=this.getScrollBarHorizontal();var oV=this.getScrollBarVertical();if(oV.elScrollBar){var oTrackSizeV=this.getTrackSize(oV);var nThumbHeight=Math.floor(parseInt(oTrackSizeV.nHeight*oBoxSize.nHeight/oContentSize.nHeight,10));if(isNaN(nThumbHeight)){nThumbHeight=0}if(nThumbHeight<nMinThumbSize){nThumbHeight=nMinThumbSize}if(nThumbHeight>=oTrackSizeV.nHeight){nThumbHeight=oTrackSizeV.nHeight}jindo.$Element(oV.elThumb).height(nThumbHeight);nGap=0;if(oV.elThumbHead){nGap+=jindo.$Element(oV.elThumbHead).height()}if(oV.elThumbFoot){nGap+=jindo.$Element(oV.elThumbFoot).height()}if(oV.elThumbBody){jindo.$Element(oV.elThumbBody).height(nThumbHeight-nGap)}}if(oH.elScrollBar){var oTrackSizeH=this.getTrackSize(oH);var nThumbWidth=Math.floor(parseInt(oTrackSizeH.nWidth*oBoxSize.nWidth/oContentSize.nWidth,10));if(isNaN(nThumbWidth)){nThumbWidth=0}if(nThumbWidth<nMinThumbSize){nThumbWidth=nMinThumbSize}if(nThumbWidth>=oTrackSizeH.nWidth){nThumbWidth=oTrackSizeH.nWidth}jindo.$Element(oH.elThumb).width(nThumbWidth);nGap=0;if(oH.elThumbHead){nGap+=jindo.$Element(oH.elThumbHead).width()}if(oH.elThumbFoot){nGap+=jindo.$Element(oH.elThumbFoot).width()}if(oH.elThumbBody){jindo.$Element(oH.elThumbBody).width(nThumbWidth-nGap)}}},_autoToggleAvailability:function(){var sClassPrefix=this.option("sClassPrefix");var oContentSize=this.getContentSize();var oBoxSize=this.getBoxSize();var oH=this.getScrollBarHorizontal();var oV=this.getScrollBarVertical();if(oH.elScrollBar){if(this.option("sOverflowX")=="scroll"&&oBoxSize.nWidth>=oContentSize.nWidth){jindo.$Element(oH.elScrollBar).addClass(sClassPrefix+"disabled");this.$super._onDeactivate("horizontal");if(this.isActivating()){jindo.$Element(this._el).removeClass(sClassPrefix+"noscript")}}else{jindo.$Element(oH.elScrollBar).removeClass(sClassPrefix+"disabled");if(this.isActivating()){this.$super._onActivate("horizontal")}}}if(oV.elScrollBar){if(this.option("sOverflowY")=="scroll"&&oBoxSize.nHeight>=oContentSize.nHeight){jindo.$Element(oV.elScrollBar).addClass(sClassPrefix+"disabled");this.$super._onDeactivate("vertical");if(this.isActivating()){jindo.$Element(this._el).removeClass(sClassPrefix+"noscript")}}else{jindo.$Element(oV.elScrollBar).removeClass(sClassPrefix+"disabled");if(this.isActivating()){this.$super._onActivate("vertical")}}}}}).extend(jindo.ScrollBar);jindo.SelectArea=jindo.$Class({_waToggleCandidate:null,_waSelected:null,_aSizeInfo:null,$init:function(el,htOption){this._el=jindo.$(el);this._wel=jindo.$Element(this._el);var htDefaultOption={bActivateOnload:true,sClassName:"selectable",htStatus:{sSelected:"selected"},bMultiSelection:true,bDragSelect:true,nThreshold:5,bDeselectAllOutside:true,bRemainOne:false,bToggleSelected:false};this.option(htDefaultOption);this.option(htOption||{});this._waToggleCandidate=jindo.$A([]);this._waSelected=jindo.$A([]);this._sCtrl=(jindo.$Agent().os().mac)?"meta":"ctrl";this._welRectIndicator=null;this._wfDragStart=jindo.$Fn(this._onDragSelectStart,this);this._wfSelectStart=jindo.$Fn(this._onDragSelectStart,this);this._wfMouseDown=jindo.$Fn(this._onMouseDown,this);this._wfMouseMove=jindo.$Fn(this._onMouseMove,this);this._wfMouseUp=jindo.$Fn(this._onMouseUp,this);this._wfMouseUpWithinSelected=jindo.$Fn(this._onMouseUpWithinSelected,this);this._wfCompute=jindo.$Fn(this._computeSizeAndPos,this);if(this.option("bActivateOnload")){this.activate()}},getSelectableElement:function(){return jindo.$$("."+this.option("sClassName"),this._el)},isSelectable:function(el){return jindo.$Element(el).isChildOf(this._el)&&jindo.$$.test(el,"."+this.option("sClassName"))},getIndex:function(el){return jindo.$A(this.getSelectableElement()).indexOf(el)},select:function(a,bRemainSelected,bFireChangeEvent){a=this._convertArray(a);if(typeof bRemainSelected=="undefined"){bRemainSelected=false}if(typeof bFireChangeEvent=="undefined"){bFireChangeEvent=true}if(!bRemainSelected||!this.option("bMultiSelection")){this.deselectAll(false)}var aLastSelected=this._convertArray(this.getSelected()).concat();var htStatus=this.option("htStatus");for(var i=0;i<a.length;i++){var el=a[i];var wel=jindo.$Element(el);var htCustomEvent={elSelectable:el,nIndex:this.getIndex(el),bSelectedAgain:(a.length===1&&this._vLastSelected===a[0])};if(this.isSelectable(el)&&!this.isSelected(el)&&this.fireEvent("beforeSelect",htCustomEvent)){htCustomEvent={elSelectable:el,nIndex:this.getIndex(el),bSelectedAgain:(a.length===1&&this._vLastSelected===a[0])};wel.addClass(htStatus.sSelected);this._waSelected.push(el);this.fireEvent("select",htCustomEvent)}}if(bFireChangeEvent){this._fireChangeEvent(aLastSelected)}return this},deselect:function(a,bFireChangeEvent){a=this._convertArray(a);if(typeof bFireChangeEvent=="undefined"){bFireChangeEvent=true}var aLastSelected=this._convertArray(this.getSelected()).concat();var htStatus=this.option("htStatus");for(var i=0;i<a.length;i++){var el=a[i];var wel=jindo.$Element(el);var htParam={elSelectable:el,nIndex:this.getIndex(el)};if(this.isSelectable(el)&&this.isSelected(el)&&this.fireEvent("beforeDeselect",htParam)){wel.removeClass(htStatus.sSelected);this._waSelected=this._waSelected.refuse(el);this.fireEvent("deselect",htParam)}}if(bFireChangeEvent){this._fireChangeEvent(aLastSelected)}return this},deselectAll:function(bFireChangeEvent){if(typeof bFireChangeEvent=="undefined"){bFireChangeEvent=true}this.deselect(this.getSelected(),bFireChangeEvent);return this},toggle:function(a,bFireChangeEvent){a=this._convertArray(a);if(typeof bFireChangeEvent=="undefined"){bFireChangeEvent=true}for(var i=0;i<a.length;i++){var el=a[i];if(!this.isSelected(el)){this.select(el,true,bFireChangeEvent)}else{this.deselect(el,bFireChangeEvent)}}return this},getSelected:function(){if(this._waSelected.length()>0){return(this._waSelected.length()===1)?this._waSelected.get(0):this._waSelected.$value()}return null},isSelected:function(el){return this._waSelected.has(el)},_getSelectableUntil:function(el){var aReturn=el;var elFrom=this._elStartPoint;if(elFrom&&this.isSelected(elFrom)){var wa=jindo.$A(this.getSelectableElement());var nFrom=wa.indexOf(elFrom);var nTo=wa.indexOf(el);aReturn=wa.slice(Math.min(nFrom,nTo),Math.min(nFrom,nTo)+Math.abs(nFrom-nTo)+1).$value()}return aReturn},_findSelectableElement:function(el){var sClassName=this.option("sClassName");return(jindo.$$.test(el,"."+sClassName))?el:jindo.$$.getSingle("! ."+sClassName,el)},_isChanged:function(aLastSelected){var waLast=jindo.$A(aLastSelected),a=this._convertArray(this.getSelected());if(aLastSelected.length!=a.length){return true}for(var i=0;i<a.length;i++){if(!waLast.has(a[i])){return true}}return false},_fireChangeEvent:function(aLastSelected){if(this._isChanged(aLastSelected)){this.fireEvent("change")}},_convertArray:function(a){if(!(a instanceof Array)){if(a){a=[a]}else{a=[]}}return a},_onMouseDown:function(we){var htKey=we.key();var htMouse=we.mouse(true);if(htMouse.scrollbar){return}var elSelectable=this._findSelectableElement(we.element);var aLastSelected=this._convertArray(this.getSelected()).concat();this._vLastSelected=this.getSelected();this._waSelectable=jindo.$A(this.getSelectableElement());this._waLastSelected=jindo.$A(this._convertArray(this._vLastSelected));if(elSelectable){var bWithinSelected=jindo.$A(this._convertArray(this._vLastSelected)).has(elSelectable);if(this.fireEvent("selectStart",{vLastSelected:this._vLastSelected,elSelectable:elSelectable,bWithinSelected:bWithinSelected,weEvent:we})){if(bWithinSelected&&!htKey.shift&&!htKey[this._sCtrl]){this._elWaitMouseUp=elSelectable;this._wfMouseUpWithinSelected.attach(this._elWaitMouseUp,"mouseup")}else{var bRemainSelected=false;if(this.option("bMultiSelection")){if(htKey.shift){if(htKey[this._sCtrl]){bRemainSelected=true}var aSelectable=this._getSelectableUntil(elSelectable);if(aSelectable==elSelectable){this._elStartPoint=elSelectable}this.select(aSelectable,bRemainSelected,false)}else{this._elStartPoint=elSelectable;if(htKey[this._sCtrl]){this.toggle(elSelectable,false)}else{this.select(elSelectable,bRemainSelected,false)}}}else{if(!this.option("bRemainOne")&&this.option("bToggleSelected")&&this.getSelected()==elSelectable){this.deselect(elSelectable,false)}else{this.select(elSelectable,bRemainSelected,false)}}this._fireChangeEvent(aLastSelected);this.fireEvent("selectEnd",{vSelected:this.getSelected()})}}}else{this._wfMouseUp.attach(document,"mouseup");this._wfCompute.attach(window,"resize").attach(this._el,"scroll");if(this.option("bMultiSelection")&&this.option("bDragSelect")){this._bOverThreshold=null;this._htDragStartPos=we.pos();this._htDragStartPos.scrollTop=this._el.scrollTop;this._htDragStartPos.scrollLeft=this._el.scrollLeft;this._wfMouseMove.attach(document,"mousemove")}}},_onDragSelectStart:function(we){we.stop(jindo.$Event.CANCEL_DEFAULT)},_getRectangleElement:function(){if(!this._welRectIndicator&&this.option("bMultiSelection")&&this.option("bDragSelect")){this._welRectIndicator=jindo.$Element(jindo.$('<div style="position:absolute;left:-10px;top:-10px;width:1px;height:1px;margin:0;padding:0;border:1px dotted black;z-index:99999;">'));this._welRectIndicator.appendTo(this._el)}return this._welRectIndicator},getRectangleElement:function(){return this._getRectangleElement().$value()},_computeSizeAndPos:function(){var aSizeInfo=this._aSizeInfo=[];jindo.$A(this.getSelectableElement()).forEach(function(el){aSizeInfo.push([el,el.offsetLeft,el.offsetTop,el.offsetLeft+el.offsetWidth,el.offsetTop+el.offsetHeight])})},_onMouseMove:function(we){this._htDragEndPos=we.pos();var welRect=this._getRectangleElement(),elRect=welRect.$value();var nGapX=this._htDragEndPos.pageX-this._htDragStartPos.pageX;var nGapY=this._htDragEndPos.pageY-this._htDragStartPos.pageY;var nX=this._htDragStartPos.layerX;var nY=this._htDragStartPos.layerY;var nThreshold=this.option("nThreshold");if(nThreshold&&!this._bOverThreshold){var nDistance=Math.sqrt(nGapX*nGapX+nGapY*nGapY);if(nThreshold>nDistance){return}this.fireEvent("dragStart");this._bOverThreshold=true;this._computeSizeAndPos();this._nRectX=nX;this._nRectY=nY;this._nDragDirectionX=1;this._nDragDirectionY=1;welRect.offset(nY,nX);if(!we.key()[this._sCtrl]){this.deselectAll(false)}}var nWidth=nGapX;var nHeight=nGapY;this._placeRect(nX,nY,nWidth,nHeight);this._setToggleCandidate(this._getSelectableByRect([elRect,elRect.offsetLeft,elRect.offsetTop,elRect.offsetLeft+elRect.offsetWidth,elRect.offsetTop+elRect.offsetHeight]))},_placeRect:function(nX,nY,nWidth,nHeight){var welRect=this._getRectangleElement();welRect.show();this._nDragDirectionX=(nX>this._nRectX)?1:-1;this._nDragDirectionY=(nY>this._nRectY)?1:-1;nWidth-=((this._el.scrollLeft-this._htDragStartPos.scrollLeft)*this._nDragDirectionX);nHeight-=((this._el.scrollTop-this._htDragStartPos.scrollTop)*this._nDragDirectionY);welRect.width(Math.max(Math.abs(nWidth),2)).height(Math.max(Math.abs(nHeight),2));nX+=Math.min(nWidth,0);nY+=Math.min(nHeight,0);welRect.css("left",nX+"px").css("top",nY+"px")},_getSelectableByRect:function(aRect){var aReturn=[];jindo.$A(this._aSizeInfo).forEach(function(aSelectable){if(aSelectable[1]<aRect[3]&&aSelectable[3]>aRect[1]&&aSelectable[2]<aRect[4]&&aSelectable[4]>aRect[2]){aReturn.push(aSelectable[0]);jindo.$A.Continue()}});return aReturn},_setToggleCandidate:function(a){a=this._convertArray(a);var bChanged=false;if(this._waToggleCandidate.length()!=a.length){bChanged=true}var htStatus=this.option("htStatus");var wa=jindo.$A(a);var waRemove=jindo.$A([]);this._waToggleCandidate.forEach(function(el,i){if(!wa.has(el)){waRemove.push(el);bChanged=true}});if(bChanged){waRemove.forEach(function(el){this._waToggleCandidate=this._waToggleCandidate.refuse(el);jindo.$Element(el).toggleClass(htStatus.sSelected)},this);wa.forEach(function(el){if(this.isSelected(el)){jindo.$Element(el).removeClass(htStatus.sSelected)}else{jindo.$Element(el).addClass(htStatus.sSelected)}},this);this._waToggleCandidate=jindo.$A(this._waToggleCandidate.$value().concat(a)).unique();this.fireEvent("dragSelecting",{aSelectable:this._waToggleCandidate.$value()})}},_onMouseUp:function(we){var bDeselectAll=(!this.isDragging()&&!we.key()[this._sCtrl]&&(!this.option("bRemainOne")&&this.option("bDeselectAllOutside"))),bHasCandidate=this._waToggleCandidate.length(),aLastSelected=this._convertArray(this.getSelected()).concat();if(bDeselectAll){this.deselectAll(false)}if(bHasCandidate){this._elStartPoint=this._waToggleCandidate.$value()[0];this.toggle(this._waToggleCandidate.$value())}this._fireChangeEvent(aLastSelected);this._stopDragging()},stopSelecting:function(){this._wfMouseUpWithinSelected.detach(this._elWaitMouseUp,"mouseup");return this},isDragging:function(){return this._bOverThreshold},_restore:function(){jindo.$ElementList(this._waToggleCandidate.$value()).removeClass(this.option("htStatus").sSelected);this.deselectAll(false);if(this._waLastSelected.$value().length){this.select(this._waLastSelected.$value(),false,false)}},_stopDragging:function(){this._waToggleCandidate.empty();this._htDragStartPos=null;this._htDragEndPos=null;this._wfMouseMove.detach(document,"mousemove");this._wfMouseUp.detach(document,"mouseup");this._wfCompute.detach(window,"resize").detach(this._el,"scroll");if(this.isDragging()){this._bOverThreshold=null;this._getRectangleElement().hide();this.fireEvent("dragEnd")}},stopDragging:function(){if(this.isDragging()){this._restore();this._stopDragging()}return this},_onMouseUpWithinSelected:function(we){this.stopSelecting();var elSelectable=this._findSelectableElement(we.element);if(elSelectable&&elSelectable==we.currentElement){this.deselectAll(false);this.select(elSelectable,false,true)}},_onActivate:function(){this._sMozUserSelect=this._wel.css("MozUserSelect");this._wel.css("MozUserSelect","none");jindo.$Element.prototype.preventTapHighlight&&this._wel.preventTapHighlight(true);this._wfMouseDown.attach(this._el,"mousedown");this._wfDragStart.attach(this._el,"dragstart");this._wfSelectStart.attach(this._el,"selectstart")},_onDeactivate:function(){this._wel.css("MozUserSelect",this._sMozUserSelect||"");jindo.$Element.prototype.preventTapHighlight&&this._wel.preventTapHighlight(false);this._wfMouseDown.detach(this._el,"mousedown");this._wfDragStart.detach(this._el,"dragstart");this._wfSelectStart.detach(this._el,"selectstart")}}).extend(jindo.UIComponent);jindo.SelectBox=jindo.$Class({sTagName:"select",_bDisabled:false,_sPrevValue:null,_nSelectedIndex:0,$init:function(el,htOption){this._aItemData=[];this._aListItem=[];this._aOptions=[];this.option({sClassPrefix:"selectbox-",nWidth:null,nHeight:null,bUseLayerPosition:true,aOptionHTML:[],aOptionLabel:[],LayerPosition:{sPosition:"outside-bottom",sAlign:"left",nTop:0,nLeft:0},LayerManager:{sCheckEvent:"mousedown",nShowDelay:20,nHideDelay:0}});this.option(htOption||{});this._el=jindo.$(el);this._assignHTMLElements();if(this.option("bUseLayerPosition")){this._initLayerPosition()}this._initLayerManager();this._initRolloverClick();this._oTimer=new jindo.Timer();this._wfOnFocusSelect=jindo.$Fn(this._onFocusSelect,this);this._wfOnBlurSelect=jindo.$Fn(this._onBlurSelect,this);this._wfOnMouseDownBox=jindo.$Fn(this._onMouseDownBox,this);this._wfOnMouseDownList=jindo.$Fn(this._onMouseDownList,this);this._wfOnKeyDown=jindo.$Fn(this._onKeyDown,this);this._wfOnMouseWheel=jindo.$Fn(function(e){e.stop(jindo.$Event.CANCEL_DEFAULT);this._elLayer.scrollTop-=e.mouse().delta*16},this);var self=this;this._wfOnMouseWheelOnBody=jindo.$Fn(function(){setTimeout(function(){self.getLayerPosition().setPosition()},0)},this);this._oAgent=jindo.$Agent();this.activate()},_assignHTMLElements:function(){var sPrefix=this.option("sClassPrefix"),el=this._el;this._wel=jindo.$Element(el);this._elSelect=jindo.$$.getSingle("select."+sPrefix+"source",el);this._sSelectInnerHTML=this._elSelect.innerHTML;this._elOptionDefault=jindo.$$.getSingle("option."+sPrefix+"default",el);this._elSelectOptionGroup=jindo.$$.getSingle("select."+sPrefix+"source-option-group",el);this._elBox=jindo.$$.getSingle("."+sPrefix+"box",el);this._elLabel=jindo.$$.getSingle("."+sPrefix+"label",el);this._elLayer=jindo.$$.getSingle("."+sPrefix+"layer",el);this._elList=jindo.$$.getSingle("."+sPrefix+"list",el);this._elList.innerHTML="";this._elSelectList=jindo.$("<ul>");this._elList.insertBefore(this._elSelectList,this._elList.firstChild)},getSelectElement:function(){return this._elSelect},getBoxElement:function(){return this._elBox},getLabelElement:function(){return this._elLabel},getLayerElement:function(){return this._elLayer},getListElement:function(){return this._elList},getSelectListElement:function(){return this._elSelectList},_limitWidth:function(){var nWidth=this.option("nWidth");if(nWidth){jindo.$Element(this.getBoxElement()).css({width:nWidth+"px",overflowX:"hidden"});jindo.$Element(this.getLayerElement()).css({width:nWidth+"px",overflowX:"hidden",overflowY:"auto"})}},_limitHeight:function(){var nHeight=this.option("nHeight");if(nHeight){var welLayer=jindo.$Element(this.getLayerElement()),elToMeasure=welLayer.$value().cloneNode(true),welToMeasure=jindo.$Element(elToMeasure),nLayerHeight;welToMeasure.opacity(0);welLayer.after(welToMeasure);welToMeasure.show();nLayerHeight=welToMeasure.height();welToMeasure.leave();if(nHeight<nLayerHeight){welLayer.css({height:nHeight+"px",overflowX:"hidden",overflowY:"auto"})}}},_initLayerManager:function(){var self=this,sPrefix=this.option("sClassPrefix"),elSelect=this.getSelectElement();this._oLayerManager=new jindo.LayerManager(this.getLayerElement(),this.option("LayerManager")).attach({beforeShow:function(oCustomEvent){if(self.fireEvent("open")){self._limitWidth();self._limitHeight();setTimeout(function(){try{elSelect.focus()}catch(e){}},10);self._wel.addClass(sPrefix+"open");if(self.option("bUseLayerPosition")){self.getLayerPosition().setPosition()}}else{oCustomEvent.stop()}},show:function(oCustomEvent){self._paintSelected()},beforeHide:function(oCustomEvent){if(self.fireEvent("close")){self._wel.removeClass(sPrefix+"open")}else{oCustomEvent.stop()}}}).link(this.getBoxElement()).link(this.getLayerElement())},getLayerManager:function(){return this._oLayerManager},_initRolloverClick:function(){var self=this,sPrefix=this.option("sClassPrefix");this._oRolloverClick=new jindo.RolloverClick(this.getSelectListElement(),{sCheckEvent:"mouseup",RolloverArea:{sClassName:sPrefix+"item",sClassPrefix:sPrefix+"item-"}}).attach({over:function(oCustomEvent){if(self._welOvered){self._welOvered.removeClass(sPrefix+"item-over")}var wel=jindo.$Element(oCustomEvent.element);wel.addClass(sPrefix+"item-over");self._welOvered=wel},out:function(oCustomEvent){oCustomEvent.stop()},click:function(oCustomEvent){var nLastSelectedIndex=self._nSelectedIndex;var nSelectedIndex=-1;jindo.$A(self._aItemData).forEach(function(htData,nIndex){if(htData.elItem===oCustomEvent.element){nSelectedIndex=nIndex;jindo.$A.Break()}});if(!self.fireEvent("click",{nIndex:nSelectedIndex,weEvent:oCustomEvent.weEvent})){return}if(nSelectedIndex!==-1){self.setValue(self._aItemData[nSelectedIndex].sValue)}nSelectedIndex=self.getSelectedIndex();if(nSelectedIndex!=nLastSelectedIndex){jindo.$Element(self.getSelectElement()).fireEvent("change");self.fireEvent("change",{nIndex:nSelectedIndex,nLastIndex:nLastSelectedIndex})}if(!jindo.$Element(oCustomEvent.element).hasClass(sPrefix+"notclose")){self.getLayerManager().hide()}}})},getRolloverClick:function(){return this._oRolloverClick},_initLayerPosition:function(){this._oLayerPosition=new jindo.LayerPosition(this.getBoxElement(),this.getLayerElement(),this.option("LayerPosition"))},getLayerPosition:function(){return this._oLayerPosition},_onActivate:function(){jindo.HTMLComponent.prototype._onActivate.apply(this);var sPrefix=this.option("sClassPrefix"),elSelect=this.getSelectElement();this._limitWidth();this._wel.removeClass(sPrefix+"noscript");jindo.$Element.prototype.preventTapHighlight&&jindo.$Element(this.getListElement()).preventTapHighlight(true);this._wfOnFocusSelect.attach(elSelect,"focus");this._wfOnBlurSelect.attach(elSelect,"blur");this._wfOnMouseDownBox.attach(this.getBoxElement(),"mousedown");this._wfOnMouseDownList.attach(this.getListElement(),"mousedown");this._wfOnKeyDown.attach(elSelect,"keydown");this._wfOnMouseWheel.attach(elSelect,"mousewheel");this._wfOnMouseWheelOnBody.attach(document,"mousewheel");this.paint();this._sPrevValue=this.getValue()},_onDeactivate:function(){this.getLayerManager().hide();var sPrefix=this.option("sClassPrefix"),elSelect=this.getSelectElement();this._wel.addClass(sPrefix+"noscript");jindo.$Element.prototype.preventTapHighlight&&jindo.$Element(this.getListElement()).preventTapHighlight(false);this._wfOnFocusSelect.detach(elSelect,"focus");this._wfOnBlurSelect.detach(elSelect,"blur");this._wfOnMouseDownBox.detach(this.getBoxElement(),"mousedown");this._wfOnMouseDownList.detach(this.getListElement(),"mousedown");this._wfOnKeyDown.detach(elSelect,"keydown");this._wfOnMouseWheel.detach(elSelect,"mousewheel");this._wfOnMouseWheelOnBody.detach(document,"mousewheel");jindo.HTMLComponent.prototype._onDeactivate.apply(this)},getValueOf:function(sText){for(var i=0,oItemData;(oItemData=this._aItemData[i]);i++){if(oItemData.sText==sText){return oItemData.sValue}}return null},getValue:function(){var eEle=this.getSelectElement();return eEle.selectedIndex===-1?"":eEle.options[eEle.selectedIndex].value},getText:function(){var oData=this._aItemData[this._nSelectedIndex];return oData&&oData.sText||""},getHTML:function(){return this.getLabelElement().innerHTML},setValue:function(sValue){this.getSelectElement().value=sValue;this._sPrevValue=this.getValue();this._paint()},getSelectedIndex:function(){return this.getSelectElement().selectedIndex},setSelectedIndex:function(nIndex,bFireEvent){if(typeof bFireEvent=="undefined"){bFireEvent=true}if(this._isSelectable(nIndex)){var nLastSelectedIndex=this.getSelectedIndex();this._setSelectedIndex(nIndex);this._paint();if(bFireEvent&&nLastSelectedIndex!=nIndex){this.fireEvent("change",{nIndex:nIndex,nLastIndex:nLastSelectedIndex})}return true}return false},_setSelectedIndex:function(nIndex){this.getSelectElement().selectedIndex=nIndex},_isSelectable:function(nIndex){var htItem=this._aItemData[nIndex];if(!htItem||htItem.bDisabled||htItem.bDefault){return false}else{return true}},getOptions:function(){return this._aOptions},getListItems:function(){return this._aListItem},getDisabled:function(){return this._bDisabled},setOptionGroup:function(sName){if(!this._elSelectOptionGroup||!this._elOptionDefault){return false}var elSelect=this.getSelectElement(),sPrefix=this.option("sClassPrefix"),aGroupOption=jindo.$$("."+sPrefix+"option-group-"+sName,this._elSelectOptionGroup),elOptionDefault=this._elOptionDefault=this._elOptionDefault.cloneNode(true);elSelect.innerHTML="";elSelect.appendChild(elOptionDefault);this._nSelectedIndex=0;for(var i=0;i<aGroupOption.length;i++){elSelect.appendChild(aGroupOption[i].cloneNode(true))}this._sPrevValue=this.getValue();this.paint();return true},isSelected:function(){return !this._aItemData[this.getSelectedIndex()].bDefault},setDefault:function(){var nDefaultOption=-1;jindo.$A(this._aItemData).forEach(function(o,i){if(o.bDefault||o.bSelected){nDefaultOption=i}});if(nDefaultOption<0){nDefaultOption=0}this._nSelectedIndex=nDefaultOption;this._setSelectedIndex(nDefaultOption);this._sPrevValue=this.getValue();this._paint()},paint:function(){this._paintList();this._paintSelected();this._paintLabel();this.getLayerManager().setLayer(this.getLayerElement())},_paint:function(){this._paintSelected();this._paintLabel()},_paintLabel:function(){var welLabel=jindo.$Element(this.getLabelElement()),sHTML=this.option("aOptionHTML")[this._nSelectedIndex]||"",sLabel=this.option("aOptionLabel")[this._nSelectedIndex]||"",sText=this.getText();if(sHTML){if(sLabel){welLabel.html(sLabel)}else{welLabel.html(sHTML)}}else{welLabel.text(sText)}welLabel.attr("unselectable","on")},_paintList:function(){var sPrefix=this.option("sClassPrefix");this._aOptions=jindo.$$("option",this.getSelectElement());var aOptions=this._aOptions;this._aItemData=[];this._aListItem=[];this._nSelectedIndex=0;var elList=this.getSelectListElement();elList.innerHTML="";if(this.option("nHeight")){jindo.$Element(this.getLayerElement()).css("height","auto")}var aHTML=[],aTempKey=[];for(var i=0,elOption;(elOption=aOptions[i]);i++){var welOption=jindo.$Element(elOption),bDefault=welOption.hasClass(sPrefix+"default"),bSelected=welOption.attr("selected")=="selected",bDisabled=bDefault||elOption.disabled,sHTML=this.option("aOptionHTML")[i]||"",sText=welOption.text()||"",sValue=welOption.attr("value");if(!sValue){welOption.attr("value",sText);sValue=sText}this._aItemData[i]={elOption:elOption,elItem:null,sHTML:sHTML,sText:sText,sValue:sValue,bDisabled:bDisabled,bSelected:bSelected,bDefault:bDefault};var elItem=null,htItem=this._aItemData[i];if(!htItem.bDefault){aHTML.push(['<li style="',htItem.elOption.style.cssText,'" ','class="',htItem.elOption.className," ",sPrefix+(htItem.bDisabled?"item-disabled":"item"),'" unselectable="on">',htItem.sHTML||jindo.$S(htItem.sText).escapeHTML(),"</li>"].join(""));aTempKey.push(i)}}elList.innerHTML=aHTML.join("");var aChildLIs=elList.childNodes;for(var j=0,elChild;elChild=aChildLIs[j];j++){this._aListItem.push(elChild);this._aItemData[aTempKey[j]].elItem=elChild}if(jindo.$Element(this.getLayerElement()).visible()){this._limitWidth();this._limitHeight()}if(this._elSelect.disabled){this.disable();return}this.enable()},_paintSelected:function(){var sPrefix=this.option("sClassPrefix"),n=this.getSelectedIndex(),htItem,nPrevSelectedIndex=this._nSelectedIndex;if(this._welSelected){this._welSelected.removeClass(sPrefix+"item-selected");this._welSelected=null}if(this._welOvered){this._welOvered.removeClass(sPrefix+"item-over");this._welOvered=null}n=Math.min(n,this._aItemData.length-1);this._nSelectedIndex=n;htItem=this._aItemData[n];if(htItem&&htItem.elItem){var elSelected=htItem.elItem,welSelected=jindo.$Element(elSelected);this._welSelected=this._welOvered=welSelected;welSelected.addClass(sPrefix+"item-selected").addClass(sPrefix+"item-over");if(this.isLayerOpened()){var elLayerElement=this.getLayerElement();var nHeight=parseInt(jindo.$Element(elLayerElement).css("height"),10),nOffsetTop=elSelected.offsetTop,nOffsetHeight=elSelected.offsetHeight,nScrollTop=elLayerElement.scrollTop,bDown;if(nPrevSelectedIndex<n){bDown=true}else{bDown=false}if(nOffsetTop<nScrollTop||nOffsetTop>nScrollTop+nHeight){elLayerElement.scrollTop=nOffsetTop}if(bDown){if(nOffsetTop+nOffsetHeight>nHeight+nScrollTop){elLayerElement.scrollTop=(nOffsetTop+nOffsetHeight-nHeight)}}else{if(nOffsetTop<nScrollTop){elLayerElement.scrollTop=nOffsetTop}}}}},isLayerOpened:function(){return this.getLayerManager().getVisible()},disable:function(){this.getLayerManager().hide();var sPrefix=this.option("sClassPrefix");this._wel.addClass(sPrefix+"disabled");this.getSelectElement().disabled=true;this._bDisabled=true},enable:function(){var sPrefix=this.option("sClassPrefix");this._wel.removeClass(sPrefix+"disabled");this.getSelectElement().disabled=false;this._bDisabled=false},open:function(){if(!this._bDisabled){this.getLayerManager().show()}return this},close:function(){this.getLayerManager().hide();return this},_onMouseDownBox:function(we){we.stop(jindo.$Event.CANCEL_DEFAULT);if(!this._bDisabled){this.getLayerManager().toggle()}},_onMouseDownList:function(we){if(!jindo.$$.getSingle("! ."+this.option("sClassPrefix")+"notclose",we.element)){we.stop(jindo.$Event.CANCEL_DEFAULT)}},_getSelectableIndex:function(nIndex,nDirection,nTargetIndex){var nFirst=-1,nLast=this._aItemData.length-1,i;for(i=0;i<this._aItemData.length;i++){if(this._isSelectable(i)){if(nFirst<0){nFirst=i}else{nLast=i}}}switch(nDirection){case -1:if(nIndex==nFirst){return nIndex}for(i=nIndex-1;i>nFirst;i--){if(this._isSelectable(i)){return i}}return nFirst;case 1:if(nIndex==nLast){return nIndex}for(i=nIndex+1;i<nLast;i++){if(this._isSelectable(i)){return i}}return nLast;case Infinity:return nLast;case -Infinity:return nFirst}},_onKeyDown:function(we){var htKey=we.key();if((this._oAgent.os().mac&&this._oAgent.navigator().safari)||(this._oAgent.navigator().ie&&this._oAgent.navigator().version==6)){var nKeyCode=htKey.keyCode;if(nKeyCode!=9){we.stop(jindo.$Event.CANCEL_DEFAULT)}var nSelectedIndex=this.getSelectedIndex(),nTargetIndex=nSelectedIndex;switch(nKeyCode){case 37:nTargetIndex=this._getSelectableIndex(nSelectedIndex,-1);break;case 38:nTargetIndex=this._getSelectableIndex(nSelectedIndex,-1);break;case 39:nTargetIndex=this._getSelectableIndex(nSelectedIndex,1);break;case 40:nTargetIndex=this._getSelectableIndex(nSelectedIndex,1);break;case 33:nTargetIndex=this._getSelectableIndex(nSelectedIndex,-Infinity);break;case 34:nTargetIndex=this._getSelectableIndex(nSelectedIndex,Infinity);break;case 13:this.getLayerManager().hide();break;case 9:this.getLayerManager().hide();break}var oParam={nIndex:nTargetIndex,nLastIndex:parseInt(this._nSelectedIndex,10)};this._setSelectedIndex(nTargetIndex);this._paint();if(oParam.nIndex!=oParam.nLastIndex){this.fireEvent("change",oParam)}}else{if(this.isLayerOpened()&&(htKey.enter||htKey.keyCode==9)){this.getLayerManager().hide()}}},_restoreLeftTimer:null,_onFocusSelect:function(we){var sPrefix=this.option("sClassPrefix"),wel=this._wel,elSelect=this.getSelectElement(),self=this;if(!this._restoreLeftTimer){var sLeft=elSelect.style.left||"";elSelect.style.left="auto";this._restoreLeftTimer=setTimeout(function(){elSelect.style.left=sLeft;self._restoreLeftTimer=null},0)}if(!this.isLayerOpened()){if(!this.fireEvent("focus")){this.getSelectElement().blur();return}}wel.addClass(sPrefix+"focused");if(!(this._oAgent.os().mac&&this._oAgent.navigator().safari)){this._oTimer.start(function(){var sValue=self.getValue();if(!!self._sPrevValue&&self._sPrevValue!=sValue){var nSelectedIndex=self.getSelectElement().selectedIndex;if(!self._isSelectable(nSelectedIndex)){var nDiff=-(self._nSelectedIndex-nSelectedIndex);nDiff=(nDiff>0)?1:-1;self._setSelectedIndex(self._getSelectableIndex(self._nSelectedIndex,nDiff,nSelectedIndex));return true}var oParam={nIndex:nSelectedIndex,nLastIndex:parseInt(self._nSelectedIndex,10)};self._paint();if(oParam.nIndex!=oParam.nLastIndex){self.fireEvent("change",oParam)}self._sPrevValue=sValue}return true},10)}},_onBlurSelect:function(we){var self=this,sPrefix=this.option("sClassPrefix");this.fireEvent("blur");this._wel.removeClass(sPrefix+"focused");setTimeout(function(){self._oTimer.abort()},10)}}).extend(jindo.HTMLComponent);jindo.StarRating=jindo.$Class({$init:function(el,htOption){var htDefaultOption={nStep:1,nMaxValue:10,nDefaultValue:0,bSnap:false,bActivateOnload:true};this.option(htDefaultOption);this.option(htOption||{});this._el=jindo.$(el);this._wel=jindo.$Element(el);this._assignHTMLElements();this._wfMouseMove=jindo.$Fn(this._onMouseMove,this);this._wfMouseLeave=jindo.$Fn(this._onMouseLeave,this);this._wfClick=jindo.$Fn(this._onClick,this);if(this.option("bActivateOnload")){this.activate()}},_assignHTMLElements:function(){this._elRatingElement=jindo.$$.getSingle("span",this.getBaseElement());this._welRatingElement=jindo.$Element(this._elRatingElement)},getBaseElement:function(){return this._el},getRatingElement:function(){return this._elRatingElement},getValue:function(){return this._nValue},getValueByWidth:function(){return this._welRatingElement.width()/this._nBaseWidth*this.option("nMaxValue")},getValueToBeSet:function(nValue){nValue=this._round(nValue,this.option("nStep"));nValue=Math.min(nValue,this.option("nMaxValue"));nValue=Math.max(nValue,0);return nValue},setValue:function(nValue,bFireEvent){if(typeof bFireEvent=="undefined"){bFireEvent=true}var nMaxValue=this.option("nMaxValue");nValue=this.getValueToBeSet(nValue);var nWidth=this._nBaseWidth*nValue/nMaxValue;nWidth=Math.min(nWidth,this._nBaseWidth);this._welRatingElement.width(nWidth);this._nValue=nValue;if(bFireEvent){this.fireEvent("set",{nValue:this._nValue})}return this},reset:function(){var nValue=this.option("nDefaultValue")||0;this.setValue(nValue,false);return this},_round:function(nValue,nStep){var nResult=nValue,nFloor=Math.floor(nValue),nMaxCandidate=nFloor+1,nCompare=1,nTempCompare,nCandidate,nFixed;for(nCandidate=nFloor;nCandidate<=nMaxCandidate;nCandidate+=nStep){nTempCompare=Math.abs(nValue-nCandidate);if(nTempCompare<=nCompare){nCompare=nTempCompare;nResult=nCandidate}}return nResult.toFixed(Math.max((nStep.toString().length-2),0))},_onActivate:function(){var el=this.getBaseElement();this._wfMouseMove.attach(el,"mousemove");this._wfMouseLeave.attach(el,"mouseleave");this._wfClick.attach(el,"click");this._nBaseWidth=this._wel.width();this.reset()},_onDeactivate:function(){var el=this.getBaseElement();this._wfMouseMove.detach(el,"mousemove");this._wfMouseLeave.detach(el,"mouseleave");this._wfClick.detach(el,"click")},_onMouseMove:function(we){var nOffsetX=we.pos(true).offsetX+1,nWidth=(nOffsetX>this._nBaseWidth)?this._nBaseWidth:nOffsetX,nValue;if(this.option("bSnap")){nValue=nOffsetX/this._nBaseWidth*this.option("nMaxValue");nWidth=this._round(nValue,this.option("nStep"))*this._nBaseWidth/this.option("nMaxValue");nWidth=Math.min(nWidth,this._nBaseWidth)}this._welRatingElement.css("width",nWidth+"px");nValue=this.getValueByWidth();this.fireEvent("move",{nValue:nValue,nValueToBeSet:this.getValueToBeSet(nValue)})},_onMouseLeave:function(we){this.setValue(this._nValue,false);this.fireEvent("out")},_onClick:function(we){this.setValue(this.getValueByWidth())}}).extend(jindo.UIComponent);jindo.TabControl=jindo.$Class({_bIsActivating:false,_nCurrentIndex:null,_welSelectedTab:null,_welSelectedPanel:null,$init:function(el,htOption){var htDefaultOption={sClassPrefix:"tc-",sCheckEvent:"click",bActivateOnload:true};this.option(htDefaultOption);this.option(htOption||{});this._el=jindo.$(el);this._wfEventTab=jindo.$Fn(this._onEventTab,this);this._assignHTMLElements();if(this.option("bActivateOnload")){this._selectTab(this._elSelectedTab);this.activate()}},_assignHTMLElements:function(){var sPrefix=this.option("sClassPrefix"),el=this._el;this._aTab=jindo.$$("."+sPrefix+"tab",el);this._aPanel=jindo.$$("."+sPrefix+"panel",el);this._elSelectedTab=jindo.$$.getSingle("."+sPrefix+"tab."+sPrefix+"selected",el)||this.getTab(0);this._waTab=jindo.$A(this._aTab)},getTab:function(n){return this.getTabs()[n]},getTabs:function(){return this._aTab},getPanel:function(n){return this.getPanels()[n]},getPanels:function(){return this._aPanel},selectTab:function(n,bFireEvent){if(typeof bFireEvent=="undefined"){bFireEvent=true}this._selectTab(this.getTab(n),bFireEvent)},getIndex:function(elTab){return this._waTab.indexOf(elTab)},getCurrentIndex:function(){return this._nCurrentIndex},_selectTab:function(elTab,bFireEvent){if(typeof bFireEvent=="undefined"){bFireEvent=true}var sPrefix=this.option("sClassPrefix"),nIndex=this.getIndex(elTab),elPanel=this.getPanel(nIndex);if(bFireEvent){if(!this.fireEvent("beforeSelect",{nIndex:nIndex,elTab:elTab,elPanel:elPanel})){return}}var welTab=jindo.$Element(elTab);if(this._welSelectedTab){this._welSelectedTab.removeClass(sPrefix+"selected")}this._welSelectedTab=welTab;welTab.addClass(sPrefix+"selected");var welPanel=jindo.$Element(elPanel);if(this._welSelectedPanel){this._welSelectedPanel.removeClass(sPrefix+"selected")}this._welSelectedPanel=welPanel;welPanel.addClass(sPrefix+"selected");this._nCurrentIndex=nIndex;if(bFireEvent){this.fireEvent("select",{nIndex:nIndex,elTab:elTab,elPanel:elPanel})}},getBaseElement:function(){return this._el},_onActivate:function(){jindo.$Element.prototype.preventTapHighlight&&jindo.$Element(this._el).preventTapHighlight(true);this._wfEventTab.attach(this._el,this.option("sCheckEvent"))},_onDeactivate:function(){jindo.$Element.prototype.preventTapHighlight&&jindo.$Element(this._el).preventTapHighlight(false);this._wfEventTab.detach(this._el,this.option("sCheckEvent"))},_onEventTab:function(we){if(this.fireEvent(we.type,{weEvent:we})){var sPrefix=this.option("sClassPrefix"),el=we.element,elTab=jindo.$$.test(el,"."+sPrefix+"tab")?el:jindo.$$.getSingle("! ."+sPrefix+"tab",el);if(elTab){this._selectTab(elTab)}}}}).extend(jindo.UIComponent);jindo.UploadQueue=jindo.$Class({_states:{NONE:"NONE",WAIT:"WAIT",PROGRESS:"PROGRESS",LOAD:"LOAD",ERROR:"ERROR"},_callbackForFlash:{buttonOver:function(){this.fireEvent("buttonOver",{element:this._elCurrentBrowseButton})},buttonOut:function(){this.fireEvent("buttonOut",{element:this._elCurrentBrowseButton})},selectFile:function(aFiles){var self=this;if(jindo.$Agent().navigator().safari){var wfn=jindo.$Fn(function(){wfn.detach(window,"focus");self._addQueue(aFiles)});wfn.attach(window,"focus");window.blur();window.focus();return}this._addQueue(aFiles)},selectFileError:function(sMessage){this.fireEvent("selectError",{sMessage:sMessage})},start:function(oObj){},progress:function(oObj){var sKey=oObj.sKey;var oFile=this._getFileObj(sKey,oObj.oFile);if(oFile.state!==this._states.PROGRESS){return}this.fireEvent("uploadProgress",{oFile:oFile,sKey:sKey})},load:function(oObj){var sKey=oObj.sKey;var oFile=this._getFileObj(sKey,oObj.oFile);var sResponseText=oObj.sResponse;this._setDoneState(sKey,oFile,"uploadLoad",oFile.size,1,this._states.LOAD,sResponseText)},error:function(oObj){var sKey=oObj.sKey;var oFile=this._getFileObj(sKey,oObj.oFile);this._setDoneState(sKey,oFile,"uploadError",0,0,this._states.ERROR)}},_showFlashForFlash:function(welButton){if(welButton){var oOffset=welButton.offset();var elFlash=this._getFlash();this._elDummy.style.left=oOffset.left+"px";this._elDummy.style.top=oOffset.top+"px";this._elDummy.style.width=elFlash.style.width=welButton.width()+"px";this._elDummy.style.height=elFlash.style.height=welButton.height()+"px"}else{this._elDummy.style.left=this._elDummy.style.top=0;this._elDummy.style.width=this._elDummy.style.height="1px"}},_createFlashForFlash:function(sUnique){if(this._elDummy){return}var elDummy=this._elDummy=jindo.$("<div>");var sFlashUID=sUnique;var sFlashURL=this.option("sSwfPath");var oAgent=jindo.$Agent();elDummy.style.cssText="position:absolute !important; border:0 !important; padding:0 !important; margin:0 !important; overflow:hidden !important; z-index:32001 !important;";document.body.insertBefore(elDummy,document.body.firstChild);if(oAgent.flash().version>=11&&oAgent.navigator().ie){sFlashURL+="?"+Math.floor(Math.random()*10000)}var oFlashVars={bMultiple:this.option("bMultiple"),sJSFunctionName:"jindo.UploadQueue.__flashCallback."+sUnique,nButtonOpacity:0,sParamName:this.option("sParamName"),sURL:this._url};var sFlashHtml=this._getFlashHTML("UPLOADQUEUE"+sFlashUID,sFlashURL,50,50,{flashVars:oFlashVars,wmode:"transparent"});elDummy.innerHTML=sFlashHtml;this._showFlashForFlash(false);this._getFlash=function(){return document["UPLOADQUEUE"+sFlashUID]||document.all["UPLOADQUEUE"+sFlashUID]}},_destroyFlashForFlash:function(sUnique){this._elDummy.parentNode.removeChild(this._elDummy);this._elDummy=null},_getFlashHTML:function(sId,sSwfPath,width,height,options){var protocol=(location.protocol=="https:")?"https:":"http:";var classid='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"';options=options||{};options.allowScriptAccess=options.allowScriptAccess||"always";var params=[],attrs=[],v;for(var k in options){if(options.hasOwnProperty(k)){v=options[k];if(k==="flashVars"){v=jindo.$H(v).toQueryString()}params.push('<param name="'+k+'" value="'+v+'" />');attrs.push(" "+k+'="'+v+'"')}}return['<object tabindex="-1" id="'+sId+'" width="'+width+'" height="'+height+'" '+classid+' codebase="'+protocol+'//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0">','<param name="movie" value="'+sSwfPath+'" />',params.join(""),'<embed tabindex="-1" name="'+sId+'" src="'+sSwfPath+'"',' type="application/x-shockwave-flash" pluginspage="'+protocol+'://www.macromedia.com/go/getflashplayer"',attrs.join(""),' width="'+width+'" height="'+height+'">',"</embed>","</object>"].join("")},_sendForFlash:function(sFuncName,aArgs){if(!this._getFlash){return}var oFlash=this._getFlash();oFlash[sFuncName].apply(oFlash,aArgs||[])},$init:function(sURL,oOptions){var bSupportHTML5=typeof FormData!=="undefined";var sAgent=navigator.userAgent;if(jindo.$Agent().os().win&&/Version\/([0-9\.]+)\s+Safari\/([0-9\.]+)/.test(sAgent)){bSupportHTML5=false}if("bSupportHTML5" in oOptions){bSupportHTML5=!!oOptions.bSupportHTML5}this._methodPostfix=bSupportHTML5?"ForHTML5":"ForFlash";this.getMethod=function(){return bSupportHTML5?"HTML5":"flash"};this.option({bMultiple:true,nParallel:1,sParamName:"file",bActivateOnload:true});this.option(oOptions||{});this._url=sURL;if(this.option("bActivateOnload")){this.activate()}},_onActivate:function(){this._queue=[];this._uploading=0;this._initialize();this._attachEvents()},_onDeactivate:function(){this._detachEvents();if(this._browseButtons){var aBrowseButtons=this._browseButtons;for(var i=0,nLen=aBrowseButtons.length;i<nLen;i++){aBrowseButtons[i].deactivate()}}this._browseButtons=null},_getFileObj:function(sKey,oNewFile){var fp=this["_getFileObj"+this._methodPostfix];return(this._getFileObj=fp).apply(this,arguments)},_getFileObjForHTML5:function(sKey,oNewFile){return oNewFile},_getFileObjForFlash:function(sKey,oNewFile){var oFile=this._flashFiles[sKey];if(oFile&&oNewFile){for(var k in oNewFile){if(oNewFile.hasOwnProperty(k)){oFile[k]=oNewFile[k]}}}return oFile},_initialize:function(){var fp=this["_initialize"+this._methodPostfix];return(this._initialize=fp).apply(this,arguments)},_initializeForHTML5:function(oOptions){this._xhr={};var aButtons=this.option("aButton")||[this.option("elButton")];this._browseButtons=[];var oBrowseButton=null;for(var i=0,nLen=aButtons.length;i<nLen;i++){this._browseButtons.push(oBrowseButton=new jindo.BrowseButton(aButtons[i]));oBrowseButton.getFileSelect().multiple=this.option("bMultiple")}},_initializeForFlash:function(){this._flashFiles={}},_detachEvents:function(){var fp=this["_detachEvents"+this._methodPostfix];return(this._detachEvents=fp).apply(this,arguments)},_detachEventsForHTML5:function(){var i;var nLen;var aBrowseButtons=this._browseButtons;for(i=0,nLen=aBrowseButtons.length;i<nLen;i++){aBrowseButtons[i].detach(this._browseButtonHandlers),this._browseButtonHandlers=null}var aDropAreas=this._aDropAreas;for(i=0,nLen=aDropAreas.length;i<nLen;i++){var elDropArea=aDropAreas[i];this._wfOnDragEnter.detach(elDropArea,"dragenter");this._wfOnDragOver.detach(elDropArea,"dragover");this._wfOnDragLeave.detach(elDropArea,"dragleave");this._wfOnDrop.detach(elDropArea,"drop");this._aDropAreas=null}},_detachEventsForFlash:function(){var aButtons=this._aButtons;if(aButtons){for(var i=0,nLen=aButtons.length;i<nLen;i++){var welButton=jindo.$Element(aButtons[i]);this._wfOnMouseMove.detach(welButton,"mousemove")}this._aButtons=null;this._elCurrentBrowseButton=null}var sUnique=this._sUnique;delete jindo.UploadQueue.__flashCallback[sUnique];this._destroyFlashForFlash(sUnique)},_attachEvents:function(){var fp=this["_attachEvents"+this._methodPostfix];return(this._attachEvents=fp).apply(this,arguments)},_attachEventsForHTML5:function(){var self=this;var i,nLen;this._browseButtonHandlers={sourceChange:function(oCustomEvent){self._addQueue(this.getFileSelect().files);this.getFileSelect().value="";var oNav=jindo.$Agent().navigator();if(oNav.ie&&oNav.version<=10){this.getFileSelect().type="radio";this.getFileSelect().type="file"}},over:function(oCustomEvent){self.fireEvent("buttonOver",{element:this._el})},out:function(){self.fireEvent("buttonOut",{element:this._el})}};var aBrowseButtons=this._browseButtons;for(i=0,nLen=aBrowseButtons.length;i<nLen;i++){aBrowseButtons[i].attach(this._browseButtonHandlers)}var aDropAreas=this.option("aDropArea")||[this.option("elDropArea")];var bOver=false;var fpSetOver=function(oEvent,bFlag){var elEl=oEvent.currentElement;oEvent.stopDefault();if(bOver!==bFlag){self.fireEvent(bFlag?"dragOver":"dragOut",{element:elEl});bOver=bFlag}};this._aDropAreas=aDropAreas;for(i=0,nLen=aDropAreas.length;i<nLen;i++){var elDropArea=jindo.$(aDropAreas[i]);this._wfOnDragEnter=jindo.$Fn(function(oEvent){oEvent.stopDefault()}).attach(elDropArea,"dragenter");this._wfOnDragOver=jindo.$Fn(function(oEvent){fpSetOver(oEvent,true)}).attach(elDropArea,"dragover");this._wfOnDragLeave=jindo.$Fn(function(oEvent){fpSetOver(oEvent,false)}).attach(elDropArea,"dragleave");this._wfOnDrop=jindo.$Fn(function(oEvent){fpSetOver(oEvent,false);self._addQueue(oEvent.$value().dataTransfer.files)}).attach(elDropArea,"drop")}},_attachEventsForFlash:function(){var self=this;var sUnique=this._sUnique="UQ"+new Date().getTime()+Math.floor(Math.random()*1000000);jindo.UploadQueue.__flashCallback[sUnique]=function(sFuncName,aArgs){var fpFunc=self._callbackForFlash[sFuncName];fpFunc&&fpFunc.apply(self,aArgs||[])};this._createFlashForFlash(sUnique);var aButtons=this._aButtons=this.option("aButton")||[this.option("elButton")];this._wfOnMouseMove=jindo.$Fn(function(oEvent){self._elCurrentBrowseButton=oEvent.currentElement;self._showFlashForFlash(jindo.$Element(self._elCurrentBrowseButton))});for(var i=0,nLen=aButtons.length;i<nLen;i++){var welButton=jindo.$Element(aButtons[i]);this._wfOnMouseMove.attach(welButton,"mousemove")}},_uploadFile:function(){var fp=this["_uploadFile"+this._methodPostfix];return(this._uploadFile=fp).apply(this,arguments)},_uploadFileForFlash:function(oProp){var self=this;var oFile=oProp.file;var sKey=oProp.key;oFile.state=this._states.PROGRESS;this._uploading++;this._sendForFlash("upload",[[sKey]])},_uploadFileForHTML5:function(oProp){var self=this;var oFile=oProp.file;var sKey=oProp.key;oFile.state=this._states.PROGRESS;this._uploading++;var oXHR=new XMLHttpRequest(),oUpload=oXHR.upload;oUpload.addEventListener("progress",function(oEvent){if(!oEvent.lengthComputable){return}if(!self._xhr[sKey]){return}oFile.loaded=oEvent.loaded;oFile.rate=oEvent.loaded&&(oEvent.loaded/oFile.size);self.fireEvent("uploadProgress",{oFile:oFile,sKey:sKey})},false);oUpload.addEventListener("load",function(){var that=this;var func=arguments.callee;if(oXHR.readyState!==4){setTimeout(function(){func.call(that)},0);return}if(oXHR.status===200){self._setDoneState(sKey,oFile,"uploadLoad",oFile.size,1,self._states.LOAD,oXHR.responseText)}else{self._setDoneState(sKey,oFile,"uploadError",0,0,self._states.ERROR)}},false);oUpload.addEventListener("error",function(){self._setDoneState(sKey,oFile,"uploadError",0,0,self._states.ERROR)},false);oUpload.addEventListener("abort",function(){self._setDoneState(sKey,oFile,"uploadAbort",0,0,self._states.NONE)},false);oXHR.open("POST",this._url);oXHR.setRequestHeader("Cache-Control","no-cache");oXHR.setRequestHeader("X-Requested-With","XMLHttpRequest");oXHR.withCredentials=true;this._xhr[sKey]=oXHR;this.fireEvent("uploadStart",{oFile:oFile,sKey:sKey});var oFormData=new FormData();oFormData.append(this.option("sParamName"),oFile);oXHR.send(oFormData);return true},_addQueue:function(aFiles){var i,nLen;for(i=0,nLen=aFiles.length;i<nLen;i++){aFiles[i].ext=(/\.([^\.]+)$/.test(aFiles[i].name)&&RegExp.$1)||""}if(!this.fireEvent("beforeSelect",{aFiles:aFiles})){return false}for(i=0,nLen=aFiles.length;i<nLen;i++){var oFile=aFiles[i];var oParam={oFile:oFile,sKey:"UQ"+new Date().getTime()+Math.round(Math.random()*100000)};if(!this.fireEvent("beforeAdd",oParam)){continue}var sKey=oParam.sKey;this._queue.push({key:oParam.sKey,file:oFile});oFile.loaded=0;oFile.rate=0;oFile.state=this._states.NONE;this._flashFiles&&(this._flashFiles[oParam.sKey]=oFile);this._sendForFlash("setUniqueKeyAt",[i,sKey]);this.fireEvent("add",{oFile:oFile,sKey:sKey})}return true},_findQueue:function(sKey){for(var i=0,nLen=this._queue.length;i<nLen;i++){if(this._queue[i].key===sKey){return i}}return -1},getInfo:function(){var ret={size:{none:0,wait:0,progress:0,load:0,error:0,total:0},count:{none:0,wait:0,progress:0,load:0,error:0,total:0}};for(var i=0,len=this._queue.length;i<len;i++){var oFile=this._queue[i].file;var sState=oFile.state.toLowerCase();var nSize=oFile.size;ret.size[sState]+=nSize;ret.count[sState]++;ret.size.total+=nSize;ret.count.total++}return ret},remove:function(sKey){var sKeyType=typeof sKey;switch(sKeyType){case"string":var nIndex=this._findQueue(sKey);return this._removeFile(nIndex);case"function":default:for(var i=this._queue.length-1;i>=0;i--){var oProp=this._queue[i];if(sKeyType==="function"&&!sKey.call(this,oProp.key,oProp.file)){continue}this._removeFile(i)}}return true},_removeFile:function(nIndex){var oProp=this._queue[nIndex];if(!oProp){return false}var oFile=oProp.file;var sKey=oProp.key;this._abortFile(nIndex);this._queue.splice(nIndex,1);this._flashFiles&&(delete this._flashFiles[sKey]);this._sendForFlash("remove",[[sKey]]);this.fireEvent("remove",{oFile:oFile,sKey:sKey});return true},abort:function(sKey){var sKeyType=typeof sKey;switch(sKeyType){case"string":var nIndex=this._findQueue(sKey);return this._abortFile(nIndex);case"function":default:for(var i=this._queue.length-1;i>=0;i--){var oProp=this._queue[i];if(sKeyType==="function"&&!sKey.call(this,oProp.key,oProp.file)){continue}this._abortFile(i)}}return true},_abortFile:function(nIndex){var oProp=this._queue[nIndex];if(!oProp){return false}var sKey=oProp.key;var oFile=oProp.file;if(oFile.state!==this._states.WAIT&&oFile.state!==this._states.PROGRESS){return false}if(this._xhr&&this._xhr[sKey]){this._xhr[sKey].abort()}this._sendForFlash("abort",[[sKey]]);this._setDoneState(sKey,oFile,"abort",0,0,this._states.NONE);return true},reset:function(sKey){var sKeyType=typeof sKey;switch(sKeyType){case"string":var nIndex=this._findQueue(sKey);return this._resetFile(nIndex);case"function":default:for(var i=this._queue.length-1;i>=0;i--){var oProp=this._queue[i];if(sKeyType==="function"&&!sKey.call(this,oProp.key,oProp.file)){continue}this._resetFile(i)}}return true},_resetFile:function(nIndex){var oProp=this._queue[nIndex];if(!oProp){return false}var sKey=oProp.key;var oFile=oProp.file;if(oFile.state!==this._states.LOAD&&oFile.state!==this._states.ERROR){return false}oFile.state=this._states.NONE;this.fireEvent("reset",{oFile:oFile,sKey:sKey});return true},upload:function(sKey){var sKeyType=typeof sKey;var sOrgKey=sKey;switch(sKeyType){case"string":sKeyType="function";sKey=function(_sKey){return sOrgKey===_sKey};case"function":default:for(var i=this._queue.length-1;i>=0;i--){var oProp=this._queue[i];if((sKeyType==="function"&&!sKey.call(this,oProp.key,oProp.file))||oProp.file.state!==this._states.NONE){continue}oProp.file.state=this._states.WAIT;this.fireEvent("wait",{oFile:oProp.file,sKey:oProp.key})}break}this._startUploadFile();return true},_startUploadFile:function(){var nParallel=this.option("nParallel");if(this._uploading>=nParallel){return false}var bFinish=true;for(var i=0,nLen=this._queue.length;i<nLen;i++){var oProp=this._queue[i];if(oProp.file.state===this._states.WAIT){bFinish=false;if(this._uploading<nParallel){this._uploadFile(oProp)}}else{if(oProp.file.state===this._states.PROGRESS){bFinish=false}}}return bFinish},_setDoneState:function(sKey,oFile,sEventName,nLoaded,nRate,sState,sLoadResponseText){if(oFile.state===sState){return}if(sEventName==="uploadLoad"){if(!this.fireEvent("beforeUploadLoad",{oFile:oFile,sKey:sKey,sResponseText:sLoadResponseText})){return this._setDoneState(sKey,oFile,"uploadError",0,0,this._states.ERROR)}}var bProgressing=oFile.state===this._states.PROGRESS;oFile.loaded=nLoaded;oFile.rate=nRate;oFile.state=sState;this._xhr&&(delete this._xhr[sKey]);this.fireEvent(sEventName,{oFile:oFile,sKey:sKey});if(bProgressing){this._uploading--}var bFinish=this._startUploadFile();this.fireEvent("uploadEnd",{oFile:oFile,sKey:sKey,bFinish:bFinish})}}).extend(jindo.UIComponent);jindo.UploadQueue.__flashCallback={};jindo.Visible=jindo.$Class({$init:function(elWrap,htOption){this._elWrap=jindo.$(elWrap)||document;this._nTimer=null;this.option({sClassName:"check_visible",nExpandSize:0});this.option(htOption||{});this.refresh()},_supportGetElementsByClassName:function(){var oConst=this.constructor;if(!("__supportGetElementsByClassName" in oConst)){oConst.__supportGetElementsByClassName=(function(){var elDummy=document.createElement("div");if(!elDummy.getElementsByClassName){return false}var aDummies=elDummy.getElementsByClassName("dummy");elDummy.innerHTML='<span class="dummy"></span>';return aDummies===1})()}return oConst.__supportGetElementsByClassName},refresh:function(){if(this._supportGetElementsByClassName()){this._aTargets=this._elWrap.getElementsByClassName(this.option("sClassName"));this.refresh=function(){}}else{this._aTargets=jindo.$$("."+this.option("sClassName"),this._elWrap)}return this},check:function(nDelay){var self=this;if(typeof nDelay==="undefined"){nDelay=-1}if(this._nTimer){clearTimeout(this._nTimer);this._nTimer=null}if(nDelay<0){this._check()}else{this._nTimer=setTimeout(function(){self._check();self._nTimer=null},nDelay)}return this},_check:function(){var _=new Date();var i;var oArea=null;var elWrap=this._elWrap;var aTargets=this._aTargets;var nExpandSize=this.option("nExpandSize");var oCount={"true":0,"false":0};if(elWrap===document){var wdDoc=jindo.$Document(document);var oClientSize=wdDoc.clientSize();oArea={top:0,left:0,bottom:oClientSize.height,right:oClientSize.width}}else{oArea=elWrap.getBoundingClientRect();oArea={top:oArea.top,left:oArea.left,bottom:oArea.bottom,right:oArea.right}}oArea.top-=nExpandSize;oArea.left-=nExpandSize;oArea.bottom+=nExpandSize;oArea.right+=nExpandSize;var aFireList=[];for(i=aTargets.length-1;i>=0;i--){var elTarget=aTargets[i];var oTargetArea=elTarget.getBoundingClientRect();if(!this._bSupportQSA&&!jindo.$Element(elTarget).hasClass(this.option("sClassName"))){delete elTarget.__VISIBLE;aTargets.splice(i,1);continue}var bBefore=!!elTarget.__VISIBLE;var bAfter=!(oTargetArea.bottom<oArea.top||oArea.bottom<oTargetArea.top||oTargetArea.right<oArea.left||oArea.right<oTargetArea.left);elTarget.__VISIBLE=bAfter;if(bBefore!==bAfter){aFireList.push([bAfter,elTarget]);oCount[!bAfter]++}else{oCount[bAfter]++}}for(i=aFireList.length-1;i>=0;i--){var oFireItem=aFireList[i];oCount[!oFireItem[0]]--;oCount[oFireItem[0]]++;this.fireEvent(oFireItem[0]?"visible":"invisible",{elTarget:oFireItem[1],nVisible:oCount["true"],nInvisible:oCount["false"]})}var elCost=jindo.$("cost");elCost&&(elCost.innerHTML=aTargets.length+"pcs : "+(new Date()-_)+"ms")}}).extend(jindo.Component);
if(typeof nclk=="undefined"){nclk={}}if(typeof nclkMaxDepth=="undefined"){var nclkMaxDepth=8}if(typeof ccsrv=="undefined"){var ccsrv="cc.naver.com"}if(typeof nsc=="undefined"){var nsc="decide.me"}if(typeof g_pid=="undefined"){var g_pid=""}if(typeof g_sid=="undefined"){var g_sid=""}var nclkImg=[];if(typeof nclkMaxEvtTarget=="undefined"){var nclkMaxEvtTarget=4}if(typeof nclk_evt=="undefined"){var nclk_evt=0}nclk.nclktagVersion="1.0.12";nclk.addEvent=function(e,b,a){if(e.addEventListener){e.addEventListener(b,a,false)}else{if(e.attachEvent){e["e"+b+a]=a;e[b+a]=function(){e["e"+b+a](window.event)};e.attachEvent("on"+b,e[b+a])}}};nclk.generateCC=function(l){var r=l||window.event;if(!r){return false}var f=r.target||r.srcElement;var o=f.nodeName;var m,p;var q;var b="",t="",k="",g="";var a=0,n=0;var h,s;var i;var j=-1;if(r.button==2){return}if(f.nodeType==3){f=f.parentNode}if(f.parentNode&&f.parentNode.nodeName=="A"){f=f.parentNode}p=f;while(j<=nclkMaxEvtTarget){if(j>=nclkMaxEvtTarget){if(nclk_evt==2||nclk_evt==4){h=0;m=p;break}else{return}}else{i=nclk.getTag(f);h=i[0];s=i[1];if(h==0){if(f.parentNode){f=f.parentNode;j++}else{h=0;m=p;break}}else{m=f;break}}}switch(h){case 0:case 1:case 2:case 3:if(nclk_evt==2||nclk_evt==4){b="ncs.blank"}else{return}break;case 4:b=nclk.findArea(m,1);if(b==undefined){b=""}q=nclk.parseNCStr(h,s);b=b+"."+q[0];break;case 5:b=nclk.findArea(m,2);if(b==undefined){b=""}q=nclk.parseNCStr(h,s);break;case 6:q=nclk.parseNCStr(h,s);b=q[0];break;default:return}if(h==4||h==5||h==6){k=q[1];t=q[2];g=q[3];n=q[4]}if(n=="2"){return}else{a=n}if(g){clickcr(m,b,t,k,r,a,g)}else{clickcr(m,b,t,k,r,a)}};nclk.searchNextObj=function(a){var b=a.nextSibling;if(b&&b.nodeType==3){b=b.nextSibling}return b};nclk.getTag=function(g){var b=0;if(!g){return 0}var i;var f;var h;var a="";if(nclk_evt==1||nclk_evt==2){var e=nclk.searchNextObj(g);if(e){if(e!=null&&e.nodeType==8&&e.data.indexOf("=")>0){a=nclk.trim(e.data)}else{return[0,""]}}else{return[0,""]}}else{if(nclk_evt==3||nclk_evt==4){if(g.className){a=nclk.getClassTag(g.className);if(!a){return[0,""]}}else{return[0,""]}}}a=nclk.trim(a);i=a.split("=");f=i[0].charAt(0);h=i[0].substring(1);if(f!="N"){return[0,""]}if(h=="E"){b=1}else{if(h=="I"){b=2}else{if(h=="EI"||h=="IE"){b=3}else{if(h=="IP"||h=="PI"){b=4}else{if(h=="P"){b=5}else{if(i[0].length==1){b=6}else{b=0}}}}}}return[b,a]};nclk.findArea=function(b,h){var j=0;var g;var k;var m,f;var e="";var a=0;var l;var i;if(!b){return}if(h==1){a=1}else{if(h==2){a=0}}while(b=b.parentNode){g=b;while(1){if(nclk_evt==1||nclk_evt==2){g=g.previousSibling;if(g){if(g.nodeType==8){k=nclk.trim(g.data)}else{continue}}else{break}}else{if(nclk_evt==3||nclk_evt==4){k=b.className;if(k){k=nclk.getClassTag(k)}else{break}}}if(k.indexOf("=")>0){m=k.split("=");if(m[0].charAt(0)!="N"){continue}i=m[0].substring(1);if(i=="I"&&a==0){f=m[1].split(":");if(f[0]=="a"){if(f[1]!=""&&f[1]!=undefined){e=f[1]}}a++;break}else{if(i=="E"&&a==1){if(a==1){f=m[1].split(":");if(f[0]=="a"){if(e==""){e=f[1]}else{e=((f[1]==undefined)?"":f[1])+"."+e}}}a++;break}else{if((i=="EI"||i=="IE")&&a==0){f=m[1].split(":");if(f[0]=="a"){e=f[1]}a+=2;break}}}}if(nclk_evt==3||nclk_evt==4){break}}j++;if(a>=2){l=e;break}if(j>=nclkMaxDepth){l="";break}}return l};nclk.getServiceType=function(){var a;if(typeof g_ssc!="undefined"&&typeof g_query!="undefined"){a=1}else{a=0}return a};nclk.parseNCStr=function(h,o){var a;var m;var l;var e;var b="",k="",p="",f="",n=0;var g=2;o=nclk.trim(o);switch(h){case 4:g=4;break;case 5:g=3;break;case 6:g=2;break;case 1:case 2:case 3:default:return}m=o.substring(g);l=m.split(",");for(var j=0;j<l.length;j++){e=l[j].split(":");if(e[0]=="a"){b=e[1]}else{if(e[0]=="r"){k=e[1]}else{if(e[0]=="i"){p=e[1]}else{if(e[0]=="g"){f=e[1]}else{if(e[0]=="t"){n=e[1]}}}}}}return[b,k,p,f,n]};nclk.trim=function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};nclk.getClassTag=function(g){var f="";if(typeof(g)=="string"){f=g}else{if(g.baseVal){f=g.baseVal}else{f=""+g}}var b=new RegExp("N[^=]*=([^ $]*)");var e=f.match(b);var a="";if(e){a=e[0]}return a};function nclk_do(){if(nclk_evt==1||nclk_evt==2||nclk_evt==3||nclk_evt==4){nclk.addEvent(document,"click",nclk.generateCC)}}nclk.getScrollBarWidth=function(){var e=document.createElement("p");e.style.width="200px";e.style.height="200px";var f=document.createElement("div");f.style.position="absolute";f.style.top="0px";f.style.left="0px";f.style.visibility="hidden";f.style.width="200px";f.style.height="150px";f.style.overflow="hidden";f.appendChild(e);document.body.appendChild(f);var b=e.offsetWidth;f.style.overflow="scroll";var a=e.offsetWidth;if(b==a){a=f.clientWidth}document.body.removeChild(f);return(b-a)};nclk.findPos=function(b){var f=curtop=0;try{if(b.offsetParent){do{f+=b.offsetLeft;curtop+=b.offsetTop}while(b=b.offsetParent)}else{if(b.x||b.y){if(b.x){f+=b.x}if(b.y){curtop+=b.y}}}}catch(a){}return[f,curtop]};nclk.windowSize=function(e){if(!e){e=window}var a=0;if(e.innerWidth){a=e.innerWidth;if(typeof(e.innerWidth)=="number"){var b=nclk.getScrollBarWidth();a=e.innerWidth-b}}else{if(document.documentElement&&document.documentElement.clientWidth){a=document.documentElement.clientWidth}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){a=document.body.clientWidth}}}return a};nclk.checkIframe=function(i){var f=document.URL;var h=i.parentNode;var a;var b;if(h==null||h==undefined){return false}while(1){if(h.nodeName.toLowerCase()=="#document"){if(h.parentWindow){a=h.parentWindow}else{a=h.defaultView}try{if(a.frameElement!=null&&a.frameElement!=undefined){if(a.frameElement.nodeName.toLowerCase()=="iframe"){b=a.frameElement.id;if(!b){return false}return b}else{return false}}else{return false}}catch(g){return false}}else{h=h.parentNode;if(h==null||h==undefined){return false}}}};nclk.absPath=function(a){var e=window.location;var f=e.href;var b=e.protocol+"//"+e.host;if(a.charAt(0)=="/"){if(a.charAt(1)=="/"){return e.protocol+a}else{return b+a}}if(/^\.\//.test(a)){a=a.substring(2)}while(/^\.\./.test(a)){if(b!=f){f=f.substring(0,f.lastIndexOf("/"))}a=a.substring(3)}if(b!=f){if(a.charAt(0)!="?"&&a.charAt(0)!="#"){f=f.substring(0,f.lastIndexOf("/"))}}if(a.charAt(0)=="/"){return f+a}else{if(a.charAt(0)=="?"){f=f.split("?")[0];return f+a}else{if(a.charAt(0)=="#"){f=f.split("#")[0];return f+a}else{return f+"/"+a}}}};function clickcr(g,I,u,E,F,B,Q){if(arguments.length==1){if(typeof nclk.generateCC!="undefined"){nclk.generateCC(arguments[0])}return}var z="cc";var G=navigator.userAgent.toLowerCase();var k=(G.indexOf("safari")!=-1?true:false);var D=/msie/.test(G)&&!/opera/.test(G);var l=(window.location.protocol=="https:")?"https:":"http:";var a=ccsrv.substring(ccsrv.indexOf(".")+1);var t=window.event?window.event:F;var s=-1;var q=-1;var p=-1;var n=-1;var T,f,i;var r,j,m;var N,K,J,M,A,C,w;var P;var H=0;if(!B){B="0"}else{B=String(B)}if(!Q){Q=""}if(B.indexOf("n")==0){H=0}else{if(window.g_ssc!=undefined&&window.g_query!=undefined){H=1}else{H=0}}try{M=nclk.windowSize(window);i=nclk.checkIframe(g);if(i){var v=nclk.findPos(document.getElementById(i));if(t.clientX&&t.clientX!=undefined){T=document.body;if(T.clientLeft&&T.clientTop){ifrSx=t.clientX-T.clientLeft;ifrSy=t.clientY-T.clientTop}else{ifrSx=t.clientX;ifrSy=t.clientY}}p=v[0]+ifrSx;n=v[1]+ifrSy;if(document.body&&(document.body.scrollTop||document.body.scrollLeft)){T=document.body;s=p-T.scrollLeft;q=n-T.scrollTop}else{if(document.documentElement&&(document.documentElement.scrollTop||document.documentElement.scrollLeft)){f=document.documentElement;s=p-f.scrollLeft;q=n-f.scrollTop}else{s=p;q=n}}}else{if(t.clientX&&t.clientX!=undefined){T=document.body;if(T.clientLeft&&T.clientTop){s=t.clientX-T.clientLeft;q=t.clientY-T.clientTop}else{s=t.clientX;q=t.clientY}}if(document.body&&(document.body.scrollTop||document.body.scrollLeft)){p=document.body.scrollLeft+(s<0?0:s);n=document.body.scrollTop+(q<0?0:q)}else{if(document.documentElement&&(document.documentElement.scrollTop||document.documentElement.scrollLeft)){f=document.documentElement;if(f.scrollLeft!=undefined){p=f.scrollLeft+(s<0?0:s)}if(f.scrollTop!=undefined){n=f.scrollTop+(q<0?0:q)}}else{p=(s<0?0:s);n=(q<0?0:q)}}if(t.pageX){p=t.pageX}if(t.pageY){n=t.pageY}}}catch(R){}if(I==""||typeof I=="undefined"){return}if(B.indexOf("1")!=-1){r=0}else{if(g.href){A=g.nodeName.toLowerCase();C=g.href.toLowerCase();if((g.target&&g.target!="_self"&&g.target!="_top"&&g.target!="_parent")||(C.indexOf("javascript:")!=-1)||(g.getAttribute("href",2)&&g.getAttribute("href",2).charAt(0)=="#")||(C.indexOf("#")!=-1&&(C.substr(0,C.indexOf("#"))==document.URL))||A.toLowerCase()=="img"||D&&window.location.host.indexOf(a)==-1){r=0}else{r=1}}else{r=0}}if(g.href&&g.href.indexOf(l+"//"+ccsrv)==0){j=g.href}else{j=l+"//"+ccsrv+"/"+z+"?a="+I+"&r="+E+"&i="+u;j+="&bw="+M+"&px="+p+"&py="+n+"&sx="+s+"&sy="+q+"&m="+r;if(H==0){j+="&nsc="+nsc}else{if(H==1){j+="&ssc="+g_ssc+"&q="+encodeURIComponent(g_query)+"&s="+g_sid+"&p="+g_pid}}if(Q){j+="&g="+Q}if(C&&C.indexOf(l+"//"+ccsrv)!=0&&A.toLowerCase()!="img"){var O=g.href;if(g.outerHTML&&!window.XMLHttpRequest){O=(/\shref=\"([^\"]+)\"/i.test(g.outerHTML)&&RegExp.$1).replace(/\\/g,"\\\\").replace(/%([A-Z0-9]{2})/ig,"\\$1");(d=document.createElement("div")).innerHTML=O;O=d.innerText.replace(/\\([A-Z0-9]{2})/gi,"%$1").replace(/\\\\/g,"\\")}C=O.toLowerCase();if(C.indexOf("http:")==0||C.indexOf("https:")==0||C.indexOf("javascript:")==0){j+="&u="+encodeURIComponent(O)}else{w=nclk.absPath(O);j+="&u="+encodeURIComponent(w)}}else{if(g.href){if(g.href.length>0){j+="&u="+encodeURIComponent(g.href)}else{j+="&u=about%3Ablank"}}else{j+="&u=about%3Ablank"}}}if(r==1){P=g.innerHTML;g.href=j;if(g.innerHTML!=P){g.innerHTML=P}}else{if(document.images){var L=new Date().getTime();j+="&time="+L;if(k&&!g.href){var S=c=new Date();while((S.getTime()-c.getTime())<100){S=new Date()}var N=new Image();nclkImg.push(N);N.src=j}else{var N=new Image();nclkImg.push(N);N.src=j}}}return true};
var lcs_add={};var lcs_ver="v0.4.14.m";var lcs_cnt=0;if(!lcs_SerName){var lcs_SerName="lcs.naver.com"}function lcs_do(etc){var rs="";var index;var doc=document;var wlt=window.location;try{var lcs_Addr=(wlt.protocol?wlt.protocol:"http:")+"//"+lcs_SerName+"/m?"}catch(e){return}try{rs=lcs_Addr+"u="+encodeURIComponent(wlt.href)+"&e="+(doc.referrer?encodeURIComponent(doc.referrer):"")}catch(e){}try{if(typeof lcs_add.i=="undefined"){lcs_add.i=""}for(var index in lcs_add){if(typeof lcs_add[index]!="function"){rs+="&"+index+"="+encodeURIComponent(lcs_add[index])}}for(var index in etc){if((index.length>=3&&(typeof etc[index]!="function"))||index=="qy"){rs+="&"+index+"="+encodeURIComponent(etc[index])}}if(lcs_cnt>0){var timeStr=(new Date).getTime();rs+="&ts="+timeStr}rs+="&EOU";var obj=(new Image());obj.src=rs;obj.onload=function(){obj.onload=null;return};lcs_cnt++}catch(e){return}}function lcs_do_gdid(gdid,etc){try{if(gdid){lcs_add.i=gdid;if(etc){lcs_do(etc)}else{lcs_do()}}}catch(e){}};
var GaLogger=GaLogger||{id:undefined,isInit:false,dimensions:{},pendingDimensions:{},readInfo:{eventLabel:"",callReadComplete:false},init:function(id){if(this.isInit){return}(function(i,s,o,g,r,a,m){i.GoogleAnalyticsObject=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");this.id=id;ga("create",this.id,"auto");this.isInit=true},set:function(dimension,value){if(this.isInit){ga("set",dimension,value);this.dimensions[dimension]=value}else{this.pendingDimensions[dimension]=value}},displayfeatures:function(){this._ga("require","displayfeatures")},pageView:function(){this._ga("send","pageview")},episodeRead:function(eventLabel,dimensions){this.readInfo.eventLabel=eventLabel;var oDimension={dimension2:dimensions.titleNo,dimension3:dimensions.episodeNo,dimension9:dimensions.weekday,dimension11:dimensions.genre};this.gaEventLoggingByDimensions("Read","Read_Episode",this.readInfo.eventLabel,oDimension)},episodeReadComplete:function(){if(!this.readInfo.eventLabel){return}if(this.readInfo.callReadComplete){return}this.readInfo.callReadComplete=true;this.gaEventLoggingByDimensions("Read","Read_Complete",this.readInfo.eventLabel)},gaEventLogging:function(eventCategory,eventAction,eventLabel,titleNo,episodeNo){this._clearDimensions();if(titleNo){this.set("dimension2",titleNo)}if(episodeNo){this.set("dimension3",episodeNo)}this._ga("send","event",eventCategory,eventAction,eventLabel)},gaEventLoggingByDimensions:function(eventCategory,eventAction,eventLabel,dimensions){this._clearDimensions();if(dimensions){for(var key in dimensions){this.set(key,dimensions[key])}}this._ga("send","event",eventCategory,eventAction,eventLabel)},_ga:function(command,hitType,category,action,label){this._addPendingDimensions();ga(command,hitType,category,action,label)},_addPendingDimensions:function(){for(var key in this.pendingDimensions){this.set(key,this.pendingDimensions[key])}},_clearDimensions:function(){if(Object.keys(this.dimensions).length<1){return}for(var key in this.dimensions){if(key!="dimension4"){delete this.dimensions[key];ga("set",key,null)}}}};
var FacebookLogger=FacebookLogger||{id:undefined,isInit:false,init:function(id){!function(f,b,e,v,n,t,s){if(f.fbq){return}n=f.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq){f._fbq=n}n.push=n;n.loaded=!0;n.version="2.0";n.queue=[];t=b.createElement(e);t.async=!0;t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,document,"script","//connect.facebook.net/en_US/fbevents.js");this.id=id;fbq("init",this.id);this.isInit=true},pageView:function(){this.log({method:"track",action:"PageView"})},viewContent:function(title,episodeNo){this.log({method:"track",action:"ViewContent",params:{content_ids:[title+"_EP"+episodeNo],content_type:"product"}})},log:function(options){if(!this.isInit){return}if(!options){console.log("FACEBOOK paramater error.");return}fbq(options.method,options.action,options.params)}};
var Util={GLOBAL_UNITS:["","K","M","G","T","P","E"],LANGUAGE_UNIT_MAP:{"zh-hans":["","万","亿","兆"],"zh-hant":["","萬","億","兆"],ja:["","万","億","兆"]},changeNumberFormat:function(vNumber){var sUnderNumber="";var sNumberString=vNumber||0;sNumberString=(typeof sNumberString!="String")?String(sNumberString):sNumberString;if(sNumberString.indexOf(".")>-1){var aNumber=sNumberString.split(".");sNumberString=aNumber[0];sUnderNumber="."+aNumber[1]}return sNumberString.replace(/(\d)(?=(\d{3})+$)/igm,"$1,")+sUnderNumber},changeStarScoreFormat:function(vNumber){var sUnderNumber="";var sNumberString=vNumber||0;if(sNumberString==10){return"10"}sNumberString=(typeof sNumberString!="String")?String(sNumberString):sNumberString;if(sNumberString.indexOf(".")>-1){var aNumber=sNumberString.split(".");sNumberString=aNumber[0];sUnderNumber=aNumber[1]||""}var nNeedZeroCount=2-sUnderNumber.length;for(var i=0;i<nNeedZeroCount;i++){sUnderNumber+="0"}return sNumberString+"."+sUnderNumber},changeLikeitCountFormat:function(vNumber,likeitMessage,languageCode){return this.changeMinimumCountFormat(vNumber,likeitMessage,1000,languageCode,999999)},changeCheerCountFormat:function(vNumber,cheerMessage,languageCode){return this.changeMinimumCountFormat(vNumber,cheerMessage,1,languageCode,999999)},changeMinimumCountFormat:function(vNumber,minimumMessage,minimumCount,languageCode,maximumCount){if(vNumber<minimumCount){return minimumMessage==null?vNumber:minimumMessage}else{if(typeof(maximumCount)!="number"||vNumber>maximumCount){return this.literalNumberFormat(vNumber,minimumMessage,languageCode)}else{return this.changeNumberFormat(vNumber)}}},literalNumberFormat:function(value,likeitMessage,languageCode){if(value==null||value==""||value===undefined){return likeitMessage}value=String(value);var formattedNumber="";var isEastern=("zh-hans"==languageCode||"zh-hant"==languageCode||"ja"==languageCode);if(isEastern){formattedNumber=this._literalNumberFormat(value,4,this.LANGUAGE_UNIT_MAP[languageCode])}else{formattedNumber=this._literalNumberFormat(value,3,this.GLOBAL_UNITS)}return formattedNumber},_literalNumberFormat:function(value,unitCount,units){if(value==null||value==""||value===undefined){return value}var len=value.length;var cutCount=len%unitCount;var unitNumber=Math.floor(len/unitCount);if(cutCount==0){cutCount=unitCount;unitNumber--}var underPoint="";if(value[cutCount]!="0"&&value[cutCount]!=undefined){underPoint="."+value[cutCount]}return value.slice(0,cutCount)+underPoint+units[unitNumber]},MONTH_NAMES_EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],TIME_SUFFIX_EN:{justNow:"just now",minsAgo:"mins ago",hoursAgo:"hours ago",daysAgo:"days ago"},getDateString:function(oNowDate,sDate,sDateFormat){sDateFormat=sDateFormat||"Y-m-d H:i";var oDate=null;if(sDate.length==14){var nYear=parseInt(sDate.substring(0,4));var nMonth=parseInt(sDate.substring(4,6));var nDay=parseInt(sDate.substring(6,8));var nHour=parseInt(sDate.substring(8,10));var nMinute=parseInt(sDate.substring(10,12));var nSecond=parseInt(sDate.substring(12,14));oDate=new jindo.$Date(nYear,nMonth-1,nDay,nHour,nMinute,nSecond)}else{jindo.$Date.utc=(new Date().getTimezoneOffset()/60)*-1;oDate=new jindo.$Date(sDate)}var aMonthNames=MONTH_NAMES||MONTH_NAMES_EN;var htTimeSuffix=TIME_SUFFIX||TIME_SUFFIX_EN;if(oDate.compare(oNowDate,"s")<60){return htTimeSuffix.justNow}else{if(oDate.compare(oNowDate,"i")<60){return oDate.compare(oNowDate,"i")+" "+htTimeSuffix.minsAgo}else{if(oDate.compare(oNowDate,"h")<24){return oDate.compare(oNowDate,"h")+" "+htTimeSuffix.hoursAgo}else{if(oDate.compare(oNowDate,"d")<7){return oDate.compare(oNowDate,"d")+" "+htTimeSuffix.daysAgo}else{oDate.name("month",aMonthNames);var sFormatedDate=oDate.format(sDateFormat);return sFormatedDate.replace(/M/,aMonthNames[oDate.month()])}}}}},getUserInfo:function(){var sContentLanguageCode=contentLanguageCode||"en";var htUserInfo=null;var oAjax=jindo.$Ajax("/"+sContentLanguageCode+"/member/userInfo",{type:"xhr",method:"get",async:false,onload:function(oRes){var oJson=oRes.json();htUserInfo=oJson}});oAjax.request();window._gbLogin=htUserInfo!=null&&htUserInfo.isLogin;return htUserInfo},isLogedIn:function(){if(window._gbLogin!=undefined){return window._gbLogin}var returnValue=false;var oAjax=jindo.$Ajax("/member/isLogin",{type:"xhr",method:"get",async:false,onload:function(res){returnValue=res.text()=="true"}});oAjax.request();window._gbLogin=returnValue;return returnValue},goLogin:function(returnUrl){var isAuthorPublishLogin=(returnUrl&&(/\/challenge\/publish$/.test(returnUrl)||/\/challenge\/series$/.test(returnUrl)||/\/challenge\/episode\?/.test(returnUrl)));var oLogin=new Login({returnUrl:returnUrl,isAuthorPublishLogin:isAuthorPublishLogin});oLogin.show(returnUrl)},loginAndGo:function(sUrl){if(this.isLogedIn()==false){this.goLogin(location.href)}else{location.href=sUrl}},showDimmedLayer:function(){jindo.$Element(document.body).appendHTML('<div class="ly_dim on __layerDimmed" style="display:block;"><div class="bg"></div></div>')},hideDimmedLayer:function(){jindo.$Element(jindo.$$.getSingle(".__layerDimmed")).leave()},htDefaultErrorMessage:{"alert.error.no_internet_connection":"No Internet Connection.\nPlease check the network connection.","alert.error.invalid_input":"Invalid input value.","alert.error.unknown":"Unknown error has occurred. Please try again in a moment."},getErrorMessage:function(sKey){var htMessage=ghtErrorMessage||htDefaultErrorMessage;return htMessage[sKey]||""},ellipsis:function(wel,sParentCssSelector,errorRangeValue){var _DEFAULT_ERROR_RANGE_VALUE=9;if(!wel||!sParentCssSelector){return}var welParent=wel.query("! "+sParentCssSelector);var nParentHeightLimit=welParent.offset().top+welParent.height()+(errorRangeValue||_DEFAULT_ERROR_RANGE_VALUE);var sText=wel.text();for(var nOffset=sText.length;nOffset>=0;nOffset--){var nSummaryBottom=wel.offset().top+wel.height();if(nSummaryBottom>nParentHeightLimit){sCutText=sText.substring(0,nOffset)+"...";wel.text(sCutText)}else{break}}},trim:function(sString){if(!sString){return sString}return(typeof sString=="string")?sString.replace(/^\s+/g,"").replace(/\s+$/g,""):""},stripScripts:function(sString){return(typeof sString=="string")?sString.replace(/<script[^>]*>([\S\s]*?)<\/script>/img,""):""},stripHTML:function(sString){return(typeof sString=="string")?sString.replace(/<(?:.|\s)*?>/g,""):""},nClicks4CheckBox:function(el,checkCode,uncheckCode){if(el.checked){clickcr(this,checkCode,"","",null,sNclkLanguageCode)}else{clickcr(this,uncheckCode,"","",null,sNclkLanguageCode)}},challengeRewardLog:function(htOption){var htUrl={CHALLENGE_ACCESS:"/challenge/rewardAccessLog",STAR_SCORE:"/challenge/rewardStarScoreLog",SHARE_CHALLENGE:"/challenge/rewardChallengeShareLog",LIKE_IT:"/challenge/rewardLikeItLog",SHARE_PROMOTION:"/challenge/rewardPromotionShareLog"};var sUrl="/"+htOption.language+htUrl[htOption.type];this._oAjax=new jindo.$Ajax(sUrl,{type:"xhr",method:"get",onload:function(oRes){}});var htParam;switch(htOption.type){case"CHALLENGE_ACCESS":htParam={};break;case"STAR_SCORE":htParam={titleNo:htOption.titleNo};break;case"SHARE_CHALLENGE":htParam={titleNo:htOption.titleNo,episodeNo:htOption.episodeNo,snsCode:htOption.snsCode};break;case"LIKE_IT":htParam={titleNo:htOption.titleNo,episodeNo:htOption.episodeNo};break;case"SHARE_PROMOTION":htParam={snsCode:htOption.snsCode};break;default:return;break}this._oAjax.request(htParam)},getGenreName:function(sGenre){var htGenreName=null;var oAjax=jindo.$Ajax("/genreNames",{type:"xhr",method:"get",async:false,onload:function(oRes){var oJson=oRes.json();htGenreName=oJson}});if(!window._ghtGenreName){oAjax.request();window._ghtGenreName=htGenreName}return window._ghtGenreName[sGenre]},isEmail:function(sEmail){var sEmailTrim=(typeof sEmail=="string")?this.trim(sEmail):"";var aResult=sEmailTrim.match(/[-!#$%&'*+\/^_~{}|0-9a-zA-Z]+(\.[-!#$%&'*+\/^_~{}|0-9a-zA-Z]+)*@[-!#$%&'*+\/^_~{}|0-9a-zA-Z]+(\.[-!#$%&'*+\/^_~{}|0-9a-zA-Z]+)+/);if(aResult&&aResult[0]==sEmailTrim){return true}else{return false}},isPhoneNumber:function(sPhoneNumber){return this.isNumberString(sPhoneNumber,6,15)},isNumberString:function(sNumber,minLength,maxLength){var sNumberTrim=(typeof sNumber=="string")?this.trim(sNumber):"";if(minLength&&!maxLength){return new RegExp("^\\d{"+minLength+"}$").test(sNumberTrim)}else{if(minLength&&maxLength){return new RegExp("^\\d{"+minLength+","+maxLength+"}$").test(sNumberTrim)}else{return/^\d+$/.test(sNumberTrim)}}},checkAgeGradeNoticeConfirm:function(nTitleNo,bAgeGradeNotice,bFilteredCountry,sAgeGradeNoticeMsg,sFilteredCountryNoticeMsg){var sCookieName="agn2";if(bAgeGradeNotice){if(bFilteredCountry){alert(sFilteredCountryNoticeMsg);location.href="http://"+location.hostname+"/"+contentLanguageCode+"/"}else{var sAgeGroupNoticeCookie=jindo.$Cookie().get(sCookieName);var bConfirm=(sAgeGroupNoticeCookie!=null&&(sAgeGroupNoticeCookie.split("_").indexOf(""+nTitleNo)>=0));if(bConfirm==false){if(confirm(sAgeGradeNoticeMsg)==false){location.href="http://"+location.hostname+"/"+contentLanguageCode+"/"}else{sAgeGroupNoticeCookie=!sAgeGroupNoticeCookie?(""+nTitleNo):(sAgeGroupNoticeCookie+"_"+nTitleNo);jindo.$Cookie().set(sCookieName,sAgeGroupNoticeCookie,1000,location.hostname)}}}}},escape:function(obj,currentDepth,maxDepth){if(maxDepth<currentDepth){return obj}if(!obj){return obj}if(typeof obj==="string"||typeof obj==="number"||typeof obj==="boolean"){return Util.escapeString(obj)}else{var oArr=jindo.$A(obj);if(oArr){return oArr.map(function(value,index,array){return Util.escape(value,currentDepth+1,maxDepth)}).$value()}else{for(var key in obj){if(obj.hasOwnProperty(key)){obj[key]=Util.escape(obj[key],currentDepth+1,maxDepth)}}return obj}}},escapeString:function(str){if(!str||typeof str!="string"){return str}return str.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},computeFullSize:function(element){var style=element.currentStyle||window.getComputedStyle(element);return{width:element.offsetWidth+parseFloat(style.marginLeft)+parseFloat(style.marginRight)+parseFloat(style.paddingLeft)+parseFloat(style.paddingRight)+parseFloat(style.borderLeftWidth)+parseFloat(style.borderRightWidth),height:element.offsetHeight+parseFloat(style.marginTop)+parseFloat(style.marginBottom)+parseFloat(style.paddingTop)+parseFloat(style.paddingBottom)+parseFloat(style.borderTopWidth)+parseFloat(style.borderBottomWidth)}},getProductName:function(serviceZone){if(serviceZone=="JAPAN"){return"xoy"}else{if(serviceZone=="CHINA"){return"dongman"}}return"linewebtoon"}};
var LocalStorageUtil=jindo.$Class({$init:function(){this._bLocalStorageSupported=this._isLocalStorageSupported()},get:function(sKey,noEscape){if(this._bLocalStorageSupported){var vValue=localStorage.getItem(sKey);var oJson=jindo.$Json(vValue);var oJsonObj=oJson.toObject();if(noEscape){return oJsonObj}return Util.escape(oJsonObj,1,10)}},set:function(sKey,vValue){if(this._bLocalStorageSupported){var oJson=jindo.$Json(vValue);localStorage.setItem(sKey,oJson.toString())}},remove:function(sKey){if(this._bLocalStorageSupported){localStorage.removeItem(sKey)}},_isLocalStorageSupported:function(){var sTestKey="test";try{localStorage.setItem(sTestKey,sTestKey);localStorage.removeItem(sTestKey);return true}catch(error){return false}}});
var RecentWebtoon=jindo.$Class({_LOCAL_STORAGE_NAME:"recentWebtoon",_COOKIE_NAME:"rw",_COOKIE_COUNT:20,$init:function(nCount){this._COOKIE_COUNT=nCount||this._COOKIE_COUNT;this._oLocalStorage=new LocalStorageUtil()},add:function(nTitleNo,nEpisodeNo,nEpisodeSeq,nScrollPosition,sLanguage,sGenreCode,bChallenge){return this.add(nTitleNo,nEpisodeNo,nEpisodeSeq,nScrollPosition,sLanguage,sGenreCode,bChallenge,null,-1)},add:function(nTitleNo,nEpisodeNo,nEpisodeSeq,nScrollPosition,sLanguage,sGenreCode,bChallenge,sLanguageCode,nTeamVersion){this._addToCookie(nTitleNo,nEpisodeNo,bChallenge,sLanguageCode,nTeamVersion);return this._addToLocalStorage(nTitleNo,nEpisodeNo,nEpisodeSeq,nScrollPosition,sLanguage,sGenreCode,bChallenge,sLanguageCode,nTeamVersion)},_addToCookie:function(nTitleNo,nEpisodeNo,bChallenge,sLanguageCode,nTeamVersion){var sValue=jindo.$Cookie().get(this._COOKIE_NAME)||"";if(!sValue){sValue=this._makeCookieValue(nTitleNo,nEpisodeNo,bChallenge,sLanguageCode,nTeamVersion);jindo.$Cookie().set(this._COOKIE_NAME,sValue,365,location.host);return}var aTitles=sValue.split(",");for(var i=0,l=aTitles.length;i<l;i++){if(aTitles[i].indexOf((bChallenge?"c":"w")+"_"+nTitleNo+"_")>-1){aTitles.splice(i,1);break}}var sNewValue=this._makeCookieValue(nTitleNo,nEpisodeNo,bChallenge,sLanguageCode,nTeamVersion);aTitles=[sNewValue].concat(aTitles);aTitles.splice(this._COOKIE_COUNT,1);jindo.$Cookie().set(this._COOKIE_NAME,aTitles.join(","),365,location.host)},_makeCookieValue:function(nTitleNo,nEpisodeNo,bChallenge,sLanguageCode,nTeamVersion){if(sLanguageCode!=null&&sLanguageCode!="undefined"&&nTeamVersion!=-1&&nTeamVersion!="undefined"){return(bChallenge?"c":"w")+"_"+nTitleNo+"_"+nEpisodeNo+"_"+sLanguageCode+"_"+nTeamVersion}else{return(bChallenge?"c":"w")+"_"+nTitleNo+"_"+nEpisodeNo}},_addToLocalStorage:function(nTitleNo,nEpisodeNo,nEpisodeSeq,nScrollPosition,sLanguage,sGenreCode,bChallenge,sLanguageCode,nTeamVersion){var aRecentWebtoon=this._oLocalStorage.get(this._LOCAL_STORAGE_NAME);if(!aRecentWebtoon){aRecentWebtoon=new Array()}else{for(var i=0,l=aRecentWebtoon.length;i<l;i++){var htRecent=aRecentWebtoon[i];if(htRecent.titleNo==nTitleNo&&htRecent.bChallenge==bChallenge){aRecentWebtoon.splice(i,1);break}}}var oDate=jindo.$Date();var htTemp={titleNo:nTitleNo,episodeNo:nEpisodeNo,episodeSeq:nEpisodeSeq,scrollPosition:nScrollPosition,language:sLanguage,bChallenge:bChallenge,date:oDate.format("YmdHis"),languageCode:sLanguageCode,genreCode:sGenreCode,teamVersion:nTeamVersion};var aNewRecentWebtoon=[htTemp];aNewRecentWebtoon=aNewRecentWebtoon.concat(aRecentWebtoon);this._oLocalStorage.set(this._LOCAL_STORAGE_NAME,aNewRecentWebtoon);return aNewRecentWebtoon},get:function(sLanguage,nTitleNo,bChallenge){var aRecentWebtoon=this._oLocalStorage.get(this._LOCAL_STORAGE_NAME);if(!aRecentWebtoon||!sLanguage){return null}var aRecent=[];for(var i=0,l=aRecentWebtoon.length;i<l;i++){var htRecent=aRecentWebtoon[i];if(htRecent.language==sLanguage){aRecent.push(htRecent)}}if(!nTitleNo){return aRecent}for(var i=0,l=aRecent.length;i<l;i++){var htRecent=aRecent[i];if(htRecent.titleNo==nTitleNo&&htRecent.bChallenge==bChallenge){return aRecent[i]}}return null},getFromCookie:function(nTitleNo,bChallenge){var sCookieValue=jindo.$Cookie().get(this._COOKIE_NAME,location.host);if(!sCookieValue){return[]}var aTitleTemp=sCookieValue.split(",");var aTitles=[];if(aTitleTemp&&aTitleTemp.length>0){for(var i=0,l=aTitleTemp.length;i<l;i++){var aTemp=aTitleTemp[i].split("_");aTitles.push({bChallenge:(aTemp[0]=="c"?true:false),titleNo:aTemp[1],episodeNo:aTemp[2]})}}if(!nTitleNo){return aTitles}for(var i=0,l=aTitles.length;i<l;i++){if(aTitles[i]["titleNo"]==nTitleNo&&aTitles[i]["bChallenge"]==bChallenge){return aTitles[i]}}return[]},remove:function(sLanguage,nTitleNo,bChallenge){this._removeFromCookie(nTitleNo,bChallenge);return this._removeFromLocalStorage(sLanguage,nTitleNo,bChallenge)},_removeFromCookie:function(nTitleNo,bChallenge){if(!nTitleNo){jindo.$Cookie().remove(this._COOKIE_NAME,location.host);return}var sValue=jindo.$Cookie().get(this._COOKIE_NAME)||"";if(!sValue){return}var aTitles=sValue.split(",");for(var i=0,l=aTitles.length;i<l;i++){if(aTitles[i].indexOf((bChallenge?"c":"w")+"_"+nTitleNo+"_")>-1){aTitles.splice(i,1);break}}jindo.$Cookie().set(this._COOKIE_NAME,aTitles.join(","),365,location.host)},_removeFromLocalStorage:function(sLanguage,nTitleNo,bChallenge){if(!sLanguage&&!nTitleNo){this._oLocalStorage.remove(this._LOCAL_STORAGE_NAME);return}var aRecentWebtoon=this._oLocalStorage.get(this._LOCAL_STORAGE_NAME);if(aRecentWebtoon){if(!nTitleNo){for(var i=aRecentWebtoon.length-1;i>=0;i--){var htRecent=aRecentWebtoon[i];if(htRecent&&htRecent.language==sLanguage){aRecentWebtoon.splice(i,1)}}}else{for(var i=0,l=aRecentWebtoon.length;i<l;i++){var htRecent=aRecentWebtoon[i];if(htRecent.titleNo==nTitleNo&&htRecent.bChallenge==bChallenge){aRecentWebtoon.splice(i,1);break}}}}this._oLocalStorage.set(this._LOCAL_STORAGE_NAME,aRecentWebtoon);return aRecentWebtoon}});
var SearchArea=jindo.$Class({$autoBind:true,$init:function(wel,htParam){this._initVar(wel,htParam);this._setWrapperTemplate();this._setEvent();if(htParam.sKeyword&&htParam.sKeyword!=""){this._oSearchHistory.add(htParam.sKeyword)}},_initVar:function(wel,htParam){this._wel=wel;this._sLocale=htParam.sLocale;this._sAutoCompleteUrl=htParam.sAutoCompleteUrl;this._htMessage=htParam.htMessage;this._sImgDomain=htParam.sImgDomain;this._welArea=this._wel.query("._searchArea");this._welKeyword=this._wel.query("._txtKeyword");this._welDesc=this._wel.query("._searchDesc");this._welSearchIcon=this._wel.query("._icoSearch");this._welDeleteButton=this._wel.query("._btnDelete");this._welCloseButton=this._wel.query("._btnClose");this._welSearchLayer=this._wel.query("._searchLayer");this._welHistoryDeleteButton=this._wel.query("._btnDeleteHistory");this._welAutoCompleteColseButton=this._wel.query("._searchLayer ._btnClose");this._nMaxListCount=10;this._waAutoCompleteKeyword=new jindo.$A();this._oSearchHistory=new SearchHistory();this._oWatchInput=new jindo.WatchInput(this._welKeyword)},_setWrapperTemplate:function(){this._htWTemplate={};this._htWTemplate.searchHistoryList=jindo.$Template(this._htTemplate()["searchHistoryList"]);this._htWTemplate.searchHistoryItem=jindo.$Template(this._htTemplate()["searchHistoryItem"]);this._htWTemplate.autoCompleteList=jindo.$Template(this._htTemplate()["autoCompleteList"]);this._htWTemplate.autoCompleteTitleItem=jindo.$Template(this._htTemplate()["autoCompleteTitleItem"]);this._htWTemplate.autoCompleteAuthorItem=jindo.$Template(this._htTemplate()["autoCompleteAuthorItem"]);this._htWTemplate.autoCompleteKeyword=jindo.$Template(this._htTemplate()["autoCompleteKeyword"])},_setEvent:function(){this._wel.attach({"click@._btnSearch":this._onClickSearchButton});this._welArea.attach({"click@._searchForm ._btnClose":this._onClickSearchCloseButton,"click@._searchForm ._btnDelete":this._onClickDeleteButton,"click@._searchDesc":this._onFocusSearchForm,"click@._searchLayer ._btnDeleteHistory":this._onClickDeleteHistoryButton,"click@._searchLayer ._btnClose":this._onClickAutoCompleteCloseButton,"keyup@._txtKeyword":this._onKeyupKeyword,"mouseover@._searchLayer":this._onMouseOverSearchLayer});this._oWatchInput.attach({focus:this._onFocusSearchForm,blur:this._onBlurSearchForm,change:this._onInputSearchKeyword})},_onClickSearchButton:function(oEvent){oEvent.stopDefault();this._welArea.show();this._welKeyword.$value().focus();var sKeyword=this._getSearchKeyword();if(sKeyword!=""){this._welDesc.hide()}},_onClickSearchCloseButton:function(oEvent){oEvent.stopDefault();this._welArea.hide()},_onClickDeleteButton:function(oEvent){oEvent.stopDefault();this._oWatchInput.setInputValue("");this._onInputSearchKeyword(oEvent);this._welKeyword.$value().focus()},_onFocusSearchForm:function(oCustomEvent){var sKeyword=this._getSearchKeyword();if(sKeyword==""){this._welDesc.hide();this._welKeyword.$value().focus();this._openSearchHistoryLayer()}},_onBlurSearchForm:function(oCustomEvent){if(this._getSearchKeyword()==""){var oAgent=jindo.$Agent();if(oAgent.navigator().ie&&oAgent.navigator().version<9){this._welDesc.show()}else{this._welDesc.appear()}var self=this;setTimeout(function(){self._closeSearchLayer()},300)}},_onInputSearchKeyword:function(oCustomEvent){var sKeyword=this._getSearchKeyword();if(sKeyword==""){this._welSearchIcon.show("inline-block");this._welDeleteButton.hide();this._closeSearchLayer();this._openSearchHistoryLayer()}else{this._welSearchIcon.hide();this._welDeleteButton.show("inline-block");this._autoComplete(sKeyword)}},_onClickDeleteHistoryButton:function(oEvent){oEvent.stopDefault();if(confirm(this._htMessage["confirm.search.delete_history"])){this._oSearchHistory.remove();this._closeSearchLayer()}},_onClickAutoCompleteCloseButton:function(oEvent){this._closeSearchLayer()},_onKeyupKeyword:function(oEvent){var oKey=oEvent.key();var welSelected=this._welSearchLayer.query("li.on");if(oKey.enter){if(welSelected){if(this._welSearchLayer.hasClass("_autoComplete")){var sUrl=welSelected.query("a._searchItem").attr("href");location.href=sUrl;return}else{if(this._welSearchLayer.hasClass("_searchHistory")){this._welKeyword.text(welSelected.text())}}}this._goSearch()}else{if(this._welSearchLayer.visible()&&oKey.up){if(!welSelected){var welLast=this._welSearchLayer.query("ul.creator li:nth-last-of-type(1)")||this._welSearchLayer.query("ul li:nth-last-of-type(1)");welLast.addClass("on")}else{welSelected.removeClass("on");var welNext=welSelected.prev();if(!welNext){welNext=this._welSearchLayer.query("ul li:nth-last-of-type(1)");if(!welNext||welSelected.parent().hasClass("creator")==false){return}else{welNext.addClass("on")}}else{welNext.addClass("on")}}}else{if(this._welSearchLayer.visible()&&oKey.down){if(!welSelected){this._welSearchLayer.query("li:first-of-type").addClass("on")}else{welSelected.removeClass("on");var welNext=welSelected.next();if(!welNext){welNext=this._welSearchLayer.query("ul.creator li:first-of-type");if(!welNext||welSelected.parent().hasClass("creator")){return}else{welNext.addClass("on")}}else{welNext.addClass("on")}}}}}},_onMouseOverSearchLayer:function(oEvent){var welSelected=this._welSearchLayer.query("li.on");if(welSelected){welSelected.removeClass("on")}},_openSearchHistoryLayer:function(){if(this._welSearchLayer.hasClass("_searchHistory")){return}var aKeyword=this._oSearchHistory.get();if(aKeyword&&aKeyword.length>0){this._welSearchLayer.addClass("_searchHistory");var aHtml=[];for(var i=0,n=Math.min(aKeyword.length,this._nMaxListCount);i<n;i++){aHtml.push(this._htWTemplate.searchHistoryItem.process({sKeyword:aKeyword[i]}))}var sHtml=this._htWTemplate.searchHistoryList.process({sSearchHistoryListHtml:aHtml.join("\n")});this._welSearchLayer.empty().html(sHtml).show()}},_closeSearchLayer:function(){this._welSearchLayer.empty().hide().removeClass("_searchHistory").removeClass("_autoComplete")},_autoComplete:function(sKeyword){sKeyword=sKeyword.replace(/#/g,"");this._waAutoCompleteKeyword.push(sKeyword.toLowerCase());var sUrl=jindo.$S(this._sAutoCompleteUrl).format(this._sLocale,sKeyword);new jindo.$Ajax(sUrl,{type:"jsonp",method:"get",timeout:1,onload:this._autoCompleteResponse,ontimeout:function(){},onerror:function(){}}).request()},_goSearch:function(sKeyword){sKeyword=sKeyword||this._getSearchKeyword();if(sKeyword&&sKeyword!=""){location.href="/search?keyword="+encodeURIComponent(sKeyword)}},_getSearchKeyword:function(){var sKeyword=this._welKeyword.text();return Util.stripHTML(Util.stripScripts(Util.trim(sKeyword)))},_autoCompleteResponse:function(oRes){var oJson=oRes.json();var sKeyword=oJson.query[0].replace(this._sLocale+"\x11","");var nKeywordIndex=this._waAutoCompleteKeyword.indexOf(sKeyword);if(nKeywordIndex==-1&&this._waAutoCompleteKeyword.length>0){return}for(var i=0;i<this._waAutoCompleteKeyword.indexOf(sKeyword);i++){this._waAutoCompleteKeyword.shift()}var aItems=oJson.items[0];if(!aItems||aItems.length==0){this._closeSearchLayer();return}var aTitleHtml=[];var aAuthorHtml=[];var oReg=new RegExp("("+sKeyword+")","ig");for(var i=0,n=aItems.length;i<n;i++){var aItem=aItems[i];var sType=aItem[1][0];if(sType=="TITLE"){var sKeywordHtml=aItem[0][0].replace(oReg,this._htWTemplate.autoCompleteKeyword.process({sKeyword:"$1"}));aTitleHtml.push(this._htWTemplate.autoCompleteTitleItem.process({sKeyword:sKeywordHtml,sTitle:aItem[0][0],nStarScoreAverage:aItem[2][0],nTitleNo:parseInt(aItem[3][0]),sMobileThumbnail:aItem[4][0],sIpadThumbnail:aItem[5][0],sWritingAuthorName:aItem[6][0],sPictureAuthorName:aItem[7][0],sRepresentGenre:aItem[8][0]}))}else{if(sType=="AUTHOR"){var sKeywordHtml=aItem[0][0].replace(oReg,this._htWTemplate.autoCompleteKeyword.process({sKeyword:"$1"}));var sTitleNames='<span class="subj2">'+aItem[3][0].replace("||",'</span> <em class="bar">|</em> <span class="subj2">')+"</span>";aAuthorHtml.push(this._htWTemplate.autoCompleteAuthorItem.process({sKeyword:sKeywordHtml,sAuthorName:aItem[0][0],nStarScoreAverage:aItem[2][0],sTitleNames:sTitleNames}))}}}var sHtml=this._htWTemplate.autoCompleteList.process({sTitleListHtml:aTitleHtml.join("\n"),sAuthorListHtml:aAuthorHtml.join("\n"),sKeyword:sKeyword});this._welSearchLayer.empty().html(sHtml).show().addClass("_autoComplete").removeClass("_searchHistory")},_htTemplate:function(){return{searchHistoryList:'<ul class="lst_history">	{=sSearchHistoryListHtml}</ul><div class="autocomplete_foot">	<a href="#" class="_btnDeleteHistory N=a:sch.rdel,g:'+sNclkLanguageCode+'">'+this._htMessage["message.search.clear"]+"</a></div>",searchHistoryItem:'<li><a href="/search?keyword={=sKeyword}" class="_searchItem _searchHistory NPI=a:rkw,g:'+sNclkLanguageCode+'">{=sKeyword}</a></li>',autoCompleteList:'{if sTitleListHtml != ""}<h3 class="title">'+this._htMessage["message.search.autocomplete.webtoon"]+'</h3><ul class="lst_autocomplete">	{=sTitleListHtml}</ul>{/if}{if sAuthorListHtml}<h3 class="title">'+this._htMessage["message.search.autocomplete.artist"]+'</h3><ul class="lst_autocomplete creator">	{=sAuthorListHtml}</ul>{/if}<div class="autocomplete_foot">	<a href="/search?keyword={=sKeyword}" class="NPI=a:viewall,g:'+sNclkLanguageCode+'">'+this._htMessage["message.search.autocomplete.view_all"]+'<span class="ico_arr9"></span></a><span class="right"><a href="#" class="_btnClose N=a:sch.aclose,g:'+sNclkLanguageCode+'">'+this._htMessage["message.search.autocomplete.close"]+"</a></span></div>",autoCompleteTitleItem:'<li>	<a href="/episodeList?titleNo={=nTitleNo}" class="_searchItem _autoComplete NPI=a:akw,g:'+sNclkLanguageCode+'">		<span class="pic"><img src="'+this._sImgDomain+'{=sMobileThumbnail}?type=a92" width="37" height="37" alt="{=sTitle}"></span>		<p class="subj">{=sKeyword}</p>		{set sAuthorName = sWritingAuthorName || sPictureAuthorName}{if sPictureAuthorName && sWritingAuthorName != sPictureAuthorName}{set sAuthorName = sAuthorName + "/" + sPictureAuthorName}{/if}		<p class="info"><span class="author">{=sAuthorName}</span> <em class="bar">|</em> {js Util.getGenreName(=sRepresentGenre)} <em class="bar">|</em> <span class="grade_area"><span class="ico_grade3">grade</span><em class="grade_num">{js Util.changeStarScoreFormat(=nStarScoreAverage)}</em></span></p>	</a></li>',autoCompleteAuthorItem:'<li>	<a href="/search?keyword={=sAuthorName}" class="_searchItem _autoComplete NPI=a:aartist,g:'+sNclkLanguageCode+'">		<p class="info"><span class="author">{=sKeyword}</span> <span class="subj2">{=sTitleNames}</span></p>	</a></li>',autoCompleteKeyword:"<strong>{=sKeyword}</strong>"}}});var SearchHistory=jindo.$Class({_LOCAL_STORAGE_NAME:"searchHistory",_MAX_COUNT:100,$init:function(){this._localStorage=new LocalStorageUtil()},add:function(sKeyword){var aSearchHistory=this.get();for(var i=0,l=aSearchHistory.length;i<l;i++){if(aSearchHistory[i]==sKeyword){aSearchHistory.splice(i,1);break}}var aNewSearchHistory=[sKeyword];aNewSearchHistory=aNewSearchHistory.concat(aSearchHistory);aNewSearchHistory.splice(this._MAX_COUNT,this._MAX_COUNT);this._localStorage.set(this._LOCAL_STORAGE_NAME,aNewSearchHistory);return aNewSearchHistory},get:function(){var noEscape=true;return this._localStorage.get(this._LOCAL_STORAGE_NAME,noEscape)||[]},remove:function(sKeyword){if(sKeyword==undefined||sKeyword==null){this._localStorage.remove(this._LOCAL_STORAGE_NAME);return}var aSearchHistory=this.get();for(var i=0,l=aSearchHistory.length;i<l;i++){if(aSearchHistory[i]==sKeyword){aSearchHistory.splice(i,1);break}}this._localStorage.set(this._LOCAL_STORAGE_NAME,aSearchHistory);return aSearchHistory}}).extend(jindo.UIComponent);
var Login=jindo.$Class({$autoBind:true,$init:function(htParam){htParam=htParam||{};if(htParam.sId){this._bGnb=true;this._wel=jindo.$Element(htParam.sId)}else{this._bGnb=false;this._wel=this._initLayer(htParam)}this._initIdLogin(htParam);this._setEvent();return this},_initLayer:function(htParam){var oTemplate=jindo.$Template("tplLoginLayer");var sHtml=oTemplate.process(htParam||{});var wel=jindo.$Element(sHtml);jindo.$Element(document.body).append(wel);return wel},_setEvent:function(){this._wel.attach({"click@._btnClose":this._onClickCloseButton,"click@._btnLoginSns":this._onClickLoginSnsButton})},_initIdLogin:function(htParam){var welUserId=this._wel.query("._userId");var welPassword=this._wel.query("#password");if(welUserId&&welPassword){this._userIdLogin=new IdLogin(this._wel,htParam)}},_onClickCloseButton:function(oEvent){oEvent.stopDefault();this._wel.hide();if(!this._bGnb){this._wel.leave();Util.hideDimmedLayer();jindo.$Element(document.body).css("overflow","")}},_onClickLoginSnsButton:function(oEvent){oEvent.stopDefault();var welButton=jindo.$Element(oEvent.element);var sLoginType=welButton.data("type");var oCookie=jindo.$Cookie();oCookie.set("isCookieUsable","true",0,document.domain);if(navigator.cookieEnabled==false||oCookie.get("isCookieUsable")!="true"){alert(Util.getErrorMessage["alert.error.invalid_input"]);return}var oAjax=new jindo.$Ajax("/member/api/snsLoginBegin",{type:"xhr",method:"post",onload:function(oRes){var oJson=oRes.json();if(oJson.success){var returnUrl=location.href;if(this._returnUrl!=undefined){returnUrl=this._returnUrl}oCookie.set("returnUrl",returnUrl,0,"webtoons.com");location.href=oJson.authUrl}},timeout:9,ontimeout:function(){alert(Util.getErrorMessage["alert.error.unknown"])},onerror:function(){alert(Util.getErrorMessage["alert.error.unknown"])},async:false});oAjax._returnUrl=this._returnUrl;oAjax.request({snsCd:sLoginType})},show:function(returnUrl){if(this._bGnb){return}this._returnUrl=returnUrl;this._wel.show();Util.showDimmedLayer();this._wel.css("top",jindo.$Document().scrollPosition().top+"px");var oAgent=jindo.$Agent();if(oAgent.navigator().ie&&oAgent.navigator().version>8){jindo.$Element(document.body).css("overflow","hidden")}}});var IdLogin=jindo.$Class({$autoBind:true,$init:function(welLoginLayer,htParam){this._initVars(welLoginLayer,htParam);this._initEvents()},_initVars:function(welLoginLayer,htParam){if(htParam&&htParam.message){this._message=htParam.message}else{this._message={};this._message.systemerror="A system error occurred.\nPlease try again in a moment."}this._rsa=new RSA();this._welUserIdForm=welLoginLayer.query("#formLogin");this._welLoginType=welLoginLayer.query("#loginType");this._loginType=htParam.loginType||this._welLoginType.text();this._welPhoneNumberIdArea=welLoginLayer.query("#phoneNumberIdArea");this._welPhoneNumberIdInput=this._welPhoneNumberIdArea&&this._welPhoneNumberIdArea.query("._userId");this._welPhoneNumberIdPlaceHolder=this._welPhoneNumberIdArea&&this._welPhoneNumberIdArea.query("._placeholder");this._welEmailIdArea=welLoginLayer.query("#emailIdArea");this._welEmailIdInput=this._welEmailIdArea&&this._welEmailIdArea.query("._userId");this._welEmailIdPlaceHolder=this._welEmailIdArea&&this._welEmailIdArea.query("._placeholder");if(this._loginType==="PHONE_NUMBER"){this._welUserIdArea=this._welPhoneNumberIdArea;this._welUserIdInput=this._welPhoneNumberIdInput;this._welUserIdPlaceHolder=this._welPhoneNumberIdPlaceHolder}else{this._welUserIdArea=this._welEmailIdArea;this._welUserIdInput=this._welEmailIdInput;this._welUserIdPlaceHolder=this._welEmailIdPlaceHolder}this._welPasswordArea=welLoginLayer.query("#passwordArea");this._welPasswordInput=welLoginLayer.query("#password");this._welPasswordPlaceHolder=welLoginLayer.query("#placeholderPassword");this._welCaptchaArea=welLoginLayer.query("#captchaArea");this._welCaptchaInput=welLoginLayer.query("#captchaValue");this._welCaptchaPlaceHolder=welLoginLayer.query("#placeholderCaptcha");this._welCaptchaReload=welLoginLayer.query("#captchaReload");this._elCaptchaImage=jindo.$$.getSingle("#captchaImage");this._welLoginButton=welLoginLayer.query("#btnLogIn");this._welEncNm=welLoginLayer.query("#encnm");this._welEncPw=welLoginLayer.query("#encpw");this._welToggleLoginMode=welLoginLayer.query("#toggleLoginMode");this._welSignUpButton=welLoginLayer.query("#btnSignUp");this._welForgotPasswordButton=welLoginLayer.query("#btnForgotPassword");if(htParam.returnUrl){var welReturnUrl=jindo.$Element("returnUrl");welReturnUrl&&welReturnUrl.text(htParam.returnUrl)}},_initEvents:function(){this._welEmailIdArea&&new WatchInput(this._welEmailIdInput.$value()).on("change",$.proxy(this._onInputUserId,this));this._welPhoneNumberIdArea&&new WatchInput(this._welPhoneNumberIdInput.$value()).on("change",$.proxy(this._onInputUserId,this));new WatchInput(this._welPasswordInput.$value()).on("change",$.proxy(this._onInputPassword,this));this._welEmailIdArea&&jindo.$Fn(this._onBlurUserId).attach(this._welEmailIdInput,"blur");this._welPhoneNumberIdArea&&jindo.$Fn(this._onBlurUserId).attach(this._welPhoneNumberIdInput,"blur");var fnOnLogin=jindo.$Fn(this._submit);fnOnLogin.attach(this._welLoginButton,"click");fnOnLogin.attach(this._welUserIdForm,"submit");this._welToggleLoginMode&&jindo.$Fn(this._toggleNClicks).attach(this._welToggleLoginMode,"click");this._welToggleLoginMode&&jindo.$Fn(this._toggleLoginMode).attach(this._welToggleLoginMode,"click");if(this._welCaptchaInput){jindo.$Fn(this._onInputEnterKey).attach(this._welCaptchaInput,"keyup");jindo.$Fn(this._onCaptchaReload).attach(this._welCaptchaReload,"click");new WatchInput(this._welCaptchaInput.$value()).on("change",$.proxy(this._onInputCaptcha,this))}else{jindo.$Fn(this._onInputEnterKey).attach(this._welPasswordInput,"keyup")}jindo.$Fn(this._focusIdInput).attach(this._welUserIdPlaceHolder,"click");jindo.$Fn(this._focusPasswordInput).attach(this._welPasswordPlaceHolder,"click");this._initInputFocus()},_focusIdInput:function(){this._welUserIdInput.$value().focus()},_focusPasswordInput:function(){this._welPasswordInput.$value().focus()},_onInputUserId:function(){this._togglePlaceholder(this._welUserIdInput,this._welUserIdPlaceHolder);this._welUserIdArea.removeClass("warning")},_onBlurUserId:function(){var userId=this._welUserIdInput.text();if(userId){if((this._loginType==="EMAIL"&&!Util.isEmail(userId))||(this._loginType==="PHONE_NUMBER"&&!Util.isPhoneNumber(userId))){this._welUserIdArea.addClass("warning")}}else{this._welUserIdArea.removeClass("warning")}},_onInputPassword:function(){this._togglePlaceholder(this._welPasswordInput,this._welPasswordPlaceHolder);this._welPasswordArea.removeClass("warning");this._rsa.getKeys()},_onInputCaptcha:function(){this._togglePlaceholder(this._welCaptchaInput,this._welCaptchaPlaceHolder);this._welCaptchaArea.removeClass("warning")},_togglePlaceholder:function(input,placeholder){if(input.text()){placeholder.hide()}else{placeholder.show()}},_onInputEnterKey:function(e){var ENTER_KEY_CODE=13;if(e.$value().keyCode==ENTER_KEY_CODE){this._submit(null)}},_onCaptchaReload:function(oEvent){oEvent&&oEvent.stopDefault();this._elCaptchaImage.src=this._elCaptchaImage.src.split("&t=")[0]+"&t="+new Date().getTime()},_initInputFocus:function(){this._onInputUserId();if("/member/login/doLoginById"===location.pathname){if(this._welUserIdInput.text()){this._welPasswordInput.$value().focus()}else{this._welUserIdInput.$value().focus()}}},_showInputError:function(welError,welInput){welError.addClass("warning");welInput.$value().focus()},_submit:function(oEvent){oEvent&&oEvent.stopDefault();if(this._checkInput()==false){return false}var userId=Util.trim(this._welUserIdInput.text());var password=this._welPasswordInput.text();var encpw=this._rsa.encrypt(userId,password);if(!encpw){alert(this._message.systemerror);return false}var encnm=this._rsa.getKeyName();this._welEncNm.text(encnm);this._welEncPw.text(encpw);this._welUserIdInput.text("");this._welPasswordInput.text("");this._welUserIdForm.$value().submit()},_checkInput:function(){var userId=this._welUserIdInput.text();if(!userId||(this._loginType==="EMAIL"&&!Util.isEmail(userId))||(this._loginType==="PHONE_NUMBER"&&!Util.isPhoneNumber(userId))){this._showInputError(this._welUserIdArea,this._welUserIdInput);return false}var password=this._welPasswordInput.text();if(!password){this._showInputError(this._welPasswordArea,this._welPasswordInput);return false}if(password.length<6||password.length>16){this._showInputError(this._welPasswordArea,this._welPasswordInput);return false}if(this._welCaptchaInput&&!this._welCaptchaInput.text()){this._showInputError(this._welCaptchaArea,this._welCaptchaInput);return false}return true},_toggleLoginMode:function(oEvent){oEvent.stop();var welToggleButtonText=this._welToggleLoginMode.parent().query("._toggleModeText_"+this._loginType);if(welToggleButtonText){this._welToggleLoginMode.text(welToggleButtonText.text())}this._welUserIdArea.hide();if(this._loginType=="PHONE_NUMBER"){this._loginType="EMAIL";this._welUserIdArea=this._welEmailIdArea;this._welUserIdInput=this._welEmailIdInput;this._welUserIdPlaceHolder=this._welEmailIdPlaceHolder}else{this._loginType="PHONE_NUMBER";this._welUserIdArea=this._welPhoneNumberIdArea;this._welUserIdInput=this._welPhoneNumberIdInput;this._welUserIdPlaceHolder=this._welPhoneNumberIdPlaceHolder}this._welLoginType.text(this._loginType);this._welSignUpButton.attr("href","/member/join?loginType="+this._loginType);this._welForgotPasswordButton.attr("href","/member/password/forgot?loginType="+this._loginType);this._welUserIdArea.show()},_toggleNClicks:function(oEvent){oEvent.stop();var removeSignUpNclicksCode="NPI=a:signup";var removeForgotNclicksCode="NPI=a:resetpass";var addSignUpNclicksCode="NPI=a:pnsignup";var addForgotNclicksCode="NPI=a:pnresetpass";if(this._loginType=="PHONE_NUMBER"){removeSignUpNclicksCode="NPI=a:pnsignup";removeForgotNclicksCode="NPI=a:pnresetpass";addSignUpNclicksCode="NPI=a:signup";addForgotNclicksCode="NPI=a:resetpass"}this._welSignUpButton.removeClass(removeSignUpNclicksCode);this._welSignUpButton.addClass(addSignUpNclicksCode);this._welForgotPasswordButton.removeClass(removeForgotNclicksCode);this._welForgotPasswordButton.addClass(addForgotNclicksCode)}});
var RSA=jindo.$Class({$autoBind:true,$init:function(htOption){this._initVar(htOption)},_initVar:function(htOption){this._curtimecheck=0;this._keyName=null;this._nvalue=null;this._evalue=null;this._sessionKey=null},_getKeys:function(async){if(this._curtimecheck==0){this._getKeyByRuntimeInclude(async)}else{if(new Date().getTime()-this._curtimecheck>60000){this._getKeyByRuntimeInclude(async)}}},getKeys:function(){this._getKeys(true)},getKeysSync:function(){this._getKeys(false)},encrypt:function(id,pw){if(!this._keyName){this.getKeys();return false}var rsa=new RSAKey();rsa.setPublic(this._evalue,this._nvalue);var encpw=rsa.encrypt(this._getLenChar(this._sessionKey)+this._sessionKey+this._getLenChar(id)+id+this._getLenChar(pw)+pw);return encpw},getKeyName:function(){return this._keyName},_getKeyByRuntimeInclude:function(async){this._curtimecheck=new Date().getTime();jindo.$Ajax("/member/login/rsa/getKeys",{type:"xhr",method:"get",async:async,onload:this._onloadRsaKey}).request()},_onloadRsaKey:function(oRes){var oJson=oRes.json();if(oJson){this._keyName=oJson.keyName;this._nvalue=oJson.nvalue;this._evalue=oJson.evalue;this._sessionKey=oJson.sessionKey}},_getLenChar:function(texts){texts=texts+"";return String.fromCharCode(texts.length)}});var dbits;var canary=244837814094590;var j_lm=((canary&16777215)==15715070);function BigInteger(a,b,c){if(a!=null){if("number"==typeof a){this.fromNumber(a,b,c)}else{if(b==null&&"string"!=typeof a){this.fromString(a,256)}else{this.fromString(a,b)}}}}function nbi(){return new BigInteger(null)}function am1(i,x,w,j,c,n){while(--n>=0){var v=x*this[i++]+w[j]+c;c=Math.floor(v/67108864);w[j++]=v&67108863}return c}function am2(i,x,w,j,c,n){var xl=x&32767,xh=x>>15;while(--n>=0){var l=this[i]&32767;var h=this[i++]>>15;var m=xh*l+h*xl;l=xl*l+((m&32767)<<15)+w[j]+(c&1073741823);c=(l>>>30)+(m>>>15)+xh*h+(c>>>30);w[j++]=l&1073741823}return c}function am3(i,x,w,j,c,n){var xl=x&16383,xh=x>>14;while(--n>=0){var l=this[i]&16383;var h=this[i++]>>14;var m=xh*l+h*xl;l=xl*l+((m&16383)<<14)+w[j]+c;c=(l>>28)+(m>>14)+xh*h;w[j++]=l&268435455}return c}if(j_lm&&(navigator.appName=="Microsoft Internet Explorer")){BigInteger.prototype.am=am2;dbits=30}else{if(j_lm&&(navigator.appName!="Netscape")){BigInteger.prototype.am=am1;dbits=26}else{BigInteger.prototype.am=am3;dbits=28}}BigInteger.prototype.DB=dbits;BigInteger.prototype.DM=((1<<dbits)-1);BigInteger.prototype.DV=(1<<dbits);var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP);BigInteger.prototype.F1=BI_FP-dbits;BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz";var BI_RC=new Array();var rr,vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv){BI_RC[rr++]=vv}rr="a".charCodeAt(0);for(vv=10;vv<36;++vv){BI_RC[rr++]=vv}rr="A".charCodeAt(0);for(vv=10;vv<36;++vv){BI_RC[rr++]=vv}function int2char(n){return BI_RM.charAt(n)}function intAt(s,i){var c=BI_RC[s.charCodeAt(i)];return(c==null)?-1:c}function bnpCopyTo(r){for(var i=this.t-1;i>=0;--i){r[i]=this[i]}r.t=this.t;r.s=this.s}function bnpFromInt(x){this.t=1;this.s=(x<0)?-1:0;if(x>0){this[0]=x}else{if(x<-1){this[0]=x+DV}else{this.t=0}}}function nbv(i){var r=nbi();r.fromInt(i);return r}function bnpFromString(s,b){var k;if(b==16){k=4}else{if(b==8){k=3}else{if(b==256){k=8}else{if(b==2){k=1}else{if(b==32){k=5}else{if(b==4){k=2}else{this.fromRadix(s,b);return}}}}}}this.t=0;this.s=0;var i=s.length,mi=false,sh=0;while(--i>=0){var x=(k==8)?s[i]&255:intAt(s,i);if(x<0){if(s.charAt(i)=="-"){mi=true}continue}mi=false;if(sh==0){this[this.t++]=x}else{if(sh+k>this.DB){this[this.t-1]|=(x&((1<<(this.DB-sh))-1))<<sh;this[this.t++]=(x>>(this.DB-sh))}else{this[this.t-1]|=x<<sh}}sh+=k;if(sh>=this.DB){sh-=this.DB}}if(k==8&&(s[0]&128)!=0){this.s=-1;if(sh>0){this[this.t-1]|=((1<<(this.DB-sh))-1)<<sh}}this.clamp();if(mi){BigInteger.ZERO.subTo(this,this)}}function bnpClamp(){var c=this.s&this.DM;while(this.t>0&&this[this.t-1]==c){--this.t}}function bnToString(b){if(this.s<0){return"-"+this.negate().toString(b)}var k;if(b==16){k=4}else{if(b==8){k=3}else{if(b==2){k=1}else{if(b==32){k=5}else{if(b==4){k=2}else{return this.toRadix(b)}}}}}var km=(1<<k)-1,d,m=false,r="",i=this.t;var p=this.DB-(i*this.DB)%k;if(i-->0){if(p<this.DB&&(d=this[i]>>p)>0){m=true;r=int2char(d)}while(i>=0){if(p<k){d=(this[i]&((1<<p)-1))<<(k-p);d|=this[--i]>>(p+=this.DB-k)}else{d=(this[i]>>(p-=k))&km;if(p<=0){p+=this.DB;--i}}if(d>0){m=true}if(m){r+=int2char(d)}}}return m?r:"0"}function bnNegate(){var r=nbi();BigInteger.ZERO.subTo(this,r);return r}function bnAbs(){return(this.s<0)?this.negate():this}function bnCompareTo(a){var r=this.s-a.s;if(r!=0){return r}var i=this.t;r=i-a.t;if(r!=0){return r}while(--i>=0){if((r=this[i]-a[i])!=0){return r}}return 0}function nbits(x){var r=1,t;if((t=x>>>16)!=0){x=t;r+=16}if((t=x>>8)!=0){x=t;r+=8}if((t=x>>4)!=0){x=t;r+=4}if((t=x>>2)!=0){x=t;r+=2}if((t=x>>1)!=0){x=t;r+=1}return r}function bnBitLength(){if(this.t<=0){return 0}return this.DB*(this.t-1)+nbits(this[this.t-1]^(this.s&this.DM))}function bnpDLShiftTo(n,r){var i;for(i=this.t-1;i>=0;--i){r[i+n]=this[i]}for(i=n-1;i>=0;--i){r[i]=0}r.t=this.t+n;r.s=this.s}function bnpDRShiftTo(n,r){for(var i=n;i<this.t;++i){r[i-n]=this[i]}r.t=Math.max(this.t-n,0);r.s=this.s}function bnpLShiftTo(n,r){var bs=n%this.DB;var cbs=this.DB-bs;var bm=(1<<cbs)-1;var ds=Math.floor(n/this.DB),c=(this.s<<bs)&this.DM,i;for(i=this.t-1;i>=0;--i){r[i+ds+1]=(this[i]>>cbs)|c;c=(this[i]&bm)<<bs}for(i=ds-1;i>=0;--i){r[i]=0}r[ds]=c;r.t=this.t+ds+1;r.s=this.s;r.clamp()}function bnpRShiftTo(n,r){r.s=this.s;var ds=Math.floor(n/this.DB);if(ds>=this.t){r.t=0;return}var bs=n%this.DB;var cbs=this.DB-bs;var bm=(1<<bs)-1;r[0]=this[ds]>>bs;for(var i=ds+1;i<this.t;++i){r[i-ds-1]|=(this[i]&bm)<<cbs;r[i-ds]=this[i]>>bs}if(bs>0){r[this.t-ds-1]|=(this.s&bm)<<cbs}r.t=this.t-ds;r.clamp()}function bnpSubTo(a,r){var i=0,c=0,m=Math.min(a.t,this.t);while(i<m){c+=this[i]-a[i];r[i++]=c&this.DM;c>>=this.DB}if(a.t<this.t){c-=a.s;while(i<this.t){c+=this[i];r[i++]=c&this.DM;c>>=this.DB}c+=this.s}else{c+=this.s;while(i<a.t){c-=a[i];r[i++]=c&this.DM;c>>=this.DB}c-=a.s}r.s=(c<0)?-1:0;if(c<-1){r[i++]=this.DV+c}else{if(c>0){r[i++]=c}}r.t=i;r.clamp()}function bnpMultiplyTo(a,r){var x=this.abs(),y=a.abs();var i=x.t;r.t=i+y.t;while(--i>=0){r[i]=0}for(i=0;i<y.t;++i){r[i+x.t]=x.am(0,y[i],r,i,0,x.t)}r.s=0;r.clamp();if(this.s!=a.s){BigInteger.ZERO.subTo(r,r)}}function bnpSquareTo(r){var x=this.abs();var i=r.t=2*x.t;while(--i>=0){r[i]=0}for(i=0;i<x.t-1;++i){var c=x.am(i,x[i],r,2*i,0,1);if((r[i+x.t]+=x.am(i+1,2*x[i],r,2*i+1,c,x.t-i-1))>=x.DV){r[i+x.t]-=x.DV;r[i+x.t+1]=1}}if(r.t>0){r[r.t-1]+=x.am(i,x[i],r,2*i,0,1)}r.s=0;r.clamp()}function bnpDivRemTo(m,q,r){var pm=m.abs();if(pm.t<=0){return}var pt=this.abs();if(pt.t<pm.t){if(q!=null){q.fromInt(0)}if(r!=null){this.copyTo(r)}return}if(r==null){r=nbi()}var y=nbi(),ts=this.s,ms=m.s;var nsh=this.DB-nbits(pm[pm.t-1]);if(nsh>0){pm.lShiftTo(nsh,y);pt.lShiftTo(nsh,r)}else{pm.copyTo(y);pt.copyTo(r)}var ys=y.t;var y0=y[ys-1];if(y0==0){return}var yt=y0*(1<<this.F1)+((ys>1)?y[ys-2]>>this.F2:0);var d1=this.FV/yt,d2=(1<<this.F1)/yt,e=1<<this.F2;var i=r.t,j=i-ys,t=(q==null)?nbi():q;y.dlShiftTo(j,t);if(r.compareTo(t)>=0){r[r.t++]=1;r.subTo(t,r)}BigInteger.ONE.dlShiftTo(ys,t);t.subTo(y,y);while(y.t<ys){y[y.t++]=0}while(--j>=0){var qd=(r[--i]==y0)?this.DM:Math.floor(r[i]*d1+(r[i-1]+e)*d2);if((r[i]+=y.am(0,qd,r,j,0,ys))<qd){y.dlShiftTo(j,t);r.subTo(t,r);while(r[i]<--qd){r.subTo(t,r)}}}if(q!=null){r.drShiftTo(ys,q);if(ts!=ms){BigInteger.ZERO.subTo(q,q)}}r.t=ys;r.clamp();if(nsh>0){r.rShiftTo(nsh,r)}if(ts<0){BigInteger.ZERO.subTo(r,r)}}function bnMod(a){var r=nbi();this.abs().divRemTo(a,null,r);if(this.s<0&&r.compareTo(BigInteger.ZERO)>0){a.subTo(r,r)}return r}function Classic(m){this.m=m}function cConvert(x){if(x.s<0||x.compareTo(this.m)>=0){return x.mod(this.m)}else{return x}}function cRevert(x){return x}function cReduce(x){x.divRemTo(this.m,null,x)}function cMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r)}function cSqrTo(x,r){x.squareTo(r);this.reduce(r)}Classic.prototype.convert=cConvert;Classic.prototype.revert=cRevert;Classic.prototype.reduce=cReduce;Classic.prototype.mulTo=cMulTo;Classic.prototype.sqrTo=cSqrTo;function bnpInvDigit(){if(this.t<1){return 0}var x=this[0];if((x&1)==0){return 0}var y=x&3;y=(y*(2-(x&15)*y))&15;y=(y*(2-(x&255)*y))&255;y=(y*(2-(((x&65535)*y)&65535)))&65535;y=(y*(2-x*y%this.DV))%this.DV;return(y>0)?this.DV-y:-y}function Montgomery(m){this.m=m;this.mp=m.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<(m.DB-15))-1;this.mt2=2*m.t}function montConvert(x){var r=nbi();x.abs().dlShiftTo(this.m.t,r);r.divRemTo(this.m,null,r);if(x.s<0&&r.compareTo(BigInteger.ZERO)>0){this.m.subTo(r,r)}return r}function montRevert(x){var r=nbi();x.copyTo(r);this.reduce(r);return r}function montReduce(x){while(x.t<=this.mt2){x[x.t++]=0}for(var i=0;i<this.m.t;++i){var j=x[i]&32767;var u0=(j*this.mpl+(((j*this.mph+(x[i]>>15)*this.mpl)&this.um)<<15))&x.DM;j=i+this.m.t;x[j]+=this.m.am(0,u0,x,i,0,this.m.t);while(x[j]>=x.DV){x[j]-=x.DV;x[++j]++}}x.clamp();x.drShiftTo(this.m.t,x);if(x.compareTo(this.m)>=0){x.subTo(this.m,x)}}function montSqrTo(x,r){x.squareTo(r);this.reduce(r)}function montMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r)}Montgomery.prototype.convert=montConvert;Montgomery.prototype.revert=montRevert;Montgomery.prototype.reduce=montReduce;Montgomery.prototype.mulTo=montMulTo;Montgomery.prototype.sqrTo=montSqrTo;function bnpIsEven(){return((this.t>0)?(this[0]&1):this.s)==0}function bnpExp(e,z){if(e>4294967295||e<1){return BigInteger.ONE}var r=nbi(),r2=nbi(),g=z.convert(this),i=nbits(e)-1;g.copyTo(r);while(--i>=0){z.sqrTo(r,r2);if((e&(1<<i))>0){z.mulTo(r2,g,r)}else{var t=r;r=r2;r2=t}}return z.revert(r)}function bnModPowInt(e,m){var z;if(e<256||m.isEven()){z=new Classic(m)}else{z=new Montgomery(m)}return this.exp(e,z)}BigInteger.prototype.copyTo=bnpCopyTo;BigInteger.prototype.fromInt=bnpFromInt;BigInteger.prototype.fromString=bnpFromString;BigInteger.prototype.clamp=bnpClamp;BigInteger.prototype.dlShiftTo=bnpDLShiftTo;BigInteger.prototype.drShiftTo=bnpDRShiftTo;BigInteger.prototype.lShiftTo=bnpLShiftTo;BigInteger.prototype.rShiftTo=bnpRShiftTo;BigInteger.prototype.subTo=bnpSubTo;BigInteger.prototype.multiplyTo=bnpMultiplyTo;BigInteger.prototype.squareTo=bnpSquareTo;BigInteger.prototype.divRemTo=bnpDivRemTo;BigInteger.prototype.invDigit=bnpInvDigit;BigInteger.prototype.isEven=bnpIsEven;BigInteger.prototype.exp=bnpExp;BigInteger.prototype.toString=bnToString;BigInteger.prototype.negate=bnNegate;BigInteger.prototype.abs=bnAbs;BigInteger.prototype.compareTo=bnCompareTo;BigInteger.prototype.bitLength=bnBitLength;BigInteger.prototype.mod=bnMod;BigInteger.prototype.modPowInt=bnModPowInt;BigInteger.ZERO=nbv(0);BigInteger.ONE=nbv(1);function Arcfour(){this.i=0;this.j=0;this.S=new Array()}function ARC4init(key){var i,j,t;for(i=0;i<256;++i){this.S[i]=i}j=0;for(i=0;i<256;++i){j=(j+this.S[i]+key[i%key.length])&255;t=this.S[i];this.S[i]=this.S[j];this.S[j]=t}this.i=0;this.j=0}function ARC4next(){var t;this.i=(this.i+1)&255;this.j=(this.j+this.S[this.i])&255;t=this.S[this.i];this.S[this.i]=this.S[this.j];this.S[this.j]=t;return this.S[(t+this.S[this.i])&255]}Arcfour.prototype.init=ARC4init;Arcfour.prototype.next=ARC4next;function prng_newstate(){return new Arcfour()}var rng_psize=256;var rng_state;var rng_pool;var rng_pptr;function rng_seed_int(x){rng_pool[rng_pptr++]^=x&255;rng_pool[rng_pptr++]^=(x>>8)&255;rng_pool[rng_pptr++]^=(x>>16)&255;rng_pool[rng_pptr++]^=(x>>24)&255;if(rng_pptr>=rng_psize){rng_pptr-=rng_psize}}function rng_seed_time(){rng_seed_int(new Date().getTime())}if(rng_pool==null){rng_pool=new Array();rng_pptr=0;var t;if(navigator.appName=="Netscape"&&navigator.appVersion<"5"&&window.crypto){var z=window.crypto.random(32);for(t=0;t<z.length;++t){rng_pool[rng_pptr++]=z.charCodeAt(t)&255}}while(rng_pptr<rng_psize){t=Math.floor(65536*Math.random());rng_pool[rng_pptr++]=t>>>8;rng_pool[rng_pptr++]=t&255}rng_pptr=0;rng_seed_time()}function rng_get_byte(){if(rng_state==null){rng_seed_time();rng_state=prng_newstate();rng_state.init(rng_pool);for(rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr){rng_pool[rng_pptr]=0}rng_pptr=0}return rng_state.next()}function rng_get_bytes(ba){var i;for(i=0;i<ba.length;++i){ba[i]=rng_get_byte()}}function SecureRandom(){}SecureRandom.prototype.nextBytes=rng_get_bytes;function parseBigInt(str,r){return new BigInteger(str,r)}function linebrk(s,n){var ret="";var i=0;while(i+n<s.length){ret+=s.substring(i,i+n)+"\n";i+=n}return ret+s.substring(i,s.length)}function byte2Hex(b){if(b<16){return"0"+b.toString(16)}else{return b.toString(16)}}function pkcs1pad2(s,n){if(n<s.length+11){alert("암호화가 정상적으로 이루어지지 않았습니다.");return null}var ba=new Array();var i=s.length-1;while(i>=0&&n>0){ba[--n]=s.charCodeAt(i--)}ba[--n]=0;var rng=new SecureRandom();var x=new Array();while(n>2){x[0]=0;while(x[0]==0){rng.nextBytes(x)}ba[--n]=x[0]}ba[--n]=2;ba[--n]=0;return new BigInteger(ba)}function RSAKey(){this.n=null;this.e=0;this.d=null;this.p=null;this.q=null;this.dmp1=null;this.dmq1=null;this.coeff=null}function RSASetPublic(N,E){if(N!=null&&E!=null&&N.length>0&&E.length>0){this.n=parseBigInt(N,16);this.e=parseInt(E,16)}else{alert("잘못된 보안키입니다.")}}function RSADoPublic(x){return x.modPowInt(this.e,this.n)}function RSAEncrypt(text){var m=pkcs1pad2(text,(this.n.bitLength()+7)>>3);if(m==null){return null}var c=this.doPublic(m);if(c==null){return null}var h=c.toString(16);var gap=(((this.n.bitLength()+7)>>3)<<1)-h.length;while(gap-->0){h="0"+h}return h}RSAKey.prototype.doPublic=RSADoPublic;RSAKey.prototype.setPublic=RSASetPublic;RSAKey.prototype.encrypt=RSAEncrypt;var b64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var b64pad="=";function hex2b64(h){var i;var c;var ret="";for(i=0;i+3<=h.length;i+=3){c=parseInt(h.substring(i,i+3),16);ret+=b64map.charAt(c>>6)+b64map.charAt(c&63)}if(i+1==h.length){c=parseInt(h.substring(i,i+1),16);ret+=b64map.charAt(c<<2)}else{if(i+2==h.length){c=parseInt(h.substring(i,i+2),16);ret+=b64map.charAt(c>>2)+b64map.charAt((c&3)<<4)}}while((ret.length&3)>0){ret+=b64pad}return ret}function b64tohex(s){var ret="";var i;var k=0;var slop;for(i=0;i<s.length;++i){if(s.charAt(i)==b64pad){break}v=b64map.indexOf(s.charAt(i));if(v<0){continue}if(k==0){ret+=int2char(v>>2);slop=v&3;k=1}else{if(k==1){ret+=int2char((slop<<2)|(v>>4));slop=v&15;k=2}else{if(k==2){ret+=int2char(slop);ret+=int2char(v>>2);slop=v&3;k=3}else{ret+=int2char((slop<<2)|(v>>4));ret+=int2char(v&15);k=0}}}}if(k==1){ret+=int2char(slop<<2)}return ret}function b64toBA(s){var h=b64tohex(s);var i;var a=new Array();for(i=0;2*i<h.length;++i){a[i]=parseInt(h.substring(2*i,2*i+2),16)}return a};
var Gnb=jindo.$Class({$autoBind:true,$init:function(htOption){this._sId=htOption.sId;this._wel=jindo.$Element(this._sId);if(!this._wel){return}this._oLoginArea=new LoginArea(this._wel,htOption.message);this._oSearchArea=new SearchArea(this._wel,htOption.htSearchParam)}});var LoginArea=jindo.$Class({$autoBind:true,$init:function(wel,message){this._message=message;this._wel=wel;this._oUserInfo=Util.getUserInfo();if(this._oUserInfo!=null&&this._oUserInfo.isLogin==true){if(window.location.href.indexOf("noLogin=true")<0&&this._oUserInfo.needLogout==true){location.href="/member/logout?returnUrl="+encodeURIComponent(location.href);return}if(this._oUserInfo.isSignup==true){this._setupLogedIn(this._oUserInfo)}else{if(window.location.href.indexOf("noLogin=true")<0){new SignUp(this._setupLogedIn,this._oUserInfo)}else{jindo.$Element("btnLogin").hide()}}}else{this._oLogin=new Login({sId:"layerMy",message:{systemerror:this._message.sSystemErrorMessage}})}this._wel.attach({"mouseover@#btnLoginInfo":this._openLoginLayer,"click@#btnLoginInfo":this._goMyWebtoonPage,"click@#btnLogin":this._openLoginLayer,"click@._btnLogout":this._logout,"click@#btnPublish":this._checkLoginForPublish});var oMyLayerManager=new LayerManager("#layerMy",{checkEventName:"mouseover"}).on("hide",function(oCustomEvent){jindo.$Element("layerMy").removeClass("on")}).on("show",function(oCustomEvent){jindo.$Element("layerMy").addClass("on")});oMyLayerManager.link(jindo.$("btnLoginInfo")).link(jindo.$("btnLogin")).link(jindo.$("layerMy"))},_setupLogedIn:function(oUserInfo){this._snsCode=oUserInfo.snsCode;oUserInfo.snsName=oUserInfo.snsCode.toLowerCase();var oTemplate=jindo.$Template('<em class="ico_user"></em>{=nickname}');jindo.$Element("btnLoginInfo").html(oTemplate.process(oUserInfo)).show("inline-block").attr("title",oUserInfo.nickname);jindo.$Element("btnLogin").hide();var tplMyLayer=jindo.$Template("tplMyLayer");jindo.$Element("layerMy").empty().html(tplMyLayer.process(oUserInfo)).addClass("favorites")},_openMyLayer:function(oEvent){jindo.$Element("layerMy").addClass("on").show()},_openLoginLayer:function(oEvent){oEvent.stopDefault();jindo.$Element("layerMy").addClass("on").show("inline-block")},_goMyWebtoonPage:function(oEvent){oEvent.stopDefault();location.href="/favorite"},_logout:function(oEvent){oEvent.stopDefault();if(confirm(this._message.sLogoutMessage)==true){location.href="/member/logout?returnUrl="+encodeURIComponent(location.href)}return false},_checkLoginForPublish:function(oEvent){if(!Util.isLogedIn()){oEvent.stopDefault();Util.goLogin("http://"+window.location.hostname+"/challenge/publish")}},});var SignUp=jindo.$Class({$autoBind:true,$init:function(setupLogedInFunction,oUserInfo){this._setupLogedIn=setupLogedInFunction;this._oUserInfo=oUserInfo;this._showLayer()},_showLayer:function(){var tplSignupLayer=jindo.$Template("tplSignup");var newDiv=document.createElement("div");newDiv.setAttribute("id","signupLayer");newDiv.innerHTML=tplSignupLayer.process();document.body.appendChild(newDiv);jindo.$Fn(function(){jindo.$Element(jindo.$$.getSingle(".ico_chkbox2")).toggleClass("on")}).attach(jindo.$$(".input_chk",newDiv),"click");jindo.$Fn(this._signup).attach(jindo.$$("._signup",newDiv),"click")},_signup:function(oEvent){oEvent.stopDefault();if(!jindo.$("signup_chk_term").checked){jindo.$Element("_pleaseAgree").show();return}jindo.$Ajax("/member/signupProcess",{type:"xhr",method:"get",onload:this._onloadSignup}).request()},_onloadSignup:function(oRes){window.location.reload()}});
var RecentBar=jindo.$Class({$autoBind:true,$init:function(htOption){this._initVar(htOption)},_initVar:function(htOption){this._htOption=htOption;this._wel=jindo.$Element(this._htTemplate()["recentBar"]);jindo.$Element(document.body).append(this._wel);this._welRecentList=this._wel.query("._recentList")},_setEvent:function(){this._wel.attach({"click@._btnRecentBarFold":this._onClickFoldButton});jindo.$Fn(this._onResizeWindow).attach(window,"resize")},_onClickFoldButton:function(oEvent){oEvent.stopDefault();this._wel.toggleClass("unfd")},_onResizeWindow:function(oEvent){var nDocHeight=jindo.$Document().clientSize().height;var nItemHeight=this._welRecentList.query("li").height();var nVisibleItem=Math.max(Math.min(parseInt((nDocHeight-104)/nItemHeight),5),1);this._welRecentList.css("height",nItemHeight*nVisibleItem+"px");var welParent=this._welRecentList.query("! div.recently_cont");welParent.css("margin-top",-1*(52+(nItemHeight*nVisibleItem)/2)+"px")},loadRecentWebtoon:function(){if(this._wel.visible()==false){return}this._setEvent();var oRecentWebtoon=new RecentWebtoon();var aRecent=oRecentWebtoon.get(this._htOption.sLanguage);var self=this;if(aRecent&&aRecent.length>0){new jindo.$Ajax("/"+contentLanguageCode+"/recentWebtoonList",{type:"xhr",method:"get",onload:function(oRes){self._renderList(oRes.json())}}).request()}else{this._renderList()}},hide:function(){this._wel.hide()},_renderList:function(oJson){oJson=oJson||[];var oTemplate=jindo.$Template(this._htTemplate()["recentItem"]);var aHtml=[];for(var i=0;i<5;i++){var htData=oJson[i];if(htData){var sHtml=oTemplate.process(htData);aHtml.push(sHtml)}else{aHtml.push(this._htTemplate()["emptyRecentItem"])}}this._wel.query("._recentList").empty().html(aHtml.join("\n"));this._onResizeWindow()},_htTemplate:function(){return{recentBar:' <div class="recently_area _recentBarArea NE=a:hrc">		<a href="#" title="'+this._htOption.sTitle+'" class="menu _btnRecentBarFold NPI=a:close,g:'+sNclkLanguageCode+'" onclick="return false;"><span class="t_recently">'+this._htOption.sTitle+'</span><span class="ico_recently"></span></a>		<div class="recently_cont">			<h4 class="t_recently2">'+this._htOption.sTitle+'</h4>			<span class="bar"></span>			<ul class="_recentList">				<li><div class="detail_info"><span class="thmb"></span><span class="info"></span></div></li>				<li><div class="detail_info"><span class="thmb"></span><span class="info"></span></div></li>				<li><div class="detail_info"><span class="thmb"></span><span class="info"></span></div></li>				<li><div class="detail_info"><span class="thmb"></span><span class="info"></span></div></li>				<li><div class="detail_info"><span class="thmb"></span><span class="info"></span></div></li>			</ul>		</div>		<span class="lt_line"></span>		<span class="lb_line"></span>	</div>',recentItem:'		<li><a href="{if webtoonType != "WEBTOON"}http://'+this._htOption.sDomain+"/"+this._htOption.contentLanguage+"/challenge/{=titleForSeo}/{=episodeTitleForSeo}/viewer?title_no={=titleNo}&episode_no={=episodeNo}{else}http://"+this._htOption.sDomain+"/"+this._htOption.contentLanguage+'/{=representGenreSeoCode }/{=titleGroupName}/{=episodeTitleForSeo}/viewer?title_no={=titleNo}&episode_no={=episodeNo}{/if}" title="{=title}" class="detail_info NPI=a:list,i={=titleNo},g:'+this._htOption.sNclkLanguageCode+'"><span class="thmb"><img src="'+this._htOption.sImgDomain+'{=thumbnailMobile}?type=a92" width="70" height="74" alt="{=title}"></span><span class="info"><span class="subj">{=title}</span><em class="episode">#{=episodeSeq}</em></span></a></li>',emptyRecentItem:'		<li><div class="detail_info"><span class="thmb"></span><span class="info"></span></div></li>'}}});
/*! jQuery v3.1.1 | (c) jQuery Foundation | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document){throw new Error("jQuery requires a window with a document")}return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=a.document,e=Object.getPrototypeOf,f=c.slice,g=c.concat,h=c.push,i=c.indexOf,j={},k=j.toString,l=j.hasOwnProperty,m=l.toString,n=m.call(Object),o={};function p(a,b){b=b||d;var c=b.createElement("script");c.text=a,b.head.appendChild(c).parentNode.removeChild(c)}var q="3.1.1",r=function(a,b){return new r.fn.init(a,b)},s=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,t=/^-ms-/,u=/-([a-z])/g,v=function(a,b){return b.toUpperCase()};r.fn=r.prototype={jquery:q,constructor:r,length:0,toArray:function(){return f.call(this)},get:function(a){return null==a?f.call(this):a<0?this[a+this.length]:this[a]},pushStack:function(a){var b=r.merge(this.constructor(),a);return b.prevObject=this,b},each:function(a){return r.each(this,a)},map:function(a){return this.pushStack(r.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(f.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:c.sort,splice:c.splice},r.extend=r.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||r.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++){if(null!=(a=arguments[h])){for(b in a){c=g[b],d=a[b],g!==d&&(j&&d&&(r.isPlainObject(d)||(e=r.isArray(d)))?(e?(e=!1,f=c&&r.isArray(c)?c:[]):f=c&&r.isPlainObject(c)?c:{},g[b]=r.extend(j,f,d)):void 0!==d&&(g[b]=d))}}}return g},r.extend({expando:"jQuery"+(q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===r.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=r.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))},isPlainObject:function(a){var b,c;return !(!a||"[object Object]"!==k.call(a))&&(!(b=e(a))||(c=l.call(b,"constructor")&&b.constructor,"function"==typeof c&&m.call(c)===n))},isEmptyObject:function(a){var b;for(b in a){return !1}return !0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?j[k.call(a)]||"object":typeof a},globalEval:function(a){p(a)},camelCase:function(a){return a.replace(t,"ms-").replace(u,v)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(w(a)){for(c=a.length;d<c;d++){if(b.call(a[d],d,a[d])===!1){break}}}else{for(d in a){if(b.call(a[d],d,a[d])===!1){break}}}return a},trim:function(a){return null==a?"":(a+"").replace(s,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(w(Object(a))?r.merge(c,"string"==typeof a?[a]:a):h.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:i.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;d++){a[e++]=b[d]}return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;f<g;f++){d=!b(a[f],f),d!==h&&e.push(a[f])}return e},map:function(a,b,c){var d,e,f=0,h=[];if(w(a)){for(d=a.length;f<d;f++){e=b(a[f],f,c),null!=e&&h.push(e)}}else{for(f in a){e=b(a[f],f,c),null!=e&&h.push(e)}}return g.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;if("string"==typeof b&&(c=a[b],b=a,a=c),r.isFunction(a)){return d=f.call(arguments,2),e=function(){return a.apply(b||this,d.concat(f.call(arguments)))},e.guid=a.guid=a.guid||r.guid++,e}},now:Date.now,support:o}),"function"==typeof Symbol&&(r.fn[Symbol.iterator]=c[Symbol.iterator]),r.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){j["[object "+b+"]"]=b.toLowerCase()});function w(a){var b=!!a&&"length" in a&&a.length,c=r.type(a);return"function"!==c&&!r.isWindow(a)&&("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a)}var x=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C={}.hasOwnProperty,D=[],E=D.pop,F=D.push,G=D.push,H=D.slice,I=function(a,b){for(var c=0,d=a.length;c<d;c++){if(a[c]===b){return c}}return -1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",M="\\["+K+"*("+L+")(?:"+K+"*([*^$|!~]?=)"+K+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+K+"*\\]",N=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+M+")*)|.*)\\)|)",O=new RegExp(K+"+","g"),P=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g"),Q=new RegExp("^"+K+"*,"+K+"*"),R=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),S=new RegExp("="+K+"*([^\\]'\"]*?)"+K+"*\\]","g"),T=new RegExp(N),U=new RegExp("^"+L+"$"),V={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+M),PSEUDO:new RegExp("^"+N),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,_=new RegExp("\\\\([\\da-f]{1,6}"+K+"?|("+K+")|.)","ig"),aa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ba=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ca=function(a,b){return b?"\0"===a?"\ufffd":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},da=function(){m()},ea=ta(function(a){return a.disabled===!0&&("form" in a||"label" in a)},{dir:"parentNode",next:"legend"});try{G.apply(D=H.call(v.childNodes),v.childNodes),D[v.childNodes.length].nodeType}catch(fa){G={apply:D.length?function(a,b){F.apply(a,H.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]){}a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s=b&&b.ownerDocument,w=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==w&&9!==w&&11!==w){return d}if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==w&&(l=Z.exec(a))){if(f=l[1]){if(9===w){if(!(j=b.getElementById(f))){return d}if(j.id===f){return d.push(j),d}}else{if(s&&(j=s.getElementById(f))&&t(b,j)&&j.id===f){return d.push(j),d}}}else{if(l[2]){return G.apply(d,b.getElementsByTagName(a)),d}if((f=l[3])&&c.getElementsByClassName&&b.getElementsByClassName){return G.apply(d,b.getElementsByClassName(f)),d}}}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==w){s=b,r=a}else{if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(ba,ca):b.setAttribute("id",k=u),o=g(a),h=o.length;while(h--){o[h]="#"+k+" "+sa(o[h])}r=o.join(","),s=$.test(a)&&qa(b.parentNode)||b}}if(r){try{return G.apply(d,s.querySelectorAll(r)),d}catch(x){}finally{k===u&&b.removeAttribute("id")}}}}return i(a.replace(P,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("fieldset");try{return !!a(b)}catch(c){return !1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=c.length;while(e--){d.attrHandle[c[e]]=b}}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(d){return d}if(c){while(c=c.nextSibling){if(c===b){return -1}}}return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return function(b){return"form" in b?b.parentNode&&b.disabled===!1?"label" in b?"label" in b.parentNode?b.parentNode.disabled===a:b.disabled===a:b.isDisabled===a||b.isDisabled!==!a&&ea(b)===a:b.disabled===a:"label" in b&&b.disabled===a}}function pa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--){c[e=f[g]]&&(c[e]=!(d[e]=c[e]))}})})}function qa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return !!b&&"HTML"!==b.nodeName},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),v!==n&&(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Y.test(n.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){return a.getAttribute("id")===b}},d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}}):(d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}},d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c,d,e,f=b.getElementById(a);if(f){if(c=f.getAttributeNode("id"),c&&c.value===a){return[f]}e=b.getElementsByName(a),d=0;while(f=e[d++]){if(c=f.getAttributeNode("id"),c&&c.value===a){return[f]}}}return[]}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++]){1===c.nodeType&&d.push(c)}return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){if("undefined"!=typeof b.getElementsByClassName&&p){return b.getElementsByClassName(a)}},r=[],q=[],(c.qsa=Y.test(n.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+K+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+K+"*(?:value|"+J+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+K+"*[*^$|!~]?="),2!==a.querySelectorAll(":enabled").length&&q.push(":enabled",":disabled"),o.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Y.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"*"),s.call(a,"[s!='']:x"),r.push("!=",N)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Y.test(o.compareDocumentPosition),t=b||Y.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b){while(b=b.parentNode){if(b===a){return !0}}}return !1},B=b?function(a,b){if(a===b){return l=!0,0}var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?I(k,a)-I(k,b):0:4&d?-1:1)}:function(a,b){if(a===b){return l=!0,0}var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f){return a===n?-1:b===n?1:e?-1:f?1:k?I(k,a)-I(k,b):0}if(e===f){return la(a,b)}c=a;while(c=c.parentNode){g.unshift(c)}c=b;while(c=c.parentNode){h.unshift(c)}while(g[d]===h[d]){d++}return d?la(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(S,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b))){try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType){return d}}catch(e){}}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&C.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.escape=function(a){return(a+"").replace(ba,ca)},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++]){b===a[f]&&(e=d.push(f))}while(e--){a.splice(d[e],1)}}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent){return a.textContent}for(a=a.firstChild;a;a=a.nextSibling){c+=e(a)}}else{if(3===f||4===f){return a.nodeValue}}}else{while(b=a[d++]){c+=e(b)}}return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(_,aa),a[3]=(a[3]||a[4]||a[5]||"").replace(_,aa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return V.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&T.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(_,aa).toLowerCase();return"*"===a?function(){return !0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+K+")"+a+"("+K+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:!b||(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(O," ")+" ").indexOf(c)>-1:"|="===b&&(e===c||e.slice(0,c.length+1)===c+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return !!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p]){if(h?m.nodeName.toLowerCase()===r:1===m.nodeType){return !1}}o=p="only"===a&&!o&&"nextSibling"}return !0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop()){if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}}else{if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1){while(m=++n&&m&&m[p]||(t=n=0)||o.pop()){if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b)){break}}}}return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--){d=I(a,f[g]),a[d]=!(c[d]=f[g])}}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(P,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--){(f=g[h])&&(a[h]=!(b[h]=f))}}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(_,aa),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return U.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(_,aa).toLowerCase(),function(b){var c;do{if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang")){return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-")}}while((b=b.parentNode)&&1===b.nodeType);return !1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:oa(!1),disabled:oa(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling){if(a.nodeType<6){return !1}}return !0},parent:function(a){return !d.pseudos.empty(a)},header:function(a){return X.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:pa(function(){return[0]}),last:pa(function(a,b){return[b-1]}),eq:pa(function(a,b,c){return[c<0?c+b:c]}),even:pa(function(a,b){for(var c=0;c<b;c+=2){a.push(c)}return a}),odd:pa(function(a,b){for(var c=1;c<b;c+=2){a.push(c)}return a}),lt:pa(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;){a.push(d)}return a}),gt:pa(function(a,b,c){for(var d=c<0?c+b:c;++d<b;){a.push(d)}return a})}},d.pseudos.nth=d.pseudos.eq;for(b in {radio:!0,checkbox:!0,file:!0,password:!0,image:!0}){d.pseudos[b]=ma(b)}for(b in {submit:!0,reset:!0}){d.pseudos[b]=na(b)}function ra(){}ra.prototype=d.filters=d.pseudos,d.setFilters=new ra,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k){return b?0:k.slice(0)}h=a,i=[],j=d.preFilter;while(h){c&&!(e=Q.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=R.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(P," ")}),h=h.slice(c.length));for(g in d.filter){!(e=V[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length))}if(!c){break}}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function sa(a){for(var b=0,c=a.length,d="";b<c;b++){d+=a[b].value}return d}function ta(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,h=x++;return b.first?function(b,c,e){while(b=b[d]){if(1===b.nodeType||g){return a(b,c,e)}}return !1}:function(b,c,i){var j,k,l,m=[w,h];if(i){while(b=b[d]){if((1===b.nodeType||g)&&a(b,c,i)){return !0}}}else{while(b=b[d]){if(1===b.nodeType||g){if(l=b[u]||(b[u]={}),k=l[b.uniqueID]||(l[b.uniqueID]={}),e&&e===b.nodeName.toLowerCase()){b=b[d]||b}else{if((j=k[f])&&j[0]===w&&j[1]===h){return m[2]=j[2]}if(k[f]=m,m[2]=a(b,c,i)){return !0}}}}}return !1}}function ua(a){return a.length>1?function(b,c,d){var e=a.length;while(e--){if(!a[e](b,c,d)){return !1}}return !0}:a[0]}function va(a,b,c){for(var d=0,e=b.length;d<e;d++){ga(a,b[d],c)}return c}function wa(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++){(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)))}return g}function xa(a,b,c,d,e,f){return d&&!d[u]&&(d=xa(d)),e&&!e[u]&&(e=xa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||va(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:wa(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=wa(r,n),d(j,[],h,i),k=j.length;while(k--){(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}}if(f){if(e||a){if(e){j=[],k=r.length;while(k--){(l=r[k])&&j.push(q[k]=l)}e(null,r=[],j,i)}k=r.length;while(k--){(l=r[k])&&(j=e?I(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}}else{r=wa(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):G.apply(g,r)}})}function ya(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ta(function(a){return a===b},h,!0),l=ta(function(a){return I(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];i<f;i++){if(c=d.relative[a[i].type]){m=[ta(ua(m),c)]}else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;e<f;e++){if(d.relative[a[e].type]){break}}return xa(i>1&&ua(m),i>1&&sa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(P,"$1"),c,i<e&&ya(a.slice(i,e)),e<f&&ya(a=a.slice(e)),e<f&&sa(a))}m.push(c)}}return ua(m)}function za(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||0.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++]){if(q(l,g||n,h)){i.push(l);break}}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++]){q(t,u,g,h)}if(f){if(r>0){while(s--){t[s]||u[s]||(u[s]=E.call(i))}}u=wa(u)}G.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&ga.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--){f=ya(b[c]),f[u]?d.push(f):e.push(f)}f=A(a,za(e,d)),f.selector=a}return f},i=ga.select=function(a,b,c,e){var f,i,j,k,l,m="function"==typeof a&&a,n=!e&&g(a=m.selector||a);if(c=c||[],1===n.length){if(i=n[0]=n[0].slice(0),i.length>2&&"ID"===(j=i[0]).type&&9===b.nodeType&&p&&d.relative[i[1].type]){if(b=(d.find.ID(j.matches[0].replace(_,aa),b)||[])[0],!b){return c}m&&(b=b.parentNode),a=a.slice(i.shift().value.length)}f=V.needsContext.test(a)?0:i.length;while(f--){if(j=i[f],d.relative[k=j.type]){break}if((l=d.find[k])&&(e=l(j.matches[0].replace(_,aa),$.test(i[0].type)&&qa(b.parentNode)||b))){if(i.splice(f,1),a=e.length&&sa(i),!a){return G.apply(c,e),c}break}}}return(m||h(a,n))(e,b,!p,c,!b||$.test(a)&&qa(b.parentNode)||b),c},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("fieldset"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){if(!c){return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase()){return a.defaultValue}}),ja(function(a){return null==a.getAttribute("disabled")})||ka(J,function(a,b,c){var d;if(!c){return a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}}),ga}(a);r.find=x,r.expr=x.selectors,r.expr[":"]=r.expr.pseudos,r.uniqueSort=r.unique=x.uniqueSort,r.text=x.getText,r.isXMLDoc=x.isXML,r.contains=x.contains,r.escapeSelector=x.escape;var y=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType){if(1===a.nodeType){if(e&&r(a).is(c)){break}d.push(a)}}return d},z=function(a,b){for(var c=[];a;a=a.nextSibling){1===a.nodeType&&a!==b&&c.push(a)}return c},A=r.expr.match.needsContext,B=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,C=/^.[^:#\[\.,]*$/;function D(a,b,c){return r.isFunction(b)?r.grep(a,function(a,d){return !!b.call(a,d,a)!==c}):b.nodeType?r.grep(a,function(a){return a===b!==c}):"string"!=typeof b?r.grep(a,function(a){return i.call(b,a)>-1!==c}):C.test(b)?r.filter(b,a,c):(b=r.filter(b,a),r.grep(a,function(a){return i.call(b,a)>-1!==c&&1===a.nodeType}))}r.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?r.find.matchesSelector(d,a)?[d]:[]:r.find.matches(a,r.grep(b,function(a){return 1===a.nodeType}))},r.fn.extend({find:function(a){var b,c,d=this.length,e=this;if("string"!=typeof a){return this.pushStack(r(a).filter(function(){for(b=0;b<d;b++){if(r.contains(e[b],this)){return !0}}}))}for(c=this.pushStack([]),b=0;b<d;b++){r.find(a,e[b],c)}return d>1?r.uniqueSort(c):c},filter:function(a){return this.pushStack(D(this,a||[],!1))},not:function(a){return this.pushStack(D(this,a||[],!0))},is:function(a){return !!D(this,"string"==typeof a&&A.test(a)?r(a):a||[],!1).length}});var E,F=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,G=r.fn.init=function(a,b,c){var e,f;if(!a){return this}if(c=c||E,"string"==typeof a){if(e="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:F.exec(a),!e||!e[1]&&b){return !b||b.jquery?(b||c).find(a):this.constructor(b).find(a)}if(e[1]){if(b=b instanceof r?b[0]:b,r.merge(this,r.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),B.test(e[1])&&r.isPlainObject(b)){for(e in b){r.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e])}}return this}return f=d.getElementById(e[2]),f&&(this[0]=f,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):r.isFunction(a)?void 0!==c.ready?c.ready(a):a(r):r.makeArray(a,this)};G.prototype=r.fn,E=r(d);var H=/^(?:parents|prev(?:Until|All))/,I={children:!0,contents:!0,next:!0,prev:!0};r.fn.extend({has:function(a){var b=r(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++){if(r.contains(this,b[a])){return !0}}})},closest:function(a,b){var c,d=0,e=this.length,f=[],g="string"!=typeof a&&r(a);if(!A.test(a)){for(;d<e;d++){for(c=this[d];c&&c!==b;c=c.parentNode){if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&r.find.matchesSelector(c,a))){f.push(c);break}}}}return this.pushStack(f.length>1?r.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?i.call(r(a),this[0]):i.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(r.uniqueSort(r.merge(this.get(),r(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function J(a,b){while((a=a[b])&&1!==a.nodeType){}return a}r.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return y(a,"parentNode")},parentsUntil:function(a,b,c){return y(a,"parentNode",c)},next:function(a){return J(a,"nextSibling")},prev:function(a){return J(a,"previousSibling")},nextAll:function(a){return y(a,"nextSibling")},prevAll:function(a){return y(a,"previousSibling")},nextUntil:function(a,b,c){return y(a,"nextSibling",c)},prevUntil:function(a,b,c){return y(a,"previousSibling",c)},siblings:function(a){return z((a.parentNode||{}).firstChild,a)},children:function(a){return z(a.firstChild)},contents:function(a){return a.contentDocument||r.merge([],a.childNodes)}},function(a,b){r.fn[a]=function(c,d){var e=r.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=r.filter(d,e)),this.length>1&&(I[a]||r.uniqueSort(e),H.test(a)&&e.reverse()),this.pushStack(e)}});var K=/[^\x20\t\r\n\f]+/g;function L(a){var b={};return r.each(a.match(K)||[],function(a,c){b[c]=!0}),b}r.Callbacks=function(a){a="string"==typeof a?L(a):r.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length){f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){r.each(b,function(b,c){r.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==r.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return r.each(arguments,function(a,b){var c;while((c=r.inArray(b,f,c))>-1){f.splice(c,1),c<=h&&h--}}),this},has:function(a){return a?r.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return !f},lock:function(){return e=g=[],c||b||(f=c=""),this},locked:function(){return !!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return !!d}};return j};function M(a){return a}function N(a){throw a}function O(a,b,c){var d;try{a&&r.isFunction(d=a.promise)?d.call(a).done(b).fail(c):a&&r.isFunction(d=a.then)?d.call(a,b,c):b.call(void 0,a)}catch(a){c.call(void 0,a)}}r.extend({Deferred:function(b){var c=[["notify","progress",r.Callbacks("memory"),r.Callbacks("memory"),2],["resolve","done",r.Callbacks("once memory"),r.Callbacks("once memory"),0,"resolved"],["reject","fail",r.Callbacks("once memory"),r.Callbacks("once memory"),1,"rejected"]],d="pending",e={state:function(){return d},always:function(){return f.done(arguments).fail(arguments),this},"catch":function(a){return e.then(null,a)},pipe:function(){var a=arguments;return r.Deferred(function(b){r.each(c,function(c,d){var e=r.isFunction(a[d[4]])&&a[d[4]];f[d[1]](function(){var a=e&&e.apply(this,arguments);a&&r.isFunction(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[d[0]+"With"](this,e?[a]:arguments)})}),a=null}).promise()},then:function(b,d,e){var f=0;function g(b,c,d,e){return function(){var h=this,i=arguments,j=function(){var a,j;if(!(b<f)){if(a=d.apply(h,i),a===c.promise()){throw new TypeError("Thenable self-resolution")}j=a&&("object"==typeof a||"function"==typeof a)&&a.then,r.isFunction(j)?e?j.call(a,g(f,c,M,e),g(f,c,N,e)):(f++,j.call(a,g(f,c,M,e),g(f,c,N,e),g(f,c,M,c.notifyWith))):(d!==M&&(h=void 0,i=[a]),(e||c.resolveWith)(h,i))}},k=e?j:function(){try{j()}catch(a){r.Deferred.exceptionHook&&r.Deferred.exceptionHook(a,k.stackTrace),b+1>=f&&(d!==N&&(h=void 0,i=[a]),c.rejectWith(h,i))}};b?k():(r.Deferred.getStackHook&&(k.stackTrace=r.Deferred.getStackHook()),a.setTimeout(k))}}return r.Deferred(function(a){c[0][3].add(g(0,a,r.isFunction(e)?e:M,a.notifyWith)),c[1][3].add(g(0,a,r.isFunction(b)?b:M)),c[2][3].add(g(0,a,r.isFunction(d)?d:N))}).promise()},promise:function(a){return null!=a?r.extend(a,e):e}},f={};return r.each(c,function(a,b){var g=b[2],h=b[5];e[b[1]]=g.add,h&&g.add(function(){d=h},c[3-a][2].disable,c[0][2].lock),g.add(b[3].fire),f[b[0]]=function(){return f[b[0]+"With"](this===f?void 0:this,arguments),this},f[b[0]+"With"]=g.fireWith}),e.promise(f),b&&b.call(f,f),f},when:function(a){var b=arguments.length,c=b,d=Array(c),e=f.call(arguments),g=r.Deferred(),h=function(a){return function(c){d[a]=this,e[a]=arguments.length>1?f.call(arguments):c,--b||g.resolveWith(d,e)}};if(b<=1&&(O(a,g.done(h(c)).resolve,g.reject),"pending"===g.state()||r.isFunction(e[c]&&e[c].then))){return g.then()}while(c--){O(e[c],h(c),g.reject)}return g.promise()}});var P=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;r.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&P.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,c)},r.readyException=function(b){a.setTimeout(function(){throw b})};var Q=r.Deferred();r.fn.ready=function(a){return Q.then(a)["catch"](function(a){r.readyException(a)}),this},r.extend({isReady:!1,readyWait:1,holdReady:function(a){a?r.readyWait++:r.ready(!0)},ready:function(a){(a===!0?--r.readyWait:r.isReady)||(r.isReady=!0,a!==!0&&--r.readyWait>0||Q.resolveWith(d,[r]))}}),r.ready.then=Q.then;function R(){d.removeEventListener("DOMContentLoaded",R),a.removeEventListener("load",R),r.ready()}"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll?a.setTimeout(r.ready):(d.addEventListener("DOMContentLoaded",R),a.addEventListener("load",R));var S=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===r.type(c)){e=!0;for(h in c){S(a,b,h,c[h],!0,f,g)}}else{if(void 0!==d&&(e=!0,r.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(r(a),c)})),b)){for(;h<i;h++){b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)))}}}return e?a:j?b.call(a):i?b(a[0],c):f},T=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function U(){this.expando=r.expando+U.uid++}U.uid=1,U.prototype={cache:function(a){var b=a[this.expando];return b||(b={},T(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b){e[r.camelCase(b)]=c}else{for(d in b){e[r.camelCase(d)]=b[d]}}return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][r.camelCase(b)]},access:function(a,b,c){return void 0===b||b&&"string"==typeof b&&void 0===c?this.get(a,b):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d=a[this.expando];if(void 0!==d){if(void 0!==b){r.isArray(b)?b=b.map(r.camelCase):(b=r.camelCase(b),b=b in d?[b]:b.match(K)||[]),c=b.length;while(c--){delete d[b[c]]}}(void 0===b||r.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!r.isEmptyObject(b)}};var V=new U,W=new U,X=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Y=/[A-Z]/g;function Z(a){return"true"===a||"false"!==a&&("null"===a?null:a===+a+""?+a:X.test(a)?JSON.parse(a):a)}function $(a,b,c){var d;if(void 0===c&&1===a.nodeType){if(d="data-"+b.replace(Y,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c=Z(c)}catch(e){}W.set(a,b,c)}else{c=void 0}}return c}r.extend({hasData:function(a){return W.hasData(a)||V.hasData(a)},data:function(a,b,c){return W.access(a,b,c)},removeData:function(a,b){W.remove(a,b)},_data:function(a,b,c){return V.access(a,b,c)},_removeData:function(a,b){V.remove(a,b)}}),r.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=W.get(f),1===f.nodeType&&!V.get(f,"hasDataAttrs"))){c=g.length;while(c--){g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=r.camelCase(d.slice(5)),$(f,d,e[d])))}V.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){W.set(this,a)}):S(this,function(b){var c;if(f&&void 0===b){if(c=W.get(f,a),void 0!==c){return c}if(c=$(f,a),void 0!==c){return c}}else{this.each(function(){W.set(this,a,b)})}},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){W.remove(this,a)})}}),r.extend({queue:function(a,b,c){var d;if(a){return b=(b||"fx")+"queue",d=V.get(a,b),c&&(!d||r.isArray(c)?d=V.access(a,b,r.makeArray(c)):d.push(c)),d||[]}},dequeue:function(a,b){b=b||"fx";var c=r.queue(a,b),d=c.length,e=c.shift(),f=r._queueHooks(a,b),g=function(){r.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return V.get(a,c)||V.access(a,c,{empty:r.Callbacks("once memory").add(function(){V.remove(a,[b+"queue",c])})})}}),r.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?r.queue(this[0],a):void 0===b?this:this.each(function(){var c=r.queue(this,a,b);r._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&r.dequeue(this,a)})},dequeue:function(a){return this.each(function(){r.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=r.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--){c=V.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h))}return h(),e.promise(b)}});var _=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,aa=new RegExp("^(?:([+-])=|)("+_+")([a-z%]*)$","i"),ba=["Top","Right","Bottom","Left"],ca=function(a,b){return a=b||a,"none"===a.style.display||""===a.style.display&&r.contains(a.ownerDocument,a)&&"none"===r.css(a,"display")},da=function(a,b,c,d){var e,f,g={};for(f in b){g[f]=a.style[f],a.style[f]=b[f]}e=c.apply(a,d||[]);for(f in b){a.style[f]=g[f]}return e};function ea(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return r.css(a,b,"")},i=h(),j=c&&c[3]||(r.cssNumber[b]?"":"px"),k=(r.cssNumber[b]||"px"!==j&&+i)&&aa.exec(r.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do{f=f||".5",k/=f,r.style(a,b,k+j)}while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var fa={};function ga(a){var b,c=a.ownerDocument,d=a.nodeName,e=fa[d];return e?e:(b=c.body.appendChild(c.createElement(d)),e=r.css(b,"display"),b.parentNode.removeChild(b),"none"===e&&(e="block"),fa[d]=e,e)}function ha(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++){d=a[f],d.style&&(c=d.style.display,b?("none"===c&&(e[f]=V.get(d,"display")||null,e[f]||(d.style.display="")),""===d.style.display&&ca(d)&&(e[f]=ga(d))):"none"!==c&&(e[f]="none",V.set(d,"display",c)))}for(f=0;f<g;f++){null!=e[f]&&(a[f].style.display=e[f])}return a}r.fn.extend({show:function(){return ha(this,!0)},hide:function(){return ha(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){ca(this)?r(this).show():r(this).hide()})}});var ia=/^(?:checkbox|radio)$/i,ja=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ka=/^$|\/(?:java|ecma)script/i,la={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};la.optgroup=la.option,la.tbody=la.tfoot=la.colgroup=la.caption=la.thead,la.th=la.td;function ma(a,b){var c;return c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[],void 0===b||b&&r.nodeName(a,b)?r.merge([a],c):c}function na(a,b){for(var c=0,d=a.length;c<d;c++){V.set(a[c],"globalEval",!b||V.get(b[c],"globalEval"))}}var oa=/<|&#?\w+;/;function pa(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],n=0,o=a.length;n<o;n++){if(f=a[n],f||0===f){if("object"===r.type(f)){r.merge(m,f.nodeType?[f]:f)}else{if(oa.test(f)){g=g||l.appendChild(b.createElement("div")),h=(ja.exec(f)||["",""])[1].toLowerCase(),i=la[h]||la._default,g.innerHTML=i[1]+r.htmlPrefilter(f)+i[2],k=i[0];while(k--){g=g.lastChild}r.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else{m.push(b.createTextNode(f))}}}}l.textContent="",n=0;while(f=m[n++]){if(d&&r.inArray(f,d)>-1){e&&e.push(f)}else{if(j=r.contains(f.ownerDocument,f),g=ma(l.appendChild(f),"script"),j&&na(g),c){k=0;while(f=g[k++]){ka.test(f.type||"")&&c.push(f)}}}}return l}!function(){var a=d.createDocumentFragment(),b=a.appendChild(d.createElement("div")),c=d.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),o.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",o.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var qa=d.documentElement,ra=/^key/,sa=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ta=/^([^.]*)(?:\.(.+)|)/;function ua(){return !0}function va(){return !1}function wa(){try{return d.activeElement}catch(a){}}function xa(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b){xa(a,h,c,d,b[h],f)}return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1){e=va}else{if(!e){return a}}return 1===f&&(g=e,e=function(a){return r().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=r.guid++)),a.each(function(){r.event.add(this,b,e,d,c)})}r.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=V.get(a);if(q){c.handler&&(f=c,c=f.handler,e=f.selector),e&&r.find.matchesSelector(qa,e),c.guid||(c.guid=r.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return"undefined"!=typeof r&&r.event.triggered!==b.type?r.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(K)||[""],j=b.length;while(j--){h=ta.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=r.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=r.event.special[n]||{},k=r.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&r.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),r.event.global[n]=!0)}}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=V.hasData(a)&&V.get(a);if(q&&(i=q.events)){b=(b||"").match(K)||[""],j=b.length;while(j--){if(h=ta.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){l=r.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--){k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k))}g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||r.removeEvent(a,n,q.handle),delete i[n])}else{for(n in i){r.event.remove(a,n+b[j],c,d,!0)}}}r.isEmptyObject(i)&&V.remove(a,"handle events")}},dispatch:function(a){var b=r.event.fix(a),c,d,e,f,g,h,i=new Array(arguments.length),j=(V.get(this,"events")||{})[b.type]||[],k=r.event.special[b.type]||{};for(i[0]=b,c=1;c<arguments.length;c++){i[c]=arguments[c]}if(b.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,b)!==!1){h=r.event.handlers.call(this,b,j),c=0;while((f=h[c++])&&!b.isPropagationStopped()){b.currentTarget=f.elem,d=0;while((g=f.handlers[d++])&&!b.isImmediatePropagationStopped()){b.rnamespace&&!b.rnamespace.test(g.namespace)||(b.handleObj=g,b.data=g.data,e=((r.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(b.result=e)===!1&&(b.preventDefault(),b.stopPropagation()))}}return k.postDispatch&&k.postDispatch.call(this,b),b.result}},handlers:function(a,b){var c,d,e,f,g,h=[],i=b.delegateCount,j=a.target;if(i&&j.nodeType&&!("click"===a.type&&a.button>=1)){for(;j!==this;j=j.parentNode||this){if(1===j.nodeType&&("click"!==a.type||j.disabled!==!0)){for(f=[],g={},c=0;c<i;c++){d=b[c],e=d.selector+" ",void 0===g[e]&&(g[e]=d.needsContext?r(e,this).index(j)>-1:r.find(e,this,null,[j]).length),g[e]&&f.push(d)}f.length&&h.push({elem:j,handlers:f})}}}return j=this,i<b.length&&h.push({elem:j,handlers:b.slice(i)}),h},addProp:function(a,b){Object.defineProperty(r.Event.prototype,a,{enumerable:!0,configurable:!0,get:r.isFunction(b)?function(){if(this.originalEvent){return b(this.originalEvent)}}:function(){if(this.originalEvent){return this.originalEvent[a]}},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[r.expando]?a:new r.Event(a)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==wa()&&this.focus){return this.focus(),!1}},delegateType:"focusin"},blur:{trigger:function(){if(this===wa()&&this.blur){return this.blur(),!1}},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&r.nodeName(this,"input")){return this.click(),!1}},_default:function(a){return r.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},r.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},r.Event=function(a,b){return this instanceof r.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ua:va,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,b&&r.extend(this,b),this.timeStamp=a&&a.timeStamp||r.now(),void (this[r.expando]=!0)):new r.Event(a,b)},r.Event.prototype={constructor:r.Event,isDefaultPrevented:va,isPropagationStopped:va,isImmediatePropagationStopped:va,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ua,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ua,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ua,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},r.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var b=a.button;return null==a.which&&ra.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==b&&sa.test(a.type)?1&b?1:2&b?3:4&b?2:0:a.which}},r.event.addProp),r.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){r.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||r.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),r.fn.extend({on:function(a,b,c,d){return xa(this,a,b,c,d)},one:function(a,b,c,d){return xa(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj){return d=a.handleObj,r(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this}if("object"==typeof a){for(e in a){this.off(e,b,a[e])}return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=va),this.each(function(){r.event.remove(this,a,c,b)})}});var ya=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,za=/<script|<style|<link/i,Aa=/checked\s*(?:[^=]|=\s*.checked.)/i,Ba=/^true\/(.*)/,Ca=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Da(a,b){return r.nodeName(a,"table")&&r.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a:a}function Ea(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function Fa(a){var b=Ba.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Ga(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(V.hasData(a)&&(f=V.access(a),g=V.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j){for(c=0,d=j[e].length;c<d;c++){r.event.add(b,e,j[e][c])}}}W.hasData(a)&&(h=W.access(a),i=r.extend({},h),W.set(b,i))}}function Ha(a,b){var c=b.nodeName.toLowerCase();"input"===c&&ia.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function Ia(a,b,c,d){b=g.apply([],b);var e,f,h,i,j,k,l=0,m=a.length,n=m-1,q=b[0],s=r.isFunction(q);if(s||m>1&&"string"==typeof q&&!o.checkClone&&Aa.test(q)){return a.each(function(e){var f=a.eq(e);s&&(b[0]=q.call(this,e,f.html())),Ia(f,b,c,d)})}if(m&&(e=pa(b,a[0].ownerDocument,!1,a,d),f=e.firstChild,1===e.childNodes.length&&(e=f),f||d)){for(h=r.map(ma(e,"script"),Ea),i=h.length;l<m;l++){j=e,l!==n&&(j=r.clone(j,!0,!0),i&&r.merge(h,ma(j,"script"))),c.call(a[l],j,l)}if(i){for(k=h[h.length-1].ownerDocument,r.map(h,Fa),l=0;l<i;l++){j=h[l],ka.test(j.type||"")&&!V.access(j,"globalEval")&&r.contains(k,j)&&(j.src?r._evalUrl&&r._evalUrl(j.src):p(j.textContent.replace(Ca,""),k))}}}return a}function Ja(a,b,c){for(var d,e=b?r.filter(b,a):a,f=0;null!=(d=e[f]);f++){c||1!==d.nodeType||r.cleanData(ma(d)),d.parentNode&&(c&&r.contains(d.ownerDocument,d)&&na(ma(d,"script")),d.parentNode.removeChild(d))}return a}r.extend({htmlPrefilter:function(a){return a.replace(ya,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=r.contains(a.ownerDocument,a);if(!(o.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||r.isXMLDoc(a))){for(g=ma(h),f=ma(a),d=0,e=f.length;d<e;d++){Ha(f[d],g[d])}}if(b){if(c){for(f=f||ma(a),g=g||ma(h),d=0,e=f.length;d<e;d++){Ga(f[d],g[d])}}else{Ga(a,h)}}return g=ma(h,"script"),g.length>0&&na(g,!i&&ma(a,"script")),h},cleanData:function(a){for(var b,c,d,e=r.event.special,f=0;void 0!==(c=a[f]);f++){if(T(c)){if(b=c[V.expando]){if(b.events){for(d in b.events){e[d]?r.event.remove(c,d):r.removeEvent(c,d,b.handle)}}c[V.expando]=void 0}c[W.expando]&&(c[W.expando]=void 0)}}}}),r.fn.extend({detach:function(a){return Ja(this,a,!0)},remove:function(a){return Ja(this,a)},text:function(a){return S(this,function(a){return void 0===a?r.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return Ia(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Da(this,a);b.appendChild(a)}})},prepend:function(){return Ia(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Da(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return Ia(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return Ia(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&(r.cleanData(ma(a,!1)),a.textContent="")}return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return r.clone(this,a,b)})},html:function(a){return S(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType){return b.innerHTML}if("string"==typeof a&&!za.test(a)&&!la[(ja.exec(a)||["",""])[1].toLowerCase()]){a=r.htmlPrefilter(a);try{for(;c<d;c++){b=this[c]||{},1===b.nodeType&&(r.cleanData(ma(b,!1)),b.innerHTML=a)}b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return Ia(this,arguments,function(b){var c=this.parentNode;r.inArray(this,a)<0&&(r.cleanData(ma(this)),c&&c.replaceChild(b,this))},a)}}),r.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){r.fn[a]=function(a){for(var c,d=[],e=r(a),f=e.length-1,g=0;g<=f;g++){c=g===f?this:this.clone(!0),r(e[g])[b](c),h.apply(d,c.get())}return this.pushStack(d)}});var Ka=/^margin/,La=new RegExp("^("+_+")(?!px)[a-z%]+$","i"),Ma=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)};!function(){function b(){if(i){i.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",i.innerHTML="",qa.appendChild(h);var b=a.getComputedStyle(i);c="1%"!==b.top,g="2px"===b.marginLeft,e="4px"===b.width,i.style.marginRight="50%",f="4px"===b.marginRight,qa.removeChild(h),i=null}}var c,e,f,g,h=d.createElement("div"),i=d.createElement("div");i.style&&(i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",o.clearCloneStyle="content-box"===i.style.backgroundClip,h.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",h.appendChild(i),r.extend(o,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return b(),e},pixelMarginRight:function(){return b(),f},reliableMarginLeft:function(){return b(),g}}))}();function Na(a,b,c){var d,e,f,g,h=a.style;return c=c||Ma(a),c&&(g=c.getPropertyValue(b)||c[b],""!==g||r.contains(a.ownerDocument,a)||(g=r.style(a,b)),!o.pixelMarginRight()&&La.test(g)&&Ka.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function Oa(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Pa=/^(none|table(?!-c[ea]).+)/,Qa={position:"absolute",visibility:"hidden",display:"block"},Ra={letterSpacing:"0",fontWeight:"400"},Sa=["Webkit","Moz","ms"],Ta=d.createElement("div").style;function Ua(a){if(a in Ta){return a}var b=a[0].toUpperCase()+a.slice(1),c=Sa.length;while(c--){if(a=Sa[c]+b,a in Ta){return a}}}function Va(a,b,c){var d=aa.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function Wa(a,b,c,d,e){var f,g=0;for(f=c===(d?"border":"content")?4:"width"===b?1:0;f<4;f+=2){"margin"===c&&(g+=r.css(a,c+ba[f],!0,e)),d?("content"===c&&(g-=r.css(a,"padding"+ba[f],!0,e)),"margin"!==c&&(g-=r.css(a,"border"+ba[f]+"Width",!0,e))):(g+=r.css(a,"padding"+ba[f],!0,e),"padding"!==c&&(g+=r.css(a,"border"+ba[f]+"Width",!0,e)))}return g}function Xa(a,b,c){var d,e=!0,f=Ma(a),g="border-box"===r.css(a,"boxSizing",!1,f);if(a.getClientRects().length&&(d=a.getBoundingClientRect()[b]),d<=0||null==d){if(d=Na(a,b,f),(d<0||null==d)&&(d=a.style[b]),La.test(d)){return d}e=g&&(o.boxSizingReliable()||d===a.style[b]),d=parseFloat(d)||0}return d+Wa(a,b,c||(g?"border":"content"),e,f)+"px"}r.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Na(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=r.camelCase(b),i=a.style;return b=r.cssProps[h]||(r.cssProps[h]=Ua(h)||h),g=r.cssHooks[b]||r.cssHooks[h],void 0===c?g&&"get" in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=aa.exec(c))&&e[1]&&(c=ea(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(r.cssNumber[h]?"":"px")),o.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set" in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=r.camelCase(b);return b=r.cssProps[h]||(r.cssProps[h]=Ua(h)||h),g=r.cssHooks[b]||r.cssHooks[h],g&&"get" in g&&(e=g.get(a,!0,c)),void 0===e&&(e=Na(a,b,d)),"normal"===e&&b in Ra&&(e=Ra[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),r.each(["height","width"],function(a,b){r.cssHooks[b]={get:function(a,c,d){if(c){return !Pa.test(r.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?Xa(a,b,d):da(a,Qa,function(){return Xa(a,b,d)})}},set:function(a,c,d){var e,f=d&&Ma(a),g=d&&Wa(a,b,d,"border-box"===r.css(a,"boxSizing",!1,f),f);return g&&(e=aa.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=r.css(a,b)),Va(a,c,g)}}}),r.cssHooks.marginLeft=Oa(o.reliableMarginLeft,function(a,b){if(b){return(parseFloat(Na(a,"marginLeft"))||a.getBoundingClientRect().left-da(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}}),r.each({margin:"",padding:"",border:"Width"},function(a,b){r.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++){e[a+ba[d]+b]=f[d]||f[d-2]||f[0]}return e}},Ka.test(a)||(r.cssHooks[a+b].set=Va)}),r.fn.extend({css:function(a,b){return S(this,function(a,b,c){var d,e,f={},g=0;if(r.isArray(b)){for(d=Ma(a),e=b.length;g<e;g++){f[b[g]]=r.css(a,b[g],!1,d)}return f}return void 0!==c?r.style(a,b,c):r.css(a,b)},a,b,arguments.length>1)}});function Ya(a,b,c,d,e){return new Ya.prototype.init(a,b,c,d,e)}r.Tween=Ya,Ya.prototype={constructor:Ya,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||r.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(r.cssNumber[c]?"":"px")},cur:function(){var a=Ya.propHooks[this.prop];return a&&a.get?a.get(this):Ya.propHooks._default.get(this)},run:function(a){var b,c=Ya.propHooks[this.prop];return this.options.duration?this.pos=b=r.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ya.propHooks._default.set(this),this}},Ya.prototype.init.prototype=Ya.prototype,Ya.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=r.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){r.fx.step[a.prop]?r.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[r.cssProps[a.prop]]&&!r.cssHooks[a.prop]?a.elem[a.prop]=a.now:r.style(a.elem,a.prop,a.now+a.unit)}}},Ya.propHooks.scrollTop=Ya.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},r.easing={linear:function(a){return a},swing:function(a){return 0.5-Math.cos(a*Math.PI)/2},_default:"swing"},r.fx=Ya.prototype.init,r.fx.step={};var Za,$a,_a=/^(?:toggle|show|hide)$/,ab=/queueHooks$/;function bb(){$a&&(a.requestAnimationFrame(bb),r.fx.tick())}function cb(){return a.setTimeout(function(){Za=void 0}),Za=r.now()}function db(a,b){var c,d=0,e={height:a};for(b=b?1:0;d<4;d+=2-b){c=ba[d],e["margin"+c]=e["padding"+c]=a}return b&&(e.opacity=e.width=a),e}function eb(a,b,c){for(var d,e=(hb.tweeners[b]||[]).concat(hb.tweeners["*"]),f=0,g=e.length;f<g;f++){if(d=e[f].call(c,b,a)){return d}}}function fb(a,b,c){var d,e,f,g,h,i,j,k,l="width" in b||"height" in b,m=this,n={},o=a.style,p=a.nodeType&&ca(a),q=V.get(a,"fxshow");c.queue||(g=r._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,m.always(function(){m.always(function(){g.unqueued--,r.queue(a,"fx").length||g.empty.fire()})}));for(d in b){if(e=b[d],_a.test(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d]){continue}p=!0}n[d]=q&&q[d]||r.style(a,d)}}if(i=!r.isEmptyObject(b),i||!r.isEmptyObject(n)){l&&1===a.nodeType&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=q&&q.display,null==j&&(j=V.get(a,"display")),k=r.css(a,"display"),"none"===k&&(j?k=j:(ha([a],!0),j=a.style.display||j,k=r.css(a,"display"),ha([a]))),("inline"===k||"inline-block"===k&&null!=j)&&"none"===r.css(a,"float")&&(i||(m.done(function(){o.display=j}),null==j&&(k=o.display,j="none"===k?"":k)),o.display="inline-block")),c.overflow&&(o.overflow="hidden",m.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]})),i=!1;for(d in n){i||(q?"hidden" in q&&(p=q.hidden):q=V.access(a,"fxshow",{display:j}),f&&(q.hidden=!p),p&&ha([a],!0),m.done(function(){p||ha([a]),V.remove(a,"fxshow");for(d in n){r.style(a,d,n[d])}})),i=eb(p?q[d]:0,d,m),d in q||(q[d]=i.start,p&&(i.end=i.start,i.start=0))}}}function gb(a,b){var c,d,e,f,g;for(c in a){if(d=r.camelCase(c),e=b[d],f=a[c],r.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=r.cssHooks[d],g&&"expand" in g){f=g.expand(f),delete a[d];for(c in f){c in a||(a[c]=f[c],b[c]=e)}}else{b[d]=e}}}function hb(a,b,c){var d,e,f=0,g=hb.prefilters.length,h=r.Deferred().always(function(){delete i.elem}),i=function(){if(e){return !1}for(var b=Za||cb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++){j.tweens[g].run(f)}return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:r.extend({},b),opts:r.extend(!0,{specialEasing:{},easing:r.easing._default},c),originalProperties:b,originalOptions:c,startTime:Za||cb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=r.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e){return this}for(e=!0;c<d;c++){j.tweens[c].run(1)}return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(gb(k,j.opts.specialEasing);f<g;f++){if(d=hb.prefilters[f].call(j,a,k,j.opts)){return r.isFunction(d.stop)&&(r._queueHooks(j.elem,j.opts.queue).stop=r.proxy(d.stop,d)),d}}return r.map(k,eb,j),r.isFunction(j.opts.start)&&j.opts.start.call(a,j),r.fx.timer(r.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}r.Animation=r.extend(hb,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return ea(c.elem,a,aa.exec(b),c),c}]},tweener:function(a,b){r.isFunction(a)?(b=a,a=["*"]):a=a.match(K);for(var c,d=0,e=a.length;d<e;d++){c=a[d],hb.tweeners[c]=hb.tweeners[c]||[],hb.tweeners[c].unshift(b)}},prefilters:[fb],prefilter:function(a,b){b?hb.prefilters.unshift(a):hb.prefilters.push(a)}}),r.speed=function(a,b,c){var e=a&&"object"==typeof a?r.extend({},a):{complete:c||!c&&b||r.isFunction(a)&&a,duration:a,easing:c&&b||b&&!r.isFunction(b)&&b};return r.fx.off||d.hidden?e.duration=0:"number"!=typeof e.duration&&(e.duration in r.fx.speeds?e.duration=r.fx.speeds[e.duration]:e.duration=r.fx.speeds._default),null!=e.queue&&e.queue!==!0||(e.queue="fx"),e.old=e.complete,e.complete=function(){r.isFunction(e.old)&&e.old.call(this),e.queue&&r.dequeue(this,e.queue)},e},r.fn.extend({fadeTo:function(a,b,c,d){return this.filter(ca).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=r.isEmptyObject(a),f=r.speed(b,c,d),g=function(){var b=hb(this,r.extend({},a),f);(e||V.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=r.timers,g=V.get(this);if(e){g[e]&&g[e].stop&&d(g[e])}else{for(e in g){g[e]&&g[e].stop&&ab.test(e)&&d(g[e])}}for(e=f.length;e--;){f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1))}!b&&c||r.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=V.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=r.timers,g=d?d.length:0;for(c.finish=!0,r.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;){f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1))}for(b=0;b<g;b++){d[b]&&d[b].finish&&d[b].finish.call(this)}delete c.finish})}}),r.each(["toggle","show","hide"],function(a,b){var c=r.fn[b];r.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(db(b,!0),a,d,e)}}),r.each({slideDown:db("show"),slideUp:db("hide"),slideToggle:db("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){r.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),r.timers=[],r.fx.tick=function(){var a,b=0,c=r.timers;for(Za=r.now();b<c.length;b++){a=c[b],a()||c[b]!==a||c.splice(b--,1)}c.length||r.fx.stop(),Za=void 0},r.fx.timer=function(a){r.timers.push(a),a()?r.fx.start():r.timers.pop()},r.fx.interval=13,r.fx.start=function(){$a||($a=a.requestAnimationFrame?a.requestAnimationFrame(bb):a.setInterval(r.fx.tick,r.fx.interval))},r.fx.stop=function(){a.cancelAnimationFrame?a.cancelAnimationFrame($a):a.clearInterval($a),$a=null},r.fx.speeds={slow:600,fast:200,_default:400},r.fn.delay=function(b,c){return b=r.fx?r.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=d.createElement("input"),b=d.createElement("select"),c=b.appendChild(d.createElement("option"));a.type="checkbox",o.checkOn=""!==a.value,o.optSelected=c.selected,a=d.createElement("input"),a.value="t",a.type="radio",o.radioValue="t"===a.value}();var ib,jb=r.expr.attrHandle;r.fn.extend({attr:function(a,b){return S(this,r.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){r.removeAttr(this,a)})}}),r.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f){return"undefined"==typeof a.getAttribute?r.prop(a,b,c):(1===f&&r.isXMLDoc(a)||(e=r.attrHooks[b.toLowerCase()]||(r.expr.match.bool.test(b)?ib:void 0)),void 0!==c?null===c?void r.removeAttr(a,b):e&&"set" in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get" in e&&null!==(d=e.get(a,b))?d:(d=r.find.attr(a,b),null==d?void 0:d))}},attrHooks:{type:{set:function(a,b){if(!o.radioValue&&"radio"===b&&r.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d=0,e=b&&b.match(K);if(e&&1===a.nodeType){while(c=e[d++]){a.removeAttribute(c)}}}}),ib={set:function(a,b,c){return b===!1?r.removeAttr(a,c):a.setAttribute(c,c),c}},r.each(r.expr.match.bool.source.match(/\w+/g),function(a,b){var c=jb[b]||r.find.attr;jb[b]=function(a,b,d){var e,f,g=b.toLowerCase();return d||(f=jb[g],jb[g]=e,e=null!=c(a,b,d)?g:null,jb[g]=f),e}});var kb=/^(?:input|select|textarea|button)$/i,lb=/^(?:a|area)$/i;r.fn.extend({prop:function(a,b){return S(this,r.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[r.propFix[a]||a]})}}),r.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f){return 1===f&&r.isXMLDoc(a)||(b=r.propFix[b]||b,e=r.propHooks[b]),void 0!==c?e&&"set" in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get" in e&&null!==(d=e.get(a,b))?d:a[b]}},propHooks:{tabIndex:{get:function(a){var b=r.find.attr(a,"tabindex");return b?parseInt(b,10):kb.test(a.nodeName)||lb.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),o.optSelected||(r.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),r.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){r.propFix[this.toLowerCase()]=this});function mb(a){var b=a.match(K)||[];return b.join(" ")}function nb(a){return a.getAttribute&&a.getAttribute("class")||""}r.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a)){return this.each(function(b){r(this).addClass(a.call(this,b,nb(this)))})}if("string"==typeof a&&a){b=a.match(K)||[];while(c=this[i++]){if(e=nb(c),d=1===c.nodeType&&" "+mb(e)+" "){g=0;while(f=b[g++]){d.indexOf(" "+f+" ")<0&&(d+=f+" ")}h=mb(d),e!==h&&c.setAttribute("class",h)}}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a)){return this.each(function(b){r(this).removeClass(a.call(this,b,nb(this)))})}if(!arguments.length){return this.attr("class","")}if("string"==typeof a&&a){b=a.match(K)||[];while(c=this[i++]){if(e=nb(c),d=1===c.nodeType&&" "+mb(e)+" "){g=0;while(f=b[g++]){while(d.indexOf(" "+f+" ")>-1){d=d.replace(" "+f+" "," ")}}h=mb(d),e!==h&&c.setAttribute("class",h)}}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):r.isFunction(a)?this.each(function(c){r(this).toggleClass(a.call(this,c,nb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=r(this),f=a.match(K)||[];while(b=f[d++]){e.hasClass(b)?e.removeClass(b):e.addClass(b)}}else{void 0!==a&&"boolean"!==c||(b=nb(this),b&&V.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":V.get(this,"__className__")||""))}})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++]){if(1===c.nodeType&&(" "+mb(nb(c))+" ").indexOf(b)>-1){return !0}}return !1}});var ob=/\r/g;r.fn.extend({val:function(a){var b,c,d,e=this[0];if(arguments.length){return d=r.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,r(this).val()):a,null==e?e="":"number"==typeof e?e+="":r.isArray(e)&&(e=r.map(e,function(a){return null==a?"":a+""})),b=r.valHooks[this.type]||r.valHooks[this.nodeName.toLowerCase()],b&&"set" in b&&void 0!==b.set(this,e,"value")||(this.value=e))})}if(e){return b=r.valHooks[e.type]||r.valHooks[e.nodeName.toLowerCase()],b&&"get" in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(ob,""):null==c?"":c)}}}),r.extend({valHooks:{option:{get:function(a){var b=r.find.attr(a,"value");return null!=b?b:mb(r.text(a))}},select:{get:function(a){var b,c,d,e=a.options,f=a.selectedIndex,g="select-one"===a.type,h=g?null:[],i=g?f+1:e.length;for(d=f<0?i:g?f:0;d<i;d++){if(c=e[d],(c.selected||d===f)&&!c.disabled&&(!c.parentNode.disabled||!r.nodeName(c.parentNode,"optgroup"))){if(b=r(c).val(),g){return b}h.push(b)}}return h},set:function(a,b){var c,d,e=a.options,f=r.makeArray(b),g=e.length;while(g--){d=e[g],(d.selected=r.inArray(r.valHooks.option.get(d),f)>-1)&&(c=!0)}return c||(a.selectedIndex=-1),f}}}}),r.each(["radio","checkbox"],function(){r.valHooks[this]={set:function(a,b){if(r.isArray(b)){return a.checked=r.inArray(r(a).val(),b)>-1}}},o.checkOn||(r.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var pb=/^(?:focusinfocus|focusoutblur)$/;r.extend(r.event,{trigger:function(b,c,e,f){var g,h,i,j,k,m,n,o=[e||d],p=l.call(b,"type")?b.type:b,q=l.call(b,"namespace")?b.namespace.split("."):[];if(h=i=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!pb.test(p+r.event.triggered)&&(p.indexOf(".")>-1&&(q=p.split("."),p=q.shift(),q.sort()),k=p.indexOf(":")<0&&"on"+p,b=b[r.expando]?b:new r.Event(p,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=q.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:r.makeArray(c,[b]),n=r.event.special[p]||{},f||!n.trigger||n.trigger.apply(e,c)!==!1)){if(!f&&!n.noBubble&&!r.isWindow(e)){for(j=n.delegateType||p,pb.test(j+p)||(h=h.parentNode);h;h=h.parentNode){o.push(h),i=h}i===(e.ownerDocument||d)&&o.push(i.defaultView||i.parentWindow||a)}g=0;while((h=o[g++])&&!b.isPropagationStopped()){b.type=g>1?j:n.bindType||p,m=(V.get(h,"events")||{})[b.type]&&V.get(h,"handle"),m&&m.apply(h,c),m=k&&h[k],m&&m.apply&&T(h)&&(b.result=m.apply(h,c),b.result===!1&&b.preventDefault())}return b.type=p,f||b.isDefaultPrevented()||n._default&&n._default.apply(o.pop(),c)!==!1||!T(e)||k&&r.isFunction(e[p])&&!r.isWindow(e)&&(i=e[k],i&&(e[k]=null),r.event.triggered=p,e[p](),r.event.triggered=void 0,i&&(e[k]=i)),b.result}},simulate:function(a,b,c){var d=r.extend(new r.Event,c,{type:a,isSimulated:!0});r.event.trigger(d,null,b)}}),r.fn.extend({trigger:function(a,b){return this.each(function(){r.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c){return r.event.trigger(a,b,c,!0)}}}),r.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,b){r.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),r.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),o.focusin="onfocusin" in a,o.focusin||r.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){r.event.simulate(b,a.target,r.event.fix(a))};r.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=V.access(d,b);e||d.addEventListener(a,c,!0),V.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=V.access(d,b)-1;e?V.access(d,b,e):(d.removeEventListener(a,c,!0),V.remove(d,b))}}});var qb=a.location,rb=r.now(),sb=/\?/;r.parseXML=function(b){var c;if(!b||"string"!=typeof b){return null}try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||r.error("Invalid XML: "+b),c};var tb=/\[\]$/,ub=/\r?\n/g,vb=/^(?:submit|button|image|reset|file)$/i,wb=/^(?:input|select|textarea|keygen)/i;function xb(a,b,c,d){var e;if(r.isArray(b)){r.each(b,function(b,e){c||tb.test(a)?d(a,e):xb(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)})}else{if(c||"object"!==r.type(b)){d(a,b)}else{for(e in b){xb(a+"["+e+"]",b[e],c,d)}}}}r.param=function(a,b){var c,d=[],e=function(a,b){var c=r.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(r.isArray(a)||a.jquery&&!r.isPlainObject(a)){r.each(a,function(){e(this.name,this.value)})}else{for(c in a){xb(c,a[c],b,e)}}return d.join("&")},r.fn.extend({serialize:function(){return r.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=r.prop(this,"elements");return a?r.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!r(this).is(":disabled")&&wb.test(this.nodeName)&&!vb.test(a)&&(this.checked||!ia.test(a))}).map(function(a,b){var c=r(this).val();return null==c?null:r.isArray(c)?r.map(c,function(a){return{name:b.name,value:a.replace(ub,"\r\n")}}):{name:b.name,value:c.replace(ub,"\r\n")}}).get()}});var yb=/%20/g,zb=/#.*$/,Ab=/([?&])_=[^&]*/,Bb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Cb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Db=/^(?:GET|HEAD)$/,Eb=/^\/\//,Fb={},Gb={},Hb="*/".concat("*"),Ib=d.createElement("a");Ib.href=qb.href;function Jb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(K)||[];if(r.isFunction(c)){while(d=f[e++]){"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}}}function Kb(a,b,c,d){var e={},f=a===Gb;function g(h){var i;return e[h]=!0,r.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Lb(a,b){var c,d,e=r.ajaxSettings.flatOptions||{};for(c in b){void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c])}return d&&r.extend(!0,a,d),a}function Mb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0]){i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"))}if(d){for(e in h){if(h[e]&&h[e].test(d)){i.unshift(e);break}}}if(i[0] in c){f=i[0]}else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f){return f!==i[0]&&i.unshift(f),c[f]}}function Nb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1]){for(g in a.converters){j[g.toLowerCase()]=a.converters[g]}}f=k.shift();while(f){if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift()){if("*"===f){f=i}else{if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g){for(e in j){if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}}}if(g!==!0){if(g&&a["throws"]){b=g(b)}else{try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}}}}}}return{state:"success",data:b}}r.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:qb.href,type:"GET",isLocal:Cb.test(qb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Hb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":r.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Lb(Lb(a,r.ajaxSettings),b):Lb(r.ajaxSettings,a)},ajaxPrefilter:Jb(Fb),ajaxTransport:Jb(Gb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m,n,o=r.ajaxSetup({},c),p=o.context||o,q=o.context&&(p.nodeType||p.jquery)?r(p):r.event,s=r.Deferred(),t=r.Callbacks("once memory"),u=o.statusCode||{},v={},w={},x="canceled",y={readyState:0,getResponseHeader:function(a){var b;if(k){if(!h){h={};while(b=Bb.exec(g)){h[b[1].toLowerCase()]=b[2]}}b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return k?g:null},setRequestHeader:function(a,b){return null==k&&(a=w[a.toLowerCase()]=w[a.toLowerCase()]||a,v[a]=b),this},overrideMimeType:function(a){return null==k&&(o.mimeType=a),this},statusCode:function(a){var b;if(a){if(k){y.always(a[y.status])}else{for(b in a){u[b]=[u[b],a[b]]}}}return this},abort:function(a){var b=a||x;return e&&e.abort(b),A(0,b),this}};if(s.promise(y),o.url=((b||o.url||qb.href)+"").replace(Eb,qb.protocol+"//"),o.type=c.method||c.type||o.method||o.type,o.dataTypes=(o.dataType||"*").toLowerCase().match(K)||[""],null==o.crossDomain){j=d.createElement("a");try{j.href=o.url,j.href=j.href,o.crossDomain=Ib.protocol+"//"+Ib.host!=j.protocol+"//"+j.host}catch(z){o.crossDomain=!0}}if(o.data&&o.processData&&"string"!=typeof o.data&&(o.data=r.param(o.data,o.traditional)),Kb(Fb,o,c,y),k){return y}l=r.event&&o.global,l&&0===r.active++&&r.event.trigger("ajaxStart"),o.type=o.type.toUpperCase(),o.hasContent=!Db.test(o.type),f=o.url.replace(zb,""),o.hasContent?o.data&&o.processData&&0===(o.contentType||"").indexOf("application/x-www-form-urlencoded")&&(o.data=o.data.replace(yb,"+")):(n=o.url.slice(f.length),o.data&&(f+=(sb.test(f)?"&":"?")+o.data,delete o.data),o.cache===!1&&(f=f.replace(Ab,"$1"),n=(sb.test(f)?"&":"?")+"_="+rb+++n),o.url=f+n),o.ifModified&&(r.lastModified[f]&&y.setRequestHeader("If-Modified-Since",r.lastModified[f]),r.etag[f]&&y.setRequestHeader("If-None-Match",r.etag[f])),(o.data&&o.hasContent&&o.contentType!==!1||c.contentType)&&y.setRequestHeader("Content-Type",o.contentType),y.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+("*"!==o.dataTypes[0]?", "+Hb+"; q=0.01":""):o.accepts["*"]);for(m in o.headers){y.setRequestHeader(m,o.headers[m])}if(o.beforeSend&&(o.beforeSend.call(p,y,o)===!1||k)){return y.abort()}if(x="abort",t.add(o.complete),y.done(o.success),y.fail(o.error),e=Kb(Gb,o,c,y)){if(y.readyState=1,l&&q.trigger("ajaxSend",[y,o]),k){return y}o.async&&o.timeout>0&&(i=a.setTimeout(function(){y.abort("timeout")},o.timeout));try{k=!1,e.send(v,A)}catch(z){if(k){throw z}A(-1,z)}}else{A(-1,"No Transport")}function A(b,c,d,h){var j,m,n,v,w,x=c;k||(k=!0,i&&a.clearTimeout(i),e=void 0,g=h||"",y.readyState=b>0?4:0,j=b>=200&&b<300||304===b,d&&(v=Mb(o,y,d)),v=Nb(o,v,y,j),j?(o.ifModified&&(w=y.getResponseHeader("Last-Modified"),w&&(r.lastModified[f]=w),w=y.getResponseHeader("etag"),w&&(r.etag[f]=w)),204===b||"HEAD"===o.type?x="nocontent":304===b?x="notmodified":(x=v.state,m=v.data,n=v.error,j=!n)):(n=x,!b&&x||(x="error",b<0&&(b=0))),y.status=b,y.statusText=(c||x)+"",j?s.resolveWith(p,[m,x,y]):s.rejectWith(p,[y,x,n]),y.statusCode(u),u=void 0,l&&q.trigger(j?"ajaxSuccess":"ajaxError",[y,o,j?m:n]),t.fireWith(p,[y,x]),l&&(q.trigger("ajaxComplete",[y,o]),--r.active||r.event.trigger("ajaxStop")))}return y},getJSON:function(a,b,c){return r.get(a,b,c,"json")},getScript:function(a,b){return r.get(a,void 0,b,"script")}}),r.each(["get","post"],function(a,b){r[b]=function(a,c,d,e){return r.isFunction(c)&&(e=e||d,d=c,c=void 0),r.ajax(r.extend({url:a,type:b,dataType:e,data:c,success:d},r.isPlainObject(a)&&a))}}),r._evalUrl=function(a){return r.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},r.fn.extend({wrapAll:function(a){var b;return this[0]&&(r.isFunction(a)&&(a=a.call(this[0])),b=r(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild){a=a.firstElementChild}return a}).append(this)),this},wrapInner:function(a){return r.isFunction(a)?this.each(function(b){r(this).wrapInner(a.call(this,b))}):this.each(function(){var b=r(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=r.isFunction(a);return this.each(function(c){r(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){r(this).replaceWith(this.childNodes)}),this}}),r.expr.pseudos.hidden=function(a){return !r.expr.pseudos.visible(a)},r.expr.pseudos.visible=function(a){return !!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},r.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Ob={0:200,1223:204},Pb=r.ajaxSettings.xhr();o.cors=!!Pb&&"withCredentials" in Pb,o.ajax=Pb=!!Pb,r.ajaxTransport(function(b){var c,d;if(o.cors||Pb&&!b.crossDomain){return{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields){for(g in b.xhrFields){h[g]=b.xhrFields[g]}}b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e){h.setRequestHeader(g,e[g])}c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Ob[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c){throw i}}},abort:function(){c&&c()}}}}),r.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),r.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return r.globalEval(a),a}}}),r.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),r.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(e,f){b=r("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&f("error"===a.type?404:200,a.type)}),d.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Qb=[],Rb=/(=)\?(?=&|$)|\?\?/;r.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Qb.pop()||r.expando+"_"+rb++;return this[a]=!0,a}}),r.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Rb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Rb.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0]){return e=b.jsonpCallback=r.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Rb,"$1"+e):b.jsonp!==!1&&(b.url+=(sb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||r.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?r(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Qb.push(e)),g&&r.isFunction(f)&&f(g[0]),g=f=void 0}),"script"}}),o.createHTMLDocument=function(){var a=d.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),r.parseHTML=function(a,b,c){if("string"!=typeof a){return[]}"boolean"==typeof b&&(c=b,b=!1);var e,f,g;return b||(o.createHTMLDocument?(b=d.implementation.createHTMLDocument(""),e=b.createElement("base"),e.href=d.location.href,b.head.appendChild(e)):b=d),f=B.exec(a),g=!c&&[],f?[b.createElement(f[1])]:(f=pa([a],b,g),g&&g.length&&r(g).remove(),r.merge([],f.childNodes))},r.fn.load=function(a,b,c){var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=mb(a.slice(h)),a=a.slice(0,h)),r.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&r.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?r("<div>").append(r.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},r.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){r.fn[b]=function(a){return this.on(b,a)}}),r.expr.pseudos.animated=function(a){return r.grep(r.timers,function(b){return a===b.elem}).length};function Sb(a){return r.isWindow(a)?a:9===a.nodeType&&a.defaultView}r.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=r.css(a,"position"),l=r(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=r.css(a,"top"),i=r.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),r.isFunction(b)&&(b=b.call(a,c,r.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using" in b?b.using.call(a,m):l.css(m)}},r.fn.extend({offset:function(a){if(arguments.length){return void 0===a?this:this.each(function(b){r.offset.setOffset(this,a,b)})}var b,c,d,e,f=this[0];if(f){return f.getClientRects().length?(d=f.getBoundingClientRect(),d.width||d.height?(e=f.ownerDocument,c=Sb(e),b=e.documentElement,{top:d.top+c.pageYOffset-b.clientTop,left:d.left+c.pageXOffset-b.clientLeft}):d):{top:0,left:0}}},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===r.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),r.nodeName(a[0],"html")||(d=a.offset()),d={top:d.top+r.css(a[0],"borderTopWidth",!0),left:d.left+r.css(a[0],"borderLeftWidth",!0)}),{top:b.top-d.top-r.css(c,"marginTop",!0),left:b.left-d.left-r.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&"static"===r.css(a,"position")){a=a.offsetParent}return a||qa})}}),r.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;r.fn[a]=function(d){return S(this,function(a,d,e){var f=Sb(a);return void 0===e?f?f[b]:a[d]:void (f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),r.each(["top","left"],function(a,b){r.cssHooks[b]=Oa(o.pixelPosition,function(a,c){if(c){return c=Na(a,b),La.test(c)?r(a).position()[b]+"px":c}})}),r.each({Height:"height",Width:"width"},function(a,b){r.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){r.fn[d]=function(e,f){var g=arguments.length&&(c||"boolean"!=typeof e),h=c||(e===!0||f===!0?"margin":"border");return S(this,function(b,c,e){var f;return r.isWindow(b)?0===d.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+a],b.body["offset"+a],f["offset"+a],f["client"+a])):void 0===e?r.css(b,c,h):r.style(b,c,e,h)},b,g?e:void 0,g)}})}),r.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),r.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return r});var Tb=a.jQuery,Ub=a.$;return r.noConflict=function(b){return a.$===r&&(a.$=Ub),b&&a.jQuery===r&&(a.jQuery=Tb),r},b||(a.jQuery=a.$=r),r});
/*! Hammer.JS - v2.0.8 - 2016-04-23
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(a,b,c,d){function e(a,b,c){return setTimeout(j(a,c),b)}function f(a,b,c){return Array.isArray(a)?(g(a,c[b],c),!0):!1}function g(a,b,c){var e;if(a){if(a.forEach){a.forEach(b,c)}else{if(a.length!==d){for(e=0;e<a.length;){b.call(c,a[e],e,a),e++}}else{for(e in a){a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}}}}}function h(b,c,d){var e="DEPRECATED METHOD: "+c+"\n"+d+" AT \n";return function(){var c=new Error("get-stack-trace"),d=c&&c.stack?c.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",f=a.console&&(a.console.warn||a.console.log);return f&&f.call(a.console,e,d),b.apply(this,arguments)}}function i(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&la(d,c)}function j(a,b){return function(){return a.apply(b,arguments)}}function k(a,b){return typeof a==oa?a.apply(b?b[0]||d:d,b):a}function l(a,b){return a===d?b:a}function m(a,b,c){g(q(b),function(b){a.addEventListener(b,c,!1)})}function n(a,b,c){g(q(b),function(b){a.removeEventListener(b,c,!1)})}function o(a,b){for(;a;){if(a==b){return !0}a=a.parentNode}return !1}function p(a,b){return a.indexOf(b)>-1}function q(a){return a.trim().split(/\s+/g)}function r(a,b,c){if(a.indexOf&&!c){return a.indexOf(b)}for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b){return d}d++}return -1}function s(a){return Array.prototype.slice.call(a,0)}function t(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];r(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function u(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<ma.length;){if(c=ma[g],e=c?c+f:b,e in a){return e}g++}return d}function v(){return ua++}function w(b){var c=b.ownerDocument||b;return c.defaultView||c.parentWindow||a}function x(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){k(a.options.enable,[a])&&c.handler(b)},this.init()}function y(a){var b,c=a.options.inputClass;return new (b=c?c:xa?M:ya?P:wa?R:L)(a,z)}function z(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&Ea&&d-e===0,g=b&(Ga|Ha)&&d-e===0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,A(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function A(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=D(b)),e>1&&!c.firstMultiple?c.firstMultiple=D(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=E(d);b.timeStamp=ra(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=I(h,i),b.distance=H(h,i),B(c,b),b.offsetDirection=G(b.deltaX,b.deltaY);var j=F(b.deltaTime,b.deltaX,b.deltaY);b.overallVelocityX=j.x,b.overallVelocityY=j.y,b.overallVelocity=qa(j.x)>qa(j.y)?j.x:j.y,b.scale=g?K(g.pointers,d):1,b.rotation=g?J(g.pointers,d):0,b.maxPointers=c.prevInput?b.pointers.length>c.prevInput.maxPointers?b.pointers.length:c.prevInput.maxPointers:b.pointers.length,C(c,b);var k=a.element;o(b.srcEvent.target,k)&&(k=b.srcEvent.target),b.target=k}function B(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};b.eventType!==Ea&&f.eventType!==Ga||(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function C(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Ha&&(i>Da||h.velocity===d)){var j=b.deltaX-h.deltaX,k=b.deltaY-h.deltaY,l=F(i,j,k);e=l.x,f=l.y,c=qa(l.x)>qa(l.y)?l.x:l.y,g=G(j,k),a.lastInterval=b}else{c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction}b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function D(a){for(var b=[],c=0;c<a.pointers.length;){b[c]={clientX:pa(a.pointers[c].clientX),clientY:pa(a.pointers[c].clientY)},c++}return{timeStamp:ra(),pointers:b,center:E(b),deltaX:a.deltaX,deltaY:a.deltaY}}function E(a){var b=a.length;if(1===b){return{x:pa(a[0].clientX),y:pa(a[0].clientY)}}for(var c=0,d=0,e=0;b>e;){c+=a[e].clientX,d+=a[e].clientY,e++}return{x:pa(c/b),y:pa(d/b)}}function F(a,b,c){return{x:b/a||0,y:c/a||0}}function G(a,b){return a===b?Ia:qa(a)>=qa(b)?0>a?Ja:Ka:0>b?La:Ma}function H(a,b,c){c||(c=Qa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function I(a,b,c){c||(c=Qa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function J(a,b){return I(b[1],b[0],Ra)+I(a[1],a[0],Ra)}function K(a,b){return H(b[0],b[1],Ra)/H(a[0],a[1],Ra)}function L(){this.evEl=Ta,this.evWin=Ua,this.pressed=!1,x.apply(this,arguments)}function M(){this.evEl=Xa,this.evWin=Ya,x.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function N(){this.evTarget=$a,this.evWin=_a,this.started=!1,x.apply(this,arguments)}function O(a,b){var c=s(a.touches),d=s(a.changedTouches);return b&(Ga|Ha)&&(c=t(c.concat(d),"identifier",!0)),[c,d]}function P(){this.evTarget=bb,this.targetIds={},x.apply(this,arguments)}function Q(a,b){var c=s(a.touches),d=this.targetIds;if(b&(Ea|Fa)&&1===c.length){return d[c[0].identifier]=!0,[c,c]}var e,f,g=s(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return o(a.target,i)}),b===Ea){for(e=0;e<f.length;){d[f[e].identifier]=!0,e++}}for(e=0;e<g.length;){d[g[e].identifier]&&h.push(g[e]),b&(Ga|Ha)&&delete d[g[e].identifier],e++}return h.length?[t(f.concat(h),"identifier",!0),h]:void 0}function R(){x.apply(this,arguments);var a=j(this.handler,this);this.touch=new P(this.manager,a),this.mouse=new L(this.manager,a),this.primaryTouch=null,this.lastTouches=[]}function S(a,b){a&Ea?(this.primaryTouch=b.changedPointers[0].identifier,T.call(this,b)):a&(Ga|Ha)&&T.call(this,b)}function T(a){var b=a.changedPointers[0];if(b.identifier===this.primaryTouch){var c={x:b.clientX,y:b.clientY};this.lastTouches.push(c);var d=this.lastTouches,e=function(){var a=d.indexOf(c);a>-1&&d.splice(a,1)};setTimeout(e,cb)}}function U(a){for(var b=a.srcEvent.clientX,c=a.srcEvent.clientY,d=0;d<this.lastTouches.length;d++){var e=this.lastTouches[d],f=Math.abs(b-e.x),g=Math.abs(c-e.y);if(db>=f&&db>=g){return !0}}return !1}function V(a,b){this.manager=a,this.set(b)}function W(a){if(p(a,jb)){return jb}var b=p(a,kb),c=p(a,lb);return b&&c?jb:b||c?b?kb:lb:p(a,ib)?ib:hb}function X(){if(!fb){return !1}var b={},c=a.CSS&&a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(d){b[d]=c?a.CSS.supports("touch-action",d):!0}),b}function Y(a){this.options=la({},this.defaults,a||{}),this.id=v(),this.manager=null,this.options.enable=l(this.options.enable,!0),this.state=nb,this.simultaneous={},this.requireFail=[]}function Z(a){return a&sb?"cancel":a&qb?"end":a&pb?"move":a&ob?"start":""}function $(a){return a==Ma?"down":a==La?"up":a==Ja?"left":a==Ka?"right":""}function _(a,b){var c=b.manager;return c?c.get(a):a}function aa(){Y.apply(this,arguments)}function ba(){aa.apply(this,arguments),this.pX=null,this.pY=null}function ca(){aa.apply(this,arguments)}function da(){Y.apply(this,arguments),this._timer=null,this._input=null}function ea(){aa.apply(this,arguments)}function fa(){aa.apply(this,arguments)}function ga(){Y.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ha(a,b){return b=b||{},b.recognizers=l(b.recognizers,ha.defaults.preset),new ia(a,b)}function ia(a,b){this.options=la({},ha.defaults,b||{}),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=a,this.input=y(this),this.touchAction=new V(this,this.options.touchAction),ja(this,!0),g(this.options.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function ja(a,b){var c=a.element;if(c.style){var d;g(a.options.cssProps,function(e,f){d=u(c.style,f),b?(a.oldCssProps[d]=c.style[d],c.style[d]=e):c.style[d]=a.oldCssProps[d]||""}),b||(a.oldCssProps={})}}function ka(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var la,ma=["","webkit","Moz","MS","ms","o"],na=b.createElement("div"),oa="function",pa=Math.round,qa=Math.abs,ra=Date.now;la="function"!=typeof Object.assign?function(a){if(a===d||null===a){throw new TypeError("Cannot convert undefined or null to object")}for(var b=Object(a),c=1;c<arguments.length;c++){var e=arguments[c];if(e!==d&&null!==e){for(var f in e){e.hasOwnProperty(f)&&(b[f]=e[f])}}}return b}:Object.assign;var sa=h(function(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;){(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++}return a},"extend","Use `assign`."),ta=h(function(a,b){return sa(a,b,!0)},"merge","Use `assign`."),ua=1,va=/mobile|tablet|ip(ad|hone|od)|android/i,wa="ontouchstart" in a,xa=u(a,"PointerEvent")!==d,ya=wa&&va.test(navigator.userAgent),za="touch",Aa="pen",Ba="mouse",Ca="kinect",Da=25,Ea=1,Fa=2,Ga=4,Ha=8,Ia=1,Ja=2,Ka=4,La=8,Ma=16,Na=Ja|Ka,Oa=La|Ma,Pa=Na|Oa,Qa=["x","y"],Ra=["clientX","clientY"];x.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(w(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(w(this.element),this.evWin,this.domHandler)}};var Sa={mousedown:Ea,mousemove:Fa,mouseup:Ga},Ta="mousedown",Ua="mousemove mouseup";i(L,x,{handler:function(a){var b=Sa[a.type];b&Ea&&0===a.button&&(this.pressed=!0),b&Fa&&1!==a.which&&(b=Ga),this.pressed&&(b&Ga&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:Ba,srcEvent:a}))}});var Va={pointerdown:Ea,pointermove:Fa,pointerup:Ga,pointercancel:Ha,pointerout:Ha},Wa={2:za,3:Aa,4:Ba,5:Ca},Xa="pointerdown",Ya="pointermove pointerup pointercancel";a.MSPointerEvent&&!a.PointerEvent&&(Xa="MSPointerDown",Ya="MSPointerMove MSPointerUp MSPointerCancel"),i(M,x,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Va[d],f=Wa[a.pointerType]||a.pointerType,g=f==za,h=r(b,a.pointerId,"pointerId");e&Ea&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Ga|Ha)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Za={touchstart:Ea,touchmove:Fa,touchend:Ga,touchcancel:Ha},$a="touchstart",_a="touchstart touchmove touchend touchcancel";i(N,x,{handler:function(a){var b=Za[a.type];if(b===Ea&&(this.started=!0),this.started){var c=O.call(this,a,b);b&(Ga|Ha)&&c[0].length-c[1].length===0&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:za,srcEvent:a})}}});var ab={touchstart:Ea,touchmove:Fa,touchend:Ga,touchcancel:Ha},bb="touchstart touchmove touchend touchcancel";i(P,x,{handler:function(a){var b=ab[a.type],c=Q.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:za,srcEvent:a})}});var cb=2500,db=25;i(R,x,{handler:function(a,b,c){var d=c.pointerType==za,e=c.pointerType==Ba;if(!(e&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d){S.call(this,b,c)}else{if(e&&U.call(this,c)){return}}this.callback(a,b,c)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var eb=u(na.style,"touchAction"),fb=eb!==d,gb="compute",hb="auto",ib="manipulation",jb="none",kb="pan-x",lb="pan-y",mb=X();V.prototype={set:function(a){a==gb&&(a=this.compute()),fb&&this.manager.element.style&&mb[a]&&(this.manager.element.style[eb]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){k(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),W(a.join(" "))},preventDefaults:function(a){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented){return void b.preventDefault()}var d=this.actions,e=p(d,jb)&&!mb[jb],f=p(d,lb)&&!mb[lb],g=p(d,kb)&&!mb[kb];if(e){var h=1===a.pointers.length,i=a.distance<2,j=a.deltaTime<250;if(h&&i&&j){return}}return g&&f?void 0:e||f&&c&Na||g&&c&Oa?this.preventSrc(b):void 0},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var nb=1,ob=2,pb=4,qb=8,rb=qb,sb=16,tb=32;Y.prototype={defaults:{},set:function(a){return la(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this)){return this}var b=this.simultaneous;return a=_(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=_(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this)){return this}var b=this.requireFail;return a=_(a,this),-1===r(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this)){return this}a=_(a,this);var b=r(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return !!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(b,a)}var c=this,d=this.state;qb>d&&b(c.options.event+Z(d)),b(c.options.event),a.additionalEvent&&b(a.additionalEvent),d>=qb&&b(c.options.event+Z(d))},tryEmit:function(a){return this.canEmit()?this.emit(a):void (this.state=tb)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(tb|nb))){return !1}a++}return !0},recognize:function(a){var b=la({},a);return k(this.options.enable,[this,b])?(this.state&(rb|sb|tb)&&(this.state=nb),this.state=this.process(b),void (this.state&(ob|pb|qb|sb)&&this.tryEmit(b))):(this.reset(),void (this.state=tb))},process:function(a){},getTouchAction:function(){},reset:function(){}},i(aa,Y,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(ob|pb),e=this.attrTest(a);return d&&(c&Ha||!e)?b|sb:d||e?c&Ga?b|qb:b&ob?b|pb:ob:tb}}),i(ba,aa,{defaults:{event:"pan",threshold:10,pointers:1,direction:Pa},getTouchAction:function(){var a=this.options.direction,b=[];return a&Na&&b.push(lb),a&Oa&&b.push(kb),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Na?(e=0===f?Ia:0>f?Ja:Ka,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Ia:0>g?La:Ma,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return aa.prototype.attrTest.call(this,a)&&(this.state&ob||!(this.state&ob)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=$(a.direction);b&&(a.additionalEvent=this.options.event+b),this._super.emit.call(this,a)}}),i(ca,aa,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[jb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&ob)},emit:function(a){if(1!==a.scale){var b=a.scale<1?"in":"out";a.additionalEvent=this.options.event+b}this._super.emit.call(this,a)}}),i(da,Y,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[hb]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Ga|Ha)&&!f){this.reset()}else{if(a.eventType&Ea){this.reset(),this._timer=e(function(){this.state=rb,this.tryEmit()},b.time,this)}else{if(a.eventType&Ga){return rb}}}return tb},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===rb&&(a&&a.eventType&Ga?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=ra(),this.manager.emit(this.options.event,this._input)))}}),i(ea,aa,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[jb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&ob)}}),i(fa,aa,{defaults:{event:"swipe",threshold:10,velocity:0.3,direction:Na|Oa,pointers:1},getTouchAction:function(){return ba.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Na|Oa)?b=a.overallVelocity:c&Na?b=a.overallVelocityX:c&Oa&&(b=a.overallVelocityY),this._super.attrTest.call(this,a)&&c&a.offsetDirection&&a.distance>this.options.threshold&&a.maxPointers==this.options.pointers&&qa(b)>this.options.velocity&&a.eventType&Ga},emit:function(a){var b=$(a.offsetDirection);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),i(ga,Y,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ib]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&Ea&&0===this.count){return this.failTimeout()}if(d&&f&&c){if(a.eventType!=Ga){return this.failTimeout()}var g=this.pTime?a.timeStamp-this.pTime<b.interval:!0,h=!this.pCenter||H(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;var i=this.count%b.taps;if(0===i){return this.hasRequireFailures()?(this._timer=e(function(){this.state=rb,this.tryEmit()},b.interval,this),ob):rb}}return tb},failTimeout:function(){return this._timer=e(function(){this.state=tb},this.options.interval,this),tb},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==rb&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ha.VERSION="2.0.8",ha.defaults={domEvents:!1,touchAction:gb,enable:!0,inputTarget:null,inputClass:null,preset:[[ea,{enable:!1}],[ca,{enable:!1},["rotate"]],[fa,{direction:Na}],[ba,{direction:Na},["swipe"]],[ga],[ga,{event:"doubletap",taps:2},["tap"]],[da]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ub=1,vb=2;ia.prototype={set:function(a){return la(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?vb:ub},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&rb)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;){c=d[f],b.stopped===vb||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(ob|pb|qb)&&(e=b.curRecognizer=c),f++}}},get:function(a){if(a instanceof Y){return a}for(var b=this.recognizers,c=0;c<b.length;c++){if(b[c].options.event==a){return b[c]}}return null},add:function(a){if(f(a,"add",this)){return this}var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this)){return this}if(a=this.get(a)){var b=this.recognizers,c=r(b,a);-1!==c&&(b.splice(c,1),this.touchAction.update())}return this},on:function(a,b){if(a!==d&&b!==d){var c=this.handlers;return g(q(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this}},off:function(a,b){if(a!==d){var c=this.handlers;return g(q(a),function(a){b?c[a]&&c[a].splice(r(c[a],b),1):delete c[a]}),this}},emit:function(a,b){this.options.domEvents&&ka(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;){c[d](b),d++}}},destroy:function(){this.element&&ja(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},la(ha,{INPUT_START:Ea,INPUT_MOVE:Fa,INPUT_END:Ga,INPUT_CANCEL:Ha,STATE_POSSIBLE:nb,STATE_BEGAN:ob,STATE_CHANGED:pb,STATE_ENDED:qb,STATE_RECOGNIZED:rb,STATE_CANCELLED:sb,STATE_FAILED:tb,DIRECTION_NONE:Ia,DIRECTION_LEFT:Ja,DIRECTION_RIGHT:Ka,DIRECTION_UP:La,DIRECTION_DOWN:Ma,DIRECTION_HORIZONTAL:Na,DIRECTION_VERTICAL:Oa,DIRECTION_ALL:Pa,Manager:ia,Input:x,TouchAction:V,TouchInput:P,MouseInput:L,PointerEventInput:M,TouchMouseInput:R,SingleTouchInput:N,Recognizer:Y,AttrRecognizer:aa,Tap:ga,Pan:ba,Swipe:fa,Pinch:ca,Rotate:ea,Press:da,on:m,off:n,each:g,merge:ta,extend:sa,assign:la,inherit:i,bindFn:j,prefixed:u});var wb="undefined"!=typeof a?a:"undefined"!=typeof self?self:{};wb.Hammer=ha,"function"==typeof define&&define.amd?define(function(){return ha}):"undefined"!=typeof module&&module.exports?module.exports=ha:a[c]=ha}(window,document,"Hammer");
"use strict";(function(jQueryName,ns,global){var eg;if(!global[ns]){global[ns]={}}eg=global[ns];var $=global[jQueryName];var dependency={jQuery:{url:"http://jquery.com/"},Hammer:{url:"http://hammerjs.github.io/"}};var templateMessage=["[egjs] The {{name}} library must be loaded before {{componentName}}.",'[egjs] For AMD environment (like RequireJS), "{{name}}" must be declared, which is required by {{componentName}}.',"[egjs] The {{index}} argument of {{componentName}} is missing.\r\nDownload {{name}} from [{{url}}].","[egjs] The {{name}} parameter of {{componentName}} is not valid.\r\nPlease check and try again.","[egjs] The {{index}} argument of {{componentName}} is undefined.\r\nPlease check and try again."];var ordinal=["1st","2nd","3rd"];function changeOrdinal(index){return index>2?(index+1)+"th":ordinal[index]}function replaceStr(str,obj){var i;for(i in obj){str=str.replace(new RegExp("{{"+i+"}}","gi"),obj[i])}return str}function checkDependency(componentName,di){var i=0;var l=di.length;var message=[];var paramList=[];var require=global.require;var dependencyInfo;var param;var messageInfo;var isString;var isUndefined;var registedDependency;var isNotGlobal;var specifiedAMD;for(;i<l;i++){param=di[i];messageInfo={index:changeOrdinal(i),name:param,componentName:componentName};isString=typeof di[i]==="string";isUndefined=di[i]===undefined;registedDependency=isString&&(dependencyInfo=dependency[di[i]]);isNotGlobal=isString&&dependencyInfo&&!global[di[i]];specifiedAMD=isNotGlobal&&require&&require.specified&&require.specified(di[i]);if(!isString&&!isUndefined){paramList.push(param);continue}if(specifiedAMD&&require.defined(di[i])){param=require(di[i]);paramList.push(param);continue}if(specifiedAMD&&!require.defined(di[i])){messageInfo.url=dependencyInfo.url;message.push(replaceStr(templateMessage[0],messageInfo));continue}if(isNotGlobal&&require&&require.specified&&!require.specified(di[i])){messageInfo.url=dependencyInfo.url;message.push(replaceStr(templateMessage[1],messageInfo));continue}if(isNotGlobal&&!require){messageInfo.url=dependencyInfo.url;message.push(replaceStr(templateMessage[2],messageInfo));continue}if(registedDependency&&global[di[i]]){param=global[di[i]];paramList.push(param);continue}if(isString&&!dependencyInfo){message.push(replaceStr(templateMessage[3],messageInfo));continue}if(di[i]===undefined){message.push(replaceStr(templateMessage[4],messageInfo));continue}}return[paramList,message]}function capitalizeFirstLetter(str){return str.charAt(0).toUpperCase()+str.slice(1)}function plugin(name){var upperCamelCase=capitalizeFirstLetter(name);var events;var special;var componentMethodNames;if(!(eg[upperCamelCase]&&eg[upperCamelCase].prototype&&eg[upperCamelCase].prototype._events)){return false}if($.fn[name]){throw new Error("The name '"+upperCamelCase+"' has already been used and registered as plugin. Try with different one.")}$.fn[name]=function(options){var ins;var result;if(typeof options==="string"){ins=this.data(ns+"-"+name);if(options==="instance"){return ins}else{result=ins[options].apply(ins,Array.prototype.slice.call(arguments,1));return result===ins?this:result}}if(options===undefined||$.isPlainObject(options)){this.data(ns+"-"+name,new eg[upperCamelCase](this,options||{},name+":"))}return this};componentMethodNames={trigger:"trigger",add:"on",remove:"off"};events=eg[upperCamelCase].prototype._events();for(var i in events){special=$.event.special[name+":"+events[i]]={};special.setup=function(){return true};for(var j in componentMethodNames){special[j]=(function(componentMethodName){return function(event,param){$(this).data(ns+"-"+name)[componentMethodName](event.type,componentMethodName==="trigger"?param:event.handler);return false}})(componentMethodNames[j])}}}var warn=function(msg){if(global.console&&global.console.warn){warn=function(msg){global.console.warn(msg)}}else{warn=function(msg){}}warn(msg)};if(!eg.module){eg.module=function(name,di,fp){var result=checkDependency(name,di);if(result[1].length){warn(result[1].join("\r\n"))}else{fp.apply(global,result[0]);plugin(name)}}}})("jQuery","eg",window);eg.module("agent",[eg],function(ns){var userAgentRules={browser:[{criteria:"PhantomJS",identity:"PhantomJS"},{criteria:/Edge/,identity:"Edge",versionSearch:"Edge"},{criteria:/MSIE|Trident|Windows Phone/,identity:"IE",versionSearch:"IEMobile|MSIE|rv"},{criteria:/SAMSUNG|SamsungBrowser/,identity:"SBrowser",versionSearch:"Chrome"},{criteria:/Chrome|CriOS/,identity:"Chrome"},{criteria:/Android/,identity:"default"},{criteria:/iPhone|iPad/,identity:"Safari",versionSearch:"Version"},{criteria:"Apple",identity:"Safari",versionSearch:"Version"},{criteria:"Firefox",identity:"Firefox"}],os:[{criteria:/Windows Phone|Windows NT/,identity:"Window",versionSearch:"Windows Phone|Windows NT"},{criteria:"Windows 2000",identity:"Window",versionAlias:"5.0"},{criteria:/iPhone|iPad/,identity:"iOS",versionSearch:"iPhone OS|CPU OS"},{criteria:"Mac",versionSearch:"OS X",identity:"MAC"},{criteria:/Android/,identity:"Android"}],webview:[{criteria:/iPhone|iPad/,browserVersionSearch:"Version",webviewBrowserVersion:/-1/},{criteria:/iPhone|iPad|Android/,webviewToken:/NAVER|DAUM|; wv/}],defaultString:{browser:{version:"-1",name:"default"},os:{version:"-1",name:"unknown"}}};var UA;function getBrowserName(browserRules){return getIdentityStringFromArray(browserRules,userAgentRules.defaultString.browser)}function getBrowserVersion(browserName){var browserVersion;var versionToken;if(!browserName){return}versionToken=getBrowserRule(browserName).versionSearch||browserName;browserVersion=extractBrowserVersion(versionToken,UA);return browserVersion}function extractBrowserVersion(versionToken,ua){var browserVersion=userAgentRules.defaultString.browser.version;var versionIndex;var versionTokenIndex;var versionRegexResult=(new RegExp("("+versionToken+")","i")).exec(ua);if(!versionRegexResult){return browserVersion}versionTokenIndex=versionRegexResult.index;versionToken=versionRegexResult[0];if(versionTokenIndex>-1){versionIndex=versionTokenIndex+versionToken.length+1;browserVersion=ua.substring(versionIndex).split(" ")[0].replace(/_/g,".").replace(/\;|\)/g,"")}return browserVersion}function getOSName(osRules){return getIdentityStringFromArray(osRules,userAgentRules.defaultString.os)}function getOSVersion(osName){var ua=UA;var osRule=getOSRule(osName)||{};var defaultOSVersion=userAgentRules.defaultString.os.version;var osVersion;var osVersionToken;var osVersionRegex;var osVersionRegexResult;if(!osName){return}if(osRule.versionAlias){return osRule.versionAlias}osVersionToken=osRule.versionSearch||osName;osVersionRegex=new RegExp("("+osVersionToken+")\\s([\\d_\\.]+|\\d_0)","i");osVersionRegexResult=osVersionRegex.exec(ua);if(osVersionRegexResult){osVersion=osVersionRegex.exec(ua)[2].replace(/_/g,".").replace(/\;|\)/g,"")}return osVersion||defaultOSVersion}function getOSRule(osName){return getRule(userAgentRules.os,osName)}function getBrowserRule(browserName){return getRule(userAgentRules.browser,browserName)}function getRule(rules,targetIdentity){var criteria;var identityMatched;for(var i=0,rule;rule=rules[i];i++){criteria=rule.criteria;identityMatched=new RegExp(rule.identity,"i").test(targetIdentity);if(criteria?identityMatched&&isMatched(UA,criteria):identityMatched){return rule}}}function getIdentityStringFromArray(rules,defaultStrings){for(var i=0,rule;rule=rules[i];i++){if(isMatched(UA,rule.criteria)){return rule.identity||defaultStrings.name}}return defaultStrings.name}function isMatched(base,target){return target&&target.test?!!target.test(base):base.indexOf(target)>-1}function isWebview(){var ua=UA;var webviewRules=userAgentRules.webview;var ret=false;var browserVersion;for(var i=0,rule;rule=webviewRules[i];i++){if(!isMatched(ua,rule.criteria)){continue}browserVersion=extractBrowserVersion(rule.browserVersionSearch,ua);if(isMatched(ua,rule.webviewToken)||isMatched(browserVersion,rule.webviewBrowserVersion)){ret=true;break}}return ret}ns.Agent={create:function(useragent){this.ua=UA=useragent;var agent={os:{},browser:{}};agent.browser.name=getBrowserName(userAgentRules.browser);agent.browser.version=getBrowserVersion(agent.browser.name);agent.os.name=getOSName(userAgentRules.os);agent.os.version=getOSVersion(agent.os.name);agent.browser.webview=isWebview();agent.browser.name=agent.browser.name.toLowerCase();agent.os.name=agent.os.name.toLowerCase();return agent}}});eg.module("raf",[eg,window],function(ns,global){var raf=global.requestAnimationFrame||global.webkitRequestAnimationFrame||global.mozRequestAnimationFrame||global.msRequestAnimationFrame;var caf=global.cancelAnimationFrame||global.webkitCancelAnimationFrame||global.mozCancelAnimationFrame||global.msCancelAnimationFrame;(function(){if("performance" in global===false){global.performance={}}global.Date.now=(global.Date.now||function(){return new global.Date().getTime()});if("now" in global.performance===false){var nowOffset=global.Date.now();if(global.performance.timing&&global.performance.timing.navigationStart){nowOffset=global.performance.timing.navigationStart}global.performance.now=function now(){return global.Date.now()-nowOffset}}})();if(raf&&!caf){var keyInfo={};var oldraf=raf;raf=function(callback){function wrapCallback(timestamp){if(keyInfo[key]){callback(timestamp)}}var key=oldraf(wrapCallback);keyInfo[key]=true;return key};caf=function(key){delete keyInfo[key]}}else{if(!(raf&&caf)){raf=function(callback){return global.setTimeout(function(){callback(global.performance.now())},16)};caf=global.clearTimeout}}ns.requestAnimationFrame=function(fp){return raf(fp)};ns.cancelAnimationFrame=function(key){caf(key)}});eg.module("eg",["jQuery",eg,window,eg.Agent],function($,ns,global,Agent){function resultCache(scope,name,param,defaultValue){var method=scope.hook[name];if(method){defaultValue=method.apply(scope,param)}scope[name]=function(){var method=scope.hook[name];if(method){return method.apply(scope,param)}return defaultValue};return defaultValue}ns.VERSION="1.4.1";ns.hook={};ns.agent=function(){var info=Agent.create(global.navigator.userAgent);return resultCache(this,"agent",[info],info)};ns.translate=function(x,y,isHA){isHA=isHA||false;return"translate"+(isHA?"3d(":"(")+x+","+y+(isHA?",0)":")")};ns.isHWAccelerable=function(){var result=false;var agent=ns.agent();var osVersion=agent.os.version;var browser=agent.browser.name;var browserVersion=agent.browser.version;var useragent;if(browser.indexOf("chrome")!==-1){result=browserVersion>="25"}else{if(/ie|edge|firefox|safari|inapp/.test(browser)){result=true}else{if(agent.os.name.indexOf("android")!==-1){useragent=(Agent.ua.match(/\(.*\)/)||[null])[0];result=(osVersion>="4.1.0"&&!/EK-GN120|SM-G386F/.test(useragent))||(osVersion>="4.0.3"&&/SHW-|SHV-|GT-|SCH-|SGH-|SPH-|LG-F160|LG-F100|LG-F180|LG-F200|EK-|IM-A|LG-F240|LG-F260/.test(useragent)&&!/SHW-M420|SHW-M200|GT-S7562/.test(useragent))}}}return resultCache(this,"isHWAccelerable",[result,agent],result)};ns.isTransitional=function(){var result=false;var agent=ns.agent();var browser=agent.browser.name;if(/chrome|firefox|sbrowser/.test(browser)){result=true}else{switch(agent.os.name){case"ios":result=/safari|inapp/.test(browser)&&parseInt(agent.os.version,10)<6;break;case"window":result=/safari/.test(browser)||(/ie/.test(browser)&&parseInt(agent.browser.nativeVersion,10)>=10);break;default:result=/safari/.test(browser);break}}return resultCache(this,"isTransitional",[result,agent],result)};ns._hasClickBug=function(){var agent=ns.agent();var result=agent.browser.name==="safari";return resultCache(this,"_hasClickBug",[result,agent],result)};$&&$.extend($.easing,{easeOutCubic:function(p){return 1-Math.pow(1-p,3)}})});eg.module("class",[eg],function(ns){ns.Class=function(def){var typeClass=function typeClass(){if(typeof def.construct==="function"){def.construct.apply(this,arguments)}};typeClass.prototype=def;typeClass.prototype.instance=function(){return this};typeClass.prototype.constructor=typeClass;return typeClass};ns.Class.extend=function(superClass,def){var extendClass=function extendClass(){superClass.apply(this,arguments);if(typeof def.construct==="function"){def.construct.apply(this,arguments)}};var ExtProto=function(){};ExtProto.prototype=superClass.prototype;var extProto=new ExtProto();for(var i in def){extProto[i]=def[i]}extProto.constructor=extendClass;extendClass.prototype=extProto;return extendClass}});eg.module("component",[eg],function(ns){ns.Component=ns.Class({construct:function(){this.eventHandler={};this.options={}},option:function(key,value){if(arguments.length>=2){this.options[key]=value;return this}if(typeof key==="string"){return this.options[key]}if(arguments.length===0){return this.options}for(var i in key){this.options[i]=key[i]}return this},trigger:function(eventName,customEvent){customEvent=customEvent||{};var handlerList=this.eventHandler[eventName]||[];var hasHandlerList=handlerList.length>0;if(!hasHandlerList){return true}handlerList=handlerList.concat();customEvent.eventType=eventName;var isCanceled=false;var arg=[customEvent];var i;var len;var handler;customEvent.stop=function(){isCanceled=true};if((len=arguments.length)>2){arg=arg.concat(Array.prototype.slice.call(arguments,2,len))}for(i=0;handler=handlerList[i];i++){handler.apply(this,arg)}return !isCanceled},hasOn:function(eventName){return !!this.eventHandler[eventName]},on:function(eventName,handlerToAttach){if(typeof eventName==="object"&&typeof handlerToAttach==="undefined"){var eventHash=eventName;var i;for(i in eventHash){this.on(i,eventHash[i])}return this}else{if(typeof eventName==="string"&&typeof handlerToAttach==="function"){var handlerList=this.eventHandler[eventName];if(typeof handlerList==="undefined"){handlerList=this.eventHandler[eventName]=[]}handlerList.push(handlerToAttach)}}return this},off:function(eventName,handlerToDetach){if(arguments.length===0){this.eventHandler={};return this}if(typeof handlerToDetach==="undefined"){if(typeof eventName==="string"){this.eventHandler[eventName]=undefined;return this}else{var eventHash=eventName;for(var i in eventHash){this.off(i,eventHash[i])}return this}}var handlerList=this.eventHandler[eventName];if(handlerList){var k;var handlerFunction;for(k=0,handlerFunction;handlerFunction=handlerList[k];k++){if(handlerFunction===handlerToDetach){handlerList=handlerList.splice(k,1);break}}}return this}})});eg.module("rotate",["jQuery",eg,window,document],function($,ns,global,doc){var beforeScreenWidth=-1;var beforeVertical=null;var rotateTimer=null;var agent=(function(){var ua=global.navigator.userAgent;var match=ua.match(/(iPhone OS|CPU OS|Android)\s([^\s;-]+)/);var res={os:"",version:""};if(match){res.os=match[1].replace(/(?:CPU|iPhone)\sOS/,"ios").toLowerCase();res.version=match[2].replace(/\D/g,".")}return res})();var isMobile=/android|ios/.test(agent.os);if(!isMobile){ns.isPortrait=function(){return false};return}var orientationChange=function(){var type;if((agent.os==="android"&&agent.version==="2.1")){type="resize"}else{type="onorientationchange" in global?"orientationchange":"resize"}orientationChange=function(){return type};return type};function isVertical(){var eventName=orientationChange();var screenWidth;var degree;var vertical;if(eventName==="resize"){screenWidth=doc.documentElement.clientWidth;if(beforeScreenWidth===-1){vertical=screenWidth<doc.documentElement.clientHeight}else{if(screenWidth<beforeScreenWidth){vertical=true}else{if(screenWidth===beforeScreenWidth){vertical=beforeVertical}else{vertical=false}}}}else{degree=global.orientation;if(degree===0||degree===180){vertical=true}else{if(degree===90||degree===-90){vertical=false}}}return vertical}function triggerRotate(){var currentVertical=isVertical();if(isMobile){if(beforeVertical!==currentVertical){beforeVertical=currentVertical;beforeScreenWidth=doc.documentElement.clientWidth;$(global).trigger("rotate",{isVertical:beforeVertical})}}}function handler(e){var eventName=orientationChange();var delay;var screenWidth;if(eventName==="resize"){global.setTimeout(function(){triggerRotate()},0)}else{delay=300;if(agent.os==="android"){screenWidth=doc.documentElement.clientWidth;if(e.type==="orientationchange"&&screenWidth===beforeScreenWidth){global.setTimeout(function(){handler(e)},500);return false}}global.clearTimeout(rotateTimer);rotateTimer=global.setTimeout(function(){triggerRotate()},delay)}}$.event.special.rotate={setup:function(){beforeVertical=isVertical();beforeScreenWidth=doc.documentElement.clientWidth;$(global).on(orientationChange(),handler)},teardown:function(){$(global).off(orientationChange(),handler)},trigger:function(e){e.isVertical=beforeVertical}};ns.isPortrait=isVertical;return{orientationChange:orientationChange,isVertical:isVertical,triggerRotate:triggerRotate,handler:handler}});eg.module("scrollEnd",["jQuery",eg,window],function($,ns,global){var scrollEndTimer;var userAgent=global.navigator.userAgent;var rotateFlag=false;var CHROME=3;var TIMERBASE=2;var TOUCHBASE=1;var SCROLLBASE=0;var latency=250;var detectType=getDetectType(userAgent);$.event.special.scrollend={setup:function(){attachEvent()},teardown:function(){removeEvent()}};function getDetectType(userAgent){var deviceName;var osVersion;var retValue=TIMERBASE;var matchedDevice=userAgent.match(/iPhone|iPad|Android/);var webviewToken=/NAVER|DAUM|; wv/;var webviewToken2=/Version/;if(matchedDevice!==null&&!webviewToken.test(userAgent)){deviceName=matchedDevice[0];osVersion=userAgent.match(/\s(\d{1,2})_\d/);if(deviceName!=="Android"&&webviewToken2.test(userAgent)&&osVersion&&parseInt(osVersion[1],10)<=7){retValue=SCROLLBASE}else{if(deviceName==="Android"){osVersion=userAgent.match(/Android\b(.*?);/);if(!/Chrome/.test(userAgent)&&osVersion&&parseFloat(osVersion,10)<=2.3){retValue=SCROLLBASE}}}}return retValue}function attachEvent(){$(global).on("scroll",scroll);$(global).on("orientationchange",onOrientationchange)}function onOrientationchange(){rotateFlag=true}function scroll(){if(rotateFlag){rotateFlag=false;return}switch(detectType){case SCROLLBASE:triggerScrollEnd();break;case TIMERBASE:triggerScrollEndAlways();break}}function triggerScrollEnd(){$(global).trigger("scrollend",{top:global.pageYOffset,left:global.pageXOffset})}function triggerScrollEndAlways(){clearTimeout(scrollEndTimer);scrollEndTimer=setTimeout(function(){if(rotateFlag){rotateFlag=false;return}triggerScrollEnd()},latency)}function removeEvent(){$(global).off("scroll",scroll);$(global).off("orientationchange",onOrientationchange)}return{detectType:detectType,getDetectType:getDetectType,CHROME:CHROME,TIMERBASE:TIMERBASE,TOUCHBASE:TOUCHBASE,SCROLLBASE:SCROLLBASE}});eg.module("transform",["jQuery",window],function($){function getConverted(val,base){var ret=val;var num=val.match(/((-|\+)*[0-9]+)%/);if(num&&num.length>=1){ret=base*(parseFloat(num[1])/100)+"px"}else{if(val.indexOf("px")===-1){ret=val+"px"}}return ret}function correctUnit(transform,width,height){var m;var ret="";var arr=transform.split(")");for(var i=0,len=arr.length-1;i<len;i++){var name=arr[i];if((m=name.match(/(translate([XYZ]|3d)?|rotate)\(([^)]*)/))&&m.length>1){if(m[1]==="rotate"){if(m[3].indexOf("deg")===-1){name=m[1]+"("+m[3]+"deg"}}else{switch(m[2]){case"X":name=m[1]+"("+getConverted(m[3],width);break;case"Y":name=m[1]+"("+getConverted(m[3],height);break;case"Z":break;default:var nums=m[3].split(",");var bases=[width,height,100];for(var k=0,l=nums.length;k<l;k++){nums[k]=getConverted(nums[k],bases[k])}name=m[1]+"("+nums.join(",");break}}}name=" "+name+")";ret+=name}ret=ret.replace("%","").replace("+=","");return ret}function toParsedFloat(val){var m=val.match(/((-|\+)*[\d|\.]+)(px|deg|rad)*/);if(m&&m.length>=1){return{num:parseFloat(m[1]),unit:m[3]}}}function getTransformGenerateFunction(transform){var splitted=transform.split(")");var list=[];for(var i=0,len=splitted.length-1;i<len;i++){var parsed=parseStyle(splitted[i]);parsed[1]=$.map(parsed[1],toParsedFloat);list.push(parsed)}return function transformByPos(pos){var transform="";var defaultVal=0;$.each(list,function(i){if(list[i][0].indexOf("scale")>=0){defaultVal=1}else{defaultVal=0}var valStr=$.map(list[i][1],function(value){var val=value.num;defaultVal===1&&(val=val-1);return(defaultVal+val*pos)+(value.unit||"")}).join(",");transform+=list[i][0]+"("+valStr+") "});return transform}}function rateFn(element,startTf,endTf){var isRelative=endTf.indexOf("+=")>=0;var start;var end;var basePos;endTf=correctUnit(endTf,parseFloat($.css(element,"width"))||0,parseFloat($.css(element,"height"))||0);if(isRelative){start=(!startTf||startTf==="none")?"matrix(1, 0, 0, 1, 0, 0)":startTf;end=getTransformGenerateFunction(endTf)}else{start=toMatrixArray(startTf);basePos=toMatrixArray("none");if(start[1].length<basePos[1].length){start=toMatrix3d(start)}else{if(start[1].length>basePos[1].length){basePos=toMatrix3d(basePos)}}end=getTransformGenerateFunction(endTf)}return function(pos){var result=[];var ret="";if(isRelative){return start+end(pos)}if(pos===1){ret=data2String(basePos)}else{for(var i=0,s,e,l=start[1].length;i<l;i++){s=parseFloat(start[1][i]);e=parseFloat(basePos[1][i]);result.push(s+(e-s)*pos)}ret=data2String([start[0],result])}return ret+end(pos)}}function data2String(property){var name;var tmp=[];if($.isArray(property)){name=property[0];return name+"("+property[1].join(unit(name)+",")+unit(name)+")"}else{for(name in property){tmp.push(name)}return $.map(tmp,function(v){return v+"("+property[v]+unit(v)+")"}).join(" ")}}function unit(name){return name.indexOf("translate")>=0?"px":name.indexOf("rotate")>=0?"deg":""}function parseStyle(property){var m=property.match(/(\b\w+?)\((\s*[^\)]+)/);var name;var value;var result=["",""];if(m&&m.length>2){name=m[1];value=m[2].split(",");value=$.map(value,function(v){return $.trim(v)});result=[$.trim(name),value]}return result}function toMatrixArray(matrixStr){var matched;if(!matrixStr||matrixStr==="none"){return["matrix",["1","0","0","1","0","0"]]}matrixStr=matrixStr.replace(/\s/g,"");matched=matrixStr.match(/(matrix)(3d)*\((.*)\)/);return[matched[1]+(matched[2]||""),matched[3].split(",")]}function toMatrix3d(matrix){var name=matrix[0];var val=matrix[1];if(name==="matrix3d"){return matrix}return[name+"3d",[val[0],val[1],"0","0",val[2],val[3],"0","0","0","0","1","0",val[4],val[5],"0","1"]]}$.fx.step.transform=function(fx){fx.rateFn=fx.rateFn||rateFn(fx.elem,fx.start,fx.end);$.style(fx.elem,"transform",fx.rateFn(fx.pos))};return{toMatrix:toMatrixArray,toMatrix3d:toMatrix3d}});eg.module("cssPrefix",["jQuery",document],function($,doc){if(!$.cssHooks){throw (new Error("jQuery 1.4.3+ is needed for this plugin to work"))}var matchTest=($.fn.jquery.match(/^\d\.\d+/)||[])[0];if(!matchTest||+matchTest.replace(/\D/,"")>=18){return}var cssPrefixes=["Webkit","Moz","O","ms"];var acts=["transitionProperty","transitionDuration","transition","transform","transitionTimingFunction"];var vendorPrefix=(function(){var bodyStyle=(doc.head||doc.getElementsByTagName("head")[0]).style;for(var i=0,len=cssPrefixes.length;i<len;i++){if(cssPrefixes[i]+"Transition" in bodyStyle){return cssPrefixes[i]}}})();if(!vendorPrefix){return}var setCssHooks=function(prop){var upperProp=prop.charAt(0).toUpperCase()+prop.slice(1);var vendorProp=vendorPrefix+upperProp;var getVendorProp=vendorPrefix==="ms"?"Ms"+upperProp:vendorProp;$.cssHooks[upperProp]=$.cssHooks[vendorPrefix.toLowerCase()+upperProp]=$.cssHooks[prop]={get:function(elem,computed){return computed?$.css(elem,getVendorProp):elem.style[vendorProp]},set:function(elem,value){elem.style[vendorProp]=value}}};for(var n=0,actsLen=acts.length;n<actsLen;n++){setCssHooks(acts[n])}return{vendorPrefix:vendorPrefix,setCssHooks:setCssHooks}});eg.module("pauseResume",["jQuery"],function($){var animateFn=$.fn.animate;var stopFn=$.fn.stop;var delayFn=$.fn.delay;var uuid=1;function AniProperty(type,el,prop,optall){this.el=el;this.opt=optall;this.start=-1;this.elapsed=0;this.paused=false;this.uuid=uuid++;this.easingNames=[];this.prop=prop;this.type=type}function generateAbsoluteValMaker(prevValue,propName,sign){return function absoluteValMaker(match){if(!prevValue||prevValue==="auto"){prevValue=0}else{prevValue=parseFloat(prevValue)}return prevValue+(match*sign)}}AniProperty.prototype.init=function(){var currValue;this.start=$.now();this.elapsed=0;for(var propName in this.prop){var propValue=this.prop[propName];var markIndex;var sign;if(propName==="transform"){continue}if(typeof propValue!=="string"||(markIndex=propValue.search(/[+|-]=/))<0){continue}sign=propValue.charAt(markIndex)==="-"?-1:1;currValue=$.css(this.el,propName);this.prop[propName]=propValue.replace(/([-|+])*([\d|\.])+/g,generateAbsoluteValMaker(currValue,propName,sign)).replace(/[-|+]+=/g,"")}};AniProperty.prototype.addEasingFn=function(easingName){this.easingNames.push(easingName)};AniProperty.prototype.clearEasingFn=function(){var easing;while(easing=this.easingNames.shift()){delete $.easing[easing]}this.easingNames=[]};function addAniProperty(type,el,prop,optall){var newProp;newProp=new AniProperty(type,el,prop,optall);el.__aniProps=el.__aniProps||[];if(el.__aniProps.length===0){newProp.init()}el.__aniProps.push(newProp)}function removeAniProperty(el){var removeProp=el.__aniProps.shift();removeProp&&removeProp.clearEasingFn();el.__aniProps[0]&&el.__aniProps[0].init()}$.fn.animate=function(prop,speed,easing,callback){return this.each(function(){var optall=$.speed(speed,easing,callback);optall.complete=function(){prepareNextAniProp(this)};addAniProperty("animate",this,prop,optall);animateFn.call($(this),prop,optall)})};function getStatus(el){if(!el.__aniProps||el.__aniProps.length===0){return"empty"}return el.__aniProps[0].paused?"paused":"inprogress"}$.fn.delay=function(time,type){var t;var isCallByResume=arguments[2];if(type&&type!=="fx"){return delayFn.call(this,time,type)}t=parseInt(time,10);t=isNaN(t)?0:t;return this.each(function(){if(!isCallByResume){addAniProperty("delay",this,null,{duration:t})}var self=this;delayFn.call($(this),time).queue(function(next){next();removeAniProperty(self)})})};$.fn.pause=function(){return this.each(function(){var p;var type="fx";if(getStatus(this)!=="inprogress"){return}$.queue(this,type||"fx",[$.noop]);stopFn.call($(this));if(p=this.__aniProps[0]){p.elapsed+=$.now()-p.start;if(p.elapsed>=p.opt.duration){p=prepareNextAniProp(this)}p&&(p.paused=true)}})};function prepareNextAniProp(el){var removeProp;var userCallback;removeProp=el.__aniProps.shift();removeProp.clearEasingFn();userCallback=removeProp.opt.old;if(userCallback&&typeof userCallback==="function"){userCallback.call(el)}el.__aniProps[0]&&el.__aniProps[0].init();return el.__aniProps[0]}$.fn.resume=function(){return this.each(function(){var type="fx";var p;var i;if(getStatus(this)!=="paused"){return}$.queue(this,type||"fx",[]);i=0;while(p=this.__aniProps[i]){if(p.elapsed>0&&p.opt.easing){var resumePercent=p.elapsed/p.opt.duration;var remainPercent=1-resumePercent;var originalEasing=$.easing[p.opt.easing];var startEasingValue=originalEasing(resumePercent);var scale=scaler([startEasingValue,1],[0,1]);var newEasingName=p.opt.easing+"_"+p.uuid;$.easing[newEasingName]=generateNewEasingFunc(resumePercent,remainPercent,scale,originalEasing);p.opt.easing=newEasingName;p.addEasingFn(newEasingName)}p.paused=false;p.opt.duration-=p.elapsed;if(p.opt.duration>0||p.elapsed===0){i===0&&p.init();if(p.type==="delay"){$(this).delay(p.opt.duration,"fx",true)}else{animateFn.call($(this),p.prop,p.opt)}}i++}})};function generateNewEasingFunc(resumePercent,remainPercent,scale,originalEasing){return function easingFunc(percent){var newPercent=resumePercent+remainPercent*percent;return scale(originalEasing(newPercent))}}$.fn.stop=function(type,clearQueue){var clearQ=clearQueue;stopFn.apply(this,arguments);if(typeof type!=="string"){clearQ=type}return this.each(function(){var p;if(getStatus(this)==="empty"){return}if(!clearQ){p=this.__aniProps.shift();p&&p.clearEasingFn()}else{while(p=this.__aniProps.shift()){p.clearEasingFn()}this.__aniProps=[]}})};jQuery.expr.filters.paused=function(elem){return getStatus(elem)==="paused"};function scaler(domain,range){var u=uninterpolateNumber(domain[0],domain[1]);var i=interpolateNumber(range[0],range[1]);return function(x){return i(u(x))}}function interpolateNumber(a,b){a=+a,b=+b;return function(t){return a*(1-t)+b*t}}function uninterpolateNumber(a,b){b=(b-=a=+a)||1/b;return function(x){return(x-a)/b}}});eg.module("persist",["jQuery",eg,window,document],function($,ns,global,doc){var wp=global.performance;var history=global.history;var agent=ns.agent();var isNeeded=(function(){var version=parseFloat(agent.os.version);return !(agent.os.name==="ios"||(agent.os.name==="mac"&&agent.browser.name==="safari")||(agent.os.name==="android"&&(version<=4.3&&agent.browser.webview===true||version<3)))})();var JSON=global.JSON;var CONST_PERSIST="___persist___";var GLOBAL_KEY="KEY"+CONST_PERSIST;var $global=$(global);var isPersisted=$global.attr(CONST_PERSIST)===true;var isBackForwardNavigated=(wp&&wp.navigation&&(wp.navigation.type===(wp.navigation.TYPE_BACK_FORWARD||2)));var isSupportState="replaceState" in history&&"state" in history;var storage=(function(){if(isStorageAvailable(global.sessionStorage)){return global.sessionStorage}else{if(isStorageAvailable(global.localStorage)){return global.localStorage}}})();function isStorageAvailable(storage){if(!storage){return}var TMP_KEY="__tmp__"+CONST_PERSIST;try{storage.setItem(TMP_KEY,CONST_PERSIST);return storage.getItem(TMP_KEY)===CONST_PERSIST}catch(e){return false}}if(!isSupportState&&!storage){return}if(!JSON){console.warn("The JSON object is not supported in your browser.\r\nFor work around use polyfill which can be found at:\r\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON#Polyfill");return}function onPageshow(e){isPersisted=isPersisted||(e.originalEvent&&e.originalEvent.persisted);if(!isPersisted&&isBackForwardNavigated){$global.trigger("persist")}else{reset()}}function reset(){setState(null)}function getState(){var state;var stateStr=storage?storage.getItem(global.location.href+CONST_PERSIST):history.state;if(stateStr===null){return{}}var isValidStateStr=typeof stateStr==="string"&&stateStr.length>0&&stateStr!=="null";var isValidType;try{state=JSON.parse(stateStr);isValidType=!($.type(state)!=="object"||state instanceof Array);if(!isValidStateStr||!isValidType){throw new Error()}}catch(e){warnInvalidStorageValue();state={}}return state}function warnInvalidStorageValue(){console.warn("window.history or session/localStorage has no valid format data to be handled in persist.")}function getStateByKey(key){var result=getState()[key];if(result==="null"||typeof result==="undefined"){result=null}return result}function setState(state){if(storage){if(state){storage.setItem(global.location.href+CONST_PERSIST,JSON.stringify(state))}else{storage.removeItem(global.location.href+CONST_PERSIST)}}else{try{history.replaceState(state===null?null:JSON.stringify(state),doc.title,global.location.href)}catch(e){console.warn(e.message)}}state?$global.attr(CONST_PERSIST,true):$global.attr(CONST_PERSIST,null)}function setStateByKey(key,data){var beforeData=getState();beforeData[key]=data;setState(beforeData)}$.persist=function(state,data){var key;if(typeof state==="string"){key=state}else{key=GLOBAL_KEY;data=arguments.length===1?state:null}if(data||arguments.length===2){setStateByKey(key,data)}return getStateByKey(key)};$.persist.isNeeded=function(){return isNeeded};!isBackForwardNavigated&&reset();$.event.special.persist={setup:function(){$global.on("pageshow",onPageshow)},teardown:function(){$global.off("pageshow",onPageshow)},trigger:function(e){e.state=getStateByKey(GLOBAL_KEY)}};return{isBackForwardNavigated:isBackForwardNavigated,onPageshow:onPageshow,reset:reset,getState:getState,setState:setState,GLOBALKEY:GLOBAL_KEY}});eg.module("visible",["jQuery",eg,document],function($,ns,doc){var EVENTS={change:"change"};ns.Visible=ns.Class.extend(ns.Component,{_events:function(){return EVENTS},construct:function(element,options,_prefix){this._prefix=_prefix||"";this.options={targetClass:"check_visible",expandSize:0};$.extend(this.options,options);this._wrapper=$(element)[0]||doc;if(this._wrapper.nodeType&&this._wrapper.nodeType===1){this._getAreaRect=this._getWrapperRect}else{this._getAreaRect=this._getWindowRect}this._targets=[];this._timer=null;this._supportElementsByClassName=(function(){var dummy=doc.createElement("div");var dummies;if(!dummy.getElementsByClassName){return false}dummies=dummy.getElementsByClassName("dummy");dummy.innerHTML="<span class='dummy'></span>";return dummies.length===1})();this.refresh()},refresh:function(){if(this._supportElementsByClassName){this._targets=this._wrapper.getElementsByClassName(this.options.targetClass);this.refresh=function(){return this}}else{this.refresh=function(){this._targets=$(this._wrapper).find("."+this.options.targetClass).get();return this}}return this.refresh()},check:function(delay,containment){if(typeof delay!=="number"){containment=delay;delay=-1}if(typeof delay==="undefined"){delay=-1}if(typeof containment==="undefined"){containment=false}clearTimeout(this._timer);if(delay<0){this._check(containment)}else{this._timer=setTimeout($.proxy(function(){this._check(containment);this._timer=null},this),delay)}return this},_getWrapperRect:function(){return this._wrapper.getBoundingClientRect()},_getWindowRect:function(){return{top:0,left:0,bottom:doc.documentElement.clientHeight||doc.body.clientHeight,right:doc.documentElement.clientWidth||doc.body.clientWidth}},_reviseElements:function(target,i){if(this._supportElementsByClassName){this._reviseElements=function(){return true}}else{this._reviseElements=function(target,i){if(!$(target).hasClass(this.options.targetClass)){target.__VISIBLE__=null;this._targets.splice(i,1);return false}return true}}return this._reviseElements(target,i)},_check:function(containment){var expandSize=parseInt(this.options.expandSize,10);var visibles=[];var invisibles=[];var area=this._getAreaRect();area=$.extend({},area);area.top-=expandSize;area.left-=expandSize;area.bottom+=expandSize;area.right+=expandSize;for(var i=this._targets.length-1,target,targetArea,after,before;target=this._targets[i];i--){targetArea=target.getBoundingClientRect();if(targetArea.width===0&&targetArea.height===0){continue}if(this._reviseElements(target,i)){before=!!target.__VISIBLE__;if(containment){target.__VISIBLE__=after=!(targetArea.top<area.top||targetArea.bottom>area.bottom||targetArea.right>area.right||targetArea.left<area.left)}else{target.__VISIBLE__=after=!(targetArea.bottom<area.top||area.bottom<targetArea.top||targetArea.right<area.left||area.right<targetArea.left)}(before!==after)&&(after?visibles:invisibles).unshift(target)}}this.trigger(this._prefix+EVENTS.change,{visible:visibles,invisible:invisibles})},destroy:function(){this.off();this._targets=[];this._wrapper=this._timer=null}})});eg.module("movableCoord",[eg,window,"Hammer"],function(ns,global,HM){var SUPPORT_TOUCH="ontouchstart" in global;var assignFn=HM.assign||HM.merge;var MC=ns.MovableCoord=ns.Class.extend(ns.Component,{construct:function(options){assignFn(this.options={min:[0,0],max:[100,100],bounce:[10,10,10,10],margin:[0,0,0,0],circular:[false,false,false,false],easing:function easeOutCubic(x){return 1-Math.pow(1-x,3)},maximumDuration:Infinity,deceleration:0.0006},options);this._reviseOptions();this._status={grabOutside:false,curHammer:null,moveDistance:null,animationParam:null,prevented:false};this._hammers={};this._pos=this.options.min.concat();this._subOptions={};this._raf=null;this._animationEnd=HM.bindFn(this._animationEnd,this);this._restore=HM.bindFn(this._restore,this);this._panmove=HM.bindFn(this._panmove,this);this._panend=HM.bindFn(this._panend,this)},bind:function(element,options){var el=this._getEl(element);var keyValue=el[MC._KEY];var subOptions={direction:MC.DIRECTION_ALL,scale:[1,1],thresholdAngle:45,interruptable:true,inputType:["touch","mouse"]};assignFn(subOptions,options);var inputClass=this._convertInputType(subOptions.inputType);if(!inputClass){return this}if(keyValue){this._hammers[keyValue].inst.destroy()}else{keyValue=Math.round(Math.random()*new Date().getTime())}this._hammers[keyValue]={inst:this._createHammer(el,subOptions,inputClass),el:el,options:subOptions};el[MC._KEY]=keyValue;return this},_createHammer:function(el,subOptions,inputClass){try{var hammer=new HM.Manager(el,{recognizers:[[HM.Pan,{direction:subOptions.direction,threshold:0}]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",userDrag:"none"},inputClass:inputClass});return this._attachHammerEvents(hammer,subOptions)}catch(e){}},_attachHammerEvents:function(hammer,options){return hammer.on("hammer.input",HM.bindFn(function(e){if(e.isFirst){this._subOptions=options;this._status.curHammer=hammer;this._panstart(e)}else{if(e.isFinal){this._panend(e)}}},this)).on("panstart panmove",this._panmove)},_detachHammerEvents:function(hammer){hammer.off("hammer.input panstart panmove panend")},_convertInputType:function(inputType){var hasTouch=false;var hasMouse=false;inputType=inputType||[];inputType.forEach(function(v){switch(v){case"mouse":hasMouse=true;break;case"touch":hasTouch=SUPPORT_TOUCH}});return hasTouch&&HM.TouchInput||hasMouse&&HM.MouseInput||null},unbind:function(element){var el=this._getEl(element);var key=el[MC._KEY];if(key){this._hammers[key].inst.destroy();delete this._hammers[key];delete el[MC._KEY]}return this},getHammer:function(element){var el=this._getEl(element);var key=el[MC._KEY];if(key&&this._hammers[key]){return this._hammers[key].inst}else{return null}},_grab:function(){if(this._status.animationParam){this.trigger("animationEnd");var pos=this._getCircularPos(this._pos);if(pos[0]!==this._pos[0]||pos[1]!==this._pos[1]){this._pos=pos;this._triggerChange(this._pos,true)}this._status.animationParam=null;this._raf&&ns.cancelAnimationFrame(this._raf);this._raf=null}},_getCircularPos:function(pos,min,max,circular){min=min||this.options.min;max=max||this.options.max;circular=circular||this.options.circular;if(circular[0]&&pos[1]<min[1]){pos[1]=(pos[1]-min[1])%(max[1]-min[1]+1)+max[1]}if(circular[1]&&pos[0]>max[0]){pos[0]=(pos[0]-min[0])%(max[0]-min[0]+1)+min[0]}if(circular[2]&&pos[1]>max[1]){pos[1]=(pos[1]-min[1])%(max[1]-min[1]+1)+min[1]}if(circular[3]&&pos[0]<min[0]){pos[0]=(pos[0]-min[0])%(max[0]-min[0]+1)+max[0]}pos[0]=+pos[0].toFixed(5),pos[1]=+pos[1].toFixed(5);return pos},_isOutside:function(pos,min,max){return pos[0]<min[0]||pos[1]<min[1]||pos[0]>max[0]||pos[1]>max[1]},_isOutToOut:function(pos,destPos){var min=this.options.min;var max=this.options.max;return(pos[0]<min[0]||pos[0]>max[0]||pos[1]<min[1]||pos[1]>max[1])&&(destPos[0]<min[0]||destPos[0]>max[0]||destPos[1]<min[1]||destPos[1]>max[1])},_panstart:function(e){if(!this._subOptions.interruptable&&this._status.prevented){return}this._setInterrupt(true);var pos=this._pos;this._grab();this.trigger("hold",{pos:pos.concat(),hammerEvent:e});this._status.moveDistance=pos.concat();this._status.grabOutside=this._isOutside(pos,this.options.min,this.options.max)},_panmove:function(e){if(!this._isInterrupting()||!this._status.moveDistance){return}var tv;var tn;var tx;var pos=this._pos;var min=this.options.min;var max=this.options.max;var bounce=this.options.bounce;var margin=this.options.margin;var direction=this._subOptions.direction;var scale=this._subOptions.scale;var userDirection=this._getDirection(e.angle);var out=[margin[0]+bounce[0],margin[1]+bounce[1],margin[2]+bounce[2],margin[3]+bounce[3]];var prevent=false;var prevInput=this._status.curHammer.session.prevInput;if(prevInput){e.offsetX=e.deltaX-prevInput.deltaX;e.offsetY=e.deltaY-prevInput.deltaY}else{e.offsetX=e.offsetY=0}if(direction===MC.DIRECTION_ALL||(direction&MC.DIRECTION_HORIZONTAL&&userDirection&MC.DIRECTION_HORIZONTAL)){this._status.moveDistance[0]+=(e.offsetX*scale[0]);prevent=true}if(direction===MC.DIRECTION_ALL||(direction&MC.DIRECTION_VERTICAL&&userDirection&MC.DIRECTION_VERTICAL)){this._status.moveDistance[1]+=(e.offsetY*scale[1]);prevent=true}if(prevent){e.srcEvent.preventDefault();e.srcEvent.stopPropagation()}e.preventSystemEvent=prevent;pos[0]=this._status.moveDistance[0];pos[1]=this._status.moveDistance[1];pos=this._getCircularPos(pos,min,max);if(this._status.grabOutside&&!this._isOutside(pos,min,max)){this._status.grabOutside=false}if(this._status.grabOutside){tn=min[0]-out[3],tx=max[0]+out[1],tv=pos[0];pos[0]=tv>tx?tx:(tv<tn?tn:tv);tn=min[1]-out[0],tx=max[1]+out[2],tv=pos[1];pos[1]=tv>tx?tx:(tv<tn?tn:tv)}else{var initSlope=this._easing(0.00001)/0.00001;if(pos[1]<min[1]){tv=(min[1]-pos[1])/(out[0]*initSlope);pos[1]=min[1]-this._easing(tv)*out[0]}else{if(pos[1]>max[1]){tv=(pos[1]-max[1])/(out[2]*initSlope);pos[1]=max[1]+this._easing(tv)*out[2]}}if(pos[0]<min[0]){tv=(min[0]-pos[0])/(out[3]*initSlope);pos[0]=min[0]-this._easing(tv)*out[3]}else{if(pos[0]>max[0]){tv=(pos[0]-max[0])/(out[1]*initSlope);pos[0]=max[0]+this._easing(tv)*out[1]}}}this._triggerChange(pos,true,e)},_panend:function(e){var pos=this._pos;if(!this._isInterrupting()||!this._status.moveDistance){return}if(e.distance===0){this._setInterrupt(false);this.trigger("release",{depaPos:pos.concat(),destPos:pos.concat(),hammerEvent:e||null})}else{var direction=this._subOptions.direction;var scale=this._subOptions.scale;var vX=Math.abs(e.velocityX);var vY=Math.abs(e.velocityY);!(direction&MC.DIRECTION_HORIZONTAL)&&(vX=0);!(direction&MC.DIRECTION_VERTICAL)&&(vY=0);var offset=this._getNextOffsetPos([vX*(e.deltaX<0?-1:1)*scale[0],vY*(e.deltaY<0?-1:1)*scale[1]]);var destPos=[pos[0]+offset[0],pos[1]+offset[1]];destPos=this._getPointOfIntersection(pos,destPos);this.trigger("release",{depaPos:pos.concat(),destPos:destPos,hammerEvent:e||null});if(pos[0]!==destPos[0]||pos[1]!==destPos[1]){this._animateTo(destPos,null,e||null)}else{this._setInterrupt(false)}}this._status.moveDistance=null},_isInterrupting:function(){return this._subOptions.interruptable||this._status.prevented},_getDirection:function(angle){var thresholdAngle=this._subOptions.thresholdAngle;if(thresholdAngle<0||thresholdAngle>90){return MC.DIRECTION_NONE}angle=Math.abs(angle);return angle>thresholdAngle&&angle<180-thresholdAngle?MC.DIRECTION_VERTICAL:MC.DIRECTION_HORIZONTAL},_getNextOffsetPos:function(speeds){var normalSpeed=Math.sqrt(speeds[0]*speeds[0]+speeds[1]*speeds[1]);var duration=Math.abs(normalSpeed/-this.options.deceleration);return[speeds[0]/2*duration,speeds[1]/2*duration]},_getDurationFromPos:function(pos){var normalPos=Math.sqrt(pos[0]*pos[0]+pos[1]*pos[1]);var duration=Math.sqrt(normalPos/this.options.deceleration*2);return duration<100?0:duration},_getPointOfIntersection:function(depaPos,destPos){var circular=this.options.circular;var bounce=this.options.bounce;var min=this.options.min;var max=this.options.max;var boxLT=[min[0]-bounce[3],min[1]-bounce[0]];var boxRB=[max[0]+bounce[1],max[1]+bounce[2]];var xd;var yd;destPos=[destPos[0],destPos[1]];xd=destPos[0]-depaPos[0],yd=destPos[1]-depaPos[1];if(!circular[3]){destPos[0]=Math.max(boxLT[0],destPos[0])}if(!circular[1]){destPos[0]=Math.min(boxRB[0],destPos[0])}destPos[1]=xd?depaPos[1]+yd/xd*(destPos[0]-depaPos[0]):destPos[1];if(!circular[0]){destPos[1]=Math.max(boxLT[1],destPos[1])}if(!circular[2]){destPos[1]=Math.min(boxRB[1],destPos[1])}destPos[0]=yd?depaPos[0]+xd/yd*(destPos[1]-depaPos[1]):destPos[0];return[Math.min(max[0],Math.max(min[0],destPos[0])),Math.min(max[1],Math.max(min[1],destPos[1]))]},_isCircular:function(destPos){var circular=this.options.circular;var min=this.options.min;var max=this.options.max;return(circular[0]&&destPos[1]<min[1])||(circular[1]&&destPos[0]>max[0])||(circular[2]&&destPos[1]>max[1])||(circular[3]&&destPos[0]<min[0])},_prepareParam:function(absPos,duration,hammerEvent){var pos=this._pos;var destPos=this._getPointOfIntersection(pos,absPos);destPos=this._isOutToOut(pos,destPos)?pos:destPos;var distance=[Math.abs(destPos[0]-pos[0]),Math.abs(destPos[1]-pos[1])];duration=duration==null?this._getDurationFromPos(distance):duration;duration=this.options.maximumDuration>duration?duration:this.options.maximumDuration;return{depaPos:pos.concat(),destPos:destPos.concat(),isBounce:this._isOutside(destPos,this.options.min,this.options.max),isCircular:this._isCircular(absPos),duration:duration,distance:distance,hammerEvent:hammerEvent||null,done:this._animationEnd}},_restore:function(complete,hammerEvent){var pos=this._pos;var min=this.options.min;var max=this.options.max;this._animate(this._prepareParam([Math.min(max[0],Math.max(min[0],pos[0])),Math.min(max[1],Math.max(min[1],pos[1]))],null,hammerEvent),complete)},_animationEnd:function(){this._status.animationParam=null;this._pos=this._getCircularPos([Math.round(this._pos[0]),Math.round(this._pos[1])]);this._setInterrupt(false);this.trigger("animationEnd")},_animate:function(param,complete){param.startTime=new Date().getTime();this._status.animationParam=param;if(param.duration){var info=this._status.animationParam;var self=this;(function loop(){self._raf=null;if(self._frame(info)>=1){complete();return}self._raf=ns.requestAnimationFrame(loop)})()}else{this._triggerChange(param.destPos,false);complete()}},_animateTo:function(absPos,duration,hammerEvent){var param=this._prepareParam(absPos,duration,hammerEvent);var retTrigger=this.trigger("animationStart",param);if(param.isCircular&&!retTrigger){throw new Error("You can't stop the 'animation' event when 'circular' is true.")}if(retTrigger){var self=this;var queue=[];var dequeue=function(){var task=queue.shift();task&&task.call(this)};if(param.depaPos[0]!==param.destPos[0]||param.depaPos[1]!==param.destPos[1]){queue.push(function(){self._animate(param,dequeue)})}if(this._isOutside(param.destPos,this.options.min,this.options.max)){queue.push(function(){self._restore(dequeue,hammerEvent)})}queue.push(function(){self._animationEnd()});dequeue()}},_frame:function(param){var curTime=new Date()-param.startTime;var easingPer=this._easing(curTime/param.duration);var pos=[param.depaPos[0],param.depaPos[1]];for(var i=0;i<2;i++){(pos[i]!==param.destPos[i])&&(pos[i]+=(param.destPos[i]-pos[i])*easingPer)}pos=this._getCircularPos(pos);this._triggerChange(pos,false);return easingPer},_reviseOptions:function(){var key;var self=this;(["bounce","margin","circular"]).forEach(function(v){key=self.options[v];if(key!=null){if(key.constructor===Array){self.options[v]=key.length===2?key.concat(key):key.concat()}else{if(/string|number|boolean/.test(typeof key)){self.options[v]=[key,key,key,key]}else{self.options[v]=null}}}})},_triggerChange:function(pos,holding,e){this._pos=pos.concat();this.trigger("change",{pos:pos.concat(),holding:holding,hammerEvent:e||null})},get:function(){return this._pos.concat()},setTo:function(x,y,duration){this._grab();var pos=this._pos.concat();var circular=this.options.circular;var min=this.options.min;var max=this.options.max;if(x===pos[0]&&y===pos[1]){return this}this._setInterrupt(true);if(x!==pos[0]){if(!circular[3]){x=Math.max(min[0],x)}if(!circular[1]){x=Math.min(max[0],x)}}if(y!==pos[1]){if(!circular[0]){y=Math.max(min[1],y)}if(!circular[2]){y=Math.min(max[1],y)}}if(duration){this._animateTo([x,y],duration)}else{this._pos=this._getCircularPos([x,y]);this._triggerChange(this._pos,false);this._setInterrupt(false)}return this},setBy:function(x,y,duration){return this.setTo(x!=null?this._pos[0]+x:this._pos[0],y!=null?this._pos[1]+y:this._pos[1],duration)},_easing:function(p){return p>1?1:this.options.easing(p)},_setInterrupt:function(prevented){!this._subOptions.interruptable&&(this._status.prevented=prevented)},_getEl:function(el){if(typeof el==="string"){return document.querySelector(el)}else{if(el instanceof jQuery&&el.length>0){return el[0]}}return el},destroy:function(){this.off();for(var p in this._hammers){this._hammers[p].inst.destroy();delete this._hammers[p].el[MC._KEY];delete this._hammers[p]}}});MC._KEY="__MOVABLECOORD__";MC.DIRECTION_NONE=1;MC.DIRECTION_LEFT=2;MC.DIRECTION_RIGHT=4;MC.DIRECTION_UP=8;MC.DIRECTION_DOWN=16;MC.DIRECTION_HORIZONTAL=2|4;MC.DIRECTION_VERTICAL=8|16;MC.DIRECTION_ALL=MC.DIRECTION_HORIZONTAL|MC.DIRECTION_VERTICAL;return{MovableCoord:ns.MovableCoord,assignFn:assignFn}});eg.module("flicking",["jQuery",eg,window,document,eg.MovableCoord],function($,ns,global,doc,MC){var EVENTS={beforeFlickStart:"beforeFlickStart",beforeRestore:"beforeRestore",flick:"flick",flickEnd:"flickEnd",restore:"restore"};var SUPPORT_TRANSFORM=doc.documentElement.style;SUPPORT_TRANSFORM="transform" in SUPPORT_TRANSFORM||"webkitTransform" in SUPPORT_TRANSFORM;var SUPPORT_WILLCHANGE=global.CSS&&global.CSS.supports&&global.CSS.supports("will-change","transform");var IS_ANDROID2=ns.agent().os;IS_ANDROID2=IS_ANDROID2.name==="android"&&/^2\./.test(IS_ANDROID2.version);ns.Flicking=ns.Class.extend(ns.Component,{_events:function(){return EVENTS},construct:function(element,options,_prefix){this.$wrapper=$(element);var $children=this.$wrapper.children();if(!$children.length){throw new Error("Given base element doesn't exist or it hasn't proper DOM structure to be initialized.")}this._setOptions(options);this._setConfig($children,_prefix);!ns._hasClickBug()&&(this._setPointerEvents=$.noop);this._build();this._bindEvents(true);this._applyPanelsCss();this._arrangePanels();this.options.hwAccelerable&&SUPPORT_WILLCHANGE&&this._setHint();this.options.adaptiveHeight&&this._setAdaptiveHeight();this._adjustContainerCss("end")},_setOptions:function(options){var arrVal={previewPadding:[0,0],bounce:[10,10]};$.extend(this.options={hwAccelerable:ns.isHWAccelerable(),prefix:"eg-flick",deceleration:0.0006,horizontal:true,circular:false,previewPadding:arrVal.previewPadding,bounce:arrVal.bounce,threshold:40,duration:100,panelEffect:$.easing.easeOutCubic,defaultIndex:0,inputType:["touch","mouse"],thresholdAngle:45,adaptiveHeight:false},options);var self=this;$.each(arrVal,function(i,v){var val=self.options[i];if($.isNumeric(val)){val=[val,val]}else{if(!$.isArray(val)){val=v}}self.options[i]=val})},_setConfig:function($children,_prefix){var options=this.options;var padding=options.previewPadding;if($children.eq(0).hasClass(options.prefix+"-container")){this.$container=$children;$children=$children.children()}this._conf={panel:{$list:$children,index:0,no:0,currIndex:0,currNo:0,size:0,count:0,origCount:0,changed:false,animating:false,minCount:padding[0]+padding[1]>0?5:3},touch:{holdPos:[0,0],destPos:[0,0],distance:0,direction:null,lastPos:0,holding:false},customEvent:{flick:true,restore:false,restoreCall:false},origPanelStyle:{wrapper:{className:this.$wrapper.attr("class")||null,style:this.$wrapper.attr("style")||null},list:$children.map(function(i,v){return{className:$(v).attr("class")||null,style:$(v).attr("style")||null}})},inputEvent:false,useLayerHack:options.hwAccelerable&&!SUPPORT_WILLCHANGE,dirData:[],indexToMove:0,eventPrefix:_prefix||"",$dummyAnchor:null};$([["LEFT","RIGHT"],["UP","DOWN"]][+!options.horizontal]).each($.proxy(function(i,v){this._conf.dirData.push(MC["DIRECTION_"+v])},this))},_build:function(){var panel=this._conf.panel;var options=this.options;var $children=panel.$list;var padding=options.previewPadding.concat();var prefix=options.prefix;var horizontal=options.horizontal;var panelCount=panel.count=panel.origCount=$children.length;var cssValue;var bounce=options.bounce;this._setPadding(padding,true);var sizeValue=this._getDataByDirection([panel.size,"100%"]);cssValue="position:relative;z-index:500;width:100%;height:100%;"+(horizontal?"":"top:0;");if(this.$container){this.$container.attr("style",cssValue)}else{this.$container=$children.wrapAll("<div class='"+prefix+"-container' style='"+cssValue+"'>").parent()}$children.addClass(prefix+"-panel").css({position:"absolute",width:sizeValue[0],height:sizeValue[1],boxSizing:"border-box",top:0,left:0});if(this._addClonePanels()){panelCount=panel.count=(panel.$list=this.$container.children()).length}this._mcInst=new MC({min:[0,0],max:this._getDataByDirection([panel.size*(panelCount-1),0]),margin:0,circular:false,easing:options.panelEffect,deceleration:options.deceleration,bounce:this._getDataByDirection([0,bounce[1],0,bounce[0]])});this._setDefaultPanel(options.defaultIndex)},_setPadding:function(padding,build){var horizontal=this.options.horizontal;var panel=this._conf.panel;var paddingSum=padding[0]+padding[1];var cssValue={};if(paddingSum||!build){cssValue.padding=(horizontal?"0 "+padding.reverse().join("px 0 "):padding.join("px 0 "))+"px"}if(build){cssValue.overflow="hidden";cssValue.boxSizing="border-box"}!$.isEmptyObject(cssValue)&&this.$wrapper.css(cssValue);panel.size=this.$wrapper[horizontal?"width":"height"]()},_addClonePanels:function(){var panel=this._conf.panel;var panelCount=panel.origCount;var cloneCount=panel.minCount-panelCount;var list=panel.$list;var cloneNodes;if(this.options.circular&&panelCount<panel.minCount){cloneNodes=list.clone();while(cloneNodes.length<cloneCount){cloneNodes=cloneNodes.add(list.clone())}return this.$container.append(cloneNodes)}},_movePanelPosition:function(count,append){var panel=this._conf.panel;var list=panel.$list.toArray();var listToMove;listToMove=list.splice(append?0:panel.count-count,count);panel.$list=$(append?list.concat(listToMove):listToMove.concat(list))},_setDefaultPanel:function(index){var panel=this._conf.panel;var lastIndex=panel.count-1;var coords;var baseIndex;if(this.options.circular){if(index>0&&index<=lastIndex){this._movePanelPosition(index,true)}baseIndex=this._getBasePositionIndex();this._movePanelPosition(baseIndex,false);this._setPanelNo({no:index,currNo:index})}else{if(index>0&&index<=lastIndex){this._setPanelNo({index:index,no:index,currIndex:index,currNo:index});coords=[-(panel.size*index),0];this._setTranslate(coords);this._setMovableCoord("setTo",[Math.abs(coords[0]),Math.abs(coords[1])],true,0)}}},_arrangePanels:function(sort,indexToMove){var conf=this._conf;var panel=conf.panel;var touch=conf.touch;var dirData=conf.dirData;var baseIndex;if(this.options.circular){conf.customEvent.flick=false;if(sort){indexToMove&&(touch.direction=dirData[+!Boolean(indexToMove>0)]);this._arrangePanelPosition(touch.direction,indexToMove)}baseIndex=this._getBasePositionIndex();this._setPanelNo({index:baseIndex,currIndex:baseIndex});conf.customEvent.flick=!!this._setMovableCoord("setTo",[panel.size*panel.index,0],true,0)}this._applyPanelsPos()},_applyPanelsPos:function(){this._conf.panel.$list.each($.proxy(this._applyPanelsCss,this))},_setMoveStyle:(function(){return SUPPORT_TRANSFORM?function($element,coords){$element.css("transform",ns.translate(coords[0],coords[1],this._conf.useLayerHack))}:function($element,coords){$element.css({left:coords[0],top:coords[1]})}})(),_applyPanelsCss:function(){var conf=this._conf;var dummyAnchorClassName="__dummy_anchor";if(IS_ANDROID2){conf.$dummyAnchor=$("."+dummyAnchorClassName);!conf.$dummyAnchor.length&&this.$wrapper.append(conf.$dummyAnchor=$("<a href='javascript:void(0);' class='"+dummyAnchorClassName+"' style='position:absolute;height:0px;width:0px;'>"));this._applyPanelsCss=function(i,v){var coords=this._getDataByDirection([(this._conf.panel.size*i)+"px",0]);$(v).css({left:coords[0],top:coords[1]})}}else{this._applyPanelsCss=function(i,v){var coords=this._getDataByDirection([SUPPORT_TRANSFORM?(100*i)+"%":(this._conf.panel.size*i)+"px",0]);this._setMoveStyle($(v),coords)}}},_adjustContainerCss:function(phase,coords){var conf=this._conf;var panel=conf.panel;var options=this.options;var horizontal=options.horizontal;var paddingTop=options.previewPadding[0];var container=this.$container;var value;if(IS_ANDROID2){if(!coords){coords=[-panel.size*panel.index,0]}if(phase==="start"){container=container[0].style;value=parseInt(container[horizontal?"left":"top"],10);if(horizontal){value&&(container.left=0)}else{value!==paddingTop&&(container.top="0px")}this._setTranslate([-coords[+!options.horizontal],0])}else{if(phase==="end"){coords=this._getCoordsValue(coords);container.css({left:coords.x,top:coords.y,transform:ns.translate(0,0,conf.useLayerHack)});conf.$dummyAnchor[0].focus()}}}},_setMovableCoord:function(method,coord,isDirVal,duration){if(isDirVal){coord=this._getDataByDirection(coord)}return this._mcInst[method](coord[0],coord[1],duration)},_setHint:function(){var value="transform";this.$container.css("willChange",value);this._conf.panel.$list.css("willChange",value)},_getDataByDirection:function(value){value=value.concat();!this.options.horizontal&&value.reverse();return value},_arrangePanelPosition:function(direction,indexToMove){var next=direction===this._conf.dirData[0];this._movePanelPosition(Math.abs(indexToMove||1),next)},_getBasePositionIndex:function(){return Math.floor(this._conf.panel.count/2-0.1)},_bindEvents:function(bind){var options=this.options;var $wrapper=this.$wrapper;var mcInst=this._mcInst;if(bind){mcInst.bind($wrapper,{scale:this._getDataByDirection([-1,0]),direction:MC["DIRECTION_"+(options.horizontal?"HORIZONTAL":"VERTICAL")],interruptable:false,inputType:options.inputType,thresholdAngle:options.thresholdAngle}).on({hold:$.proxy(this._holdHandler,this),change:$.proxy(this._changeHandler,this),release:$.proxy(this._releaseHandler,this),animationStart:$.proxy(this._animationStartHandler,this),animationEnd:$.proxy(this._animationEndHandler,this)})}else{mcInst.unbind($wrapper).off()}this._conf.inputEvent=!!bind},_holdHandler:function(e){var conf=this._conf;conf.touch.holdPos=e.pos;conf.touch.holding=true;conf.panel.changed=false;this._adjustContainerCss("start",e.pos)},_changeHandler:function(e){var conf=this._conf;var touch=conf.touch;var posIndex=+!this.options.horizontal;var pos=e.pos[posIndex];var holdPos=touch.holdPos[posIndex];var direction;var eventRes=null;var movedPx;this._setPointerEvents(e);if(e.hammerEvent){direction=e.hammerEvent.direction;movedPx=e.hammerEvent[this.options.horizontal?"deltaX":"deltaY"];if(!~$.inArray(direction,conf.dirData)){direction=conf.dirData[+(Math.abs(touch.lastPos)<=movedPx)]}touch.lastPos=movedPx}else{touch.lastPos=null}conf.customEvent.flick&&(eventRes=this._triggerEvent(EVENTS.flick,{pos:e.pos,holding:e.holding,direction:direction||touch.direction,distance:pos-(holdPos||(touch.holdPos[posIndex]=pos))}));(eventRes||eventRes===null)&&this._setTranslate([-pos,0])},_releaseHandler:function(e){var touch=this._conf.touch;var pos=e.destPos;var posIndex=+!this.options.horizontal;var holdPos=touch.holdPos[posIndex];var panelSize=this._conf.panel.size;touch.distance=e.depaPos[posIndex]-touch.holdPos[posIndex];touch.direction=this._conf.dirData[+!Boolean(touch.holdPos[posIndex]<e.depaPos[posIndex])];pos[posIndex]=Math.max(holdPos-panelSize,Math.min(holdPos,pos[posIndex]));touch.destPos[posIndex]=pos[posIndex]=Math.round(pos[posIndex]/panelSize)*panelSize;touch.distance===0&&this._adjustContainerCss("end");touch.holding=false;this._setPointerEvents()},_animationStartHandler:function(e){var conf=this._conf;var panel=conf.panel;var customEvent=conf.customEvent;panel.animating=true;if(!customEvent.restoreCall&&e.hammerEvent&&this._setPhaseValue("start",{depaPos:e.depaPos,destPos:e.destPos})===false){e.stop()}if(e.hammerEvent){e.duration=this.options.duration;e.destPos[+!this.options.horizontal]=panel.size*(panel.index+conf.indexToMove)}if(this._isMovable()){!customEvent.restoreCall&&(customEvent.restore=false)}else{this._triggerBeforeRestore(e)}},_animationEndHandler:function(){this._setPhaseValue("end");this._conf.panel.animating=false;this._triggerRestore()},_setAdaptiveHeight:function(direction){var $panel;var $first;var $children;var height;var dataName="data-height";$panel=this["get"+(direction===MC.DIRECTION_LEFT&&"Next"||direction===MC.DIRECTION_RIGHT&&"Prev"||"")+"Element"]();$first=$panel.find(":first");height=$first.attr(dataName);if(!height){$children=$panel.children();height=($children.length>1?$panel.css("height","auto"):$first).outerHeight(true);$first.attr(dataName,height)}this.$wrapper.height(height)},_triggerBeforeRestore:function(e){var conf=this._conf;var touch=conf.touch;touch.direction=~~conf.dirData.join("").replace(touch.direction,"");conf.customEvent.restore=this._triggerEvent(EVENTS.beforeRestore,{depaPos:e.depaPos,destPos:e.destPos});if(!conf.customEvent.restore){"stop" in e&&e.stop();conf.panel.animating=false}},_triggerRestore:function(){var customEvent=this._conf.customEvent;customEvent.restore&&this._triggerEvent(EVENTS.restore);customEvent.restoreCall=false},_setPhaseValue:function(phase,pos){var conf=this._conf;var options=this.options;var panel=conf.panel;if(phase==="start"&&(panel.changed=this._isMovable())){if(!this._triggerEvent(EVENTS.beforeFlickStart,pos)){return panel.changed=panel.animating=false}else{options.adaptiveHeight&&this._setAdaptiveHeight(conf.touch.direction)}conf.indexToMove===0&&this._setPanelNo()}else{if(phase==="end"){if(options.circular&&panel.changed){this._arrangePanels(true,conf.indexToMove)}!IS_ANDROID2&&this._setTranslate([-panel.size*panel.index,0]);conf.touch.distance=conf.indexToMove=0;panel.changed&&this._triggerEvent(EVENTS.flickEnd)}}!(phase==="start"&&pos===undefined)&&this._adjustContainerCss(phase)},_getNumByDirection:function(){var conf=this._conf;return conf.touch.direction===conf.dirData[0]?1:-1},_revertPanelNo:function(){var panel=this._conf.panel;var num=this._getNumByDirection();var index=panel.currIndex>=0?panel.currIndex:panel.index-num;var no=panel.currNo>=0?panel.currNo:panel.no-num;this._setPanelNo({index:index,no:no})},_setPanelNo:function(obj){var panel=this._conf.panel;var count=panel.origCount-1;var num=this._getNumByDirection();if($.isPlainObject(obj)){$.each(obj,function(i,v){panel[i]=v})}else{panel.currIndex=panel.index;panel.currNo=panel.no;panel.index+=num;panel.no+=num}if(panel.no>count){panel.no=0}else{if(panel.no<0){panel.no=count}}},_setPointerEvents:function(e){var pointer=this.$container.css("pointerEvents");var val;if(e&&e.holding&&e.hammerEvent&&e.hammerEvent.preventSystemEvent&&pointer!=="none"){val="none"}else{if(!e&&pointer!=="auto"){val="auto"}}val&&this.$container.css("pointerEvents",val)},_getCoordsValue:function(coords){coords=this._getDataByDirection(coords);return{x:this._getUnitValue(coords[0]),y:this._getUnitValue(coords[1])}},_setTranslate:function(coords){coords=this._getCoordsValue(coords);this._setMoveStyle(this.$container,[coords.x,coords.y])},_getUnitValue:function(val){var rx=/(?:[a-z]{2,}|%)$/;return(parseInt(val,10)||0)+(String(val).match(rx)||"px")},_isMovable:function(){var options=this.options;var mcInst=this._mcInst;var isMovable=Math.abs(this._conf.touch.distance)>=options.threshold;var max;var currPos;if(!options.circular&&isMovable){max=this._getDataByDirection(mcInst.options.max)[0];currPos=this._getDataByDirection(mcInst.get())[0];if(currPos<0||currPos>max){return false}}return isMovable},_triggerEvent:function(name,param){var conf=this._conf;var panel=conf.panel;if(name===EVENTS.flickEnd){panel.currNo=panel.no;panel.currIndex=panel.index}return this.trigger(conf.eventPrefix+name,$.extend({eventType:name,index:panel.currIndex,no:panel.currNo,direction:conf.touch.direction},param))},_getElement:function(direction,element,physical){var panel=this._conf.panel;var circular=this.options.circular;var pos=panel.currIndex;var next=direction===this._conf.dirData[0];var result=null;var total;var index;var currentIndex;if(physical){total=panel.count;index=pos}else{total=panel.origCount;index=panel.currNo}currentIndex=index;if(next){if(index<total-1){index++}else{if(circular){index=0}}}else{if(index>0){index--}else{if(circular){index=total-1}}}if(currentIndex!==index){result=element?$(panel.$list[next?pos+1:pos-1]):index}return result},_setValueToMove:function(next){var conf=this._conf;conf.touch.distance=this.options.threshold+1;conf.touch.direction=conf.dirData[+!next]},_getNumValue:function(val,defVal){return isNaN(val=parseInt(val,10))?defVal:val},getIndex:function(physical){return this._conf.panel[physical?"currIndex":"currNo"]},getElement:function(){var panel=this._conf.panel;return $(panel.$list[panel.currIndex])},getNextElement:function(){return this._getElement(this._conf.dirData[0],true)},getNextIndex:function(physical){return this._getElement(this._conf.dirData[0],false,physical)},getAllElements:function(){return this._conf.panel.$list},getPrevElement:function(){return this._getElement(this._conf.dirData[1],true)},getPrevIndex:function(physical){return this._getElement(this._conf.dirData[1],false,physical)},getTotalCount:function(physical){return this._conf.panel[physical?"count":"origCount"]},isPlaying:function(){return this._conf.panel.animating},_movePanel:function(next,duration){var conf=this._conf;var panel=conf.panel;var options=this.options;if(panel.animating||conf.touch.holding){return}this._setValueToMove(next);if(options.circular||this[next?"getNextIndex":"getPrevIndex"]()!=null){this._movePanelByPhase("setBy",[panel.size*(next?1:-1),0],duration)}return this},_movePanelByPhase:function(method,coords,duration){duration=this._getNumValue(duration,this.options.duration);if(this._setPhaseValue("start")!==false){this._setMovableCoord(method,coords,true,duration);!duration&&this._setPhaseValue("end")}},next:function(duration){return this._movePanel(true,duration)},prev:function(duration){return this._movePanel(false,duration)},moveTo:function(no,duration){var conf=this._conf;var panel=conf.panel;var circular=this.options.circular;var currentIndex=panel.index;var indexToMove;var isPositive;no=this._getNumValue(no,-1);if(no<0||no>=panel.origCount||no===panel.no||panel.animating||conf.touch.holding){return this}if(circular){indexToMove=no-panel.no;isPositive=indexToMove>0;if(Math.abs(indexToMove)>(isPositive?panel.count-(currentIndex+1):currentIndex)){indexToMove=indexToMove+(isPositive?-1:1)*panel.count}this._setPanelNo({no:no})}else{indexToMove=no-currentIndex;this._setPanelNo({index:no,no:no})}this._conf.indexToMove=indexToMove;this._setValueToMove(isPositive);this._movePanelByPhase(circular?"setBy":"setTo",[panel.size*(circular?indexToMove:no),0],duration);return this},_checkPadding:function(){var options=this.options;var previewPadding=options.previewPadding.concat();var padding=this.$wrapper.css("padding").split(" ");options.horizontal&&padding.reverse();padding=padding.length===2?[padding[0],padding[0]]:[padding[0],padding[2]];padding=$.map(padding,function(num){return parseInt(num,10)});if(previewPadding.length===2&&previewPadding[0]!==padding[0]||previewPadding[1]!==padding[1]){this._setPadding(previewPadding)}},resize:function(){var conf=this._conf;var options=this.options;var panel=conf.panel;var horizontal=options.horizontal;var panelSize;var maxCoords;if(~~options.previewPadding.join("")){this._checkPadding();panelSize=panel.size}else{if(horizontal){panelSize=panel.size=this.$wrapper.width()}}maxCoords=this._getDataByDirection([panelSize*(panel.count-1),0]);horizontal&&this.$container.width(maxCoords[0]+panelSize);panel.$list.css(horizontal?"width":"height",panelSize);this._mcInst.options.max=maxCoords;this._setMovableCoord("setTo",[panelSize*panel.index,0],true,0);if(IS_ANDROID2){this._applyPanelsPos();this._adjustContainerCss("end")}return this},restore:function(duration){var conf=this._conf;var panel=conf.panel;var currPos=this._getDataByDirection(this._mcInst.get());var destPos;if(currPos[0]!==panel.currIndex*panel.size){conf.customEvent.restoreCall=true;duration=this._getNumValue(duration,this.options.duration);this._revertPanelNo();destPos=this._getDataByDirection([panel.size*panel.index,0]);this._triggerBeforeRestore({depaPos:currPos,destPos:destPos});this._setMovableCoord("setTo",destPos,true,duration);if(!duration){this._adjustContainerCss("end");this._triggerRestore()}}else{if(panel.changed){this._revertPanelNo();conf.touch.distance=conf.indexToMove=0}}return this},_setInputEvent:function(bind){var inputEvent=this._conf.inputEvent;if(bind^inputEvent){this._bindEvents(bind)}return this},enableInput:function(){return this._setInputEvent(true)},disableInput:function(){return this._setInputEvent()},destroy:function(){var conf=this._conf;var origPanelStyle=conf.origPanelStyle;var wrapper=origPanelStyle.wrapper;var list=origPanelStyle.list;this.$wrapper.attr("class",wrapper.className).attr("style",wrapper.style);this.$container.children().unwrap().each(function(i,v){var $el=$(v);if(i>list.length-1){return !!$el.remove()}$el.attr("class",list[i].className).attr("style",list[i].style)});this.disableInput();this.off();for(var x in this){this[x]=null}}})});eg.module("infiniteGrid",["jQuery",eg,window,document],function($,ns,global,doc){var EVENTS={layoutComplete:"layoutComplete",append:"append",prepend:"prepend"};ns.InfiniteGrid=ns.Class.extend(ns.Component,{_events:function(){return EVENTS},construct:function(el,options,_prefix){this.options=$.extend({isEqualSize:false,defaultGroupKey:null,count:30,threshold:300},options);this.$el=el instanceof $?el:$(el);this.el=this.$el.get(0);this.el.style.position="relative";this._prefix=_prefix||"";this._isIos=/iPhone|iPad/.test(global.navigator.userAgent);this._isIE10lower=!!(doc.documentMode&&doc.documentMode<10);this._appendCols=this._prependCols=[];this.$view=$(global);this._reset();this._refreshViewport();if(this.el.children.length>0){this.items=this._itemize($.makeArray(this.el.children),this.options.defaultGroupKey,true);this.layout(this.items,true)}this._onScroll=$.proxy(this._onScroll,this);this._onResize=$.proxy(this._onResize,this);this.$view.on("scroll",this._onScroll).on("resize",this._onResize)},_getScrollTop:function(){return doc.body.scrollTop||doc.documentElement.scrollTop},_onScroll:function(){if(this.isProcessing()){return}var scrollTop=this._getScrollTop();var prevScrollTop=this._prevScrollTop;if(this._isIos&&scrollTop===0||prevScrollTop===scrollTop){return}var ele;var rect;if(prevScrollTop<scrollTop){if($.isEmptyObject(this._bottomElement)){this._bottomElement=this.getBottomElement();if(this._bottomElement==null){return}}ele=this._bottomElement;rect=ele.getBoundingClientRect();if(rect.top<=this._clientHeight+this.options.threshold){this.trigger(this._prefix+EVENTS.append,{scrollTop:scrollTop})}}else{if(this.isRecycling()&&this._removedContent>0){if($.isEmptyObject(this._topElement)){this._topElement=this.getTopElement();if(this._topElement==null){return}}ele=this._topElement;rect=ele.getBoundingClientRect();if(rect.bottom>=-this.options.threshold){var croppedDistance=this.fit();if(croppedDistance>0){scrollTop-=croppedDistance;this.$view.scrollTop(scrollTop)}this.trigger(this._prefix+EVENTS.prepend,{scrollTop:scrollTop})}}}this._prevScrollTop=scrollTop},_onResize:function(){if(this._resizeTimeout){clearTimeout(this._resizeTimeout)}var self=this;this._resizeTimeout=setTimeout(function(){self._refreshViewport();(self.$el.innerWidth()!==self._containerWidth)&&self.layout(self.items,true);self._resizeTimeout=null},100)},_refreshViewport:function(){var el=this.$view.get(0);if(el){this._clientHeight=$.isWindow(el)?el.innerHeight:el.clientHeight}},getStatus:function(){var data={};var p;for(p in this){if(this.hasOwnProperty(p)&&/^_/.test(p)&&typeof this[p]!=="function"&&!(this[p] instanceof Element)){data[p]=this[p]}}return{prop:data,options:$.extend({},this.options),items:$.map(this.items,function(v){var clone=$.extend({},v);delete clone.el;return clone}),html:this.el.innerHTML,cssText:this.el.style.cssText}},setStatus:function(status){if(!status||!status.cssText||!status.html||!status.prop||!status.items){return this}this.el.style.cssText=status.cssText;this.el.innerHTML=status.html;$.extend(this,status.prop);this._topElement=this._bottomElement=null;this.items=$.map(this.el.children,function(v,i){status.items[i].el=v;return status.items[i]});return this},isProcessing:function(){return this._isProcessing},isRecycling:function(){return(this.options.count>0)&&this._isRecycling},getGroupKeys:function(){return $.map(this.items,function(v){return v.groupKey})},layout:function(items,isRefresh){items=items||this.items;isRefresh=typeof isRefresh==="undefined"?true:isRefresh;this._isProcessing=true;isRefresh&&(items=$.map(items,function(v){v.isAppend=true;return v}));this._waitResource(items,isRefresh);return this},_layoutItems:function(items){var self=this;$.each($.map(items,function(v){v.position=self._getItemLayoutPosition(v);return v}),function(i,v){if(v.el){var style=v.el.style;style.left=v.position.x+"px";style.top=v.position.y+"px"}})},append:function($elements,groupKey){if(this._isProcessing||$elements.length===0){return}$elements=$($elements);this._isProcessing=true;if(!this.isRecycling()){this._isRecycling=(this.items.length+$elements.length)>=this.options.count}this._insert($elements,groupKey,true);return $elements.length},prepend:function($elements,groupKey){if(!this.isRecycling()||this._removedContent===0||this._isProcessing||$elements.length===0){return}$elements=$($elements);this._isProcessing=true;this._fit();if($elements.length>this._removedContent){$elements=$elements.slice(0,this._removedContent)}this._insert($elements,groupKey,false);return $elements.length},clear:function(){this.el.innerHTML="";this.el.style.height="";this._reset();return this},_getTopItem:function(){var item=null;var min=Infinity;$.each(this._getColItems(false),function(i,v){if(v&&v.position.y<min){min=v.position.y;item=v}});return item},getTopElement:function(){var item=this._getTopItem();return item&&item.el},_getBottomItem:function(){var item=null;var max=-Infinity;$.each(this._getColItems(true),function(i,v){if(v&&v.position.y+v.size.height>max){max=v.position.y+v.size.height;item=v}});return item},getBottomElement:function(){var item=this._getBottomItem();return item&&item.el},_postLayout:function(items){if(!this._isProcessing||items.length<=0){return}var size=this._getContainerSize();this.el.style.height=size.height+"px";this._topElement=this.getTopElement();this._bottomElement=this.getBottomElement();var distance=0;var isAppend=items[0].isAppend;if(!isAppend){this._isFitted=false;this._fit(true);distance=items.length>=this.items.length?0:this.items[items.length].position.y;if(distance>0){this._prevScrollTop=this._getScrollTop()+distance;this.$view.scrollTop(this._prevScrollTop)}}this._isProcessing=false;this.trigger(this._prefix+EVENTS.layoutComplete,{target:items.concat(),isAppend:isAppend,distance:distance,croppedCount:this._removedContent})},_insert:function($elements,groupKey,isAppend){if($elements.length===0){return}var elements=$elements.toArray();var $cloneElements=$(elements);var dummy=-this._clientHeight+"px";$.each(elements,function(i,v){v.style.position="absolute";v.style.top=dummy});var items=this._itemize(elements,groupKey,isAppend);if(isAppend){this.items=this.items.concat(items)}else{this.items=items.concat(this.items);items=items.reverse()}this.isRecycling()&&this._adjustRange(isAppend,$cloneElements);this.$el[isAppend?"append":"prepend"]($cloneElements);this.layout(items,false)},_waitResource:function(items,isRefresh){var needCheck=this._checkImageLoaded();var self=this;var callback=function(){if(self._isProcessing){if(isRefresh||!self._appendCols.length){$.each(items,function(i,v){v.el.style.position="absolute"});self._measureColumns()}self._layoutItems(items);self._postLayout(items)}};if(needCheck.length>0){this._waitImageLoaded(needCheck,callback)}else{setTimeout(function(){callback&&callback()},0)}},_adjustRange:function(isTop,$elements){var diff=this.items.length-this.options.count;var targets;var idx;if(diff<=0||(idx=this._getDelimiterIndex(isTop,diff))<0){return}if(isTop){targets=this.items.splice(0,idx);this._isFitted=false}else{targets=this.items.splice(idx,this.items.length-idx)}$.each(targets,function(i,v){idx=$elements.index(v.el);if(idx!==-1){$elements.splice(idx,1)}else{v.el.parentNode.removeChild(v.el)}});this._removedContent+=isTop?targets.length:-targets.length},_getDelimiterIndex:function(isTop,removeCount){var len=this.items.length;var i;var idx=0;var baseIdx=isTop?removeCount-1:len-removeCount;var targetIdx=baseIdx+(isTop?1:-1);var groupKey=this.items[baseIdx].groupKey;if(groupKey!=null&&groupKey===this.items[targetIdx].groupKey){if(isTop){for(i=baseIdx;i>0;i--){if(groupKey!==this.items[i].groupKey){break}}idx=i===0?-1:i+1}else{for(i=baseIdx;i<len;i++){if(groupKey!==this.items[i].groupKey){break}}idx=i===len?-1:i}}else{idx=isTop?targetIdx:baseIdx}return idx},_fit:function(applyDom){if(this.options.count<=0){this._fit=function(){return false};this._isFitted=true;return false}if(this._isFitted){return false}var y=this._updateCols();$.each(this.items,function(i,v){v.position.y-=y;applyDom&&(v.el.style.top=v.position.y+"px")});this._updateCols(true);var height=this._getContainerSize().height;applyDom&&(this.el.style.height=height+"px");this._isFitted=true;return true},fit:function(){var item=this._getTopItem();var distance=item?item.position.y:0;this._fit(true);return distance},_reset:function(){this._isProcessing=false;this._topElement=null;this._bottomElement=null;this._isFitted=true;this._isRecycling=false;this._removedContent=0;this._prevScrollTop=0;this._equalItemSize=0;this._resizeTimeout=null;this._resetCols(this._appendCols.length||0);this.items=[]},_checkImageLoaded:function(){return this.$el.find("img").filter(function(k,v){if(v.nodeType&&($.inArray(v.nodeType,[1,9,11])!==-1)){return !v.complete}}).toArray()},_waitImageLoaded:function(needCheck,callback){var checkCount=needCheck.length;var onCheck=function(e){checkCount--;$(e.target).off("load error");checkCount<=0&&callback&&callback()};var $el;var self=this;$.each(needCheck,function(i,v){$el=$(v);if(self._isIE10lower){var url=v.getAttribute("src");v.setAttribute("src","");v.setAttribute("src",url)}$el.on("load error",onCheck)})},_measureColumns:function(){this.el.style.width=null;this._containerWidth=this.$el.innerWidth();this._columnWidth=this._getColumnWidth()||this._containerWidth;var cols=this._containerWidth/this._columnWidth;var excess=this._columnWidth-this._containerWidth%this._columnWidth;cols=Math.max(Math[excess&&excess<=1?"round":"floor"](cols),1);this._resetCols(cols||0)},_resetCols:function(count){count=typeof count==="undefined"?0:count;var arr=[];while(count--){arr.push(0)}this._appendCols=arr.concat();this._prependCols=arr.concat()},_getContainerSize:function(){return{height:Math.max.apply(Math,this._appendCols),width:this._containerWidth}},_getColumnWidth:function(){var el=this.items[0]&&this.items[0].el;var width=0;if(el){var $el=$(el);width=$el.innerWidth();if(this.options.isEqualSize){this._equalItemSize={width:width,height:$el.innerHeight()}}}return width},_updateCols:function(isAppend){var col=isAppend?this._appendCols:this._prependCols;var items=this._getColItems(isAppend);var base=this._isFitted||isAppend?0:this._getMinY(items);var i=0;var len=col.length;var item;for(;i<len;i++){if(item=items[i]){col[i]=item.position.y+(isAppend?item.size.height:-base)}else{col[i]=0}}return base},_getMinY:function(items){return Math.min.apply(Math,$.map(items,function(v){return v?v.position.y:0}))},_getColIdx:function(item){return parseInt(item.position.x/parseInt(this._columnWidth,10),10)},_getColItems:function(isTail){var len=this._appendCols.length;var colItems=new Array(len);var item;var idx;var count=0;var i=isTail?this.items.length-1:0;while(item=this.items[i]){idx=this._getColIdx(item);if(!colItems[idx]){colItems[idx]=item;if(++count===len){return colItems}}i+=isTail?-1:1}return colItems},_itemize:function(elements,groupKey,isAppend){return $.map(elements,function(v){return{el:v,position:{x:0,y:0},isAppend:typeof isAppend==="undefined"?true:isAppend,groupKey:typeof groupKey==="undefined"?null:groupKey}})},_getItemLayoutPosition:function(item){if(!item.el){return}var $el=$(item.el);item.size=this._equalItemSize||{width:$el.innerWidth(),height:$el.innerHeight()};var isAppend=item.isAppend;var cols=isAppend?this._appendCols:this._prependCols;var y=Math[isAppend?"min":"max"].apply(Math,cols);var shortColIndex;if(isAppend){shortColIndex=$.inArray(y,cols)}else{var i=cols.length;while(i-->=0){if(cols[i]===y){shortColIndex=i;break}}}cols[shortColIndex]=y+(isAppend?item.size.height:-item.size.height);return{x:this._columnWidth*shortColIndex,y:isAppend?y:y-item.size.height}},destroy:function(){this.off();this.$view.off("resize",this._onResize).off("scroll",this._onScroll);this._reset()}})});
/*!
 * JavaScript Cookie v2.1.3
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */
(function(factory){var registeredInModuleLoader=false;if(typeof define==="function"&&define.amd){define(factory);registeredInModuleLoader=true}if(typeof exports==="object"){module.exports=factory();registeredInModuleLoader=true}if(!registeredInModuleLoader){var OldCookies=window.Cookies;var api=window.Cookies=factory();api.noConflict=function(){window.Cookies=OldCookies;return api}}}(function(){function extend(){var i=0;var result={};for(;i<arguments.length;i++){var attributes=arguments[i];for(var key in attributes){result[key]=attributes[key]}}return result}function init(converter){function api(key,value,attributes){var result;if(typeof document==="undefined"){return}if(arguments.length>1){attributes=extend({path:"/"},api.defaults,attributes);if(typeof attributes.expires==="number"){var expires=new Date();expires.setMilliseconds(expires.getMilliseconds()+attributes.expires*86400000);attributes.expires=expires}try{result=JSON.stringify(value);if(/^[\{\[]/.test(result)){value=result}}catch(e){}if(!converter.write){value=encodeURIComponent(String(value)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)}else{value=converter.write(value,key)}key=encodeURIComponent(String(key));key=key.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent);key=key.replace(/[\(\)]/g,escape);return(document.cookie=[key,"=",value,attributes.expires?"; expires="+attributes.expires.toUTCString():"",attributes.path?"; path="+attributes.path:"",attributes.domain?"; domain="+attributes.domain:"",attributes.secure?"; secure":""].join(""))}if(!key){result={}}var cookies=document.cookie?document.cookie.split("; "):[];var rdecode=/(%[0-9A-Z]{2})+/g;var i=0;for(;i<cookies.length;i++){var parts=cookies[i].split("=");var cookie=parts.slice(1).join("=");if(cookie.charAt(0)==='"'){cookie=cookie.slice(1,-1)}try{var name=parts[0].replace(rdecode,decodeURIComponent);cookie=converter.read?converter.read(cookie,name):converter(cookie,name)||cookie.replace(rdecode,decodeURIComponent);if(this.json){try{cookie=JSON.parse(cookie)}catch(e){}}if(key===name){result=cookie;break}if(!key){result[name]=cookie}}catch(e){}}return result}api.set=api;api.get=function(key){return api.call(api,key)};api.getJSON=function(){return api.apply({json:true},[].slice.call(arguments))};api.defaults={};api.remove=function(key,attributes){api(key,"",extend(attributes,{expires:-1}))};api.withConverter=init;return api}return init(function(){})}));
var UtilJQuery={MONTH_NAMES_EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],TIME_SUFFIX_EN:{justNow:"just now",minsAgo:"mins ago",hoursAgo:"hours ago",daysAgo:"days ago"},GLOBAL_UNITS:["","K","M","G","T","P","E"],LANGUAGE_UNIT_MAP:{"zh-hans":["","万","亿","兆"],"zh-hant":["","萬","億","兆"],ja:["","万","億","兆"]},changeNumberFormat:function(number){var underNumberString="";var numberString=number||0;numberString=(typeof numberString!="String")?String(numberString):numberString;if(numberString.indexOf(".")>-1){var tokens=numberString.split(".");numberString=tokens[0];underNumberString="."+tokens[1]}return numberString.replace(/(\d)(?=(\d{3})+$)/igm,"$1,")+underNumberString},changeStarScoreFormat:function(number){var underNumberString="";var numberString=number||0;if(numberString==10){return"10"}numberString=(typeof numberString!="String")?String(numberString):numberString;if(numberString.indexOf(".")>-1){var tokens=numberString.split(".");numberString=tokens[0];underNumberString=tokens[1]||""}var needZeroCount=2-underNumberString.length;for(var i=0;i<needZeroCount;i++){underNumberString+="0"}return numberString+"."+underNumberString},changeLikeitCountFormat:function(number,likeitMessage,languageCode){return this._changeMinimumCountFormat(number,likeitMessage,1000,languageCode,999999)},changeCheerCountFormat:function(number,cheerMessage,languageCode){return this._changeMinimumCountFormat(number,cheerMessage,1,languageCode,999999)},_changeMinimumCountFormat:function(number,minimumMessage,minimumCount,languageCode,maximumCount){if(number<minimumCount){return minimumMessage==null?number:minimumMessage}else{if(typeof(maximumCount)!="number"||number>maximumCount){return this._literalNumberFormat(number,minimumMessage,languageCode)}else{return this.changeNumberFormat(number)}}},_literalNumberFormat:function(value,likeitMessage,languageCode){if(value==null||value==""||value===undefined){return likeitMessage}value=String(value);var formattedNumber="";var isEastern=("zh-hans"==languageCode||"zh-hant"==languageCode||"ja"==languageCode);if(isEastern){formattedNumber=this._literalNumberFormatInternal(value,4,this.LANGUAGE_UNIT_MAP[languageCode])}else{formattedNumber=this._literalNumberFormatInternal(value,3,this.GLOBAL_UNITS)}return formattedNumber},_literalNumberFormatInternal:function(value,unitCount,units){if(value==null||value==""||value===undefined){return value}var len=value.length;var cutCount=len%unitCount;var unitNumber=Math.floor(len/unitCount);if(cutCount==0){cutCount=unitCount;unitNumber--}var underPoint="";if(value[cutCount]!="0"&&value[cutCount]!=undefined){underPoint="."+value[cutCount]}return value.slice(0,cutCount)+underPoint+units[unitNumber]},getUserInfo:function(){var contentLanguageCode=window.contentLanguageCode||"en";return $.ajax("/"+contentLanguageCode+"/member/userInfo").then(function(res){if(!this._checkLoginStatusPromise&&res!=null){var deferred=$.Deferred();deferred.resolve(res.isLogin);this._checkLoginStatusPromise=deferred.promise()}return res})},checkLoginStatus:function(){var deferred=$.Deferred();if(!this._checkLoginStatusPromise){this._checkLoginStatusPromise=$.ajax("/member/isLogin").then(function(res){return res})}this._checkLoginStatusPromise.then(function(isLoggedIn){deferred.resolve(isLoggedIn);return isLoggedIn});return deferred.promise()},goLogin:function(returnUrl){var isAuthorPublishLogin=(returnUrl&&(/\/challenge\/publish$/.test(returnUrl)||/\/challenge\/series$/.test(returnUrl)||/\/challenge\/episode\?/.test(returnUrl)));var login=new Login({returnUrl:returnUrl,isAuthorPublishLogin:isAuthorPublishLogin});login.show(returnUrl)},loginAndGo:function(url){this.checkLoginStatus().then(function(isLoggedIn){if(isLoggedIn==false){this.goLogin(location.href)}else{location.href=url}})},showDimmedLayer:function(){$(document.body).append('<div class="ly_dim on __layerDimmed" style="display:block;"><div class="bg"></div></div>')},hideDimmedLayer:function(){$(".__layerDimmed").first().remove()},_htDefaultErrorMessage:{"alert.error.no_internet_connection":"No Internet Connection.\nPlease check the network connection.","alert.error.invalid_input":"Invalid input value.","alert.error.unknown":"Unknown error has occurred. Please try again in a moment."},getErrorMessage:function(sKey){var htMessage=ghtErrorMessage||this._htDefaultErrorMessage;return htMessage[sKey]||""},trim:function(string){if(!string){return string}return(typeof string=="string")?string.replace(/^\s+/g,"").replace(/\s+$/g,""):""},stripScripts:function(string){return(typeof string=="string")?string.replace(/<script[^>]*>([\S\s]*?)<\/script>/img,""):""},stripHTML:function(string){return(typeof string=="string")?string.replace(/<(?:.|\s)*?>/g,""):""},nClicks4CheckBox:function(el,checkCode,uncheckCode){if(el.checked){clickcr(this,checkCode,"","",null,sNclkLanguageCode)}else{clickcr(this,uncheckCode,"","",null,sNclkLanguageCode)}},challengeRewardLog:function(option){var urlMap={CHALLENGE_ACCESS:"/challenge/rewardAccessLog",STAR_SCORE:"/challenge/rewardStarScoreLog",SHARE_CHALLENGE:"/challenge/rewardChallengeShareLog",LIKE_IT:"/challenge/rewardLikeItLog",SHARE_PROMOTION:"/challenge/rewardPromotionShareLog"};var url="/"+option.language+urlMap[option.type];var param;switch(option.type){case"CHALLENGE_ACCESS":param={};break;case"STAR_SCORE":param={titleNo:option.titleNo};break;case"SHARE_CHALLENGE":param={titleNo:option.titleNo,episodeNo:option.episodeNo,snsCode:option.snsCode};break;case"LIKE_IT":param={titleNo:option.titleNo,episodeNo:option.episodeNo};break;case"SHARE_PROMOTION":param={snsCode:option.snsCode};break;default:return;break}return $.ajax(url,{data:param})},getGenreNameMap:function(){var deferred=$.Deferred();if(!this._getGenreNamePromise){this._getGenreNamePromise=$.ajax("/genreNames")}this._getGenreNamePromise.then(function(genreNameMap){deferred.resolve(genreNameMap);return genreNameMap});return deferred.promise()},isEmail:function(email){var emailTrim=(typeof email=="string")?this.trim(email):"";var result=emailTrim.match(/[-!#$%&'*+\/^_~{}|0-9a-zA-Z]+(\.[-!#$%&'*+\/^_~{}|0-9a-zA-Z]+)*@[-!#$%&'*+\/^_~{}|0-9a-zA-Z]+(\.[-!#$%&'*+\/^_~{}|0-9a-zA-Z]+)+/);if(result&&result[0]==emailTrim){return true}else{return false}},isPhoneNumber:function(phoneNumber){return this.isNumberString(phoneNumber,6,15)},isNumberString:function(number,minLength,maxLength){var numberTrim=(typeof number=="string")?this.trim(number):"";if(minLength&&!maxLength){return new RegExp("^\\d{"+minLength+"}$").test(numberTrim)}else{if(minLength&&maxLength){return new RegExp("^\\d{"+minLength+","+maxLength+"}$").test(numberTrim)}else{return/^\d+$/.test(numberTrim)}}},checkAgeGradeNoticeConfirm:function(titleNo,isShowAgeGradeNotice,isFilteredCountry,ageGradeNoticeMsg,filteredCountryNoticeMsg,redirectUrl,isChallenge){var cookieName="agn2";if(isChallenge){cookieName="agnc"}if(isShowAgeGradeNotice){if(isFilteredCountry){alert(filteredCountryNoticeMsg);location.href=redirectUrl}else{var ageGroupNoticeCookie=Cookies.get(cookieName);var isConfirmed=(ageGroupNoticeCookie!=null&&(ageGroupNoticeCookie.split("_").indexOf(""+titleNo)>=0));if(isConfirmed==false){if(confirm(ageGradeNoticeMsg)==false){location.href=redirectUrl}else{ageGroupNoticeCookie=!ageGroupNoticeCookie?(""+titleNo):(ageGroupNoticeCookie+"_"+titleNo);Cookies.set(cookieName,ageGroupNoticeCookie,{expires:1000,domain:location.hostname})}}}}},escape:function(obj,currentDepth,maxDepth){if(maxDepth<currentDepth){return obj}if(!obj){return obj}if(typeof obj==="string"||typeof obj==="number"||typeof obj==="boolean"){return this.escapeString(obj)}else{if($.isArray(obj)){var arr=obj;var length=arr.length;for(var i=0;i<length;i++){arr[i]=this.escape(arr[i],currentDepth+1,maxDepth)}return arr}else{if(typeof obj==="object"){for(var key in obj){if(obj.hasOwnProperty(key)){obj[key]=this.escape(obj[key],currentDepth+1,maxDepth)}}return obj}}}},escapeString:function(str){if(!str||typeof str!="string"){return str}return str.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},replaceEncodedChars:function(str){return str.replace(/&#39;/g,"'").replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},computeFullSize:function(element){var style=element.currentStyle||window.getComputedStyle(element);return{width:element.offsetWidth+parseFloat(style.marginLeft)+parseFloat(style.marginRight)+parseFloat(style.paddingLeft)+parseFloat(style.paddingRight)+parseFloat(style.borderLeftWidth)+parseFloat(style.borderRightWidth),height:element.offsetHeight+parseFloat(style.marginTop)+parseFloat(style.marginBottom)+parseFloat(style.paddingTop)+parseFloat(style.paddingBottom)+parseFloat(style.borderTopWidth)+parseFloat(style.borderBottomWidth)}},getProductName:function(serviceZone){if(serviceZone=="JAPAN"){return"xoy"}else{if(serviceZone=="CHINA"){return"dongman"}}return"linewebtoon"},fitBoxElement:function(el){el.height(window.innerHeight-(el.offset().top+$("footer").outerHeight()))},getDateString:function(oNowDate,sDate,params){var sDateFormat="yyyy-mm-dd HH:MM";var aMonthNames=this.MONTH_NAMES_EN;var htTimeSuffix=this.TIME_SUFFIX_EN;if(params!==undefined){sDateFormat=params.dateFormat||sDateFormat;aMonthNames=params.monthNames||aMonthNames;htTimeSuffix=params.timeSuffixes||htTimeSuffix}for(var i=0;i<aMonthNames.length;i++){dateFormat.i18n[i]=aMonthNames[i]}var oDate=null;if(sDate.length==14){var nYear=parseInt(sDate.substring(0,4));var nMonth=parseInt(sDate.substring(4,6));var nDay=parseInt(sDate.substring(6,8));var nHour=parseInt(sDate.substring(8,10));var nMinute=parseInt(sDate.substring(10,12));var nSecond=parseInt(sDate.substring(12,14));oDate=new Date(nYear,nMonth-1,nDay,nHour,nMinute,nSecond)}else{oDate=new Date(sDate)}if(oNowDate-oDate>7*Date.getMilliSecondsOfDay()){var sFormatedDate=oDate.format(sDateFormat);return sFormatedDate.replace(/K/,aMonthNames[oDate.getMonth()])}else{if(oNowDate-oDate>Date.getMilliSecondsOfDay()){return oDate.dayDiff(oNowDate)+" "+htTimeSuffix.daysAgo}else{if(oNowDate-oDate>Date.getMilliSecondsOfHour()){return oDate.hourDiff(oNowDate)+" "+htTimeSuffix.hoursAgo}else{if(oNowDate-oDate>Date.getMilliSecondsOfMinute()){return oDate.minuteDiff(oNowDate)+" "+htTimeSuffix.minsAgo}else{return htTimeSuffix.justNow}}}}},getAuthorName:function(writeAuthorName,pictureAuthorName){var authorName=writeAuthorName||pictureAuthorName;if(pictureAuthorName&&writeAuthorName!=pictureAuthorName){authorName=authorName+" / "+pictureAuthorName}return authorName},shuffle:function(a){var j,x,i;for(i=a.length;i;i--){j=Math.floor(Math.random()*i);x=a[i-1];a[i-1]=a[j];a[j]=x}return a},getTextNodeValue:function(element){return element.contents().filter(function(){return this.nodeType===3}).first()[0].nodeValue},setTextNodeValue:function(element,text){element.contents().filter(function(){return this.nodeType===3}).first()[0].nodeValue=text},ellipsis:function($el,parentCssSelector){if(!$el.length||!parentCssSelector){return}var parent=$el.parents(parentCssSelector);var nParentHeightLimit=parent.offset().top+parent.height()+9;var sText=$el.text();for(var nOffset=sText.length;nOffset>=0;nOffset--){var nSummaryBottom=$el.offset().top+$el.outerHeight();if(nSummaryBottom>nParentHeightLimit){sCutText=sText.substring(0,nOffset)+"...";$el.text(sCutText)}else{break}}},isIE:function(){var isIE11=navigator.userAgent.indexOf(".NET CLR")>-1;var isIE11orLess=isIE11||navigator.appVersion.indexOf("MSIE")!=-1;return isIE11orLess},stringFormat:function(str,argument1,argument2,argument3){var args=Array.prototype.slice.call(arguments,1);var idx=0;var result=str.replace(/%([ 0])?(-)?([1-9][0-9]*)?([bcdsoxX])/g,function(m0,m1,m2,m3,m4){var a=args[idx++];var ret="",pad="";m3=m3?+m3:0;if(m4=="s"){ret=a+""}else{if(" bcdoxX".indexOf(m4)>0){if(!this.isNumeric(a)){return""}ret=(m4=="c")?String.fromCharCode(a):a.toString(({b:2,d:10,o:8,x:16,X:16})[m4]);if(" X".indexOf(m4)>0){ret=ret.toUpperCase()}}}if(ret.length<m3){pad=this.repeatString(m1||" ",(m3-ret.length))}(m2=="-")?(ret+=pad):(ret=pad+ret);return ret});return result},isNumeric:function(num){return !isNaN(parseFloat(num))&&this.isArray(num)&&isFinite(num)},isArray:function(){var isArray=Array.isArray||function(value){return value&&typeof value==="object"?toString.call(value)==="[object Array]":false};return isArray(arguments)},repeatString:function(str,times){if(String.prototype.repeat){return str.repeat(times)}var result="";for(var i=0;i<times;i++){result+=str}return result},isIE:function(){if(typeof this._isIE==="undefined"){this._isIE=eg.agent().browser.name==="ie"}return this._isIE},getDocSizeElement:function(){if(!this._docSizeElement){var browserInfo=eg.agent().browser;var isIe=this.isIE();var isSafari=browserInfo.name==="safari";var renderingMode;var doc=document;if("compatMode" in doc){renderingMode=doc.compatMode=="CSS1Compat"?"Standards":(isIe?"Quirks":"Almost")}else{renderingMode=isSafari?"Standards":"Quirks"}this._docSizeElement=renderingMode=="Standards"?document.documentElement:document.body}return this._docSizeElement},getClientSize:function(){var browserInfo=eg.agent().browser;var isSafari=browserInfo.name==="safari";var docSizeElement=this.getDocSizeElement();return(isSafari)?{width:window.innerWidth,height:window.innerHeight}:{width:docSizeElement.clientWidth,height:docSizeElement.clientHeight}},throttle:function(fn,wait){var time=Date.now();return function(e){if((time+wait-Date.now())<0){fn(e);time=Date.now()}}}};(function(){var Handlebars=window.Handlebars||null;if(Handlebars){Handlebars.registerHelper("isEqual",function(a,b){return a==b});Handlebars.registerHelper("isNotEqual",function(a,b){return a!==b});Handlebars.registerHelper("toLowerCase",function(languageCode){return languageCode.toLowerCase()});Handlebars.registerHelper("biggerThan",function(a,b){return a>b});Handlebars.registerHelper("changeLikeitCountFormat",function(likeitCount,likeitSmallMessage,languageCode){return Util.changeLikeitCountFormat(likeitCount,likeitSmallMessage,languageCode)});Handlebars.registerHelper("unescapeHTML",function(title){return title.replace(/&#39;/g,"'").replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")})}})();var dateFormat=function(){var token=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,timezoneClip=/[^-+\dA-Z]/g,pad=function(val,len){val=String(val);len=len||2;while(val.length<len){val="0"+val}return val};return function(date,mask,utc){var dF=dateFormat;if(arguments.length==1&&Object.prototype.toString.call(date)=="[object String]"&&!/\d/.test(date)){mask=date;date=undefined}date=date?new Date(date):new Date;if(isNaN(date)){throw SyntaxError("invalid date")}mask=String(dF.masks[mask]||mask||dF.masks["default"]);if(mask.slice(0,4)=="UTC:"){mask=mask.slice(4);utc=true}var _=utc?"getUTC":"get",d=date[_+"Date"](),D=date[_+"Day"](),m=date[_+"Month"](),y=date[_+"FullYear"](),H=date[_+"Hours"](),M=date[_+"Minutes"](),s=date[_+"Seconds"](),L=date[_+"Milliseconds"](),o=utc?0:date.getTimezoneOffset(),flags={d:d,dd:pad(d),ddd:dF.i18n.dayNames[D],dddd:dF.i18n.dayNames[D+7],m:m+1,mm:pad(m+1),mmm:dF.i18n.monthNames[m],mmmm:dF.i18n.monthNames[m+12],yy:String(y).slice(2),yyyy:y,h:H%12||12,hh:pad(H%12||12),H:H,HH:pad(H),M:M,MM:pad(M),s:s,ss:pad(s),l:pad(L,3),L:pad(L>99?Math.round(L/10):L),t:H<12?"a":"p",tt:H<12?"am":"pm",T:H<12?"A":"P",TT:H<12?"AM":"PM",Z:utc?"UTC":(String(date).match(timezone)||[""]).pop().replace(timezoneClip,""),o:(o>0?"-":"+")+pad(Math.floor(Math.abs(o)/60)*100+Math.abs(o)%60,4),S:["th","st","nd","rd"][d%10>3?0:(d%100-d%10!=10)*d%10]};return mask.replace(token,function($0){return $0 in flags?flags[$0]:$0.slice(1,$0.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};Date.prototype.format=function(mask,utc){return dateFormat(this,mask,utc)};function treatAsUTC(date){var result=new Date(date);result.setMinutes(result.getMinutes()-result.getTimezoneOffset());return result}Date.getMilliSecondsOfDay=function(){return Date.getMilliSecondsOfHour()*24};Date.getMilliSecondsOfHour=function(){return Date.getMilliSecondsOfMinute()*60};Date.getMilliSecondsOfMinute=function(){return 60*1000};Date.prototype.dayDiff=function(endDate){var millisecondsPerDay=24*60*60*1000;return Math.floor((treatAsUTC(endDate)-treatAsUTC(this))/millisecondsPerDay)};Date.prototype.hourDiff=function(endDate){var millisecondsPerHour=60*60*1000;return Math.floor((treatAsUTC(endDate)-treatAsUTC(this))/millisecondsPerHour)};Date.prototype.minuteDiff=function(endDate){var millisecondsPerMinute=60*1000;return Math.floor((treatAsUTC(endDate)-treatAsUTC(this))/millisecondsPerMinute)};
var Timer=eg.Class.extend(eg.Component,{construct:function(){this._timerId=null;this._lastRunTime=null;this._remainedTime=0;this._delay=null;this._timerHandler=null;this._isRunning=false},start:function(timerHandler,delay){this.abort();this._remainedTime=0;this._delay=delay;this._timerHandler=timerHandler;this._isRunning=true;this._lastRunTime=this._getTime();this.trigger("wait");this._excute(this._delay,false);return true},isRunning:function(){return this._isRunning},_getTime:function(){return new Date().getTime()},_clearTimer:function(){var isAborted=false;if(this._timerId){clearInterval(this._timerId);this._isRunning=false;isAborted=true}this._timerId=null;return isAborted},abort:function(){var isAborted=this._clearTimer();if(isAborted){this.trigger("abort");this._timerHandler=null}return isAborted},pause:function(){var passedTime=this._getTime()-this._lastRunTime;this._remainedTime=Math.max(this._delay-passedTime,0);return this._clearTimer()},_excute:function(delay,hasResetDelay){this._clearTimer();this._isRunning=true;var launcher=$.proxy(function(isDontUseTimer){if(this._timerId||isDontUseTimer){this.trigger("run");var r=this._timerHandler();this._lastRunTime=this._getTime();if(!r){if(!isDontUseTimer){clearInterval(this._timerId)}this._timerId=null;this._isRunning=false;this.trigger("end");return}this.trigger("wait");if(hasResetDelay||isDontUseTimer){this._excute(this._delay,false)}}},this);if(delay>-1){this._timerId=setInterval(launcher,delay)}else{launcher(true)}},resume:function(){if(!this._timerHandler||this.isRunning()){return false}this._isRunning=true;this.trigger("wait");this._excute(this._remainedTime,true);this._remainedTime=0;return true}});
var WatchInput=eg.Class.extend(eg.Component,{_isTimerRunning:false,_isFocused:false,_prevValue:"",construct:function(inputId,option){var defaultOption={interval:100,isUseTimerOnIE:false,keyEventName:"keyup",isPermanent:false,isActivateOnload:true};this.option(defaultOption);this.option(option||{});this._inputElement=$(inputId)[0];this._timer=new Timer();this._isIE=eg.agent().browser.name==="ie";this._wfFocus=$.proxy(this._onFocus,this);this._wfBlur=$.proxy(this._onBlur,this);this._wfKeyEvent=$.proxy(this._onKeyEvent,this);this._wfStartTimer=$.proxy(this._startTimer,this);this._wfStopTimer=$.proxy(this._stopTimer,this);if(this.option("isActivateOnload")){this._onActivate(true)}},getInput:function(){return this._inputElement},setInputValue:function(s){this.getInput().value=s;this.setCompareValue(s);return this},getCompareValue:function(){return this._prevValue},setCompareValue:function(s){this._prevValue=s;return this},fireChangeEvent:function(){var inputElement=this.getInput(),value=inputElement.value;this.setCompareValue(value);this.trigger("change",{inputElement:inputElement,text:value});return this},start:function(isCompareOnce){return this.activate(isCompareOnce||false)},stop:function(){return this.deactivate()},_onActivate:function(isCompareOnce){this.setCompareValue("");var inputElement=$(this.getInput());inputElement.on("focus",this._wfFocus);if(this._isIE&&!this.option("isUseTimerOnIE")){this.trigger("start");inputElement.on(this.option("keyEventName"),this._wfKeyEvent)}else{if(this._isTimerRunning){return}this.trigger("start");if(this.option("isPermanent")){this._startTimer()}else{inputElement.on("focus",this._wfStartTimer);inputElement.on("blur",this._wfStopTimer)}}inputElement.on("blur",this._wfBlur);if(isCompareOnce||false){this.compare()}},_onDeactivate:function(){var inputElement=this.getInput();inputElement.off("focus",this._wfFocus);inputElement.off(this.option("keyEventName"),this._wfKeyEvent);this._stopTimer();inputElement.off("focus",this._wfStartTimer);inputElement.off("blur",this._wfStopTimer);inputElement.off("blur",this._wfBlur);this.trigger("stop")},getInterval:function(){return this.option("interval")},setInterval:function(n){this.option("interval",n);return this},_startTimer:function(){if(this._isTimerRunning){return}this._isTimerRunning=true;this.trigger("timerStart");this.compare();var self=this;this._timer.start(function(){self.compare();return true},this.getInterval())},_stopTimer:function(){if(this._isTimerRunning){this._timer.abort();this._isTimerRunning=false;this.compare();this.trigger("timerStop")}},_onKeyEvent:function(){this.compare()},_onFocus:function(){this._isFocused=true;this.trigger("focus")},_onBlur:function(){this._isFocused=false;this.trigger("blur")},compare:function(){if(this.getInput().value!=this.getCompareValue()){this.fireChangeEvent()}return this}});
var LayerManager=eg.Class.extend(eg.Component,{_isActivating:false,_isHiding:false,_isShowing:false,_linkList:null,construct:function(el,option){this._option={checkEventName:"click",checkDelay:100,showDelay:0,hideDelay:100};this._eventHandlerMap={};$.extend(this._option,option);this.setLayer(el);this._linkList=[];this._showTimer=new Timer();this._hideTimer=new Timer();this._eventTimer=new Timer();this.getVisible();$(document).on(this._option.checkEventName,$.proxy(this._onEvent,this))},getVisible:function(){return this._wel.is(":visible")},_check:function(el){for(var i=0,elLink,welLink;(elLink=this._linkList[i]);i++){welLink=$(elLink);if(welLink.length){elLink=welLink[0];if(elLink&&el&&(el==elLink||$.contains(elLink,el))){return true}}}return false},_find:function(el){var wel=$(el);if(wel.length){el=wel[0];for(var i=0,elLink;(elLink=this._linkList[i]);i++){if(elLink==el){return i}}}return -1},getLayer:function(){return this._el},setLayer:function(el){this._wel=$(el);this._el=this._wel[0];return this},getLinks:function(){return this._linkList},link:function(element){if(arguments.length>1){for(var i=0,len=arguments.length;i<len;i++){this.link(arguments[i])}return this}if(this._find(element)!=-1){return this}this._linkList.push(element);return this},_triggerBeforeShow:function(){return this.trigger("beforeShow",{layer:this.getLayer(),linkedElementList:this.getLinks()})},_triggerShow:function(){this._isShowing=false;this.trigger("show",{layer:this.getLayer(),linkedElementList:this.getLinks()})},_triggerBeforeHide:function(){var result=this.trigger("beforeHide",{layer:this.getLayer(),linkedElementList:this.getLinks()});if(!result){this._isHiding=false}return result},_triggerHide:function(){this._isHiding=false;this.trigger("hide",{layer:this.getLayer(),linkedElementList:this.getLinks()})},_show:function(showHandler,delay){this._eventTimer.abort();this._isShowing=true;this._isHiding=false;if(delay<=0){this._hideTimer.abort()}this._showTimer.start(function(){showHandler()},delay)},_hide:function(hideHandler,delay){this._isShowing=false;this._isHiding=true;if(delay<=0){this._showTimer.abort()}this._hideTimer.start(function(){hideHandler()},delay)},show:function(delay){if(typeof delay=="undefined"){delay=this._option.showDelay}this._show($.proxy(function(){if(!this.getVisible()){if(this._triggerBeforeShow()){this._wel.show();this._triggerShow()}}},this),delay);return this},hide:function(delay){if(typeof delay=="undefined"){delay=this._option.hideDelay}this._hide($.proxy(function(){if(this.getVisible()){if(this._triggerBeforeHide()){this._wel.hide();this._triggerHide()}}},this),delay);return this},toggle:function(delay){if(!this.getVisible()||this._isHiding){this.show(delay||this._option.showDelay)}else{this.hide(delay||this._option.hideDelay)}return this},_onEvent:function(event){var el=event.target;this._eventTimer.start($.proxy(function(){if(!this._isHiding&&this.getVisible()){if(this._check(el)){if(!this._isShowing){this.trigger("ignore",{checkEventName:this._option.checkEventName});this._hideTimer.abort();this._isHiding=false}}else{if(typeof el.tagName!=="undefined"&&el.tagName!=="OPTION"){this.hide()}}}},this),this._option.checkDelay)},});
